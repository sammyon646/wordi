"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});let r;function S(n,c){r?r.set(n,c):c()}function m(n){if(r)return n();r=new Map;try{n()}finally{r.forEach(c=>c()),r=void 0}}function h(n,c){c||(c={});const g=c.equals||Object.is;let u=[],s=n;const i=t=>{if(!g(s,t)){const l=s;s=t,S(o,()=>{[...u].forEach(([f,d])=>{f(t,l),d&&e(f,!0)})})}};function a(t){const l=typeof t!="object"?{once:t}:t;return{once:l.once||!1,signal:l.signal||!1}}const e=(t,l)=>{const f=a(l),d=u.findIndex(([y,p])=>y===t&&p.once===f.once&&p.signal===f.signal);d>=0&&u.splice(d,1)},o=Object.assign(function(){return j(o),s},{destroy(){u=[]},set:i,reset(){i(n)},sub(t,l){return u.push([t,a(l)]),()=>e(t,l)},unsub:e,unsubAll(){u=u.filter(t=>t[1].signal)}});return o}const b=[];function j(n){b.length&&b[b.length-1].add(n)}function E(n,c){let g=new Set,u;function s(){return u||(u=h(a(),c))}function i(){s().set(a())}function a(){g.forEach(t=>{t.unsub(i,{signal:!0})});const e=new Set;let o;b.push(e);try{o=n()}finally{b.pop()}return e.forEach(t=>{t.sub(i,{signal:!0})}),g=e,o}return Object.assign(function(){return s()()},{destroy(){s().destroy()},sub(...e){return s().sub(...e)},unsub(...e){s().unsub(...e)},unsubAll(...e){s().unsubAll(...e)}})}exports.batch=m;exports.computed=E;exports.signal=h;
//# sourceMappingURL=index.cjs.map
