{"version":3,"file":"index.iife.js","sources":["../../signals/dist/index.js","../../../node_modules/.pnpm/fp-ts@2.16.11/node_modules/fp-ts/es6/function.js","../../../node_modules/.pnpm/fp-ts@2.16.11/node_modules/fp-ts/es6/internal.js","../../../node_modules/.pnpm/fp-ts@2.16.11/node_modules/fp-ts/es6/Apply.js","../../../node_modules/.pnpm/fp-ts@2.16.11/node_modules/fp-ts/es6/Functor.js","../../../node_modules/.pnpm/fp-ts@2.16.11/node_modules/fp-ts/es6/Chain.js","../../../node_modules/.pnpm/fp-ts@2.16.11/node_modules/fp-ts/es6/Either.js","../src/helpers/access.ts","../src/composables/Mountable.ts","../src/helpers/removeUndefined.ts","../src/helpers/shallowEqual.ts","../src/composables/Stateful.ts","../../../node_modules/.pnpm/valibot@1.1.0_typescript@5.9.2/node_modules/valibot/dist/index.js","../../../node_modules/.pnpm/better-promises@1.0.0/node_modules/better-promises/dist/index.js","../../toolkit/dist/index.js","../../../node_modules/.pnpm/error-kid@1.0.2/node_modules/error-kid/dist/index.js","../../transformers/dist/index.js","../../../node_modules/.pnpm/mitt@3.0.1/node_modules/mitt/dist/mitt.mjs","../../bridge/dist/index.js","../src/helpers/createIsSupportedSignal.ts","../../../node_modules/.pnpm/fp-ts@2.16.11/node_modules/fp-ts/es6/Option.js","../src/with-checks/throwifyWithChecksFp.ts","../../../node_modules/.pnpm/fp-ts@2.16.11/node_modules/fp-ts/es6/EitherT.js","../../../node_modules/.pnpm/fp-ts@2.16.11/node_modules/fp-ts/es6/Task.js","../../../node_modules/.pnpm/fp-ts@2.16.11/node_modules/fp-ts/es6/TaskEither.js","../src/errors.ts","../src/with-checks/withChecksFp.ts","../src/composables/Button.ts","../src/features/BackButton/BackButton.ts","../src/fn-options/sharedFeatureOptions.ts","../src/fn-options/createFnOption.ts","../src/globals/signals-registry.ts","../src/globals/postEvent.ts","../src/fn-options/withPostEvent.ts","../src/helpers/component-storage.ts","../src/helpers/navigation.ts","../src/fn-options/withStateRestore.ts","../src/globals/version.ts","../src/fn-options/withVersion.ts","../src/fn-options/buttonOptions.ts","../src/features/BackButton/instance.ts","../src/composables/AsyncMountable.ts","../src/features/Biometry/Biometry.ts","../src/globals/request.ts","../src/fn-options/withRequest.ts","../src/features/Biometry/instance.ts","../src/features/ClosingBehavior/ClosingBehavior.ts","../src/features/ClosingBehavior/instance.ts","../src/features/CloudStorage/CloudStorage.ts","../src/globals/createRequestId.ts","../src/globals/invokeCustomMethod.ts","../src/fn-options/withInvokeCustomMethod.ts","../src/features/CloudStorage/instance.ts","../src/features/DeviceStorage/DeviceStorage.ts","../src/fn-options/withCreateRequestId.ts","../src/features/DeviceStorage/instance.ts","../src/features/emoji-status/requestEmojiStatusAccess.ts","../src/features/emoji-status/setEmojiStatus.ts","../src/features/HapticFeedback/HapticFeedback.ts","../src/features/HapticFeedback/instance.ts","../src/features/home-screen/addToHomeScreen.ts","../src/features/home-screen/checkHomeScreenStatus.ts","../src/features/InitData/InitData.ts","../src/features/InitData/instance.ts","../src/features/Invoice/Invoice.ts","../src/features/Invoice/instance.ts","../src/features/links/openLink.ts","../src/features/links/openTelegramLink.ts","../src/features/links/shareURL.ts","../src/features/LocationManager/LocationManager.ts","../src/features/LocationManager/instance.ts","../src/features/MainButton/MainButton.ts","../src/helpers/css-vars.ts","../src/helpers/isColorDark.ts","../src/features/ThemeParams/ThemeParams.ts","../src/globals/themeParams.ts","../src/features/ThemeParams/instance.ts","../src/fn-options/bottomButtonOptions.ts","../src/features/MainButton/instance.ts","../src/features/MiniApp/MiniApp.ts","../src/features/MiniApp/instance.ts","../src/features/Popup/prepareParams.ts","../src/features/Popup/Popup.ts","../src/features/Popup/instance.ts","../src/features/privacy/requestPhoneAccess.ts","../src/features/privacy/requestContact.ts","../src/features/privacy/requestWriteAccess.ts","../src/features/QrScanner/QrScanner.ts","../src/features/QrScanner/instance.ts","../src/features/SecondaryButton/SecondaryButton.ts","../src/features/SecondaryButton/instance.ts","../src/features/SecureStorage/SecureStorage.ts","../src/features/SecureStorage/instance.ts","../src/features/SettingsButton/SettingsButton.ts","../src/features/SettingsButton/instance.ts","../src/features/SwipeBehavior/SwipeBehavior.ts","../src/features/SwipeBehavior/instance.ts","../src/features/uncategorized/copyTextToClipboard.ts","../src/features/uncategorized/downloadFile.ts","../src/features/uncategorized/getCurrentTime.ts","../src/features/uncategorized/hideKeyboard.ts","../src/features/uncategorized/readTextFromClipboard.ts","../src/features/uncategorized/retrieveAndroidDeviceDataFrom.ts","../src/features/uncategorized/retrieveAndroidDeviceData.ts","../src/features/uncategorized/sendData.ts","../src/features/uncategorized/shareMessage.ts","../src/features/uncategorized/shareStory.ts","../src/globals/isInlineMode.ts","../src/features/uncategorized/switchInlineQuery.ts","../src/features/Viewport/Viewport.ts","../src/features/Viewport/instance.ts","../src/init.ts"],"sourcesContent":["let r;\nfunction y(e, c) {\n  r ? r.set(e, c) : c();\n}\nfunction m(e) {\n  if (r)\n    return e();\n  r = /* @__PURE__ */ new Map();\n  try {\n    e();\n  } finally {\n    r.forEach((c) => c()), r = void 0;\n  }\n}\n// @__NO_SIDE_EFFECTS__\nfunction S(e, c) {\n  c || (c = {});\n  const g = c.equals || Object.is;\n  let u = [], s = e;\n  const i = (t) => {\n    if (!g(s, t)) {\n      const l = s;\n      s = t, y(o, () => {\n        [...u].forEach(([f, d]) => {\n          f(t, l), d && n(f, !0);\n        });\n      });\n    }\n  };\n  function a(t) {\n    const l = typeof t != \"object\" ? { once: t } : t;\n    return {\n      once: l.once || !1,\n      signal: l.signal || !1\n    };\n  }\n  const n = (t, l) => {\n    const f = a(l), d = u.findIndex(([h, p]) => h === t && p.once === f.once && p.signal === f.signal);\n    d >= 0 && u.splice(d, 1);\n  }, o = Object.assign(\n    function() {\n      return j(o), s;\n    },\n    {\n      destroy() {\n        u = [];\n      },\n      set: i,\n      reset() {\n        i(e);\n      },\n      sub(t, l) {\n        return u.push([t, a(l)]), () => n(t, l);\n      },\n      unsub: n,\n      unsubAll() {\n        u = u.filter((t) => t[1].signal);\n      }\n    }\n  );\n  return o;\n}\nconst b = [];\nfunction j(e) {\n  b.length && b[b.length - 1].add(e);\n}\n// @__NO_SIDE_EFFECTS__\nfunction x(e, c) {\n  let g = /* @__PURE__ */ new Set(), u;\n  function s() {\n    return u || (u = /* @__PURE__ */ S(a(), c));\n  }\n  function i() {\n    s().set(a());\n  }\n  function a() {\n    g.forEach((t) => {\n      t.unsub(i, { signal: !0 });\n    });\n    const n = /* @__PURE__ */ new Set();\n    let o;\n    b.push(n);\n    try {\n      o = e();\n    } finally {\n      b.pop();\n    }\n    return n.forEach((t) => {\n      t.sub(i, { signal: !0 });\n    }), g = n, o;\n  }\n  return Object.assign(function() {\n    return s()();\n  }, {\n    destroy() {\n      s().destroy();\n    },\n    sub(...n) {\n      return s().sub(...n);\n    },\n    unsub(...n) {\n      s().unsub(...n);\n    },\n    unsubAll(...n) {\n      s().unsubAll(...n);\n    }\n  });\n}\nexport {\n  m as batch,\n  x as computed,\n  S as signal\n};\n//# sourceMappingURL=index.js.map\n","var __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\n// -------------------------------------------------------------------------------------\n// instances\n// -------------------------------------------------------------------------------------\n/**\n * @category instances\n * @since 2.10.0\n */\nexport var getBooleanAlgebra = function (B) {\n    return function () { return ({\n        meet: function (x, y) { return function (a) { return B.meet(x(a), y(a)); }; },\n        join: function (x, y) { return function (a) { return B.join(x(a), y(a)); }; },\n        zero: function () { return B.zero; },\n        one: function () { return B.one; },\n        implies: function (x, y) { return function (a) { return B.implies(x(a), y(a)); }; },\n        not: function (x) { return function (a) { return B.not(x(a)); }; }\n    }); };\n};\n/**\n * Unary functions form a semigroup as long as you can provide a semigroup for the codomain.\n *\n * @example\n * import { Predicate, getSemigroup } from 'fp-ts/function'\n * import * as B from 'fp-ts/boolean'\n *\n * const f: Predicate<number> = (n) => n <= 2\n * const g: Predicate<number> = (n) => n >= 0\n *\n * const S1 = getSemigroup(B.SemigroupAll)<number>()\n *\n * assert.deepStrictEqual(S1.concat(f, g)(1), true)\n * assert.deepStrictEqual(S1.concat(f, g)(3), false)\n *\n * const S2 = getSemigroup(B.SemigroupAny)<number>()\n *\n * assert.deepStrictEqual(S2.concat(f, g)(1), true)\n * assert.deepStrictEqual(S2.concat(f, g)(3), true)\n *\n * @category instances\n * @since 2.10.0\n */\nexport var getSemigroup = function (S) {\n    return function () { return ({\n        concat: function (f, g) { return function (a) { return S.concat(f(a), g(a)); }; }\n    }); };\n};\n/**\n * Unary functions form a monoid as long as you can provide a monoid for the codomain.\n *\n * @example\n * import { Predicate } from 'fp-ts/Predicate'\n * import { getMonoid } from 'fp-ts/function'\n * import * as B from 'fp-ts/boolean'\n *\n * const f: Predicate<number> = (n) => n <= 2\n * const g: Predicate<number> = (n) => n >= 0\n *\n * const M1 = getMonoid(B.MonoidAll)<number>()\n *\n * assert.deepStrictEqual(M1.concat(f, g)(1), true)\n * assert.deepStrictEqual(M1.concat(f, g)(3), false)\n *\n * const M2 = getMonoid(B.MonoidAny)<number>()\n *\n * assert.deepStrictEqual(M2.concat(f, g)(1), true)\n * assert.deepStrictEqual(M2.concat(f, g)(3), true)\n *\n * @category instances\n * @since 2.10.0\n */\nexport var getMonoid = function (M) {\n    var getSemigroupM = getSemigroup(M);\n    return function () { return ({\n        concat: getSemigroupM().concat,\n        empty: function () { return M.empty; }\n    }); };\n};\n/**\n * @category instances\n * @since 2.10.0\n */\nexport var getSemiring = function (S) { return ({\n    add: function (f, g) { return function (x) { return S.add(f(x), g(x)); }; },\n    zero: function () { return S.zero; },\n    mul: function (f, g) { return function (x) { return S.mul(f(x), g(x)); }; },\n    one: function () { return S.one; }\n}); };\n/**\n * @category instances\n * @since 2.10.0\n */\nexport var getRing = function (R) {\n    var S = getSemiring(R);\n    return {\n        add: S.add,\n        mul: S.mul,\n        one: S.one,\n        zero: S.zero,\n        sub: function (f, g) { return function (x) { return R.sub(f(x), g(x)); }; }\n    };\n};\n// -------------------------------------------------------------------------------------\n// utils\n// -------------------------------------------------------------------------------------\n/**\n * @since 2.11.0\n */\nexport var apply = function (a) {\n    return function (f) {\n        return f(a);\n    };\n};\n/**\n * @since 2.0.0\n */\nexport function identity(a) {\n    return a;\n}\n/**\n * @since 2.0.0\n */\nexport var unsafeCoerce = identity;\n/**\n * @since 2.0.0\n */\nexport function constant(a) {\n    return function () { return a; };\n}\n/**\n * A thunk that returns always `true`.\n *\n * @since 2.0.0\n */\nexport var constTrue = /*#__PURE__*/ constant(true);\n/**\n * A thunk that returns always `false`.\n *\n * @since 2.0.0\n */\nexport var constFalse = /*#__PURE__*/ constant(false);\n/**\n * A thunk that returns always `null`.\n *\n * @since 2.0.0\n */\nexport var constNull = /*#__PURE__*/ constant(null);\n/**\n * A thunk that returns always `undefined`.\n *\n * @since 2.0.0\n */\nexport var constUndefined = /*#__PURE__*/ constant(undefined);\n/**\n * A thunk that returns always `void`.\n *\n * @since 2.0.0\n */\nexport var constVoid = constUndefined;\nexport function flip(f) {\n    return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        if (args.length > 1) {\n            return f(args[1], args[0]);\n        }\n        return function (a) { return f(a)(args[0]); };\n    };\n}\nexport function flow(ab, bc, cd, de, ef, fg, gh, hi, ij) {\n    switch (arguments.length) {\n        case 1:\n            return ab;\n        case 2:\n            return function () {\n                return bc(ab.apply(this, arguments));\n            };\n        case 3:\n            return function () {\n                return cd(bc(ab.apply(this, arguments)));\n            };\n        case 4:\n            return function () {\n                return de(cd(bc(ab.apply(this, arguments))));\n            };\n        case 5:\n            return function () {\n                return ef(de(cd(bc(ab.apply(this, arguments)))));\n            };\n        case 6:\n            return function () {\n                return fg(ef(de(cd(bc(ab.apply(this, arguments))))));\n            };\n        case 7:\n            return function () {\n                return gh(fg(ef(de(cd(bc(ab.apply(this, arguments)))))));\n            };\n        case 8:\n            return function () {\n                return hi(gh(fg(ef(de(cd(bc(ab.apply(this, arguments))))))));\n            };\n        case 9:\n            return function () {\n                return ij(hi(gh(fg(ef(de(cd(bc(ab.apply(this, arguments)))))))));\n            };\n    }\n    return;\n}\n/**\n * @since 2.0.0\n */\nexport function tuple() {\n    var t = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        t[_i] = arguments[_i];\n    }\n    return t;\n}\n/**\n * @since 2.0.0\n */\nexport function increment(n) {\n    return n + 1;\n}\n/**\n * @since 2.0.0\n */\nexport function decrement(n) {\n    return n - 1;\n}\n/**\n * @since 2.0.0\n */\nexport function absurd(_) {\n    throw new Error('Called `absurd` function which should be uncallable');\n}\n/**\n * Creates a tupled version of this function: instead of `n` arguments, it accepts a single tuple argument.\n *\n * @example\n * import { tupled } from 'fp-ts/function'\n *\n * const add = tupled((x: number, y: number): number => x + y)\n *\n * assert.strictEqual(add([1, 2]), 3)\n *\n * @since 2.4.0\n */\nexport function tupled(f) {\n    return function (a) { return f.apply(void 0, a); };\n}\n/**\n * Inverse function of `tupled`\n *\n * @since 2.4.0\n */\nexport function untupled(f) {\n    return function () {\n        var a = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            a[_i] = arguments[_i];\n        }\n        return f(a);\n    };\n}\nexport function pipe(a, ab, bc, cd, de, ef, fg, gh, hi) {\n    switch (arguments.length) {\n        case 1:\n            return a;\n        case 2:\n            return ab(a);\n        case 3:\n            return bc(ab(a));\n        case 4:\n            return cd(bc(ab(a)));\n        case 5:\n            return de(cd(bc(ab(a))));\n        case 6:\n            return ef(de(cd(bc(ab(a)))));\n        case 7:\n            return fg(ef(de(cd(bc(ab(a))))));\n        case 8:\n            return gh(fg(ef(de(cd(bc(ab(a)))))));\n        case 9:\n            return hi(gh(fg(ef(de(cd(bc(ab(a))))))));\n        default: {\n            var ret = arguments[0];\n            for (var i = 1; i < arguments.length; i++) {\n                ret = arguments[i](ret);\n            }\n            return ret;\n        }\n    }\n}\n/**\n * Type hole simulation\n *\n * @since 2.7.0\n */\nexport var hole = absurd;\n/**\n * @since 2.11.0\n */\nexport var SK = function (_, b) { return b; };\n/**\n * Use `Predicate` module instead.\n *\n * @category zone of death\n * @since 2.0.0\n * @deprecated\n */\nexport function not(predicate) {\n    return function (a) { return !predicate(a); };\n}\n/**\n * Use `Endomorphism` module instead.\n *\n * @category zone of death\n * @since 2.10.0\n * @deprecated\n */\nexport var getEndomorphismMonoid = function () { return ({\n    concat: function (first, second) { return flow(first, second); },\n    empty: identity\n}); };\n/** @internal */\nexport var dual = function (arity, body) {\n    var isDataFirst = typeof arity === 'number' ? function (args) { return args.length >= arity; } : arity;\n    return function () {\n        var args = Array.from(arguments);\n        if (isDataFirst(arguments)) {\n            return body.apply(this, args);\n        }\n        return function (self) { return body.apply(void 0, __spreadArray([self], args, false)); };\n    };\n};\n","var __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nimport { dual } from './function';\n// -------------------------------------------------------------------------------------\n// Option\n// -------------------------------------------------------------------------------------\n/** @internal */\nexport var isNone = function (fa) { return fa._tag === 'None'; };\n/** @internal */\nexport var isSome = function (fa) { return fa._tag === 'Some'; };\n/** @internal */\nexport var none = { _tag: 'None' };\n/** @internal */\nexport var some = function (a) { return ({ _tag: 'Some', value: a }); };\n// -------------------------------------------------------------------------------------\n// Either\n// -------------------------------------------------------------------------------------\n/** @internal */\nexport var isLeft = function (ma) { return ma._tag === 'Left'; };\n/** @internal */\nexport var isRight = function (ma) { return ma._tag === 'Right'; };\n/** @internal */\nexport var left = function (e) { return ({ _tag: 'Left', left: e }); };\n/** @internal */\nexport var right = function (a) { return ({ _tag: 'Right', right: a }); };\n// -------------------------------------------------------------------------------------\n// ReadonlyNonEmptyArray\n// -------------------------------------------------------------------------------------\n/** @internal */\nexport var singleton = function (a) { return [a]; };\n/** @internal */\nexport var isNonEmpty = function (as) { return as.length > 0; };\n/** @internal */\nexport var head = function (as) { return as[0]; };\n/** @internal */\nexport var tail = function (as) { return as.slice(1); };\n// -------------------------------------------------------------------------------------\n// empty\n// -------------------------------------------------------------------------------------\n/** @internal */\nexport var emptyReadonlyArray = [];\n/** @internal */\nexport var emptyRecord = {};\n// -------------------------------------------------------------------------------------\n// Record\n// -------------------------------------------------------------------------------------\n/** @internal */\nexport var has = Object.prototype.hasOwnProperty;\n// -------------------------------------------------------------------------------------\n// NonEmptyArray\n// -------------------------------------------------------------------------------------\n/** @internal */\nexport var fromReadonlyNonEmptyArray = function (as) { return __spreadArray([as[0]], as.slice(1), true); };\n/** @internal */\nexport var liftNullable = function (F) {\n    return function (f, onNullable) {\n        return function () {\n            var a = [];\n            for (var _i = 0; _i < arguments.length; _i++) {\n                a[_i] = arguments[_i];\n            }\n            var o = f.apply(void 0, a);\n            return F.fromEither(o == null ? left(onNullable.apply(void 0, a)) : right(o));\n        };\n    };\n};\n/** @internal */\nexport var liftOption = function (F) {\n    return function (f, onNone) {\n        return function () {\n            var a = [];\n            for (var _i = 0; _i < arguments.length; _i++) {\n                a[_i] = arguments[_i];\n            }\n            var o = f.apply(void 0, a);\n            return F.fromEither(isNone(o) ? left(onNone.apply(void 0, a)) : right(o.value));\n        };\n    };\n};\n/** @internal */\nexport var flatMapNullable = function (F, M) {\n    return /*#__PURE__*/ dual(3, function (self, f, onNullable) {\n        return M.flatMap(self, liftNullable(F)(f, onNullable));\n    });\n};\n/** @internal */\nexport var flatMapOption = function (F, M) {\n    return /*#__PURE__*/ dual(3, function (self, f, onNone) { return M.flatMap(self, liftOption(F)(f, onNone)); });\n};\n/** @internal */\nexport var flatMapEither = function (F, M) {\n    return /*#__PURE__*/ dual(2, function (self, f) {\n        return M.flatMap(self, function (a) { return F.fromEither(f(a)); });\n    });\n};\n/** @internal */\nexport var flatMapIO = function (F, M) {\n    return /*#__PURE__*/ dual(2, function (self, f) {\n        return M.flatMap(self, function (a) { return F.fromIO(f(a)); });\n    });\n};\n/** @internal */\nexport var flatMapTask = function (F, M) {\n    return /*#__PURE__*/ dual(2, function (self, f) {\n        return M.flatMap(self, function (a) { return F.fromTask(f(a)); });\n    });\n};\n/** @internal */\nexport var flatMapReader = function (F, M) {\n    return /*#__PURE__*/ dual(2, function (self, f) {\n        return M.flatMap(self, function (a) { return F.fromReader(f(a)); });\n    });\n};\n","/**\n * The `Apply` class provides the `ap` which is used to apply a function to an argument under a type constructor.\n *\n * `Apply` can be used to lift functions of two or more arguments to work on values wrapped with the type constructor\n * `f`.\n *\n * Instances must satisfy the following law in addition to the `Functor` laws:\n *\n * 1. Associative composition: `F.ap(F.ap(F.map(fbc, bc => ab => a => bc(ab(a))), fab), fa) <-> F.ap(fbc, F.ap(fab, fa))`\n *\n * Formally, `Apply` represents a strong lax semi-monoidal endofunctor.\n *\n * @example\n * import * as O from 'fp-ts/Option'\n * import { pipe } from 'fp-ts/function'\n *\n * const f = (a: string) => (b: number) => (c: boolean) => a + String(b) + String(c)\n * const fa: O.Option<string> = O.some('s')\n * const fb: O.Option<number> = O.some(1)\n * const fc: O.Option<boolean> = O.some(true)\n *\n * assert.deepStrictEqual(\n *   pipe(\n *     // lift a function\n *     O.some(f),\n *     // apply the first argument\n *     O.ap(fa),\n *     // apply the second argument\n *     O.ap(fb),\n *     // apply the third argument\n *     O.ap(fc)\n *   ),\n *   O.some('s1true')\n * )\n *\n * @since 2.0.0\n */\nimport { tuple } from './function';\nimport * as _ from './internal';\nexport function ap(F, G) {\n    return function (fa) {\n        return function (fab) {\n            return F.ap(F.map(fab, function (gab) { return function (ga) { return G.ap(gab, ga); }; }), fa);\n        };\n    };\n}\nexport function apFirst(A) {\n    return function (second) { return function (first) {\n        return A.ap(A.map(first, function (a) { return function () { return a; }; }), second);\n    }; };\n}\nexport function apSecond(A) {\n    return function (second) {\n        return function (first) {\n            return A.ap(A.map(first, function () { return function (b) { return b; }; }), second);\n        };\n    };\n}\nexport function apS(F) {\n    return function (name, fb) {\n        return function (fa) {\n            return F.ap(F.map(fa, function (a) { return function (b) {\n                var _a;\n                return Object.assign({}, a, (_a = {}, _a[name] = b, _a));\n            }; }), fb);\n        };\n    };\n}\nexport function getApplySemigroup(F) {\n    return function (S) { return ({\n        concat: function (first, second) {\n            return F.ap(F.map(first, function (x) { return function (y) { return S.concat(x, y); }; }), second);\n        }\n    }); };\n}\nfunction curried(f, n, acc) {\n    return function (x) {\n        var combined = Array(acc.length + 1);\n        for (var i = 0; i < acc.length; i++) {\n            combined[i] = acc[i];\n        }\n        combined[acc.length] = x;\n        return n === 0 ? f.apply(null, combined) : curried(f, n - 1, combined);\n    };\n}\nvar tupleConstructors = {\n    1: function (a) { return [a]; },\n    2: function (a) { return function (b) { return [a, b]; }; },\n    3: function (a) { return function (b) { return function (c) { return [a, b, c]; }; }; },\n    4: function (a) { return function (b) { return function (c) { return function (d) { return [a, b, c, d]; }; }; }; },\n    5: function (a) { return function (b) { return function (c) { return function (d) { return function (e) { return [a, b, c, d, e]; }; }; }; }; }\n};\nfunction getTupleConstructor(len) {\n    if (!_.has.call(tupleConstructors, len)) {\n        tupleConstructors[len] = curried(tuple, len - 1, []);\n    }\n    return tupleConstructors[len];\n}\nexport function sequenceT(F) {\n    return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        var len = args.length;\n        var f = getTupleConstructor(len);\n        var fas = F.map(args[0], f);\n        for (var i = 1; i < len; i++) {\n            fas = F.ap(fas, args[i]);\n        }\n        return fas;\n    };\n}\nfunction getRecordConstructor(keys) {\n    var len = keys.length;\n    switch (len) {\n        case 1:\n            return function (a) {\n                var _a;\n                return (_a = {}, _a[keys[0]] = a, _a);\n            };\n        case 2:\n            return function (a) { return function (b) {\n                var _a;\n                return (_a = {}, _a[keys[0]] = a, _a[keys[1]] = b, _a);\n            }; };\n        case 3:\n            return function (a) { return function (b) { return function (c) {\n                var _a;\n                return (_a = {}, _a[keys[0]] = a, _a[keys[1]] = b, _a[keys[2]] = c, _a);\n            }; }; };\n        case 4:\n            return function (a) { return function (b) { return function (c) { return function (d) {\n                var _a;\n                return (_a = {},\n                    _a[keys[0]] = a,\n                    _a[keys[1]] = b,\n                    _a[keys[2]] = c,\n                    _a[keys[3]] = d,\n                    _a);\n            }; }; }; };\n        case 5:\n            return function (a) { return function (b) { return function (c) { return function (d) { return function (e) {\n                var _a;\n                return (_a = {},\n                    _a[keys[0]] = a,\n                    _a[keys[1]] = b,\n                    _a[keys[2]] = c,\n                    _a[keys[3]] = d,\n                    _a[keys[4]] = e,\n                    _a);\n            }; }; }; }; };\n        default:\n            return curried(function () {\n                var args = [];\n                for (var _i = 0; _i < arguments.length; _i++) {\n                    args[_i] = arguments[_i];\n                }\n                var r = {};\n                for (var i = 0; i < len; i++) {\n                    r[keys[i]] = args[i];\n                }\n                return r;\n            }, len - 1, []);\n    }\n}\nexport function sequenceS(F) {\n    return function (r) {\n        var keys = Object.keys(r);\n        var len = keys.length;\n        var f = getRecordConstructor(keys);\n        var fr = F.map(r[keys[0]], f);\n        for (var i = 1; i < len; i++) {\n            fr = F.ap(fr, r[keys[i]]);\n        }\n        return fr;\n    };\n}\n","/**\n * A `Functor` is a type constructor which supports a mapping operation `map`.\n *\n * `map` can be used to turn functions `a -> b` into functions `f a -> f b` whose argument and return types use the type\n * constructor `f` to represent some computational context.\n *\n * Instances must satisfy the following laws:\n *\n * 1. Identity: `F.map(fa, a => a) <-> fa`\n * 2. Composition: `F.map(fa, a => bc(ab(a))) <-> F.map(F.map(fa, ab), bc)`\n *\n * @since 2.0.0\n */\nimport { pipe } from './function';\nexport function map(F, G) {\n    return function (f) { return function (fa) { return F.map(fa, function (ga) { return G.map(ga, f); }); }; };\n}\nexport function flap(F) {\n    return function (a) { return function (fab) { return F.map(fab, function (f) { return f(a); }); }; };\n}\nexport function bindTo(F) {\n    return function (name) { return function (fa) { return F.map(fa, function (a) {\n        var _a;\n        return (_a = {}, _a[name] = a, _a);\n    }); }; };\n}\nfunction let_(F) {\n    return function (name, f) { return function (fa) { return F.map(fa, function (a) {\n        var _a;\n        return Object.assign({}, a, (_a = {}, _a[name] = f(a), _a));\n    }); }; };\n}\nexport { \n/**\n * @since 2.13.0\n */\nlet_ as let };\n/** @deprecated */\nexport function getFunctorComposition(F, G) {\n    var _map = map(F, G);\n    return {\n        map: function (fga, f) { return pipe(fga, _map(f)); }\n    };\n}\n/** @internal */\nexport function as(F) {\n    return function (self, b) { return F.map(self, function () { return b; }); };\n}\n/** @internal */\nexport function asUnit(F) {\n    var asM = as(F);\n    return function (self) { return asM(self, undefined); };\n}\n","export function chainFirst(M) {\n    var tapM = tap(M);\n    return function (f) { return function (first) { return tapM(first, f); }; };\n}\n/** @internal */\nexport function tap(M) {\n    return function (first, f) { return M.chain(first, function (a) { return M.map(f(a), function () { return a; }); }); };\n}\nexport function bind(M) {\n    return function (name, f) { return function (ma) { return M.chain(ma, function (a) { return M.map(f(a), function (b) {\n        var _a;\n        return Object.assign({}, a, (_a = {}, _a[name] = b, _a));\n    }); }); }; };\n}\n","import { getApplicativeMonoid } from './Applicative';\nimport { apFirst as apFirst_, apS as apS_, apSecond as apSecond_, getApplySemigroup as getApplySemigroup_ } from './Apply';\nimport * as chainable from './Chain';\nimport { tailRec } from './ChainRec';\nimport { chainOptionK as chainOptionK_, filterOrElse as filterOrElse_, fromOption as fromOption_, fromOptionK as fromOptionK_, fromPredicate as fromPredicate_ } from './FromEither';\nimport { dual, flow, identity, pipe } from './function';\nimport { as as as_, asUnit as asUnit_, bindTo as bindTo_, flap as flap_, let as let__ } from './Functor';\nimport * as _ from './internal';\nimport { separated } from './Separated';\nimport { wiltDefault, witherDefault } from './Witherable';\n// -------------------------------------------------------------------------------------\n// constructors\n// -------------------------------------------------------------------------------------\n/**\n * Constructs a new `Either` holding a `Left` value. This usually represents a failure, due to the right-bias of this\n * structure.\n *\n * @category constructors\n * @since 2.0.0\n */\nexport var left = _.left;\n/**\n * Constructs a new `Either` holding a `Right` value. This usually represents a successful value due to the right bias\n * of this structure.\n *\n * @category constructors\n * @since 2.0.0\n */\nexport var right = _.right;\n/**\n * @category sequencing\n * @since 2.14.0\n */\nexport var flatMap = /*#__PURE__*/ dual(2, function (ma, f) { return (isLeft(ma) ? ma : f(ma.right)); });\nvar _map = function (fa, f) { return pipe(fa, map(f)); };\nvar _ap = function (fab, fa) { return pipe(fab, ap(fa)); };\n/* istanbul ignore next */\nvar _reduce = function (fa, b, f) { return pipe(fa, reduce(b, f)); };\n/* istanbul ignore next */\nvar _foldMap = function (M) { return function (fa, f) {\n    var foldMapM = foldMap(M);\n    return pipe(fa, foldMapM(f));\n}; };\n/* istanbul ignore next */\nvar _reduceRight = function (fa, b, f) { return pipe(fa, reduceRight(b, f)); };\nvar _traverse = function (F) {\n    var traverseF = traverse(F);\n    return function (ta, f) { return pipe(ta, traverseF(f)); };\n};\nvar _bimap = function (fa, f, g) { return pipe(fa, bimap(f, g)); };\nvar _mapLeft = function (fa, f) { return pipe(fa, mapLeft(f)); };\n/* istanbul ignore next */\nvar _alt = function (fa, that) { return pipe(fa, alt(that)); };\n/* istanbul ignore next */\nvar _extend = function (wa, f) { return pipe(wa, extend(f)); };\nvar _chainRec = function (a, f) {\n    return tailRec(f(a), function (e) {\n        return isLeft(e) ? right(left(e.left)) : isLeft(e.right) ? left(f(e.right.left)) : right(right(e.right.right));\n    });\n};\n/**\n * @category type lambdas\n * @since 2.0.0\n */\nexport var URI = 'Either';\n/**\n * @category instances\n * @since 2.0.0\n */\nexport var getShow = function (SE, SA) { return ({\n    show: function (ma) { return (isLeft(ma) ? \"left(\".concat(SE.show(ma.left), \")\") : \"right(\".concat(SA.show(ma.right), \")\")); }\n}); };\n/**\n * @category instances\n * @since 2.0.0\n */\nexport var getEq = function (EL, EA) { return ({\n    equals: function (x, y) {\n        return x === y || (isLeft(x) ? isLeft(y) && EL.equals(x.left, y.left) : isRight(y) && EA.equals(x.right, y.right));\n    }\n}); };\n/**\n * Semigroup returning the left-most non-`Left` value. If both operands are `Right`s then the inner values are\n * concatenated using the provided `Semigroup`\n *\n * @example\n * import { getSemigroup, left, right } from 'fp-ts/Either'\n * import { SemigroupSum } from 'fp-ts/number'\n *\n * const S = getSemigroup<string, number>(SemigroupSum)\n * assert.deepStrictEqual(S.concat(left('a'), left('b')), left('a'))\n * assert.deepStrictEqual(S.concat(left('a'), right(2)), right(2))\n * assert.deepStrictEqual(S.concat(right(1), left('b')), right(1))\n * assert.deepStrictEqual(S.concat(right(1), right(2)), right(3))\n *\n * @category instances\n * @since 2.0.0\n */\nexport var getSemigroup = function (S) { return ({\n    concat: function (x, y) { return (isLeft(y) ? x : isLeft(x) ? y : right(S.concat(x.right, y.right))); }\n}); };\n/**\n * Builds a `Compactable` instance for `Either` given `Monoid` for the left side.\n *\n * @category filtering\n * @since 2.10.0\n */\nexport var getCompactable = function (M) {\n    var empty = left(M.empty);\n    return {\n        URI: URI,\n        _E: undefined,\n        compact: function (ma) { return (isLeft(ma) ? ma : ma.right._tag === 'None' ? empty : right(ma.right.value)); },\n        separate: function (ma) {\n            return isLeft(ma)\n                ? separated(ma, ma)\n                : isLeft(ma.right)\n                    ? separated(right(ma.right.left), empty)\n                    : separated(empty, right(ma.right.right));\n        }\n    };\n};\n/**\n * Builds a `Filterable` instance for `Either` given `Monoid` for the left side\n *\n * @category filtering\n * @since 2.10.0\n */\nexport var getFilterable = function (M) {\n    var empty = left(M.empty);\n    var _a = getCompactable(M), compact = _a.compact, separate = _a.separate;\n    var filter = function (ma, predicate) {\n        return isLeft(ma) ? ma : predicate(ma.right) ? ma : empty;\n    };\n    var partition = function (ma, p) {\n        return isLeft(ma)\n            ? separated(ma, ma)\n            : p(ma.right)\n                ? separated(empty, right(ma.right))\n                : separated(right(ma.right), empty);\n    };\n    return {\n        URI: URI,\n        _E: undefined,\n        map: _map,\n        compact: compact,\n        separate: separate,\n        filter: filter,\n        filterMap: function (ma, f) {\n            if (isLeft(ma)) {\n                return ma;\n            }\n            var ob = f(ma.right);\n            return ob._tag === 'None' ? empty : right(ob.value);\n        },\n        partition: partition,\n        partitionMap: function (ma, f) {\n            if (isLeft(ma)) {\n                return separated(ma, ma);\n            }\n            var e = f(ma.right);\n            return isLeft(e) ? separated(right(e.left), empty) : separated(empty, right(e.right));\n        }\n    };\n};\n/**\n * Builds `Witherable` instance for `Either` given `Monoid` for the left side\n *\n * @category filtering\n * @since 2.0.0\n */\nexport var getWitherable = function (M) {\n    var F_ = getFilterable(M);\n    var C = getCompactable(M);\n    return {\n        URI: URI,\n        _E: undefined,\n        map: _map,\n        compact: F_.compact,\n        separate: F_.separate,\n        filter: F_.filter,\n        filterMap: F_.filterMap,\n        partition: F_.partition,\n        partitionMap: F_.partitionMap,\n        traverse: _traverse,\n        sequence: sequence,\n        reduce: _reduce,\n        foldMap: _foldMap,\n        reduceRight: _reduceRight,\n        wither: witherDefault(Traversable, C),\n        wilt: wiltDefault(Traversable, C)\n    };\n};\n/**\n * The default [`Applicative`](#applicative) instance returns the first error, if you want to\n * get all errors you need to provide a way to concatenate them via a `Semigroup`.\n *\n * @example\n * import * as A from 'fp-ts/Apply'\n * import * as E from 'fp-ts/Either'\n * import { pipe } from 'fp-ts/function'\n * import * as S from 'fp-ts/Semigroup'\n * import * as string from 'fp-ts/string'\n *\n * const parseString = (u: unknown): E.Either<string, string> =>\n *   typeof u === 'string' ? E.right(u) : E.left('not a string')\n *\n * const parseNumber = (u: unknown): E.Either<string, number> =>\n *   typeof u === 'number' ? E.right(u) : E.left('not a number')\n *\n * interface Person {\n *   readonly name: string\n *   readonly age: number\n * }\n *\n * const parsePerson = (\n *   input: Record<string, unknown>\n * ): E.Either<string, Person> =>\n *   pipe(\n *     E.Do,\n *     E.apS('name', parseString(input.name)),\n *     E.apS('age', parseNumber(input.age))\n *   )\n *\n * assert.deepStrictEqual(parsePerson({}), E.left('not a string')) // <= first error\n *\n * const Applicative = E.getApplicativeValidation(\n *   pipe(string.Semigroup, S.intercalate(', '))\n * )\n *\n * const apS = A.apS(Applicative)\n *\n * const parsePersonAll = (\n *   input: Record<string, unknown>\n * ): E.Either<string, Person> =>\n *   pipe(\n *     E.Do,\n *     apS('name', parseString(input.name)),\n *     apS('age', parseNumber(input.age))\n *   )\n *\n * assert.deepStrictEqual(parsePersonAll({}), E.left('not a string, not a number')) // <= all errors\n *\n * @category error handling\n * @since 2.7.0\n */\nexport var getApplicativeValidation = function (SE) { return ({\n    URI: URI,\n    _E: undefined,\n    map: _map,\n    ap: function (fab, fa) {\n        return isLeft(fab)\n            ? isLeft(fa)\n                ? left(SE.concat(fab.left, fa.left))\n                : fab\n            : isLeft(fa)\n                ? fa\n                : right(fab.right(fa.right));\n    },\n    of: of\n}); };\n/**\n * The default [`Alt`](#alt) instance returns the last error, if you want to\n * get all errors you need to provide a way to concatenate them via a `Semigroup`.\n *\n * @example\n * import * as E from 'fp-ts/Either'\n * import { pipe } from 'fp-ts/function'\n * import * as S from 'fp-ts/Semigroup'\n * import * as string from 'fp-ts/string'\n *\n * const parseString = (u: unknown): E.Either<string, string> =>\n *   typeof u === 'string' ? E.right(u) : E.left('not a string')\n *\n * const parseNumber = (u: unknown): E.Either<string, number> =>\n *   typeof u === 'number' ? E.right(u) : E.left('not a number')\n *\n * const parse = (u: unknown): E.Either<string, string | number> =>\n *   pipe(\n *     parseString(u),\n *     E.alt<string, string | number>(() => parseNumber(u))\n *   )\n *\n * assert.deepStrictEqual(parse(true), E.left('not a number')) // <= last error\n *\n * const Alt = E.getAltValidation(pipe(string.Semigroup, S.intercalate(', ')))\n *\n * const parseAll = (u: unknown): E.Either<string, string | number> =>\n *   Alt.alt<string | number>(parseString(u), () => parseNumber(u))\n *\n * assert.deepStrictEqual(parseAll(true), E.left('not a string, not a number')) // <= all errors\n *\n * @category error handling\n * @since 2.7.0\n */\nexport var getAltValidation = function (SE) { return ({\n    URI: URI,\n    _E: undefined,\n    map: _map,\n    alt: function (me, that) {\n        if (isRight(me)) {\n            return me;\n        }\n        var ea = that();\n        return isLeft(ea) ? left(SE.concat(me.left, ea.left)) : ea;\n    }\n}); };\n/**\n * @category mapping\n * @since 2.0.0\n */\nexport var map = function (f) { return function (fa) {\n    return isLeft(fa) ? fa : right(f(fa.right));\n}; };\n/**\n * @category instances\n * @since 2.7.0\n */\nexport var Functor = {\n    URI: URI,\n    map: _map\n};\n/**\n * Maps the `Right` value of this `Either` to the specified constant value.\n *\n * @category mapping\n * @since 2.16.0\n */\nexport var as = dual(2, as_(Functor));\n/**\n * Maps the `Right` value of this `Either` to the void constant value.\n *\n * @category mapping\n * @since 2.16.0\n */\nexport var asUnit = asUnit_(Functor);\n/**\n * @category constructors\n * @since 2.7.0\n */\nexport var of = right;\n/**\n * @category instances\n * @since 2.10.0\n */\nexport var Pointed = {\n    URI: URI,\n    of: of\n};\n/**\n * Less strict version of [`ap`](#ap).\n *\n * The `W` suffix (short for **W**idening) means that the error types will be merged.\n *\n * @since 2.8.0\n */\nexport var apW = function (fa) { return function (fab) {\n    return isLeft(fab) ? fab : isLeft(fa) ? fa : right(fab.right(fa.right));\n}; };\n/**\n * @since 2.0.0\n */\nexport var ap = apW;\n/**\n * @category instances\n * @since 2.10.0\n */\nexport var Apply = {\n    URI: URI,\n    map: _map,\n    ap: _ap\n};\n/**\n * @category instances\n * @since 2.7.0\n */\nexport var Applicative = {\n    URI: URI,\n    map: _map,\n    ap: _ap,\n    of: of\n};\n/**\n * @category instances\n * @since 2.10.0\n */\nexport var Chain = {\n    URI: URI,\n    map: _map,\n    ap: _ap,\n    chain: flatMap\n};\n/**\n * @category instances\n * @since 2.7.0\n */\nexport var Monad = {\n    URI: URI,\n    map: _map,\n    ap: _ap,\n    of: of,\n    chain: flatMap\n};\n/**\n * Left-associative fold of a structure.\n *\n * @example\n * import { pipe } from 'fp-ts/function'\n * import * as E from 'fp-ts/Either'\n *\n * const startWith = 'prefix'\n * const concat = (a: string, b: string) => `${a}:${b}`\n *\n * assert.deepStrictEqual(\n *   pipe(E.right('a'), E.reduce(startWith, concat)),\n *   'prefix:a'\n * )\n *\n * assert.deepStrictEqual(\n *   pipe(E.left('e'), E.reduce(startWith, concat)),\n *   'prefix'\n * )\n *\n * @category folding\n * @since 2.0.0\n */\nexport var reduce = function (b, f) { return function (fa) {\n    return isLeft(fa) ? b : f(b, fa.right);\n}; };\n/**\n * Map each element of the structure to a monoid, and combine the results.\n *\n * @example\n * import { pipe } from 'fp-ts/function'\n * import * as E from 'fp-ts/Either'\n * import * as S from 'fp-ts/string'\n *\n * const yell = (a: string) => `${a}!`\n *\n * assert.deepStrictEqual(\n *   pipe(E.right('a'), E.foldMap(S.Monoid)(yell)),\n *   'a!'\n * )\n *\n * assert.deepStrictEqual(\n *   pipe(E.left('e'), E.foldMap(S.Monoid)(yell)),\n *   S.Monoid.empty\n * )\n *\n * @category folding\n * @since 2.0.0\n */\nexport var foldMap = function (M) { return function (f) { return function (fa) {\n    return isLeft(fa) ? M.empty : f(fa.right);\n}; }; };\n/**\n * Right-associative fold of a structure.\n *\n * @example\n * import { pipe } from 'fp-ts/function'\n * import * as E from 'fp-ts/Either'\n *\n * const startWith = 'postfix'\n * const concat = (a: string, b: string) => `${a}:${b}`\n *\n * assert.deepStrictEqual(\n *   pipe(E.right('a'), E.reduceRight(startWith, concat)),\n *   'a:postfix'\n * )\n *\n * assert.deepStrictEqual(\n *   pipe(E.left('e'), E.reduceRight(startWith, concat)),\n *   'postfix'\n * )\n *\n * @category folding\n * @since 2.0.0\n */\nexport var reduceRight = function (b, f) { return function (fa) {\n    return isLeft(fa) ? b : f(fa.right, b);\n}; };\n/**\n * @category instances\n * @since 2.7.0\n */\nexport var Foldable = {\n    URI: URI,\n    reduce: _reduce,\n    foldMap: _foldMap,\n    reduceRight: _reduceRight\n};\n/**\n * Map each element of a structure to an action, evaluate these actions from left to right, and collect the results.\n *\n * @example\n * import { pipe } from 'fp-ts/function'\n * import * as RA from 'fp-ts/ReadonlyArray'\n * import * as E from 'fp-ts/Either'\n * import * as O from 'fp-ts/Option'\n *\n * assert.deepStrictEqual(\n *   pipe(E.right(['a']), E.traverse(O.Applicative)(RA.head)),\n *   O.some(E.right('a'))\n *  )\n *\n * assert.deepStrictEqual(\n *   pipe(E.right([]), E.traverse(O.Applicative)(RA.head)),\n *   O.none\n * )\n *\n * @category traversing\n * @since 2.6.3\n */\nexport var traverse = function (F) {\n    return function (f) {\n        return function (ta) {\n            return isLeft(ta) ? F.of(left(ta.left)) : F.map(f(ta.right), right);\n        };\n    };\n};\n/**\n * Evaluate each monadic action in the structure from left to right, and collect the results.\n *\n * @example\n * import { pipe } from 'fp-ts/function'\n * import * as E from 'fp-ts/Either'\n * import * as O from 'fp-ts/Option'\n *\n * assert.deepStrictEqual(\n *   pipe(E.right(O.some('a')), E.sequence(O.Applicative)),\n *   O.some(E.right('a'))\n *  )\n *\n * assert.deepStrictEqual(\n *   pipe(E.right(O.none), E.sequence(O.Applicative)),\n *   O.none\n * )\n *\n * @category traversing\n * @since 2.6.3\n */\nexport var sequence = function (F) {\n    return function (ma) {\n        return isLeft(ma) ? F.of(left(ma.left)) : F.map(ma.right, right);\n    };\n};\n/**\n * @category instances\n * @since 2.7.0\n */\nexport var Traversable = {\n    URI: URI,\n    map: _map,\n    reduce: _reduce,\n    foldMap: _foldMap,\n    reduceRight: _reduceRight,\n    traverse: _traverse,\n    sequence: sequence\n};\n/**\n * Map a pair of functions over the two type arguments of the bifunctor.\n *\n * @category mapping\n * @since 2.0.0\n */\nexport var bimap = function (f, g) { return function (fa) {\n    return isLeft(fa) ? left(f(fa.left)) : right(g(fa.right));\n}; };\n/**\n * Map a function over the first type argument of a bifunctor.\n *\n * @category error handling\n * @since 2.0.0\n */\nexport var mapLeft = function (f) { return function (fa) {\n    return isLeft(fa) ? left(f(fa.left)) : fa;\n}; };\n/**\n * @category instances\n * @since 2.7.0\n */\nexport var Bifunctor = {\n    URI: URI,\n    bimap: _bimap,\n    mapLeft: _mapLeft\n};\n/**\n * Less strict version of [`alt`](#alt).\n *\n * The `W` suffix (short for **W**idening) means that the error and the return types will be merged.\n *\n * @category error handling\n * @since 2.9.0\n */\nexport var altW = function (that) { return function (fa) {\n    return isLeft(fa) ? that() : fa;\n}; };\n/**\n * Identifies an associative operation on a type constructor. It is similar to `Semigroup`, except that it applies to\n * types of kind `* -> *`.\n *\n * In case of `Either` returns the left-most non-`Left` value (or the right-most `Left` value if both values are `Left`).\n *\n * | x        | y        | pipe(x, alt(() => y) |\n * | -------- | -------- | -------------------- |\n * | left(a)  | left(b)  | left(b)              |\n * | left(a)  | right(2) | right(2)             |\n * | right(1) | left(b)  | right(1)             |\n * | right(1) | right(2) | right(1)             |\n *\n * @example\n * import * as E from 'fp-ts/Either'\n * import { pipe } from 'fp-ts/function'\n *\n * assert.deepStrictEqual(\n *   pipe(\n *     E.left('a'),\n *     E.alt(() => E.left('b'))\n *   ),\n *   E.left('b')\n * )\n * assert.deepStrictEqual(\n *   pipe(\n *     E.left('a'),\n *     E.alt(() => E.right(2))\n *   ),\n *   E.right(2)\n * )\n * assert.deepStrictEqual(\n *   pipe(\n *     E.right(1),\n *     E.alt(() => E.left('b'))\n *   ),\n *   E.right(1)\n * )\n * assert.deepStrictEqual(\n *   pipe(\n *     E.right(1),\n *     E.alt(() => E.right(2))\n *   ),\n *   E.right(1)\n * )\n *\n * @category error handling\n * @since 2.0.0\n */\nexport var alt = altW;\n/**\n * @category instances\n * @since 2.7.0\n */\nexport var Alt = {\n    URI: URI,\n    map: _map,\n    alt: _alt\n};\n/**\n * @since 2.0.0\n */\nexport var extend = function (f) { return function (wa) {\n    return isLeft(wa) ? wa : right(f(wa));\n}; };\n/**\n * @category instances\n * @since 2.7.0\n */\nexport var Extend = {\n    URI: URI,\n    map: _map,\n    extend: _extend\n};\n/**\n * @category instances\n * @since 2.7.0\n */\nexport var ChainRec = {\n    URI: URI,\n    map: _map,\n    ap: _ap,\n    chain: flatMap,\n    chainRec: _chainRec\n};\n/**\n * @since 2.6.3\n */\nexport var throwError = left;\n/**\n * @category instances\n * @since 2.7.0\n */\nexport var MonadThrow = {\n    URI: URI,\n    map: _map,\n    ap: _ap,\n    of: of,\n    chain: flatMap,\n    throwError: throwError\n};\n/**\n * @category instances\n * @since 2.10.0\n */\nexport var FromEither = {\n    URI: URI,\n    fromEither: identity\n};\n/**\n * @example\n * import { fromPredicate, left, right } from 'fp-ts/Either'\n * import { pipe } from 'fp-ts/function'\n *\n * assert.deepStrictEqual(\n *   pipe(\n *     1,\n *     fromPredicate(\n *       (n) => n > 0,\n *       () => 'error'\n *     )\n *   ),\n *   right(1)\n * )\n * assert.deepStrictEqual(\n *   pipe(\n *     -1,\n *     fromPredicate(\n *       (n) => n > 0,\n *       () => 'error'\n *     )\n *   ),\n *   left('error')\n * )\n *\n * @category lifting\n * @since 2.0.0\n */\nexport var fromPredicate = /*#__PURE__*/ fromPredicate_(FromEither);\n// -------------------------------------------------------------------------------------\n// conversions\n// -------------------------------------------------------------------------------------\n/**\n * @example\n * import * as E from 'fp-ts/Either'\n * import { pipe } from 'fp-ts/function'\n * import * as O from 'fp-ts/Option'\n *\n * assert.deepStrictEqual(\n *   pipe(\n *     O.some(1),\n *     E.fromOption(() => 'error')\n *   ),\n *   E.right(1)\n * )\n * assert.deepStrictEqual(\n *   pipe(\n *     O.none,\n *     E.fromOption(() => 'error')\n *   ),\n *   E.left('error')\n * )\n *\n * @category conversions\n * @since 2.0.0\n */\nexport var fromOption = \n/*#__PURE__*/ fromOption_(FromEither);\n// -------------------------------------------------------------------------------------\n// refinements\n// -------------------------------------------------------------------------------------\n/**\n * Returns `true` if the either is an instance of `Left`, `false` otherwise.\n *\n * @category refinements\n * @since 2.0.0\n */\nexport var isLeft = _.isLeft;\n/**\n * Returns `true` if the either is an instance of `Right`, `false` otherwise.\n *\n * @category refinements\n * @since 2.0.0\n */\nexport var isRight = _.isRight;\n/**\n * Less strict version of [`match`](#match).\n *\n * The `W` suffix (short for **W**idening) means that the handler return types will be merged.\n *\n * @category pattern matching\n * @since 2.10.0\n */\nexport var matchW = function (onLeft, onRight) {\n    return function (ma) {\n        return isLeft(ma) ? onLeft(ma.left) : onRight(ma.right);\n    };\n};\n/**\n * Alias of [`matchW`](#matchw).\n *\n * @category pattern matching\n * @since 2.10.0\n */\nexport var foldW = matchW;\n/**\n * Takes two functions and an `Either` value, if the value is a `Left` the inner value is applied to the first function,\n * if the value is a `Right` the inner value is applied to the second function.\n *\n * @example\n * import { match, left, right } from 'fp-ts/Either'\n * import { pipe } from 'fp-ts/function'\n *\n * function onLeft(errors: Array<string>): string {\n *   return `Errors: ${errors.join(', ')}`\n * }\n *\n * function onRight(value: number): string {\n *   return `Ok: ${value}`\n * }\n *\n * assert.strictEqual(\n *   pipe(\n *     right(1),\n *     match(onLeft, onRight)\n *   ),\n *   'Ok: 1'\n * )\n * assert.strictEqual(\n *   pipe(\n *     left(['error 1', 'error 2']),\n *     match(onLeft, onRight)\n *   ),\n *   'Errors: error 1, error 2'\n * )\n *\n * @category pattern matching\n * @since 2.10.0\n */\nexport var match = matchW;\n/**\n * Alias of [`match`](#match).\n *\n * @category pattern matching\n * @since 2.0.0\n */\nexport var fold = match;\n/**\n * Less strict version of [`getOrElse`](#getorelse).\n *\n * The `W` suffix (short for **W**idening) means that the handler return type will be merged.\n *\n * @category error handling\n * @since 2.6.0\n */\nexport var getOrElseW = function (onLeft) {\n    return function (ma) {\n        return isLeft(ma) ? onLeft(ma.left) : ma.right;\n    };\n};\n/**\n * Returns the wrapped value if it's a `Right` or a default value if is a `Left`.\n *\n * @example\n * import { getOrElse, left, right } from 'fp-ts/Either'\n * import { pipe } from 'fp-ts/function'\n *\n * assert.deepStrictEqual(\n *   pipe(\n *     right(1),\n *     getOrElse(() => 0)\n *   ),\n *   1\n * )\n * assert.deepStrictEqual(\n *   pipe(\n *     left('error'),\n *     getOrElse(() => 0)\n *   ),\n *   0\n * )\n *\n * @category error handling\n * @since 2.0.0\n */\nexport var getOrElse = getOrElseW;\n// -------------------------------------------------------------------------------------\n// combinators\n// -------------------------------------------------------------------------------------\n/**\n * @category mapping\n * @since 2.10.0\n */\nexport var flap = /*#__PURE__*/ flap_(Functor);\n/**\n * Combine two effectful actions, keeping only the result of the first.\n *\n * @since 2.0.0\n */\nexport var apFirst = /*#__PURE__*/ apFirst_(Apply);\n/**\n * Less strict version of [`apFirst`](#apfirst)\n *\n * The `W` suffix (short for **W**idening) means that the error types will be merged.\n *\n * @since 2.12.0\n */\nexport var apFirstW = apFirst;\n/**\n * Combine two effectful actions, keeping only the result of the second.\n *\n * @since 2.0.0\n */\nexport var apSecond = /*#__PURE__*/ apSecond_(Apply);\n/**\n * Less strict version of [`apSecond`](#apsecond)\n *\n * The `W` suffix (short for **W**idening) means that the error types will be merged.\n *\n * @since 2.12.0\n */\nexport var apSecondW = apSecond;\n/**\n * Composes computations in sequence, using the return value of one computation to determine the next computation and\n * keeping only the result of the first.\n *\n * @category combinators\n * @since 2.15.0\n */\nexport var tap = /*#__PURE__*/ dual(2, chainable.tap(Chain));\n/**\n * Less strict version of [`flatten`](#flatten).\n *\n * The `W` suffix (short for **W**idening) means that the error types will be merged.\n *\n * @category sequencing\n * @since 2.11.0\n */\nexport var flattenW = \n/*#__PURE__*/ flatMap(identity);\n/**\n * The `flatten` function is the conventional monad join operator. It is used to remove one level of monadic structure, projecting its bound argument into the outer level.\n *\n * @example\n * import * as E from 'fp-ts/Either'\n *\n * assert.deepStrictEqual(E.flatten(E.right(E.right('a'))), E.right('a'))\n * assert.deepStrictEqual(E.flatten(E.right(E.left('e'))), E.left('e'))\n * assert.deepStrictEqual(E.flatten(E.left('e')), E.left('e'))\n *\n * @category sequencing\n * @since 2.0.0\n */\nexport var flatten = flattenW;\n/**\n * @since 2.0.0\n */\nexport var duplicate = /*#__PURE__*/ extend(identity);\n/**\n * Use `liftOption`.\n *\n * @category legacy\n * @since 2.10.0\n */\nexport var fromOptionK = \n/*#__PURE__*/ fromOptionK_(FromEither);\n/**\n * Use `flatMapOption`.\n *\n * @category legacy\n * @since 2.11.0\n */\nexport var chainOptionK = /*#__PURE__*/ chainOptionK_(FromEither, Chain);\n/**\n * Use `flatMapOption`.\n *\n * @category legacy\n * @since 2.13.2\n */\nexport var chainOptionKW = chainOptionK;\n/** @internal */\nvar _FromEither = {\n    fromEither: FromEither.fromEither\n};\n/**\n * @category lifting\n * @since 2.15.0\n */\nexport var liftNullable = /*#__PURE__*/ _.liftNullable(_FromEither);\n/**\n * @category lifting\n * @since 2.15.0\n */\nexport var liftOption = /*#__PURE__*/ _.liftOption(_FromEither);\n/** @internal */\nvar _FlatMap = {\n    flatMap: flatMap\n};\n/**\n * @category sequencing\n * @since 2.15.0\n */\nexport var flatMapNullable = /*#__PURE__*/ _.flatMapNullable(_FromEither, _FlatMap);\n/**\n * @category sequencing\n * @since 2.15.0\n */\nexport var flatMapOption = /*#__PURE__*/ _.flatMapOption(_FromEither, _FlatMap);\n/**\n * @example\n * import * as E from 'fp-ts/Either'\n * import { pipe } from 'fp-ts/function'\n *\n * assert.deepStrictEqual(\n *   pipe(\n *     E.right(1),\n *     E.filterOrElse(\n *       (n) => n > 0,\n *       () => 'error'\n *     )\n *   ),\n *   E.right(1)\n * )\n * assert.deepStrictEqual(\n *   pipe(\n *     E.right(-1),\n *     E.filterOrElse(\n *       (n) => n > 0,\n *       () => 'error'\n *     )\n *   ),\n *   E.left('error')\n * )\n * assert.deepStrictEqual(\n *   pipe(\n *     E.left('a'),\n *     E.filterOrElse(\n *       (n) => n > 0,\n *       () => 'error'\n *     )\n *   ),\n *   E.left('a')\n * )\n *\n * @category filtering\n * @since 2.0.0\n */\nexport var filterOrElse = /*#__PURE__*/ filterOrElse_(FromEither, Chain);\n/**\n * Less strict version of [`filterOrElse`](#filterorelse).\n *\n * The `W` suffix (short for **W**idening) means that the error types will be merged.\n *\n * @category filtering\n * @since 2.9.0\n */\nexport var filterOrElseW = filterOrElse;\n/**\n * Returns a `Right` if is a `Left` (and vice versa).\n *\n * @since 2.0.0\n */\nexport var swap = function (ma) { return (isLeft(ma) ? right(ma.left) : left(ma.right)); };\n/**\n * Less strict version of [`orElse`](#orelse).\n *\n * The `W` suffix (short for **W**idening) means that the return types will be merged.\n *\n * @category error handling\n * @since 2.10.0\n */\nexport var orElseW = function (onLeft) {\n    return function (ma) {\n        return isLeft(ma) ? onLeft(ma.left) : ma;\n    };\n};\n/**\n * Useful for recovering from errors.\n *\n * @category error handling\n * @since 2.0.0\n */\nexport var orElse = orElseW;\n/**\n * Takes a default and a nullable value, if the value is not nully, turn it into a `Right`, if the value is nully use\n * the provided default as a `Left`.\n *\n * @example\n * import { fromNullable, left, right } from 'fp-ts/Either'\n *\n * const parse = fromNullable('nully')\n *\n * assert.deepStrictEqual(parse(1), right(1))\n * assert.deepStrictEqual(parse(null), left('nully'))\n *\n * @category conversions\n * @since 2.0.0\n */\nexport var fromNullable = function (e) {\n    return function (a) {\n        return a == null ? left(e) : right(a);\n    };\n};\n/**\n * Constructs a new `Either` from a function that might throw.\n *\n * See also [`tryCatchK`](#trycatchk).\n *\n * @example\n * import * as E from 'fp-ts/Either'\n *\n * const unsafeHead = <A>(as: ReadonlyArray<A>): A => {\n *   if (as.length > 0) {\n *     return as[0]\n *   } else {\n *     throw new Error('empty array')\n *   }\n * }\n *\n * const head = <A>(as: ReadonlyArray<A>): E.Either<Error, A> =>\n *   E.tryCatch(() => unsafeHead(as), e => (e instanceof Error ? e : new Error('unknown error')))\n *\n * assert.deepStrictEqual(head([]), E.left(new Error('empty array')))\n * assert.deepStrictEqual(head([1, 2, 3]), E.right(1))\n *\n * @category interop\n * @since 2.0.0\n */\nexport var tryCatch = function (f, onThrow) {\n    try {\n        return right(f());\n    }\n    catch (e) {\n        return left(onThrow(e));\n    }\n};\n/**\n * Converts a function that may throw to one returning a `Either`.\n *\n * @category interop\n * @since 2.10.0\n */\nexport var tryCatchK = function (f, onThrow) {\n    return function () {\n        var a = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            a[_i] = arguments[_i];\n        }\n        return tryCatch(function () { return f.apply(void 0, a); }, onThrow);\n    };\n};\n/**\n * Use `liftNullable`.\n *\n * @category legacy\n * @since 2.9.0\n */\nexport var fromNullableK = function (e) {\n    var from = fromNullable(e);\n    return function (f) { return flow(f, from); };\n};\n/**\n * Use `flatMapNullable`.\n *\n * @category legacy\n * @since 2.9.0\n */\nexport var chainNullableK = function (e) {\n    var from = fromNullableK(e);\n    return function (f) { return flatMap(from(f)); };\n};\n/**\n * @category conversions\n * @since 2.10.0\n */\nexport var toUnion = /*#__PURE__*/ foldW(identity, identity);\n// -------------------------------------------------------------------------------------\n// utils\n// -------------------------------------------------------------------------------------\n/**\n * Default value for the `onError` argument of `tryCatch`\n *\n * @since 2.0.0\n */\nexport function toError(e) {\n    try {\n        return e instanceof Error ? e : new Error(String(e));\n    }\n    catch (error) {\n        return new Error();\n    }\n}\nexport function elem(E) {\n    return function (a, ma) {\n        if (ma === undefined) {\n            var elemE_1 = elem(E);\n            return function (ma) { return elemE_1(a, ma); };\n        }\n        return isLeft(ma) ? false : E.equals(a, ma.right);\n    };\n}\n/**\n * Returns `false` if `Left` or returns the result of the application of the given predicate to the `Right` value.\n *\n * @example\n * import { exists, left, right } from 'fp-ts/Either'\n *\n * const gt2 = exists((n: number) => n > 2)\n *\n * assert.strictEqual(gt2(left('a')), false)\n * assert.strictEqual(gt2(right(1)), false)\n * assert.strictEqual(gt2(right(3)), true)\n *\n * @since 2.0.0\n */\nexport var exists = function (predicate) {\n    return function (ma) {\n        return isLeft(ma) ? false : predicate(ma.right);\n    };\n};\n// -------------------------------------------------------------------------------------\n// do notation\n// -------------------------------------------------------------------------------------\n/**\n * @category do notation\n * @since 2.9.0\n */\nexport var Do = /*#__PURE__*/ of(_.emptyRecord);\n/**\n * @category do notation\n * @since 2.8.0\n */\nexport var bindTo = /*#__PURE__*/ bindTo_(Functor);\nvar let_ = /*#__PURE__*/ let__(Functor);\nexport { \n/**\n * @category do notation\n * @since 2.13.0\n */\nlet_ as let };\n/**\n * @category do notation\n * @since 2.8.0\n */\nexport var bind = /*#__PURE__*/ chainable.bind(Chain);\n/**\n * The `W` suffix (short for **W**idening) means that the error types will be merged.\n *\n * @category do notation\n * @since 2.8.0\n */\nexport var bindW = bind;\n/**\n * @category do notation\n * @since 2.8.0\n */\nexport var apS = /*#__PURE__*/ apS_(Apply);\n/**\n * Less strict version of [`apS`](#aps).\n *\n * The `W` suffix (short for **W**idening) means that the error types will be merged.\n *\n * @category do notation\n * @since 2.8.0\n */\nexport var apSW = apS;\n/**\n * @since 2.11.0\n */\nexport var ApT = /*#__PURE__*/ of(_.emptyReadonlyArray);\n// -------------------------------------------------------------------------------------\n// array utils\n// -------------------------------------------------------------------------------------\n/**\n * Equivalent to `ReadonlyNonEmptyArray#traverseWithIndex(Applicative)`.\n *\n * @category traversing\n * @since 2.11.0\n */\nexport var traverseReadonlyNonEmptyArrayWithIndex = function (f) {\n    return function (as) {\n        var e = f(0, _.head(as));\n        if (isLeft(e)) {\n            return e;\n        }\n        var out = [e.right];\n        for (var i = 1; i < as.length; i++) {\n            var e_1 = f(i, as[i]);\n            if (isLeft(e_1)) {\n                return e_1;\n            }\n            out.push(e_1.right);\n        }\n        return right(out);\n    };\n};\n/**\n * Equivalent to `ReadonlyArray#traverseWithIndex(Applicative)`.\n *\n * @category traversing\n * @since 2.11.0\n */\nexport var traverseReadonlyArrayWithIndex = function (f) {\n    var g = traverseReadonlyNonEmptyArrayWithIndex(f);\n    return function (as) { return (_.isNonEmpty(as) ? g(as) : ApT); };\n};\n/**\n * Equivalent to `ReadonlyArray#traverseWithIndex(Applicative)`.\n *\n * @category traversing\n * @since 2.9.0\n */\nexport var traverseArrayWithIndex = traverseReadonlyArrayWithIndex;\n/**\n * Equivalent to `ReadonlyArray#traverse(Applicative)`.\n *\n * @category traversing\n * @since 2.9.0\n */\nexport var traverseArray = function (f) { return traverseReadonlyArrayWithIndex(function (_, a) { return f(a); }); };\n/**\n * Equivalent to `ReadonlyArray#sequence(Applicative)`.\n *\n * @category traversing\n * @since 2.9.0\n */\nexport var sequenceArray = \n/*#__PURE__*/ traverseArray(identity);\n// -------------------------------------------------------------------------------------\n// legacy\n// -------------------------------------------------------------------------------------\n/**\n * Alias of `flatMap`.\n *\n * @category legacy\n * @since 2.6.0\n */\nexport var chainW = flatMap;\n/**\n * Alias of `flatMap`.\n *\n * @category legacy\n * @since 2.0.0\n */\nexport var chain = flatMap;\n/**\n * Alias of `tap`.\n *\n * @category legacy\n * @since 2.0.0\n */\nexport var chainFirst = tap;\n/**\n * Alias of `tap`.\n *\n * @category legacy\n * @since 2.8.0\n */\nexport var chainFirstW = tap;\n/**\n * Use [`parse`](./Json.ts.html#parse) instead.\n *\n * @category zone of death\n * @since 2.0.0\n * @deprecated\n */\nexport function parseJSON(s, onError) {\n    return tryCatch(function () { return JSON.parse(s); }, onError);\n}\n/**\n * Use [`stringify`](./Json.ts.html#stringify) instead.\n *\n * @category zone of death\n * @since 2.0.0\n * @deprecated\n */\nexport var stringifyJSON = function (u, onError) {\n    return tryCatch(function () {\n        var s = JSON.stringify(u);\n        if (typeof s !== 'string') {\n            throw new Error('Converting unsupported structure to JSON');\n        }\n        return s;\n    }, onError);\n};\n/**\n * This instance is deprecated, use small, specific instances instead.\n * For example if a function needs a `Functor` instance, pass `E.Functor` instead of `E.either`\n * (where `E` is from `import E from 'fp-ts/Either'`)\n *\n * @category zone of death\n * @since 2.0.0\n * @deprecated\n */\nexport var either = {\n    URI: URI,\n    map: _map,\n    of: of,\n    ap: _ap,\n    chain: flatMap,\n    reduce: _reduce,\n    foldMap: _foldMap,\n    reduceRight: _reduceRight,\n    traverse: _traverse,\n    sequence: sequence,\n    bimap: _bimap,\n    mapLeft: _mapLeft,\n    alt: _alt,\n    extend: _extend,\n    chainRec: _chainRec,\n    throwError: throwError\n};\n/**\n * Use [`getApplySemigroup`](./Apply.ts.html#getapplysemigroup) instead.\n *\n * Semigroup returning the left-most `Left` value. If both operands are `Right`s then the inner values\n * are concatenated using the provided `Semigroup`\n *\n * @category zone of death\n * @since 2.0.0\n * @deprecated\n */\nexport var getApplySemigroup = \n/*#__PURE__*/ getApplySemigroup_(Apply);\n/**\n * Use [`getApplicativeMonoid`](./Applicative.ts.html#getapplicativemonoid) instead.\n *\n * @category zone of death\n * @since 2.0.0\n * @deprecated\n */\nexport var getApplyMonoid = \n/*#__PURE__*/ getApplicativeMonoid(Applicative);\n/**\n * Use [`getApplySemigroup`](./Apply.ts.html#getapplysemigroup) instead.\n *\n * @category zone of death\n * @since 2.0.0\n * @deprecated\n */\nexport var getValidationSemigroup = function (SE, SA) {\n    return getApplySemigroup_(getApplicativeValidation(SE))(SA);\n};\n/**\n * Use [`getApplicativeMonoid`](./Applicative.ts.html#getapplicativemonoid) instead.\n *\n * @category zone of death\n * @since 2.0.0\n * @deprecated\n */\nexport var getValidationMonoid = function (SE, MA) {\n    return getApplicativeMonoid(getApplicativeValidation(SE))(MA);\n};\n/**\n * Use [`getApplicativeValidation`](#getapplicativevalidation) and [`getAltValidation`](#getaltvalidation) instead.\n *\n * @category zone of death\n * @since 2.0.0\n * @deprecated\n */\nexport function getValidation(SE) {\n    var ap = getApplicativeValidation(SE).ap;\n    var alt = getAltValidation(SE).alt;\n    return {\n        URI: URI,\n        _E: undefined,\n        map: _map,\n        of: of,\n        chain: flatMap,\n        bimap: _bimap,\n        mapLeft: _mapLeft,\n        reduce: _reduce,\n        foldMap: _foldMap,\n        reduceRight: _reduceRight,\n        extend: _extend,\n        traverse: _traverse,\n        sequence: sequence,\n        chainRec: _chainRec,\n        throwError: throwError,\n        ap: ap,\n        alt: alt\n    };\n}\n","import type { MaybeAccessor } from '@/types.js';\n\nexport function access<T>(value: MaybeAccessor<T>): T {\n  return typeof value === 'function' ? (value as any)() as T : value;\n}\n","import { batch, computed, signal } from '@tma.js/signals';\nimport * as E from 'fp-ts/Either';\nimport { pipe } from 'fp-ts/function';\n\nimport { access } from '@/helpers/access.js';\nimport type { MaybeAccessor } from '@/types.js';\n\nexport interface MountableOptions<S, Err> {\n  /**\n   * A state to use if the `restoreState` function returned falsy value or\n   * `isPageReload` returned false.\n   */\n  initialState: S | (() => E.Either<Err, S>);\n  /**\n   * @returns True if the current page was reloaded.\n   */\n  isPageReload: MaybeAccessor<boolean>;\n  /**\n   * A function to call whenever the component was mounted.\n   * @param state - restored state.\n   */\n  onMounted?: (state: S) => void;\n  /**\n   * A function to call whenever the component was unmounted.\n   */\n  onUnmounted?: VoidFunction;\n  /**\n   * Attempts to restore previously saved component state. This function\n   * will only be called if the current page was reloaded.\n   */\n  restoreState: () => (S | undefined);\n}\n\nexport class Mountable<S extends object, Err = never> {\n  constructor({\n    onMounted,\n    restoreState,\n    initialState,\n    onUnmounted,\n    isPageReload,\n  }: MountableOptions<S, Err>) {\n    this.mount = () => {\n      if (this.isMounted()) {\n        return E.right(undefined);\n      }\n      const restored = access(isPageReload) ? restoreState() : undefined;\n      const state = restored\n        ? E.right(restored)\n        : (typeof initialState === 'function' ? initialState() : E.right(initialState));\n\n      return pipe(state, E.map(s => {\n        batch(() => {\n          this._isMounted.set(true);\n          onMounted?.(s);\n        });\n      }));\n    };\n\n    this.unmount = () => {\n      if (this._isMounted()) {\n        batch(() => {\n          this._isMounted.set(false);\n          onUnmounted?.();\n        });\n      }\n    };\n  }\n\n  private readonly _isMounted = signal(false);\n\n  /**\n   * Signal indicating if the component is mounted.\n   */\n  readonly isMounted = computed(this._isMounted);\n\n  /**\n   * Mounts the component restoring its state and calling required side effects.\n   */\n  readonly mount: () => E.Either<Err, void>;\n\n  /**\n   * Unmounts the component.\n   */\n  readonly unmount: () => void;\n}\n","import type { UnionRequiredKeys } from '@tma.js/toolkit';\n\ntype RemoveUndefined<T> = {\n  [K in UnionRequiredKeys<T>]-?: T[K]\n};\n\n/**\n * @returns Object with keys having undefined values.\n * @param value - an object to remove undefined values from.\n */\nexport function removeUndefined<T extends {}>(value: T): RemoveUndefined<T> {\n  const result = {} as RemoveUndefined<T>;\n  for (const k in value) {\n    const v = value[k];\n    v !== undefined && ((result as any)[k] = v);\n  }\n  return result;\n}\n","export function shallowEqual<T extends object>(a: T, b: T): boolean {\n  const aKeys = Object.keys(a);\n  const bKeys = Object.keys(b);\n  return aKeys.length !== bKeys.length\n    ? false\n    : aKeys.every(aKey => {\n      return Object.prototype.hasOwnProperty.call(b, aKey)\n        && (a as any)[aKey] === (b as any)[aKey];\n    });\n}\n","import { type Computed, computed, type Signal, signal } from '@tma.js/signals';\n\nimport { removeUndefined } from '@/helpers/removeUndefined.js';\nimport { shallowEqual } from '@/helpers/shallowEqual.js';\n\nexport interface StatefulOptions<S> {\n  /**\n   * The initial state.\n   */\n  initialState: S;\n  /**\n   * A function to call whenever the state changes.\n   * @param state - updated state.\n   */\n  onChange: (state: S) => void;\n}\n\nexport class Stateful<S extends object> {\n  constructor({ initialState, onChange }: StatefulOptions<S>) {\n    this._state = signal(initialState, { equals: shallowEqual });\n    this.state = computed(this._state);\n    this.state.sub(onChange);\n  }\n\n  protected readonly _state: Signal<S>;\n\n  /**\n   * The current state.\n   */\n  readonly state: Computed<S>;\n\n  /**\n   * Creates a computed signal based on the state.\n   * @param key - a state key to use as a source.\n   */\n  getter<K extends keyof S>(key: K): Computed<S[K]> {\n    return computed(() => this._state()[key]);\n  }\n\n  /**\n   * Updates the state.\n   * @param state - updates to apply.\n   */\n  readonly setState = (state: Partial<S>): void => {\n    const nextState = { ...this.state(), ...removeUndefined(state) };\n    if (!shallowEqual(nextState, this.state())) {\n      this._state.set(nextState);\n    }\n  };\n\n  /**\n   * @returns True if specified payload will update the state.\n   * @param state\n   */\n  hasDiff(state: Partial<S>): boolean {\n    return !shallowEqual({ ...this.state(), ...removeUndefined(state) }, this.state());\n  }\n}\n","// src/storages/globalConfig/globalConfig.ts\nvar store;\nfunction setGlobalConfig(config2) {\n  store = { ...store, ...config2 };\n}\n// @__NO_SIDE_EFFECTS__\nfunction getGlobalConfig(config2) {\n  return {\n    lang: config2?.lang ?? store?.lang,\n    message: config2?.message,\n    abortEarly: config2?.abortEarly ?? store?.abortEarly,\n    abortPipeEarly: config2?.abortPipeEarly ?? store?.abortPipeEarly\n  };\n}\nfunction deleteGlobalConfig() {\n  store = void 0;\n}\n\n// src/storages/globalMessage/globalMessage.ts\nvar store2;\nfunction setGlobalMessage(message2, lang) {\n  if (!store2) store2 = /* @__PURE__ */ new Map();\n  store2.set(lang, message2);\n}\n// @__NO_SIDE_EFFECTS__\nfunction getGlobalMessage(lang) {\n  return store2?.get(lang);\n}\nfunction deleteGlobalMessage(lang) {\n  store2?.delete(lang);\n}\n\n// src/storages/schemaMessage/schemaMessage.ts\nvar store3;\nfunction setSchemaMessage(message2, lang) {\n  if (!store3) store3 = /* @__PURE__ */ new Map();\n  store3.set(lang, message2);\n}\n// @__NO_SIDE_EFFECTS__\nfunction getSchemaMessage(lang) {\n  return store3?.get(lang);\n}\nfunction deleteSchemaMessage(lang) {\n  store3?.delete(lang);\n}\n\n// src/storages/specificMessage/specificMessage.ts\nvar store4;\nfunction setSpecificMessage(reference, message2, lang) {\n  if (!store4) store4 = /* @__PURE__ */ new Map();\n  if (!store4.get(reference)) store4.set(reference, /* @__PURE__ */ new Map());\n  store4.get(reference).set(lang, message2);\n}\n// @__NO_SIDE_EFFECTS__\nfunction getSpecificMessage(reference, lang) {\n  return store4?.get(reference)?.get(lang);\n}\nfunction deleteSpecificMessage(reference, lang) {\n  store4?.get(reference)?.delete(lang);\n}\n\n// src/utils/_stringify/_stringify.ts\n// @__NO_SIDE_EFFECTS__\nfunction _stringify(input) {\n  const type = typeof input;\n  if (type === \"string\") {\n    return `\"${input}\"`;\n  }\n  if (type === \"number\" || type === \"bigint\" || type === \"boolean\") {\n    return `${input}`;\n  }\n  if (type === \"object\" || type === \"function\") {\n    return (input && Object.getPrototypeOf(input)?.constructor?.name) ?? \"null\";\n  }\n  return type;\n}\n\n// src/utils/_addIssue/_addIssue.ts\nfunction _addIssue(context, label, dataset, config2, other) {\n  const input = other && \"input\" in other ? other.input : dataset.value;\n  const expected = other?.expected ?? context.expects ?? null;\n  const received = other?.received ?? _stringify(input);\n  const issue = {\n    kind: context.kind,\n    type: context.type,\n    input,\n    expected,\n    received,\n    message: `Invalid ${label}: ${expected ? `Expected ${expected} but r` : \"R\"}eceived ${received}`,\n    requirement: context.requirement,\n    path: other?.path,\n    issues: other?.issues,\n    lang: config2.lang,\n    abortEarly: config2.abortEarly,\n    abortPipeEarly: config2.abortPipeEarly\n  };\n  const isSchema = context.kind === \"schema\";\n  const message2 = other?.message ?? context.message ?? getSpecificMessage(context.reference, issue.lang) ?? (isSchema ? getSchemaMessage(issue.lang) : null) ?? config2.message ?? getGlobalMessage(issue.lang);\n  if (message2 !== void 0) {\n    issue.message = typeof message2 === \"function\" ? (\n      // @ts-expect-error\n      message2(issue)\n    ) : message2;\n  }\n  if (isSchema) {\n    dataset.typed = false;\n  }\n  if (dataset.issues) {\n    dataset.issues.push(issue);\n  } else {\n    dataset.issues = [issue];\n  }\n}\n\n// src/utils/_getByteCount/_getByteCount.ts\nvar textEncoder;\n// @__NO_SIDE_EFFECTS__\nfunction _getByteCount(input) {\n  if (!textEncoder) {\n    textEncoder = new TextEncoder();\n  }\n  return textEncoder.encode(input).length;\n}\n\n// src/utils/_getGraphemeCount/_getGraphemeCount.ts\nvar segmenter;\n// @__NO_SIDE_EFFECTS__\nfunction _getGraphemeCount(input) {\n  if (!segmenter) {\n    segmenter = new Intl.Segmenter();\n  }\n  const segments = segmenter.segment(input);\n  let count = 0;\n  for (const _ of segments) {\n    count++;\n  }\n  return count;\n}\n\n// src/utils/_getLastMetadata/_getLastMetadata.ts\n// @__NO_SIDE_EFFECTS__\nfunction _getLastMetadata(schema, type) {\n  if (\"pipe\" in schema) {\n    const nestedSchemas = [];\n    for (let index = schema.pipe.length - 1; index >= 0; index--) {\n      const item = schema.pipe[index];\n      if (item.kind === \"schema\" && \"pipe\" in item) {\n        nestedSchemas.push(item);\n      } else if (item.kind === \"metadata\" && item.type === type) {\n        return item[type];\n      }\n    }\n    for (const nestedSchema of nestedSchemas) {\n      const result = /* @__PURE__ */ _getLastMetadata(nestedSchema, type);\n      if (result !== void 0) {\n        return result;\n      }\n    }\n  }\n}\n\n// src/utils/_getStandardProps/_getStandardProps.ts\n// @__NO_SIDE_EFFECTS__\nfunction _getStandardProps(context) {\n  return {\n    version: 1,\n    vendor: \"valibot\",\n    validate(value2) {\n      return context[\"~run\"]({ value: value2 }, getGlobalConfig());\n    }\n  };\n}\n\n// src/utils/_getWordCount/_getWordCount.ts\nvar store5;\n// @__NO_SIDE_EFFECTS__\nfunction _getWordCount(locales, input) {\n  if (!store5) {\n    store5 = /* @__PURE__ */ new Map();\n  }\n  if (!store5.get(locales)) {\n    store5.set(locales, new Intl.Segmenter(locales, { granularity: \"word\" }));\n  }\n  const segments = store5.get(locales).segment(input);\n  let count = 0;\n  for (const segment of segments) {\n    if (segment.isWordLike) {\n      count++;\n    }\n  }\n  return count;\n}\n\n// src/utils/_isLuhnAlgo/_isLuhnAlgo.ts\nvar NON_DIGIT_REGEX = /\\D/gu;\n// @__NO_SIDE_EFFECTS__\nfunction _isLuhnAlgo(input) {\n  const number2 = input.replace(NON_DIGIT_REGEX, \"\");\n  let length2 = number2.length;\n  let bit = 1;\n  let sum = 0;\n  while (length2) {\n    const value2 = +number2[--length2];\n    bit ^= 1;\n    sum += bit ? [0, 2, 4, 6, 8, 1, 3, 5, 7, 9][value2] : value2;\n  }\n  return sum % 10 === 0;\n}\n\n// src/utils/_isValidObjectKey/_isValidObjectKey.ts\n// @__NO_SIDE_EFFECTS__\nfunction _isValidObjectKey(object2, key) {\n  return Object.hasOwn(object2, key) && key !== \"__proto__\" && key !== \"prototype\" && key !== \"constructor\";\n}\n\n// src/utils/_joinExpects/_joinExpects.ts\n// @__NO_SIDE_EFFECTS__\nfunction _joinExpects(values2, separator) {\n  const list = [...new Set(values2)];\n  if (list.length > 1) {\n    return `(${list.join(` ${separator} `)})`;\n  }\n  return list[0] ?? \"never\";\n}\n\n// src/utils/entriesFromList/entriesFromList.ts\n// @__NO_SIDE_EFFECTS__\nfunction entriesFromList(list, schema) {\n  const entries2 = {};\n  for (const key of list) {\n    entries2[key] = schema;\n  }\n  return entries2;\n}\n\n// src/utils/entriesFromObjects/entriesFromObjects.ts\n// @__NO_SIDE_EFFECTS__\nfunction entriesFromObjects(schemas) {\n  const entries2 = {};\n  for (const schema of schemas) {\n    Object.assign(entries2, schema.entries);\n  }\n  return entries2;\n}\n\n// src/utils/getDotPath/getDotPath.ts\n// @__NO_SIDE_EFFECTS__\nfunction getDotPath(issue) {\n  if (issue.path) {\n    let key = \"\";\n    for (const item of issue.path) {\n      if (typeof item.key === \"string\" || typeof item.key === \"number\") {\n        if (key) {\n          key += `.${item.key}`;\n        } else {\n          key += item.key;\n        }\n      } else {\n        return null;\n      }\n    }\n    return key;\n  }\n  return null;\n}\n\n// src/utils/isOfKind/isOfKind.ts\n// @__NO_SIDE_EFFECTS__\nfunction isOfKind(kind, object2) {\n  return object2.kind === kind;\n}\n\n// src/utils/isOfType/isOfType.ts\n// @__NO_SIDE_EFFECTS__\nfunction isOfType(type, object2) {\n  return object2.type === type;\n}\n\n// src/utils/isValiError/isValiError.ts\n// @__NO_SIDE_EFFECTS__\nfunction isValiError(error) {\n  return error instanceof ValiError;\n}\n\n// src/utils/ValiError/ValiError.ts\nvar ValiError = class extends Error {\n  /**\n   * Creates a Valibot error with useful information.\n   *\n   * @param issues The error issues.\n   */\n  constructor(issues) {\n    super(issues[0].message);\n    this.name = \"ValiError\";\n    this.issues = issues;\n  }\n};\n\n// src/actions/args/args.ts\n// @__NO_SIDE_EFFECTS__\nfunction args(schema) {\n  return {\n    kind: \"transformation\",\n    type: \"args\",\n    reference: args,\n    async: false,\n    schema,\n    \"~run\"(dataset, config2) {\n      const func = dataset.value;\n      dataset.value = (...args_) => {\n        const argsDataset = this.schema[\"~run\"]({ value: args_ }, config2);\n        if (argsDataset.issues) {\n          throw new ValiError(argsDataset.issues);\n        }\n        return func(...argsDataset.value);\n      };\n      return dataset;\n    }\n  };\n}\n\n// src/actions/args/argsAsync.ts\n// @__NO_SIDE_EFFECTS__\nfunction argsAsync(schema) {\n  return {\n    kind: \"transformation\",\n    type: \"args\",\n    reference: argsAsync,\n    async: false,\n    schema,\n    \"~run\"(dataset, config2) {\n      const func = dataset.value;\n      dataset.value = async (...args2) => {\n        const argsDataset = await schema[\"~run\"]({ value: args2 }, config2);\n        if (argsDataset.issues) {\n          throw new ValiError(argsDataset.issues);\n        }\n        return func(...argsDataset.value);\n      };\n      return dataset;\n    }\n  };\n}\n\n// src/actions/await/awaitAsync.ts\n// @__NO_SIDE_EFFECTS__\nfunction awaitAsync() {\n  return {\n    kind: \"transformation\",\n    type: \"await\",\n    reference: awaitAsync,\n    async: true,\n    async \"~run\"(dataset) {\n      dataset.value = await dataset.value;\n      return dataset;\n    }\n  };\n}\n\n// src/regex.ts\nvar BASE64_REGEX = /^(?:[\\da-z+/]{4})*(?:[\\da-z+/]{2}==|[\\da-z+/]{3}=)?$/iu;\nvar BIC_REGEX = /^[A-Z]{6}(?!00)[\\dA-Z]{2}(?:[\\dA-Z]{3})?$/u;\nvar CUID2_REGEX = /^[a-z][\\da-z]*$/u;\nvar DECIMAL_REGEX = /^[+-]?(?:\\d*\\.)?\\d+$/u;\nvar DIGITS_REGEX = /^\\d+$/u;\nvar EMAIL_REGEX = /^[\\w+-]+(?:\\.[\\w+-]+)*@[\\da-z]+(?:[.-][\\da-z]+)*\\.[a-z]{2,}$/iu;\nvar EMOJI_REGEX = (\n  // eslint-disable-next-line redos-detector/no-unsafe-regex, regexp/no-dupe-disjunctions -- false positives\n  /^(?:[\\u{1F1E6}-\\u{1F1FF}]{2}|\\u{1F3F4}[\\u{E0061}-\\u{E007A}]{2}[\\u{E0030}-\\u{E0039}\\u{E0061}-\\u{E007A}]{1,3}\\u{E007F}|(?:\\p{Emoji}\\uFE0F\\u20E3?|\\p{Emoji_Modifier_Base}\\p{Emoji_Modifier}?|\\p{Emoji_Presentation})(?:\\u200D(?:\\p{Emoji}\\uFE0F\\u20E3?|\\p{Emoji_Modifier_Base}\\p{Emoji_Modifier}?|\\p{Emoji_Presentation}))*)+$/u\n);\nvar HEXADECIMAL_REGEX = /^(?:0[hx])?[\\da-fA-F]+$/u;\nvar HEX_COLOR_REGEX = /^#(?:[\\da-fA-F]{3,4}|[\\da-fA-F]{6}|[\\da-fA-F]{8})$/u;\nvar IMEI_REGEX = /^\\d{15}$|^\\d{2}-\\d{6}-\\d{6}-\\d$/u;\nvar IPV4_REGEX = (\n  // eslint-disable-next-line redos-detector/no-unsafe-regex -- false positive\n  /^(?:(?:[1-9]|1\\d|2[0-4])?\\d|25[0-5])(?:\\.(?:(?:[1-9]|1\\d|2[0-4])?\\d|25[0-5])){3}$/u\n);\nvar IPV6_REGEX = /^(?:(?:[\\da-f]{1,4}:){7}[\\da-f]{1,4}|(?:[\\da-f]{1,4}:){1,7}:|(?:[\\da-f]{1,4}:){1,6}:[\\da-f]{1,4}|(?:[\\da-f]{1,4}:){1,5}(?::[\\da-f]{1,4}){1,2}|(?:[\\da-f]{1,4}:){1,4}(?::[\\da-f]{1,4}){1,3}|(?:[\\da-f]{1,4}:){1,3}(?::[\\da-f]{1,4}){1,4}|(?:[\\da-f]{1,4}:){1,2}(?::[\\da-f]{1,4}){1,5}|[\\da-f]{1,4}:(?::[\\da-f]{1,4}){1,6}|:(?:(?::[\\da-f]{1,4}){1,7}|:)|fe80:(?::[\\da-f]{0,4}){0,4}%[\\da-z]+|::(?:f{4}(?::0{1,4})?:)?(?:(?:25[0-5]|(?:2[0-4]|1?\\d)?\\d)\\.){3}(?:25[0-5]|(?:2[0-4]|1?\\d)?\\d)|(?:[\\da-f]{1,4}:){1,4}:(?:(?:25[0-5]|(?:2[0-4]|1?\\d)?\\d)\\.){3}(?:25[0-5]|(?:2[0-4]|1?\\d)?\\d))$/iu;\nvar IP_REGEX = /^(?:(?:[1-9]|1\\d|2[0-4])?\\d|25[0-5])(?:\\.(?:(?:[1-9]|1\\d|2[0-4])?\\d|25[0-5])){3}$|^(?:(?:[\\da-f]{1,4}:){7}[\\da-f]{1,4}|(?:[\\da-f]{1,4}:){1,7}:|(?:[\\da-f]{1,4}:){1,6}:[\\da-f]{1,4}|(?:[\\da-f]{1,4}:){1,5}(?::[\\da-f]{1,4}){1,2}|(?:[\\da-f]{1,4}:){1,4}(?::[\\da-f]{1,4}){1,3}|(?:[\\da-f]{1,4}:){1,3}(?::[\\da-f]{1,4}){1,4}|(?:[\\da-f]{1,4}:){1,2}(?::[\\da-f]{1,4}){1,5}|[\\da-f]{1,4}:(?::[\\da-f]{1,4}){1,6}|:(?:(?::[\\da-f]{1,4}){1,7}|:)|fe80:(?::[\\da-f]{0,4}){0,4}%[\\da-z]+|::(?:f{4}(?::0{1,4})?:)?(?:(?:25[0-5]|(?:2[0-4]|1?\\d)?\\d)\\.){3}(?:25[0-5]|(?:2[0-4]|1?\\d)?\\d)|(?:[\\da-f]{1,4}:){1,4}:(?:(?:25[0-5]|(?:2[0-4]|1?\\d)?\\d)\\.){3}(?:25[0-5]|(?:2[0-4]|1?\\d)?\\d))$/iu;\nvar ISO_DATE_REGEX = /^\\d{4}-(?:0[1-9]|1[0-2])-(?:[12]\\d|0[1-9]|3[01])$/u;\nvar ISO_DATE_TIME_REGEX = /^\\d{4}-(?:0[1-9]|1[0-2])-(?:[12]\\d|0[1-9]|3[01])[T ](?:0\\d|1\\d|2[0-3]):[0-5]\\d$/u;\nvar ISO_TIME_REGEX = /^(?:0\\d|1\\d|2[0-3]):[0-5]\\d$/u;\nvar ISO_TIME_SECOND_REGEX = /^(?:0\\d|1\\d|2[0-3])(?::[0-5]\\d){2}$/u;\nvar ISO_TIMESTAMP_REGEX = /^\\d{4}-(?:0[1-9]|1[0-2])-(?:[12]\\d|0[1-9]|3[01])[T ](?:0\\d|1\\d|2[0-3])(?::[0-5]\\d){2}(?:\\.\\d{1,9})?(?:Z|[+-](?:0\\d|1\\d|2[0-3])(?::?[0-5]\\d)?)$/u;\nvar ISO_WEEK_REGEX = /^\\d{4}-W(?:0[1-9]|[1-4]\\d|5[0-3])$/u;\nvar MAC48_REGEX = /^(?:[\\da-f]{2}:){5}[\\da-f]{2}$|^(?:[\\da-f]{2}-){5}[\\da-f]{2}$|^(?:[\\da-f]{4}\\.){2}[\\da-f]{4}$/iu;\nvar MAC64_REGEX = /^(?:[\\da-f]{2}:){7}[\\da-f]{2}$|^(?:[\\da-f]{2}-){7}[\\da-f]{2}$|^(?:[\\da-f]{4}\\.){3}[\\da-f]{4}$|^(?:[\\da-f]{4}:){3}[\\da-f]{4}$/iu;\nvar MAC_REGEX = /^(?:[\\da-f]{2}:){5}[\\da-f]{2}$|^(?:[\\da-f]{2}-){5}[\\da-f]{2}$|^(?:[\\da-f]{4}\\.){2}[\\da-f]{4}$|^(?:[\\da-f]{2}:){7}[\\da-f]{2}$|^(?:[\\da-f]{2}-){7}[\\da-f]{2}$|^(?:[\\da-f]{4}\\.){3}[\\da-f]{4}$|^(?:[\\da-f]{4}:){3}[\\da-f]{4}$/iu;\nvar NANO_ID_REGEX = /^[\\w-]+$/u;\nvar OCTAL_REGEX = /^(?:0o)?[0-7]+$/u;\nvar RFC_EMAIL_REGEX = (\n  // eslint-disable-next-line regexp/prefer-w, no-useless-escape, regexp/no-useless-escape, regexp/require-unicode-regexp\n  /^[a-zA-Z0-9.!#$%&'*+\\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/\n);\nvar SLUG_REGEX = /^[\\da-z]+(?:[-_][\\da-z]+)*$/u;\nvar ULID_REGEX = /^[\\da-hjkmnp-tv-zA-HJKMNP-TV-Z]{26}$/u;\nvar UUID_REGEX = /^[\\da-f]{8}(?:-[\\da-f]{4}){3}-[\\da-f]{12}$/iu;\n\n// src/actions/base64/base64.ts\n// @__NO_SIDE_EFFECTS__\nfunction base64(message2) {\n  return {\n    kind: \"validation\",\n    type: \"base64\",\n    reference: base64,\n    async: false,\n    expects: null,\n    requirement: BASE64_REGEX,\n    message: message2,\n    \"~run\"(dataset, config2) {\n      if (dataset.typed && !this.requirement.test(dataset.value)) {\n        _addIssue(this, \"Base64\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/bic/bic.ts\n// @__NO_SIDE_EFFECTS__\nfunction bic(message2) {\n  return {\n    kind: \"validation\",\n    type: \"bic\",\n    reference: bic,\n    async: false,\n    expects: null,\n    requirement: BIC_REGEX,\n    message: message2,\n    \"~run\"(dataset, config2) {\n      if (dataset.typed && !this.requirement.test(dataset.value)) {\n        _addIssue(this, \"BIC\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/brand/brand.ts\n// @__NO_SIDE_EFFECTS__\nfunction brand(name) {\n  return {\n    kind: \"transformation\",\n    type: \"brand\",\n    reference: brand,\n    async: false,\n    name,\n    \"~run\"(dataset) {\n      return dataset;\n    }\n  };\n}\n\n// src/actions/bytes/bytes.ts\n// @__NO_SIDE_EFFECTS__\nfunction bytes(requirement, message2) {\n  return {\n    kind: \"validation\",\n    type: \"bytes\",\n    reference: bytes,\n    async: false,\n    expects: `${requirement}`,\n    requirement,\n    message: message2,\n    \"~run\"(dataset, config2) {\n      if (dataset.typed) {\n        const length2 = _getByteCount(dataset.value);\n        if (length2 !== this.requirement) {\n          _addIssue(this, \"bytes\", dataset, config2, {\n            received: `${length2}`\n          });\n        }\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/check/check.ts\n// @__NO_SIDE_EFFECTS__\nfunction check(requirement, message2) {\n  return {\n    kind: \"validation\",\n    type: \"check\",\n    reference: check,\n    async: false,\n    expects: null,\n    requirement,\n    message: message2,\n    \"~run\"(dataset, config2) {\n      if (dataset.typed && !this.requirement(dataset.value)) {\n        _addIssue(this, \"input\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/check/checkAsync.ts\n// @__NO_SIDE_EFFECTS__\nfunction checkAsync(requirement, message2) {\n  return {\n    kind: \"validation\",\n    type: \"check\",\n    reference: checkAsync,\n    async: true,\n    expects: null,\n    requirement,\n    message: message2,\n    async \"~run\"(dataset, config2) {\n      if (dataset.typed && !await this.requirement(dataset.value)) {\n        _addIssue(this, \"input\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/checkItems/checkItems.ts\n// @__NO_SIDE_EFFECTS__\nfunction checkItems(requirement, message2) {\n  return {\n    kind: \"validation\",\n    type: \"check_items\",\n    reference: checkItems,\n    async: false,\n    expects: null,\n    requirement,\n    message: message2,\n    \"~run\"(dataset, config2) {\n      if (dataset.typed) {\n        for (let index = 0; index < dataset.value.length; index++) {\n          const item = dataset.value[index];\n          if (!this.requirement(item, index, dataset.value)) {\n            _addIssue(this, \"item\", dataset, config2, {\n              input: item,\n              path: [\n                {\n                  type: \"array\",\n                  origin: \"value\",\n                  input: dataset.value,\n                  key: index,\n                  value: item\n                }\n              ]\n            });\n          }\n        }\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/checkItems/checkItemsAsync.ts\n// @__NO_SIDE_EFFECTS__\nfunction checkItemsAsync(requirement, message2) {\n  return {\n    kind: \"validation\",\n    type: \"check_items\",\n    reference: checkItemsAsync,\n    async: true,\n    expects: null,\n    requirement,\n    message: message2,\n    async \"~run\"(dataset, config2) {\n      if (dataset.typed) {\n        const requirementResults = await Promise.all(\n          dataset.value.map(this.requirement)\n        );\n        for (let index = 0; index < dataset.value.length; index++) {\n          if (!requirementResults[index]) {\n            const item = dataset.value[index];\n            _addIssue(this, \"item\", dataset, config2, {\n              input: item,\n              path: [\n                {\n                  type: \"array\",\n                  origin: \"value\",\n                  input: dataset.value,\n                  key: index,\n                  value: item\n                }\n              ]\n            });\n          }\n        }\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/creditCard/creditCard.ts\nvar CREDIT_CARD_REGEX = /^(?:\\d{14,19}|\\d{4}(?: \\d{3,6}){2,4}|\\d{4}(?:-\\d{3,6}){2,4})$/u;\nvar SANITIZE_REGEX = /[- ]/gu;\nvar PROVIDER_REGEX_LIST = [\n  // American Express\n  /^3[47]\\d{13}$/u,\n  // Diners Club\n  /^3(?:0[0-5]|[68]\\d)\\d{11,13}$/u,\n  // Discover\n  /^6(?:011|5\\d{2})\\d{12,15}$/u,\n  // JCB\n  /^(?:2131|1800|35\\d{3})\\d{11}$/u,\n  // Mastercard\n  // eslint-disable-next-line redos-detector/no-unsafe-regex\n  /^5[1-5]\\d{2}|(?:222\\d|22[3-9]\\d|2[3-6]\\d{2}|27[01]\\d|2720)\\d{12}$/u,\n  // UnionPay\n  /^(?:6[27]\\d{14,17}|81\\d{14,17})$/u,\n  // Visa\n  /^4\\d{12}(?:\\d{3,6})?$/u\n];\n// @__NO_SIDE_EFFECTS__\nfunction creditCard(message2) {\n  return {\n    kind: \"validation\",\n    type: \"credit_card\",\n    reference: creditCard,\n    async: false,\n    expects: null,\n    requirement(input) {\n      let sanitized;\n      return CREDIT_CARD_REGEX.test(input) && // Remove any hyphens and blanks\n      (sanitized = input.replace(SANITIZE_REGEX, \"\")) && // Check if it matches a provider\n      PROVIDER_REGEX_LIST.some((regex2) => regex2.test(sanitized)) && // Check if passes luhn algorithm\n      _isLuhnAlgo(sanitized);\n    },\n    message: message2,\n    \"~run\"(dataset, config2) {\n      if (dataset.typed && !this.requirement(dataset.value)) {\n        _addIssue(this, \"credit card\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/cuid2/cuid2.ts\n// @__NO_SIDE_EFFECTS__\nfunction cuid2(message2) {\n  return {\n    kind: \"validation\",\n    type: \"cuid2\",\n    reference: cuid2,\n    async: false,\n    expects: null,\n    requirement: CUID2_REGEX,\n    message: message2,\n    \"~run\"(dataset, config2) {\n      if (dataset.typed && !this.requirement.test(dataset.value)) {\n        _addIssue(this, \"Cuid2\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/decimal/decimal.ts\n// @__NO_SIDE_EFFECTS__\nfunction decimal(message2) {\n  return {\n    kind: \"validation\",\n    type: \"decimal\",\n    reference: decimal,\n    async: false,\n    expects: null,\n    requirement: DECIMAL_REGEX,\n    message: message2,\n    \"~run\"(dataset, config2) {\n      if (dataset.typed && !this.requirement.test(dataset.value)) {\n        _addIssue(this, \"decimal\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/description/description.ts\n// @__NO_SIDE_EFFECTS__\nfunction description(description_) {\n  return {\n    kind: \"metadata\",\n    type: \"description\",\n    reference: description,\n    description: description_\n  };\n}\n\n// src/actions/digits/digits.ts\n// @__NO_SIDE_EFFECTS__\nfunction digits(message2) {\n  return {\n    kind: \"validation\",\n    type: \"digits\",\n    reference: digits,\n    async: false,\n    expects: null,\n    requirement: DIGITS_REGEX,\n    message: message2,\n    \"~run\"(dataset, config2) {\n      if (dataset.typed && !this.requirement.test(dataset.value)) {\n        _addIssue(this, \"digits\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/email/email.ts\n// @__NO_SIDE_EFFECTS__\nfunction email(message2) {\n  return {\n    kind: \"validation\",\n    type: \"email\",\n    reference: email,\n    expects: null,\n    async: false,\n    requirement: EMAIL_REGEX,\n    message: message2,\n    \"~run\"(dataset, config2) {\n      if (dataset.typed && !this.requirement.test(dataset.value)) {\n        _addIssue(this, \"email\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/emoji/emoji.ts\n// @__NO_SIDE_EFFECTS__\nfunction emoji(message2) {\n  return {\n    kind: \"validation\",\n    type: \"emoji\",\n    reference: emoji,\n    async: false,\n    expects: null,\n    requirement: EMOJI_REGEX,\n    message: message2,\n    \"~run\"(dataset, config2) {\n      if (dataset.typed && !this.requirement.test(dataset.value)) {\n        _addIssue(this, \"emoji\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/empty/empty.ts\n// @__NO_SIDE_EFFECTS__\nfunction empty(message2) {\n  return {\n    kind: \"validation\",\n    type: \"empty\",\n    reference: empty,\n    async: false,\n    expects: \"0\",\n    message: message2,\n    \"~run\"(dataset, config2) {\n      if (dataset.typed && dataset.value.length > 0) {\n        _addIssue(this, \"length\", dataset, config2, {\n          received: `${dataset.value.length}`\n        });\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/endsWith/endsWith.ts\n// @__NO_SIDE_EFFECTS__\nfunction endsWith(requirement, message2) {\n  return {\n    kind: \"validation\",\n    type: \"ends_with\",\n    reference: endsWith,\n    async: false,\n    expects: `\"${requirement}\"`,\n    requirement,\n    message: message2,\n    \"~run\"(dataset, config2) {\n      if (dataset.typed && !dataset.value.endsWith(this.requirement)) {\n        _addIssue(this, \"end\", dataset, config2, {\n          received: `\"${dataset.value.slice(-this.requirement.length)}\"`\n        });\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/entries/entries.ts\n// @__NO_SIDE_EFFECTS__\nfunction entries(requirement, message2) {\n  return {\n    kind: \"validation\",\n    type: \"entries\",\n    reference: entries,\n    async: false,\n    expects: `${requirement}`,\n    requirement,\n    message: message2,\n    \"~run\"(dataset, config2) {\n      if (!dataset.typed) return dataset;\n      const count = Object.keys(dataset.value).length;\n      if (dataset.typed && count !== this.requirement) {\n        _addIssue(this, \"entries\", dataset, config2, {\n          received: `${count}`\n        });\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/everyItem/everyItem.ts\n// @__NO_SIDE_EFFECTS__\nfunction everyItem(requirement, message2) {\n  return {\n    kind: \"validation\",\n    type: \"every_item\",\n    reference: everyItem,\n    async: false,\n    expects: null,\n    requirement,\n    message: message2,\n    \"~run\"(dataset, config2) {\n      if (dataset.typed && !dataset.value.every(this.requirement)) {\n        _addIssue(this, \"item\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/excludes/excludes.ts\n// @__NO_SIDE_EFFECTS__\nfunction excludes(requirement, message2) {\n  const received = _stringify(requirement);\n  return {\n    kind: \"validation\",\n    type: \"excludes\",\n    reference: excludes,\n    async: false,\n    expects: `!${received}`,\n    requirement,\n    message: message2,\n    \"~run\"(dataset, config2) {\n      if (dataset.typed && dataset.value.includes(this.requirement)) {\n        _addIssue(this, \"content\", dataset, config2, { received });\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/filterItems/filterItems.ts\n// @__NO_SIDE_EFFECTS__\nfunction filterItems(operation) {\n  return {\n    kind: \"transformation\",\n    type: \"filter_items\",\n    reference: filterItems,\n    async: false,\n    operation,\n    \"~run\"(dataset) {\n      dataset.value = dataset.value.filter(this.operation);\n      return dataset;\n    }\n  };\n}\n\n// src/actions/findItem/findItem.ts\n// @__NO_SIDE_EFFECTS__\nfunction findItem(operation) {\n  return {\n    kind: \"transformation\",\n    type: \"find_item\",\n    reference: findItem,\n    async: false,\n    operation,\n    \"~run\"(dataset) {\n      dataset.value = dataset.value.find(this.operation);\n      return dataset;\n    }\n  };\n}\n\n// src/actions/finite/finite.ts\n// @__NO_SIDE_EFFECTS__\nfunction finite(message2) {\n  return {\n    kind: \"validation\",\n    type: \"finite\",\n    reference: finite,\n    async: false,\n    expects: null,\n    requirement: Number.isFinite,\n    message: message2,\n    \"~run\"(dataset, config2) {\n      if (dataset.typed && !this.requirement(dataset.value)) {\n        _addIssue(this, \"finite\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/flavor/flavor.ts\n// @__NO_SIDE_EFFECTS__\nfunction flavor(name) {\n  return {\n    kind: \"transformation\",\n    type: \"flavor\",\n    reference: flavor,\n    async: false,\n    name,\n    \"~run\"(dataset) {\n      return dataset;\n    }\n  };\n}\n\n// src/actions/graphemes/graphemes.ts\n// @__NO_SIDE_EFFECTS__\nfunction graphemes(requirement, message2) {\n  return {\n    kind: \"validation\",\n    type: \"graphemes\",\n    reference: graphemes,\n    async: false,\n    expects: `${requirement}`,\n    requirement,\n    message: message2,\n    \"~run\"(dataset, config2) {\n      if (dataset.typed) {\n        const count = _getGraphemeCount(dataset.value);\n        if (count !== this.requirement) {\n          _addIssue(this, \"graphemes\", dataset, config2, {\n            received: `${count}`\n          });\n        }\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/gtValue/gtValue.ts\n// @__NO_SIDE_EFFECTS__\nfunction gtValue(requirement, message2) {\n  return {\n    kind: \"validation\",\n    type: \"gt_value\",\n    reference: gtValue,\n    async: false,\n    expects: `>${requirement instanceof Date ? requirement.toJSON() : _stringify(requirement)}`,\n    requirement,\n    message: message2,\n    \"~run\"(dataset, config2) {\n      if (dataset.typed && !(dataset.value > this.requirement)) {\n        _addIssue(this, \"value\", dataset, config2, {\n          received: dataset.value instanceof Date ? dataset.value.toJSON() : _stringify(dataset.value)\n        });\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/hash/hash.ts\nvar HASH_LENGTHS = {\n  md4: 32,\n  md5: 32,\n  sha1: 40,\n  sha256: 64,\n  sha384: 96,\n  sha512: 128,\n  ripemd128: 32,\n  ripemd160: 40,\n  tiger128: 32,\n  tiger160: 40,\n  tiger192: 48,\n  crc32: 8,\n  crc32b: 8,\n  adler32: 8\n};\n// @__NO_SIDE_EFFECTS__\nfunction hash(types, message2) {\n  return {\n    kind: \"validation\",\n    type: \"hash\",\n    reference: hash,\n    expects: null,\n    async: false,\n    requirement: RegExp(\n      types.map((type) => `^[a-f0-9]{${HASH_LENGTHS[type]}}$`).join(\"|\"),\n      \"iu\"\n    ),\n    message: message2,\n    \"~run\"(dataset, config2) {\n      if (dataset.typed && !this.requirement.test(dataset.value)) {\n        _addIssue(this, \"hash\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/hexadecimal/hexadecimal.ts\n// @__NO_SIDE_EFFECTS__\nfunction hexadecimal(message2) {\n  return {\n    kind: \"validation\",\n    type: \"hexadecimal\",\n    reference: hexadecimal,\n    async: false,\n    expects: null,\n    requirement: HEXADECIMAL_REGEX,\n    message: message2,\n    \"~run\"(dataset, config2) {\n      if (dataset.typed && !this.requirement.test(dataset.value)) {\n        _addIssue(this, \"hexadecimal\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/hexColor/hexColor.ts\n// @__NO_SIDE_EFFECTS__\nfunction hexColor(message2) {\n  return {\n    kind: \"validation\",\n    type: \"hex_color\",\n    reference: hexColor,\n    async: false,\n    expects: null,\n    requirement: HEX_COLOR_REGEX,\n    message: message2,\n    \"~run\"(dataset, config2) {\n      if (dataset.typed && !this.requirement.test(dataset.value)) {\n        _addIssue(this, \"hex color\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/imei/imei.ts\n// @__NO_SIDE_EFFECTS__\nfunction imei(message2) {\n  return {\n    kind: \"validation\",\n    type: \"imei\",\n    reference: imei,\n    async: false,\n    expects: null,\n    requirement(input) {\n      return IMEI_REGEX.test(input) && _isLuhnAlgo(input);\n    },\n    message: message2,\n    \"~run\"(dataset, config2) {\n      if (dataset.typed && !this.requirement(dataset.value)) {\n        _addIssue(this, \"IMEI\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/includes/includes.ts\n// @__NO_SIDE_EFFECTS__\nfunction includes(requirement, message2) {\n  const expects = _stringify(requirement);\n  return {\n    kind: \"validation\",\n    type: \"includes\",\n    reference: includes,\n    async: false,\n    expects,\n    requirement,\n    message: message2,\n    \"~run\"(dataset, config2) {\n      if (dataset.typed && !dataset.value.includes(this.requirement)) {\n        _addIssue(this, \"content\", dataset, config2, {\n          received: `!${expects}`\n        });\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/integer/integer.ts\n// @__NO_SIDE_EFFECTS__\nfunction integer(message2) {\n  return {\n    kind: \"validation\",\n    type: \"integer\",\n    reference: integer,\n    async: false,\n    expects: null,\n    requirement: Number.isInteger,\n    message: message2,\n    \"~run\"(dataset, config2) {\n      if (dataset.typed && !this.requirement(dataset.value)) {\n        _addIssue(this, \"integer\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/ip/ip.ts\n// @__NO_SIDE_EFFECTS__\nfunction ip(message2) {\n  return {\n    kind: \"validation\",\n    type: \"ip\",\n    reference: ip,\n    async: false,\n    expects: null,\n    requirement: IP_REGEX,\n    message: message2,\n    \"~run\"(dataset, config2) {\n      if (dataset.typed && !this.requirement.test(dataset.value)) {\n        _addIssue(this, \"IP\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/ipv4/ipv4.ts\n// @__NO_SIDE_EFFECTS__\nfunction ipv4(message2) {\n  return {\n    kind: \"validation\",\n    type: \"ipv4\",\n    reference: ipv4,\n    async: false,\n    expects: null,\n    requirement: IPV4_REGEX,\n    message: message2,\n    \"~run\"(dataset, config2) {\n      if (dataset.typed && !this.requirement.test(dataset.value)) {\n        _addIssue(this, \"IPv4\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/ipv6/ipv6.ts\n// @__NO_SIDE_EFFECTS__\nfunction ipv6(message2) {\n  return {\n    kind: \"validation\",\n    type: \"ipv6\",\n    reference: ipv6,\n    async: false,\n    expects: null,\n    requirement: IPV6_REGEX,\n    message: message2,\n    \"~run\"(dataset, config2) {\n      if (dataset.typed && !this.requirement.test(dataset.value)) {\n        _addIssue(this, \"IPv6\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/isoDate/isoDate.ts\n// @__NO_SIDE_EFFECTS__\nfunction isoDate(message2) {\n  return {\n    kind: \"validation\",\n    type: \"iso_date\",\n    reference: isoDate,\n    async: false,\n    expects: null,\n    requirement: ISO_DATE_REGEX,\n    message: message2,\n    \"~run\"(dataset, config2) {\n      if (dataset.typed && !this.requirement.test(dataset.value)) {\n        _addIssue(this, \"date\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/isoDateTime/isoDateTime.ts\n// @__NO_SIDE_EFFECTS__\nfunction isoDateTime(message2) {\n  return {\n    kind: \"validation\",\n    type: \"iso_date_time\",\n    reference: isoDateTime,\n    async: false,\n    expects: null,\n    requirement: ISO_DATE_TIME_REGEX,\n    message: message2,\n    \"~run\"(dataset, config2) {\n      if (dataset.typed && !this.requirement.test(dataset.value)) {\n        _addIssue(this, \"date-time\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/isoTime/isoTime.ts\n// @__NO_SIDE_EFFECTS__\nfunction isoTime(message2) {\n  return {\n    kind: \"validation\",\n    type: \"iso_time\",\n    reference: isoTime,\n    async: false,\n    expects: null,\n    requirement: ISO_TIME_REGEX,\n    message: message2,\n    \"~run\"(dataset, config2) {\n      if (dataset.typed && !this.requirement.test(dataset.value)) {\n        _addIssue(this, \"time\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/isoTimeSecond/isoTimeSecond.ts\n// @__NO_SIDE_EFFECTS__\nfunction isoTimeSecond(message2) {\n  return {\n    kind: \"validation\",\n    type: \"iso_time_second\",\n    reference: isoTimeSecond,\n    async: false,\n    expects: null,\n    requirement: ISO_TIME_SECOND_REGEX,\n    message: message2,\n    \"~run\"(dataset, config2) {\n      if (dataset.typed && !this.requirement.test(dataset.value)) {\n        _addIssue(this, \"time-second\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/isoTimestamp/isoTimestamp.ts\n// @__NO_SIDE_EFFECTS__\nfunction isoTimestamp(message2) {\n  return {\n    kind: \"validation\",\n    type: \"iso_timestamp\",\n    reference: isoTimestamp,\n    async: false,\n    expects: null,\n    requirement: ISO_TIMESTAMP_REGEX,\n    message: message2,\n    \"~run\"(dataset, config2) {\n      if (dataset.typed && !this.requirement.test(dataset.value)) {\n        _addIssue(this, \"timestamp\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/isoWeek/isoWeek.ts\n// @__NO_SIDE_EFFECTS__\nfunction isoWeek(message2) {\n  return {\n    kind: \"validation\",\n    type: \"iso_week\",\n    reference: isoWeek,\n    async: false,\n    expects: null,\n    requirement: ISO_WEEK_REGEX,\n    message: message2,\n    \"~run\"(dataset, config2) {\n      if (dataset.typed && !this.requirement.test(dataset.value)) {\n        _addIssue(this, \"week\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/length/length.ts\n// @__NO_SIDE_EFFECTS__\nfunction length(requirement, message2) {\n  return {\n    kind: \"validation\",\n    type: \"length\",\n    reference: length,\n    async: false,\n    expects: `${requirement}`,\n    requirement,\n    message: message2,\n    \"~run\"(dataset, config2) {\n      if (dataset.typed && dataset.value.length !== this.requirement) {\n        _addIssue(this, \"length\", dataset, config2, {\n          received: `${dataset.value.length}`\n        });\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/ltValue/ltValue.ts\n// @__NO_SIDE_EFFECTS__\nfunction ltValue(requirement, message2) {\n  return {\n    kind: \"validation\",\n    type: \"lt_value\",\n    reference: ltValue,\n    async: false,\n    expects: `<${requirement instanceof Date ? requirement.toJSON() : _stringify(requirement)}`,\n    requirement,\n    message: message2,\n    \"~run\"(dataset, config2) {\n      if (dataset.typed && !(dataset.value < this.requirement)) {\n        _addIssue(this, \"value\", dataset, config2, {\n          received: dataset.value instanceof Date ? dataset.value.toJSON() : _stringify(dataset.value)\n        });\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/mac/mac.ts\n// @__NO_SIDE_EFFECTS__\nfunction mac(message2) {\n  return {\n    kind: \"validation\",\n    type: \"mac\",\n    reference: mac,\n    async: false,\n    expects: null,\n    requirement: MAC_REGEX,\n    message: message2,\n    \"~run\"(dataset, config2) {\n      if (dataset.typed && !this.requirement.test(dataset.value)) {\n        _addIssue(this, \"MAC\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/mac48/mac48.ts\n// @__NO_SIDE_EFFECTS__\nfunction mac48(message2) {\n  return {\n    kind: \"validation\",\n    type: \"mac48\",\n    reference: mac48,\n    async: false,\n    expects: null,\n    requirement: MAC48_REGEX,\n    message: message2,\n    \"~run\"(dataset, config2) {\n      if (dataset.typed && !this.requirement.test(dataset.value)) {\n        _addIssue(this, \"48-bit MAC\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/mac64/mac64.ts\n// @__NO_SIDE_EFFECTS__\nfunction mac64(message2) {\n  return {\n    kind: \"validation\",\n    type: \"mac64\",\n    reference: mac64,\n    async: false,\n    expects: null,\n    requirement: MAC64_REGEX,\n    message: message2,\n    \"~run\"(dataset, config2) {\n      if (dataset.typed && !this.requirement.test(dataset.value)) {\n        _addIssue(this, \"64-bit MAC\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/mapItems/mapItems.ts\n// @__NO_SIDE_EFFECTS__\nfunction mapItems(operation) {\n  return {\n    kind: \"transformation\",\n    type: \"map_items\",\n    reference: mapItems,\n    async: false,\n    operation,\n    \"~run\"(dataset) {\n      dataset.value = dataset.value.map(this.operation);\n      return dataset;\n    }\n  };\n}\n\n// src/actions/maxBytes/maxBytes.ts\n// @__NO_SIDE_EFFECTS__\nfunction maxBytes(requirement, message2) {\n  return {\n    kind: \"validation\",\n    type: \"max_bytes\",\n    reference: maxBytes,\n    async: false,\n    expects: `<=${requirement}`,\n    requirement,\n    message: message2,\n    \"~run\"(dataset, config2) {\n      if (dataset.typed) {\n        const length2 = _getByteCount(dataset.value);\n        if (length2 > this.requirement) {\n          _addIssue(this, \"bytes\", dataset, config2, {\n            received: `${length2}`\n          });\n        }\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/maxEntries/maxEntries.ts\n// @__NO_SIDE_EFFECTS__\nfunction maxEntries(requirement, message2) {\n  return {\n    kind: \"validation\",\n    type: \"max_entries\",\n    reference: maxEntries,\n    async: false,\n    expects: `<=${requirement}`,\n    requirement,\n    message: message2,\n    \"~run\"(dataset, config2) {\n      if (!dataset.typed) return dataset;\n      const count = Object.keys(dataset.value).length;\n      if (dataset.typed && count > this.requirement) {\n        _addIssue(this, \"entries\", dataset, config2, {\n          received: `${count}`\n        });\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/maxGraphemes/maxGraphemes.ts\n// @__NO_SIDE_EFFECTS__\nfunction maxGraphemes(requirement, message2) {\n  return {\n    kind: \"validation\",\n    type: \"max_graphemes\",\n    reference: maxGraphemes,\n    async: false,\n    expects: `<=${requirement}`,\n    requirement,\n    message: message2,\n    \"~run\"(dataset, config2) {\n      if (dataset.typed) {\n        const count = _getGraphemeCount(dataset.value);\n        if (count > this.requirement) {\n          _addIssue(this, \"graphemes\", dataset, config2, {\n            received: `${count}`\n          });\n        }\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/maxLength/maxLength.ts\n// @__NO_SIDE_EFFECTS__\nfunction maxLength(requirement, message2) {\n  return {\n    kind: \"validation\",\n    type: \"max_length\",\n    reference: maxLength,\n    async: false,\n    expects: `<=${requirement}`,\n    requirement,\n    message: message2,\n    \"~run\"(dataset, config2) {\n      if (dataset.typed && dataset.value.length > this.requirement) {\n        _addIssue(this, \"length\", dataset, config2, {\n          received: `${dataset.value.length}`\n        });\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/maxSize/maxSize.ts\n// @__NO_SIDE_EFFECTS__\nfunction maxSize(requirement, message2) {\n  return {\n    kind: \"validation\",\n    type: \"max_size\",\n    reference: maxSize,\n    async: false,\n    expects: `<=${requirement}`,\n    requirement,\n    message: message2,\n    \"~run\"(dataset, config2) {\n      if (dataset.typed && dataset.value.size > this.requirement) {\n        _addIssue(this, \"size\", dataset, config2, {\n          received: `${dataset.value.size}`\n        });\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/maxValue/maxValue.ts\n// @__NO_SIDE_EFFECTS__\nfunction maxValue(requirement, message2) {\n  return {\n    kind: \"validation\",\n    type: \"max_value\",\n    reference: maxValue,\n    async: false,\n    expects: `<=${requirement instanceof Date ? requirement.toJSON() : _stringify(requirement)}`,\n    requirement,\n    message: message2,\n    \"~run\"(dataset, config2) {\n      if (dataset.typed && !(dataset.value <= this.requirement)) {\n        _addIssue(this, \"value\", dataset, config2, {\n          received: dataset.value instanceof Date ? dataset.value.toJSON() : _stringify(dataset.value)\n        });\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/maxWords/maxWords.ts\n// @__NO_SIDE_EFFECTS__\nfunction maxWords(locales, requirement, message2) {\n  return {\n    kind: \"validation\",\n    type: \"max_words\",\n    reference: maxWords,\n    async: false,\n    expects: `<=${requirement}`,\n    locales,\n    requirement,\n    message: message2,\n    \"~run\"(dataset, config2) {\n      if (dataset.typed) {\n        const count = _getWordCount(this.locales, dataset.value);\n        if (count > this.requirement) {\n          _addIssue(this, \"words\", dataset, config2, {\n            received: `${count}`\n          });\n        }\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/metadata/metadata.ts\n// @__NO_SIDE_EFFECTS__\nfunction metadata(metadata_) {\n  return {\n    kind: \"metadata\",\n    type: \"metadata\",\n    reference: metadata,\n    metadata: metadata_\n  };\n}\n\n// src/actions/mimeType/mimeType.ts\n// @__NO_SIDE_EFFECTS__\nfunction mimeType(requirement, message2) {\n  return {\n    kind: \"validation\",\n    type: \"mime_type\",\n    reference: mimeType,\n    async: false,\n    expects: _joinExpects(\n      requirement.map((option) => `\"${option}\"`),\n      \"|\"\n    ),\n    requirement,\n    message: message2,\n    \"~run\"(dataset, config2) {\n      if (dataset.typed && !this.requirement.includes(dataset.value.type)) {\n        _addIssue(this, \"MIME type\", dataset, config2, {\n          received: `\"${dataset.value.type}\"`\n        });\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/minBytes/minBytes.ts\n// @__NO_SIDE_EFFECTS__\nfunction minBytes(requirement, message2) {\n  return {\n    kind: \"validation\",\n    type: \"min_bytes\",\n    reference: minBytes,\n    async: false,\n    expects: `>=${requirement}`,\n    requirement,\n    message: message2,\n    \"~run\"(dataset, config2) {\n      if (dataset.typed) {\n        const length2 = _getByteCount(dataset.value);\n        if (length2 < this.requirement) {\n          _addIssue(this, \"bytes\", dataset, config2, {\n            received: `${length2}`\n          });\n        }\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/minEntries/minEntries.ts\n// @__NO_SIDE_EFFECTS__\nfunction minEntries(requirement, message2) {\n  return {\n    kind: \"validation\",\n    type: \"min_entries\",\n    reference: minEntries,\n    async: false,\n    expects: `>=${requirement}`,\n    requirement,\n    message: message2,\n    \"~run\"(dataset, config2) {\n      if (!dataset.typed) return dataset;\n      const count = Object.keys(dataset.value).length;\n      if (dataset.typed && count < this.requirement) {\n        _addIssue(this, \"entries\", dataset, config2, {\n          received: `${count}`\n        });\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/minGraphemes/minGraphemes.ts\n// @__NO_SIDE_EFFECTS__\nfunction minGraphemes(requirement, message2) {\n  return {\n    kind: \"validation\",\n    type: \"min_graphemes\",\n    reference: minGraphemes,\n    async: false,\n    expects: `>=${requirement}`,\n    requirement,\n    message: message2,\n    \"~run\"(dataset, config2) {\n      if (dataset.typed) {\n        const count = _getGraphemeCount(dataset.value);\n        if (count < this.requirement) {\n          _addIssue(this, \"graphemes\", dataset, config2, {\n            received: `${count}`\n          });\n        }\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/minLength/minLength.ts\n// @__NO_SIDE_EFFECTS__\nfunction minLength(requirement, message2) {\n  return {\n    kind: \"validation\",\n    type: \"min_length\",\n    reference: minLength,\n    async: false,\n    expects: `>=${requirement}`,\n    requirement,\n    message: message2,\n    \"~run\"(dataset, config2) {\n      if (dataset.typed && dataset.value.length < this.requirement) {\n        _addIssue(this, \"length\", dataset, config2, {\n          received: `${dataset.value.length}`\n        });\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/minSize/minSize.ts\n// @__NO_SIDE_EFFECTS__\nfunction minSize(requirement, message2) {\n  return {\n    kind: \"validation\",\n    type: \"min_size\",\n    reference: minSize,\n    async: false,\n    expects: `>=${requirement}`,\n    requirement,\n    message: message2,\n    \"~run\"(dataset, config2) {\n      if (dataset.typed && dataset.value.size < this.requirement) {\n        _addIssue(this, \"size\", dataset, config2, {\n          received: `${dataset.value.size}`\n        });\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/minValue/minValue.ts\n// @__NO_SIDE_EFFECTS__\nfunction minValue(requirement, message2) {\n  return {\n    kind: \"validation\",\n    type: \"min_value\",\n    reference: minValue,\n    async: false,\n    expects: `>=${requirement instanceof Date ? requirement.toJSON() : _stringify(requirement)}`,\n    requirement,\n    message: message2,\n    \"~run\"(dataset, config2) {\n      if (dataset.typed && !(dataset.value >= this.requirement)) {\n        _addIssue(this, \"value\", dataset, config2, {\n          received: dataset.value instanceof Date ? dataset.value.toJSON() : _stringify(dataset.value)\n        });\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/minWords/minWords.ts\n// @__NO_SIDE_EFFECTS__\nfunction minWords(locales, requirement, message2) {\n  return {\n    kind: \"validation\",\n    type: \"min_words\",\n    reference: minWords,\n    async: false,\n    expects: `>=${requirement}`,\n    locales,\n    requirement,\n    message: message2,\n    \"~run\"(dataset, config2) {\n      if (dataset.typed) {\n        const count = _getWordCount(this.locales, dataset.value);\n        if (count < this.requirement) {\n          _addIssue(this, \"words\", dataset, config2, {\n            received: `${count}`\n          });\n        }\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/multipleOf/multipleOf.ts\n// @__NO_SIDE_EFFECTS__\nfunction multipleOf(requirement, message2) {\n  return {\n    kind: \"validation\",\n    type: \"multiple_of\",\n    reference: multipleOf,\n    async: false,\n    expects: `%${requirement}`,\n    requirement,\n    message: message2,\n    \"~run\"(dataset, config2) {\n      if (dataset.typed && dataset.value % this.requirement != 0) {\n        _addIssue(this, \"multiple\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/nanoid/nanoid.ts\n// @__NO_SIDE_EFFECTS__\nfunction nanoid(message2) {\n  return {\n    kind: \"validation\",\n    type: \"nanoid\",\n    reference: nanoid,\n    async: false,\n    expects: null,\n    requirement: NANO_ID_REGEX,\n    message: message2,\n    \"~run\"(dataset, config2) {\n      if (dataset.typed && !this.requirement.test(dataset.value)) {\n        _addIssue(this, \"Nano ID\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/nonEmpty/nonEmpty.ts\n// @__NO_SIDE_EFFECTS__\nfunction nonEmpty(message2) {\n  return {\n    kind: \"validation\",\n    type: \"non_empty\",\n    reference: nonEmpty,\n    async: false,\n    expects: \"!0\",\n    message: message2,\n    \"~run\"(dataset, config2) {\n      if (dataset.typed && dataset.value.length === 0) {\n        _addIssue(this, \"length\", dataset, config2, {\n          received: \"0\"\n        });\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/normalize/normalize.ts\n// @__NO_SIDE_EFFECTS__\nfunction normalize(form) {\n  return {\n    kind: \"transformation\",\n    type: \"normalize\",\n    reference: normalize,\n    async: false,\n    form,\n    \"~run\"(dataset) {\n      dataset.value = dataset.value.normalize(this.form);\n      return dataset;\n    }\n  };\n}\n\n// src/actions/notBytes/notBytes.ts\n// @__NO_SIDE_EFFECTS__\nfunction notBytes(requirement, message2) {\n  return {\n    kind: \"validation\",\n    type: \"not_bytes\",\n    reference: notBytes,\n    async: false,\n    expects: `!${requirement}`,\n    requirement,\n    message: message2,\n    \"~run\"(dataset, config2) {\n      if (dataset.typed) {\n        const length2 = _getByteCount(dataset.value);\n        if (length2 === this.requirement) {\n          _addIssue(this, \"bytes\", dataset, config2, {\n            received: `${length2}`\n          });\n        }\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/notEntries/notEntries.ts\n// @__NO_SIDE_EFFECTS__\nfunction notEntries(requirement, message2) {\n  return {\n    kind: \"validation\",\n    type: \"not_entries\",\n    reference: notEntries,\n    async: false,\n    expects: `!${requirement}`,\n    requirement,\n    message: message2,\n    \"~run\"(dataset, config2) {\n      if (!dataset.typed) return dataset;\n      const count = Object.keys(dataset.value).length;\n      if (dataset.typed && count === this.requirement) {\n        _addIssue(this, \"entries\", dataset, config2, {\n          received: `${count}`\n        });\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/notGraphemes/notGraphemes.ts\n// @__NO_SIDE_EFFECTS__\nfunction notGraphemes(requirement, message2) {\n  return {\n    kind: \"validation\",\n    type: \"not_graphemes\",\n    reference: notGraphemes,\n    async: false,\n    expects: `!${requirement}`,\n    requirement,\n    message: message2,\n    \"~run\"(dataset, config2) {\n      if (dataset.typed) {\n        const count = _getGraphemeCount(dataset.value);\n        if (count === this.requirement) {\n          _addIssue(this, \"graphemes\", dataset, config2, {\n            received: `${count}`\n          });\n        }\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/notLength/notLength.ts\n// @__NO_SIDE_EFFECTS__\nfunction notLength(requirement, message2) {\n  return {\n    kind: \"validation\",\n    type: \"not_length\",\n    reference: notLength,\n    async: false,\n    expects: `!${requirement}`,\n    requirement,\n    message: message2,\n    \"~run\"(dataset, config2) {\n      if (dataset.typed && dataset.value.length === this.requirement) {\n        _addIssue(this, \"length\", dataset, config2, {\n          received: `${dataset.value.length}`\n        });\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/notSize/notSize.ts\n// @__NO_SIDE_EFFECTS__\nfunction notSize(requirement, message2) {\n  return {\n    kind: \"validation\",\n    type: \"not_size\",\n    reference: notSize,\n    async: false,\n    expects: `!${requirement}`,\n    requirement,\n    message: message2,\n    \"~run\"(dataset, config2) {\n      if (dataset.typed && dataset.value.size === this.requirement) {\n        _addIssue(this, \"size\", dataset, config2, {\n          received: `${dataset.value.size}`\n        });\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/notValue/notValue.ts\n// @__NO_SIDE_EFFECTS__\nfunction notValue(requirement, message2) {\n  return {\n    kind: \"validation\",\n    type: \"not_value\",\n    reference: notValue,\n    async: false,\n    expects: requirement instanceof Date ? `!${requirement.toJSON()}` : `!${_stringify(requirement)}`,\n    requirement,\n    message: message2,\n    \"~run\"(dataset, config2) {\n      if (dataset.typed && this.requirement <= dataset.value && this.requirement >= dataset.value) {\n        _addIssue(this, \"value\", dataset, config2, {\n          received: dataset.value instanceof Date ? dataset.value.toJSON() : _stringify(dataset.value)\n        });\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/notValues/notValues.ts\n// @__NO_SIDE_EFFECTS__\nfunction notValues(requirement, message2) {\n  return {\n    kind: \"validation\",\n    type: \"not_values\",\n    reference: notValues,\n    async: false,\n    expects: `!${_joinExpects(\n      requirement.map(\n        (value2) => value2 instanceof Date ? value2.toJSON() : _stringify(value2)\n      ),\n      \"|\"\n    )}`,\n    requirement,\n    message: message2,\n    \"~run\"(dataset, config2) {\n      if (dataset.typed && this.requirement.some(\n        (value2) => value2 <= dataset.value && value2 >= dataset.value\n      )) {\n        _addIssue(this, \"value\", dataset, config2, {\n          received: dataset.value instanceof Date ? dataset.value.toJSON() : _stringify(dataset.value)\n        });\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/notWords/notWords.ts\n// @__NO_SIDE_EFFECTS__\nfunction notWords(locales, requirement, message2) {\n  return {\n    kind: \"validation\",\n    type: \"not_words\",\n    reference: notWords,\n    async: false,\n    expects: `!${requirement}`,\n    locales,\n    requirement,\n    message: message2,\n    \"~run\"(dataset, config2) {\n      if (dataset.typed) {\n        const count = _getWordCount(this.locales, dataset.value);\n        if (count === this.requirement) {\n          _addIssue(this, \"words\", dataset, config2, {\n            received: `${count}`\n          });\n        }\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/octal/octal.ts\n// @__NO_SIDE_EFFECTS__\nfunction octal(message2) {\n  return {\n    kind: \"validation\",\n    type: \"octal\",\n    reference: octal,\n    async: false,\n    expects: null,\n    requirement: OCTAL_REGEX,\n    message: message2,\n    \"~run\"(dataset, config2) {\n      if (dataset.typed && !this.requirement.test(dataset.value)) {\n        _addIssue(this, \"octal\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/parseJson/parseJson.ts\n// @__NO_SIDE_EFFECTS__\nfunction parseJson(config2, message2) {\n  return {\n    kind: \"transformation\",\n    type: \"parse_json\",\n    reference: parseJson,\n    config: config2,\n    message: message2,\n    async: false,\n    \"~run\"(dataset, config3) {\n      try {\n        dataset.value = JSON.parse(dataset.value, this.config?.reviver);\n      } catch (error) {\n        if (error instanceof Error) {\n          _addIssue(this, \"JSON\", dataset, config3, {\n            received: `\"${error.message}\"`\n          });\n          dataset.typed = false;\n        } else {\n          throw error;\n        }\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/partialCheck/utils/_isPartiallyTyped/_isPartiallyTyped.ts\n// @__NO_SIDE_EFFECTS__\nfunction _isPartiallyTyped(dataset, paths) {\n  if (dataset.issues) {\n    for (const path of paths) {\n      for (const issue of dataset.issues) {\n        let typed = false;\n        const bound = Math.min(path.length, issue.path?.length ?? 0);\n        for (let index = 0; index < bound; index++) {\n          if (\n            // @ts-expect-error\n            path[index] !== issue.path[index].key && // @ts-expect-error\n            (path[index] !== \"$\" || issue.path[index].type !== \"array\")\n          ) {\n            typed = true;\n            break;\n          }\n        }\n        if (!typed) {\n          return false;\n        }\n      }\n    }\n  }\n  return true;\n}\n\n// src/actions/partialCheck/partialCheck.ts\n// @__NO_SIDE_EFFECTS__\nfunction partialCheck(paths, requirement, message2) {\n  return {\n    kind: \"validation\",\n    type: \"partial_check\",\n    reference: partialCheck,\n    async: false,\n    expects: null,\n    paths,\n    requirement,\n    message: message2,\n    \"~run\"(dataset, config2) {\n      if ((dataset.typed || _isPartiallyTyped(dataset, paths)) && // @ts-expect-error\n      !this.requirement(dataset.value)) {\n        _addIssue(this, \"input\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/partialCheck/partialCheckAsync.ts\n// @__NO_SIDE_EFFECTS__\nfunction partialCheckAsync(paths, requirement, message2) {\n  return {\n    kind: \"validation\",\n    type: \"partial_check\",\n    reference: partialCheckAsync,\n    async: true,\n    expects: null,\n    paths,\n    requirement,\n    message: message2,\n    async \"~run\"(dataset, config2) {\n      if ((dataset.typed || _isPartiallyTyped(dataset, paths)) && // @ts-expect-error\n      !await this.requirement(dataset.value)) {\n        _addIssue(this, \"input\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/rawCheck/rawCheck.ts\n// @__NO_SIDE_EFFECTS__\nfunction rawCheck(action) {\n  return {\n    kind: \"validation\",\n    type: \"raw_check\",\n    reference: rawCheck,\n    async: false,\n    expects: null,\n    \"~run\"(dataset, config2) {\n      action({\n        dataset,\n        config: config2,\n        addIssue: (info) => _addIssue(this, info?.label ?? \"input\", dataset, config2, info)\n      });\n      return dataset;\n    }\n  };\n}\n\n// src/actions/rawCheck/rawCheckAsync.ts\n// @__NO_SIDE_EFFECTS__\nfunction rawCheckAsync(action) {\n  return {\n    kind: \"validation\",\n    type: \"raw_check\",\n    reference: rawCheckAsync,\n    async: true,\n    expects: null,\n    async \"~run\"(dataset, config2) {\n      await action({\n        dataset,\n        config: config2,\n        addIssue: (info) => _addIssue(this, info?.label ?? \"input\", dataset, config2, info)\n      });\n      return dataset;\n    }\n  };\n}\n\n// src/actions/rawTransform/rawTransform.ts\n// @__NO_SIDE_EFFECTS__\nfunction rawTransform(action) {\n  return {\n    kind: \"transformation\",\n    type: \"raw_transform\",\n    reference: rawTransform,\n    async: false,\n    \"~run\"(dataset, config2) {\n      const output = action({\n        dataset,\n        config: config2,\n        addIssue: (info) => _addIssue(this, info?.label ?? \"input\", dataset, config2, info),\n        NEVER: null\n      });\n      if (dataset.issues) {\n        dataset.typed = false;\n      } else {\n        dataset.value = output;\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/rawTransform/rawTransformAsync.ts\n// @__NO_SIDE_EFFECTS__\nfunction rawTransformAsync(action) {\n  return {\n    kind: \"transformation\",\n    type: \"raw_transform\",\n    reference: rawTransformAsync,\n    async: true,\n    async \"~run\"(dataset, config2) {\n      const output = await action({\n        dataset,\n        config: config2,\n        addIssue: (info) => _addIssue(this, info?.label ?? \"input\", dataset, config2, info),\n        NEVER: null\n      });\n      if (dataset.issues) {\n        dataset.typed = false;\n      } else {\n        dataset.value = output;\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/readonly/readonly.ts\n// @__NO_SIDE_EFFECTS__\nfunction readonly() {\n  return {\n    kind: \"transformation\",\n    type: \"readonly\",\n    reference: readonly,\n    async: false,\n    \"~run\"(dataset) {\n      return dataset;\n    }\n  };\n}\n\n// src/actions/reduceItems/reduceItems.ts\n// @__NO_SIDE_EFFECTS__\nfunction reduceItems(operation, initial) {\n  return {\n    kind: \"transformation\",\n    type: \"reduce_items\",\n    reference: reduceItems,\n    async: false,\n    operation,\n    initial,\n    \"~run\"(dataset) {\n      dataset.value = dataset.value.reduce(this.operation, this.initial);\n      return dataset;\n    }\n  };\n}\n\n// src/actions/regex/regex.ts\n// @__NO_SIDE_EFFECTS__\nfunction regex(requirement, message2) {\n  return {\n    kind: \"validation\",\n    type: \"regex\",\n    reference: regex,\n    async: false,\n    expects: `${requirement}`,\n    requirement,\n    message: message2,\n    \"~run\"(dataset, config2) {\n      if (dataset.typed && !this.requirement.test(dataset.value)) {\n        _addIssue(this, \"format\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/returns/returns.ts\n// @__NO_SIDE_EFFECTS__\nfunction returns(schema) {\n  return {\n    kind: \"transformation\",\n    type: \"returns\",\n    reference: returns,\n    async: false,\n    schema,\n    \"~run\"(dataset, config2) {\n      const func = dataset.value;\n      dataset.value = (...args_) => {\n        const returnsDataset = this.schema[\"~run\"](\n          { value: func(...args_) },\n          config2\n        );\n        if (returnsDataset.issues) {\n          throw new ValiError(returnsDataset.issues);\n        }\n        return returnsDataset.value;\n      };\n      return dataset;\n    }\n  };\n}\n\n// src/actions/returns/returnsAsync.ts\n// @__NO_SIDE_EFFECTS__\nfunction returnsAsync(schema) {\n  return {\n    kind: \"transformation\",\n    type: \"returns\",\n    reference: returnsAsync,\n    async: false,\n    schema,\n    \"~run\"(dataset, config2) {\n      const func = dataset.value;\n      dataset.value = async (...args_) => {\n        const returnsDataset = await this.schema[\"~run\"](\n          { value: await func(...args_) },\n          config2\n        );\n        if (returnsDataset.issues) {\n          throw new ValiError(returnsDataset.issues);\n        }\n        return returnsDataset.value;\n      };\n      return dataset;\n    }\n  };\n}\n\n// src/actions/rfcEmail/rfcEmail.ts\n// @__NO_SIDE_EFFECTS__\nfunction rfcEmail(message2) {\n  return {\n    kind: \"validation\",\n    type: \"rfc_email\",\n    reference: rfcEmail,\n    expects: null,\n    async: false,\n    requirement: RFC_EMAIL_REGEX,\n    message: message2,\n    \"~run\"(dataset, config2) {\n      if (dataset.typed && !this.requirement.test(dataset.value)) {\n        _addIssue(this, \"email\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/safeInteger/safeInteger.ts\n// @__NO_SIDE_EFFECTS__\nfunction safeInteger(message2) {\n  return {\n    kind: \"validation\",\n    type: \"safe_integer\",\n    reference: safeInteger,\n    async: false,\n    expects: null,\n    requirement: Number.isSafeInteger,\n    message: message2,\n    \"~run\"(dataset, config2) {\n      if (dataset.typed && !this.requirement(dataset.value)) {\n        _addIssue(this, \"safe integer\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/size/size.ts\n// @__NO_SIDE_EFFECTS__\nfunction size(requirement, message2) {\n  return {\n    kind: \"validation\",\n    type: \"size\",\n    reference: size,\n    async: false,\n    expects: `${requirement}`,\n    requirement,\n    message: message2,\n    \"~run\"(dataset, config2) {\n      if (dataset.typed && dataset.value.size !== this.requirement) {\n        _addIssue(this, \"size\", dataset, config2, {\n          received: `${dataset.value.size}`\n        });\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/slug/slug.ts\n// @__NO_SIDE_EFFECTS__\nfunction slug(message2) {\n  return {\n    kind: \"validation\",\n    type: \"slug\",\n    reference: slug,\n    async: false,\n    expects: null,\n    requirement: SLUG_REGEX,\n    message: message2,\n    \"~run\"(dataset, config2) {\n      if (dataset.typed && !this.requirement.test(dataset.value)) {\n        _addIssue(this, \"slug\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/someItem/someItem.ts\n// @__NO_SIDE_EFFECTS__\nfunction someItem(requirement, message2) {\n  return {\n    kind: \"validation\",\n    type: \"some_item\",\n    reference: someItem,\n    async: false,\n    expects: null,\n    requirement,\n    message: message2,\n    \"~run\"(dataset, config2) {\n      if (dataset.typed && !dataset.value.some(this.requirement)) {\n        _addIssue(this, \"item\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/sortItems/sortItems.ts\n// @__NO_SIDE_EFFECTS__\nfunction sortItems(operation) {\n  return {\n    kind: \"transformation\",\n    type: \"sort_items\",\n    reference: sortItems,\n    async: false,\n    operation,\n    \"~run\"(dataset) {\n      dataset.value = dataset.value.sort(this.operation);\n      return dataset;\n    }\n  };\n}\n\n// src/actions/startsWith/startsWith.ts\n// @__NO_SIDE_EFFECTS__\nfunction startsWith(requirement, message2) {\n  return {\n    kind: \"validation\",\n    type: \"starts_with\",\n    reference: startsWith,\n    async: false,\n    expects: `\"${requirement}\"`,\n    requirement,\n    message: message2,\n    \"~run\"(dataset, config2) {\n      if (dataset.typed && !dataset.value.startsWith(this.requirement)) {\n        _addIssue(this, \"start\", dataset, config2, {\n          received: `\"${dataset.value.slice(0, this.requirement.length)}\"`\n        });\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/stringifyJson/stringifyJson.ts\n// @__NO_SIDE_EFFECTS__\nfunction stringifyJson(config2, message2) {\n  return {\n    kind: \"transformation\",\n    type: \"stringify_json\",\n    reference: stringifyJson,\n    message: message2,\n    config: config2,\n    async: false,\n    \"~run\"(dataset, config3) {\n      try {\n        const output = JSON.stringify(\n          dataset.value,\n          // @ts-expect-error\n          this.config?.replacer,\n          this.config?.space\n        );\n        if (output === void 0) {\n          _addIssue(this, \"JSON\", dataset, config3);\n          dataset.typed = false;\n        }\n        dataset.value = output;\n      } catch (error) {\n        if (error instanceof Error) {\n          _addIssue(this, \"JSON\", dataset, config3, {\n            received: `\"${error.message}\"`\n          });\n          dataset.typed = false;\n        } else {\n          throw error;\n        }\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/title/title.ts\n// @__NO_SIDE_EFFECTS__\nfunction title(title_) {\n  return {\n    kind: \"metadata\",\n    type: \"title\",\n    reference: title,\n    title: title_\n  };\n}\n\n// src/actions/toLowerCase/toLowerCase.ts\n// @__NO_SIDE_EFFECTS__\nfunction toLowerCase() {\n  return {\n    kind: \"transformation\",\n    type: \"to_lower_case\",\n    reference: toLowerCase,\n    async: false,\n    \"~run\"(dataset) {\n      dataset.value = dataset.value.toLowerCase();\n      return dataset;\n    }\n  };\n}\n\n// src/actions/toMaxValue/toMaxValue.ts\n// @__NO_SIDE_EFFECTS__\nfunction toMaxValue(requirement) {\n  return {\n    kind: \"transformation\",\n    type: \"to_max_value\",\n    reference: toMaxValue,\n    async: false,\n    requirement,\n    \"~run\"(dataset) {\n      dataset.value = dataset.value > this.requirement ? this.requirement : dataset.value;\n      return dataset;\n    }\n  };\n}\n\n// src/actions/toMinValue/toMinValue.ts\n// @__NO_SIDE_EFFECTS__\nfunction toMinValue(requirement) {\n  return {\n    kind: \"transformation\",\n    type: \"to_min_value\",\n    reference: toMinValue,\n    async: false,\n    requirement,\n    \"~run\"(dataset) {\n      dataset.value = dataset.value < this.requirement ? this.requirement : dataset.value;\n      return dataset;\n    }\n  };\n}\n\n// src/actions/toUpperCase/toUpperCase.ts\n// @__NO_SIDE_EFFECTS__\nfunction toUpperCase() {\n  return {\n    kind: \"transformation\",\n    type: \"to_upper_case\",\n    reference: toUpperCase,\n    async: false,\n    \"~run\"(dataset) {\n      dataset.value = dataset.value.toUpperCase();\n      return dataset;\n    }\n  };\n}\n\n// src/actions/transform/transform.ts\n// @__NO_SIDE_EFFECTS__\nfunction transform(operation) {\n  return {\n    kind: \"transformation\",\n    type: \"transform\",\n    reference: transform,\n    async: false,\n    operation,\n    \"~run\"(dataset) {\n      dataset.value = this.operation(dataset.value);\n      return dataset;\n    }\n  };\n}\n\n// src/actions/transform/transformAsync.ts\n// @__NO_SIDE_EFFECTS__\nfunction transformAsync(operation) {\n  return {\n    kind: \"transformation\",\n    type: \"transform\",\n    reference: transformAsync,\n    async: true,\n    operation,\n    async \"~run\"(dataset) {\n      dataset.value = await this.operation(dataset.value);\n      return dataset;\n    }\n  };\n}\n\n// src/actions/trim/trim.ts\n// @__NO_SIDE_EFFECTS__\nfunction trim() {\n  return {\n    kind: \"transformation\",\n    type: \"trim\",\n    reference: trim,\n    async: false,\n    \"~run\"(dataset) {\n      dataset.value = dataset.value.trim();\n      return dataset;\n    }\n  };\n}\n\n// src/actions/trimEnd/trimEnd.ts\n// @__NO_SIDE_EFFECTS__\nfunction trimEnd() {\n  return {\n    kind: \"transformation\",\n    type: \"trim_end\",\n    reference: trimEnd,\n    async: false,\n    \"~run\"(dataset) {\n      dataset.value = dataset.value.trimEnd();\n      return dataset;\n    }\n  };\n}\n\n// src/actions/trimStart/trimStart.ts\n// @__NO_SIDE_EFFECTS__\nfunction trimStart() {\n  return {\n    kind: \"transformation\",\n    type: \"trim_start\",\n    reference: trimStart,\n    async: false,\n    \"~run\"(dataset) {\n      dataset.value = dataset.value.trimStart();\n      return dataset;\n    }\n  };\n}\n\n// src/actions/ulid/ulid.ts\n// @__NO_SIDE_EFFECTS__\nfunction ulid(message2) {\n  return {\n    kind: \"validation\",\n    type: \"ulid\",\n    reference: ulid,\n    async: false,\n    expects: null,\n    requirement: ULID_REGEX,\n    message: message2,\n    \"~run\"(dataset, config2) {\n      if (dataset.typed && !this.requirement.test(dataset.value)) {\n        _addIssue(this, \"ULID\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/url/url.ts\n// @__NO_SIDE_EFFECTS__\nfunction url(message2) {\n  return {\n    kind: \"validation\",\n    type: \"url\",\n    reference: url,\n    async: false,\n    expects: null,\n    requirement(input) {\n      try {\n        new URL(input);\n        return true;\n      } catch {\n        return false;\n      }\n    },\n    message: message2,\n    \"~run\"(dataset, config2) {\n      if (dataset.typed && !this.requirement(dataset.value)) {\n        _addIssue(this, \"URL\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/uuid/uuid.ts\n// @__NO_SIDE_EFFECTS__\nfunction uuid(message2) {\n  return {\n    kind: \"validation\",\n    type: \"uuid\",\n    reference: uuid,\n    async: false,\n    expects: null,\n    requirement: UUID_REGEX,\n    message: message2,\n    \"~run\"(dataset, config2) {\n      if (dataset.typed && !this.requirement.test(dataset.value)) {\n        _addIssue(this, \"UUID\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/value/value.ts\n// @__NO_SIDE_EFFECTS__\nfunction value(requirement, message2) {\n  return {\n    kind: \"validation\",\n    type: \"value\",\n    reference: value,\n    async: false,\n    expects: requirement instanceof Date ? requirement.toJSON() : _stringify(requirement),\n    requirement,\n    message: message2,\n    \"~run\"(dataset, config2) {\n      if (dataset.typed && !(this.requirement <= dataset.value && this.requirement >= dataset.value)) {\n        _addIssue(this, \"value\", dataset, config2, {\n          received: dataset.value instanceof Date ? dataset.value.toJSON() : _stringify(dataset.value)\n        });\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/values/values.ts\n// @__NO_SIDE_EFFECTS__\nfunction values(requirement, message2) {\n  return {\n    kind: \"validation\",\n    type: \"values\",\n    reference: values,\n    async: false,\n    expects: `${_joinExpects(\n      requirement.map(\n        (value2) => value2 instanceof Date ? value2.toJSON() : _stringify(value2)\n      ),\n      \"|\"\n    )}`,\n    requirement,\n    message: message2,\n    \"~run\"(dataset, config2) {\n      if (dataset.typed && !this.requirement.some(\n        (value2) => value2 <= dataset.value && value2 >= dataset.value\n      )) {\n        _addIssue(this, \"value\", dataset, config2, {\n          received: dataset.value instanceof Date ? dataset.value.toJSON() : _stringify(dataset.value)\n        });\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/actions/words/words.ts\n// @__NO_SIDE_EFFECTS__\nfunction words(locales, requirement, message2) {\n  return {\n    kind: \"validation\",\n    type: \"words\",\n    reference: words,\n    async: false,\n    expects: `${requirement}`,\n    locales,\n    requirement,\n    message: message2,\n    \"~run\"(dataset, config2) {\n      if (dataset.typed) {\n        const count = _getWordCount(this.locales, dataset.value);\n        if (count !== this.requirement) {\n          _addIssue(this, \"words\", dataset, config2, {\n            received: `${count}`\n          });\n        }\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/methods/assert/assert.ts\nfunction assert(schema, input) {\n  const issues = schema[\"~run\"]({ value: input }, { abortEarly: true }).issues;\n  if (issues) {\n    throw new ValiError(issues);\n  }\n}\n\n// src/methods/config/config.ts\n// @__NO_SIDE_EFFECTS__\nfunction config(schema, config2) {\n  return {\n    ...schema,\n    get \"~standard\"() {\n      return _getStandardProps(this);\n    },\n    \"~run\"(dataset, config_) {\n      return schema[\"~run\"](dataset, { ...config_, ...config2 });\n    }\n  };\n}\n\n// src/methods/getFallback/getFallback.ts\n// @__NO_SIDE_EFFECTS__\nfunction getFallback(schema, dataset, config2) {\n  return typeof schema.fallback === \"function\" ? (\n    // @ts-expect-error\n    schema.fallback(dataset, config2)\n  ) : (\n    // @ts-expect-error\n    schema.fallback\n  );\n}\n\n// src/methods/fallback/fallback.ts\n// @__NO_SIDE_EFFECTS__\nfunction fallback(schema, fallback2) {\n  return {\n    ...schema,\n    fallback: fallback2,\n    get \"~standard\"() {\n      return _getStandardProps(this);\n    },\n    \"~run\"(dataset, config2) {\n      const outputDataset = schema[\"~run\"](dataset, config2);\n      return outputDataset.issues ? { typed: true, value: getFallback(this, outputDataset, config2) } : outputDataset;\n    }\n  };\n}\n\n// src/methods/fallback/fallbackAsync.ts\n// @__NO_SIDE_EFFECTS__\nfunction fallbackAsync(schema, fallback2) {\n  return {\n    ...schema,\n    fallback: fallback2,\n    async: true,\n    get \"~standard\"() {\n      return _getStandardProps(this);\n    },\n    async \"~run\"(dataset, config2) {\n      const outputDataset = await schema[\"~run\"](dataset, config2);\n      return outputDataset.issues ? {\n        typed: true,\n        value: await getFallback(this, outputDataset, config2)\n      } : outputDataset;\n    }\n  };\n}\n\n// src/methods/flatten/flatten.ts\n// @__NO_SIDE_EFFECTS__\nfunction flatten(issues) {\n  const flatErrors = {};\n  for (const issue of issues) {\n    if (issue.path) {\n      const dotPath = getDotPath(issue);\n      if (dotPath) {\n        if (!flatErrors.nested) {\n          flatErrors.nested = {};\n        }\n        if (flatErrors.nested[dotPath]) {\n          flatErrors.nested[dotPath].push(issue.message);\n        } else {\n          flatErrors.nested[dotPath] = [issue.message];\n        }\n      } else {\n        if (flatErrors.other) {\n          flatErrors.other.push(issue.message);\n        } else {\n          flatErrors.other = [issue.message];\n        }\n      }\n    } else {\n      if (flatErrors.root) {\n        flatErrors.root.push(issue.message);\n      } else {\n        flatErrors.root = [issue.message];\n      }\n    }\n  }\n  return flatErrors;\n}\n\n// src/methods/forward/forward.ts\n// @__NO_SIDE_EFFECTS__\nfunction forward(action, path) {\n  return {\n    ...action,\n    \"~run\"(dataset, config2) {\n      const prevIssues = dataset.issues && [...dataset.issues];\n      dataset = action[\"~run\"](dataset, config2);\n      if (dataset.issues) {\n        for (const issue of dataset.issues) {\n          if (!prevIssues?.includes(issue)) {\n            let pathInput = dataset.value;\n            for (const key of path) {\n              const pathValue = pathInput[key];\n              const pathItem = {\n                type: \"unknown\",\n                origin: \"value\",\n                input: pathInput,\n                key,\n                value: pathValue\n              };\n              if (issue.path) {\n                issue.path.push(pathItem);\n              } else {\n                issue.path = [pathItem];\n              }\n              if (!pathValue) {\n                break;\n              }\n              pathInput = pathValue;\n            }\n          }\n        }\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/methods/forward/forwardAsync.ts\n// @__NO_SIDE_EFFECTS__\nfunction forwardAsync(action, path) {\n  return {\n    ...action,\n    async: true,\n    async \"~run\"(dataset, config2) {\n      const prevIssues = dataset.issues && [...dataset.issues];\n      dataset = await action[\"~run\"](dataset, config2);\n      if (dataset.issues) {\n        for (const issue of dataset.issues) {\n          if (!prevIssues?.includes(issue)) {\n            let pathInput = dataset.value;\n            for (const key of path) {\n              const pathValue = pathInput[key];\n              const pathItem = {\n                type: \"unknown\",\n                origin: \"value\",\n                input: pathInput,\n                key,\n                value: pathValue\n              };\n              if (issue.path) {\n                issue.path.push(pathItem);\n              } else {\n                issue.path = [pathItem];\n              }\n              if (!pathValue) {\n                break;\n              }\n              pathInput = pathValue;\n            }\n          }\n        }\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/methods/getDefault/getDefault.ts\n// @__NO_SIDE_EFFECTS__\nfunction getDefault(schema, dataset, config2) {\n  return typeof schema.default === \"function\" ? (\n    // @ts-expect-error\n    schema.default(dataset, config2)\n  ) : (\n    // @ts-expect-error\n    schema.default\n  );\n}\n\n// src/methods/getDefaults/getDefaults.ts\n// @__NO_SIDE_EFFECTS__\nfunction getDefaults(schema) {\n  if (\"entries\" in schema) {\n    const object2 = {};\n    for (const key in schema.entries) {\n      object2[key] = /* @__PURE__ */ getDefaults(schema.entries[key]);\n    }\n    return object2;\n  }\n  if (\"items\" in schema) {\n    return schema.items.map(getDefaults);\n  }\n  return getDefault(schema);\n}\n\n// src/methods/getDefaults/getDefaultsAsync.ts\n// @__NO_SIDE_EFFECTS__\nasync function getDefaultsAsync(schema) {\n  if (\"entries\" in schema) {\n    return Object.fromEntries(\n      await Promise.all(\n        Object.entries(schema.entries).map(async ([key, value2]) => [\n          key,\n          await /* @__PURE__ */ getDefaultsAsync(value2)\n        ])\n      )\n    );\n  }\n  if (\"items\" in schema) {\n    return Promise.all(schema.items.map(getDefaultsAsync));\n  }\n  return getDefault(schema);\n}\n\n// src/methods/getDescription/getDescription.ts\n// @__NO_SIDE_EFFECTS__\nfunction getDescription(schema) {\n  return _getLastMetadata(schema, \"description\");\n}\n\n// src/methods/getFallbacks/getFallbacks.ts\n// @__NO_SIDE_EFFECTS__\nfunction getFallbacks(schema) {\n  if (\"entries\" in schema) {\n    const object2 = {};\n    for (const key in schema.entries) {\n      object2[key] = /* @__PURE__ */ getFallbacks(schema.entries[key]);\n    }\n    return object2;\n  }\n  if (\"items\" in schema) {\n    return schema.items.map(getFallbacks);\n  }\n  return getFallback(schema);\n}\n\n// src/methods/getFallbacks/getFallbacksAsync.ts\n// @__NO_SIDE_EFFECTS__\nasync function getFallbacksAsync(schema) {\n  if (\"entries\" in schema) {\n    return Object.fromEntries(\n      await Promise.all(\n        Object.entries(schema.entries).map(async ([key, value2]) => [\n          key,\n          await /* @__PURE__ */ getFallbacksAsync(value2)\n        ])\n      )\n    );\n  }\n  if (\"items\" in schema) {\n    return Promise.all(schema.items.map(getFallbacksAsync));\n  }\n  return getFallback(schema);\n}\n\n// src/methods/getMetadata/getMetadata.ts\n// @__NO_SIDE_EFFECTS__\nfunction getMetadata(schema) {\n  const result = {};\n  function depthFirstMerge(schema2) {\n    if (\"pipe\" in schema2) {\n      for (const item of schema2.pipe) {\n        if (item.kind === \"schema\" && \"pipe\" in item) {\n          depthFirstMerge(item);\n        } else if (item.kind === \"metadata\" && item.type === \"metadata\") {\n          Object.assign(result, item.metadata);\n        }\n      }\n    }\n  }\n  depthFirstMerge(schema);\n  return result;\n}\n\n// src/methods/getTitle/getTitle.ts\n// @__NO_SIDE_EFFECTS__\nfunction getTitle(schema) {\n  return _getLastMetadata(schema, \"title\");\n}\n\n// src/methods/is/is.ts\n// @__NO_SIDE_EFFECTS__\nfunction is(schema, input) {\n  return !schema[\"~run\"]({ value: input }, { abortEarly: true }).issues;\n}\n\n// src/schemas/any/any.ts\n// @__NO_SIDE_EFFECTS__\nfunction any() {\n  return {\n    kind: \"schema\",\n    type: \"any\",\n    reference: any,\n    expects: \"any\",\n    async: false,\n    get \"~standard\"() {\n      return _getStandardProps(this);\n    },\n    \"~run\"(dataset) {\n      dataset.typed = true;\n      return dataset;\n    }\n  };\n}\n\n// src/schemas/array/array.ts\n// @__NO_SIDE_EFFECTS__\nfunction array(item, message2) {\n  return {\n    kind: \"schema\",\n    type: \"array\",\n    reference: array,\n    expects: \"Array\",\n    async: false,\n    item,\n    message: message2,\n    get \"~standard\"() {\n      return _getStandardProps(this);\n    },\n    \"~run\"(dataset, config2) {\n      const input = dataset.value;\n      if (Array.isArray(input)) {\n        dataset.typed = true;\n        dataset.value = [];\n        for (let key = 0; key < input.length; key++) {\n          const value2 = input[key];\n          const itemDataset = this.item[\"~run\"]({ value: value2 }, config2);\n          if (itemDataset.issues) {\n            const pathItem = {\n              type: \"array\",\n              origin: \"value\",\n              input,\n              key,\n              value: value2\n            };\n            for (const issue of itemDataset.issues) {\n              if (issue.path) {\n                issue.path.unshift(pathItem);\n              } else {\n                issue.path = [pathItem];\n              }\n              dataset.issues?.push(issue);\n            }\n            if (!dataset.issues) {\n              dataset.issues = itemDataset.issues;\n            }\n            if (config2.abortEarly) {\n              dataset.typed = false;\n              break;\n            }\n          }\n          if (!itemDataset.typed) {\n            dataset.typed = false;\n          }\n          dataset.value.push(itemDataset.value);\n        }\n      } else {\n        _addIssue(this, \"type\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/schemas/array/arrayAsync.ts\n// @__NO_SIDE_EFFECTS__\nfunction arrayAsync(item, message2) {\n  return {\n    kind: \"schema\",\n    type: \"array\",\n    reference: arrayAsync,\n    expects: \"Array\",\n    async: true,\n    item,\n    message: message2,\n    get \"~standard\"() {\n      return _getStandardProps(this);\n    },\n    async \"~run\"(dataset, config2) {\n      const input = dataset.value;\n      if (Array.isArray(input)) {\n        dataset.typed = true;\n        dataset.value = [];\n        const itemDatasets = await Promise.all(\n          input.map((value2) => this.item[\"~run\"]({ value: value2 }, config2))\n        );\n        for (let key = 0; key < itemDatasets.length; key++) {\n          const itemDataset = itemDatasets[key];\n          if (itemDataset.issues) {\n            const pathItem = {\n              type: \"array\",\n              origin: \"value\",\n              input,\n              key,\n              value: input[key]\n            };\n            for (const issue of itemDataset.issues) {\n              if (issue.path) {\n                issue.path.unshift(pathItem);\n              } else {\n                issue.path = [pathItem];\n              }\n              dataset.issues?.push(issue);\n            }\n            if (!dataset.issues) {\n              dataset.issues = itemDataset.issues;\n            }\n            if (config2.abortEarly) {\n              dataset.typed = false;\n              break;\n            }\n          }\n          if (!itemDataset.typed) {\n            dataset.typed = false;\n          }\n          dataset.value.push(itemDataset.value);\n        }\n      } else {\n        _addIssue(this, \"type\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/schemas/bigint/bigint.ts\n// @__NO_SIDE_EFFECTS__\nfunction bigint(message2) {\n  return {\n    kind: \"schema\",\n    type: \"bigint\",\n    reference: bigint,\n    expects: \"bigint\",\n    async: false,\n    message: message2,\n    get \"~standard\"() {\n      return _getStandardProps(this);\n    },\n    \"~run\"(dataset, config2) {\n      if (typeof dataset.value === \"bigint\") {\n        dataset.typed = true;\n      } else {\n        _addIssue(this, \"type\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/schemas/blob/blob.ts\n// @__NO_SIDE_EFFECTS__\nfunction blob(message2) {\n  return {\n    kind: \"schema\",\n    type: \"blob\",\n    reference: blob,\n    expects: \"Blob\",\n    async: false,\n    message: message2,\n    get \"~standard\"() {\n      return _getStandardProps(this);\n    },\n    \"~run\"(dataset, config2) {\n      if (dataset.value instanceof Blob) {\n        dataset.typed = true;\n      } else {\n        _addIssue(this, \"type\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/schemas/boolean/boolean.ts\n// @__NO_SIDE_EFFECTS__\nfunction boolean(message2) {\n  return {\n    kind: \"schema\",\n    type: \"boolean\",\n    reference: boolean,\n    expects: \"boolean\",\n    async: false,\n    message: message2,\n    get \"~standard\"() {\n      return _getStandardProps(this);\n    },\n    \"~run\"(dataset, config2) {\n      if (typeof dataset.value === \"boolean\") {\n        dataset.typed = true;\n      } else {\n        _addIssue(this, \"type\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/schemas/custom/custom.ts\n// @__NO_SIDE_EFFECTS__\nfunction custom(check2, message2) {\n  return {\n    kind: \"schema\",\n    type: \"custom\",\n    reference: custom,\n    expects: \"unknown\",\n    async: false,\n    check: check2,\n    message: message2,\n    get \"~standard\"() {\n      return _getStandardProps(this);\n    },\n    \"~run\"(dataset, config2) {\n      if (this.check(dataset.value)) {\n        dataset.typed = true;\n      } else {\n        _addIssue(this, \"type\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/schemas/custom/customAsync.ts\n// @__NO_SIDE_EFFECTS__\nfunction customAsync(check2, message2) {\n  return {\n    kind: \"schema\",\n    type: \"custom\",\n    reference: customAsync,\n    expects: \"unknown\",\n    async: true,\n    check: check2,\n    message: message2,\n    get \"~standard\"() {\n      return _getStandardProps(this);\n    },\n    async \"~run\"(dataset, config2) {\n      if (await this.check(dataset.value)) {\n        dataset.typed = true;\n      } else {\n        _addIssue(this, \"type\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/schemas/date/date.ts\n// @__NO_SIDE_EFFECTS__\nfunction date(message2) {\n  return {\n    kind: \"schema\",\n    type: \"date\",\n    reference: date,\n    expects: \"Date\",\n    async: false,\n    message: message2,\n    get \"~standard\"() {\n      return _getStandardProps(this);\n    },\n    \"~run\"(dataset, config2) {\n      if (dataset.value instanceof Date) {\n        if (!isNaN(dataset.value)) {\n          dataset.typed = true;\n        } else {\n          _addIssue(this, \"type\", dataset, config2, {\n            received: '\"Invalid Date\"'\n          });\n        }\n      } else {\n        _addIssue(this, \"type\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/schemas/enum/enum.ts\n// @__NO_SIDE_EFFECTS__\nfunction enum_(enum__, message2) {\n  const options = [];\n  for (const key in enum__) {\n    if (`${+key}` !== key || typeof enum__[key] !== \"string\" || !Object.is(enum__[enum__[key]], +key)) {\n      options.push(enum__[key]);\n    }\n  }\n  return {\n    kind: \"schema\",\n    type: \"enum\",\n    reference: enum_,\n    expects: _joinExpects(options.map(_stringify), \"|\"),\n    async: false,\n    enum: enum__,\n    options,\n    message: message2,\n    get \"~standard\"() {\n      return _getStandardProps(this);\n    },\n    \"~run\"(dataset, config2) {\n      if (this.options.includes(dataset.value)) {\n        dataset.typed = true;\n      } else {\n        _addIssue(this, \"type\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/schemas/exactOptional/exactOptional.ts\n// @__NO_SIDE_EFFECTS__\nfunction exactOptional(wrapped, default_) {\n  return {\n    kind: \"schema\",\n    type: \"exact_optional\",\n    reference: exactOptional,\n    expects: wrapped.expects,\n    async: false,\n    wrapped,\n    default: default_,\n    get \"~standard\"() {\n      return _getStandardProps(this);\n    },\n    \"~run\"(dataset, config2) {\n      return this.wrapped[\"~run\"](dataset, config2);\n    }\n  };\n}\n\n// src/schemas/exactOptional/exactOptionalAsync.ts\n// @__NO_SIDE_EFFECTS__\nfunction exactOptionalAsync(wrapped, default_) {\n  return {\n    kind: \"schema\",\n    type: \"exact_optional\",\n    reference: exactOptionalAsync,\n    expects: wrapped.expects,\n    async: true,\n    wrapped,\n    default: default_,\n    get \"~standard\"() {\n      return _getStandardProps(this);\n    },\n    async \"~run\"(dataset, config2) {\n      return this.wrapped[\"~run\"](dataset, config2);\n    }\n  };\n}\n\n// src/schemas/file/file.ts\n// @__NO_SIDE_EFFECTS__\nfunction file(message2) {\n  return {\n    kind: \"schema\",\n    type: \"file\",\n    reference: file,\n    expects: \"File\",\n    async: false,\n    message: message2,\n    get \"~standard\"() {\n      return _getStandardProps(this);\n    },\n    \"~run\"(dataset, config2) {\n      if (dataset.value instanceof File) {\n        dataset.typed = true;\n      } else {\n        _addIssue(this, \"type\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/schemas/function/function.ts\n// @__NO_SIDE_EFFECTS__\nfunction function_(message2) {\n  return {\n    kind: \"schema\",\n    type: \"function\",\n    reference: function_,\n    expects: \"Function\",\n    async: false,\n    message: message2,\n    get \"~standard\"() {\n      return _getStandardProps(this);\n    },\n    \"~run\"(dataset, config2) {\n      if (typeof dataset.value === \"function\") {\n        dataset.typed = true;\n      } else {\n        _addIssue(this, \"type\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/schemas/instance/instance.ts\n// @__NO_SIDE_EFFECTS__\nfunction instance(class_, message2) {\n  return {\n    kind: \"schema\",\n    type: \"instance\",\n    reference: instance,\n    expects: class_.name,\n    async: false,\n    class: class_,\n    message: message2,\n    get \"~standard\"() {\n      return _getStandardProps(this);\n    },\n    \"~run\"(dataset, config2) {\n      if (dataset.value instanceof this.class) {\n        dataset.typed = true;\n      } else {\n        _addIssue(this, \"type\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/schemas/intersect/utils/_merge/_merge.ts\n// @__NO_SIDE_EFFECTS__\nfunction _merge(value1, value2) {\n  if (typeof value1 === typeof value2) {\n    if (value1 === value2 || value1 instanceof Date && value2 instanceof Date && +value1 === +value2) {\n      return { value: value1 };\n    }\n    if (value1 && value2 && value1.constructor === Object && value2.constructor === Object) {\n      for (const key in value2) {\n        if (key in value1) {\n          const dataset = /* @__PURE__ */ _merge(value1[key], value2[key]);\n          if (dataset.issue) {\n            return dataset;\n          }\n          value1[key] = dataset.value;\n        } else {\n          value1[key] = value2[key];\n        }\n      }\n      return { value: value1 };\n    }\n    if (Array.isArray(value1) && Array.isArray(value2)) {\n      if (value1.length === value2.length) {\n        for (let index = 0; index < value1.length; index++) {\n          const dataset = /* @__PURE__ */ _merge(value1[index], value2[index]);\n          if (dataset.issue) {\n            return dataset;\n          }\n          value1[index] = dataset.value;\n        }\n        return { value: value1 };\n      }\n    }\n  }\n  return { issue: true };\n}\n\n// src/schemas/intersect/intersect.ts\n// @__NO_SIDE_EFFECTS__\nfunction intersect(options, message2) {\n  return {\n    kind: \"schema\",\n    type: \"intersect\",\n    reference: intersect,\n    expects: _joinExpects(\n      options.map((option) => option.expects),\n      \"&\"\n    ),\n    async: false,\n    options,\n    message: message2,\n    get \"~standard\"() {\n      return _getStandardProps(this);\n    },\n    \"~run\"(dataset, config2) {\n      if (this.options.length) {\n        const input = dataset.value;\n        let outputs;\n        dataset.typed = true;\n        for (const schema of this.options) {\n          const optionDataset = schema[\"~run\"]({ value: input }, config2);\n          if (optionDataset.issues) {\n            if (dataset.issues) {\n              dataset.issues.push(...optionDataset.issues);\n            } else {\n              dataset.issues = optionDataset.issues;\n            }\n            if (config2.abortEarly) {\n              dataset.typed = false;\n              break;\n            }\n          }\n          if (!optionDataset.typed) {\n            dataset.typed = false;\n          }\n          if (dataset.typed) {\n            if (outputs) {\n              outputs.push(optionDataset.value);\n            } else {\n              outputs = [optionDataset.value];\n            }\n          }\n        }\n        if (dataset.typed) {\n          dataset.value = outputs[0];\n          for (let index = 1; index < outputs.length; index++) {\n            const mergeDataset = _merge(dataset.value, outputs[index]);\n            if (mergeDataset.issue) {\n              _addIssue(this, \"type\", dataset, config2, {\n                received: \"unknown\"\n              });\n              break;\n            }\n            dataset.value = mergeDataset.value;\n          }\n        }\n      } else {\n        _addIssue(this, \"type\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/schemas/intersect/intersectAsync.ts\n// @__NO_SIDE_EFFECTS__\nfunction intersectAsync(options, message2) {\n  return {\n    kind: \"schema\",\n    type: \"intersect\",\n    reference: intersectAsync,\n    expects: _joinExpects(\n      options.map((option) => option.expects),\n      \"&\"\n    ),\n    async: true,\n    options,\n    message: message2,\n    get \"~standard\"() {\n      return _getStandardProps(this);\n    },\n    async \"~run\"(dataset, config2) {\n      if (this.options.length) {\n        const input = dataset.value;\n        let outputs;\n        dataset.typed = true;\n        const optionDatasets = await Promise.all(\n          this.options.map((schema) => schema[\"~run\"]({ value: input }, config2))\n        );\n        for (const optionDataset of optionDatasets) {\n          if (optionDataset.issues) {\n            if (dataset.issues) {\n              dataset.issues.push(...optionDataset.issues);\n            } else {\n              dataset.issues = optionDataset.issues;\n            }\n            if (config2.abortEarly) {\n              dataset.typed = false;\n              break;\n            }\n          }\n          if (!optionDataset.typed) {\n            dataset.typed = false;\n          }\n          if (dataset.typed) {\n            if (outputs) {\n              outputs.push(optionDataset.value);\n            } else {\n              outputs = [optionDataset.value];\n            }\n          }\n        }\n        if (dataset.typed) {\n          dataset.value = outputs[0];\n          for (let index = 1; index < outputs.length; index++) {\n            const mergeDataset = _merge(dataset.value, outputs[index]);\n            if (mergeDataset.issue) {\n              _addIssue(this, \"type\", dataset, config2, {\n                received: \"unknown\"\n              });\n              break;\n            }\n            dataset.value = mergeDataset.value;\n          }\n        }\n      } else {\n        _addIssue(this, \"type\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/schemas/lazy/lazy.ts\n// @__NO_SIDE_EFFECTS__\nfunction lazy(getter) {\n  return {\n    kind: \"schema\",\n    type: \"lazy\",\n    reference: lazy,\n    expects: \"unknown\",\n    async: false,\n    getter,\n    get \"~standard\"() {\n      return _getStandardProps(this);\n    },\n    \"~run\"(dataset, config2) {\n      return this.getter(dataset.value)[\"~run\"](dataset, config2);\n    }\n  };\n}\n\n// src/schemas/lazy/lazyAsync.ts\n// @__NO_SIDE_EFFECTS__\nfunction lazyAsync(getter) {\n  return {\n    kind: \"schema\",\n    type: \"lazy\",\n    reference: lazyAsync,\n    expects: \"unknown\",\n    async: true,\n    getter,\n    get \"~standard\"() {\n      return _getStandardProps(this);\n    },\n    async \"~run\"(dataset, config2) {\n      return (await this.getter(dataset.value))[\"~run\"](dataset, config2);\n    }\n  };\n}\n\n// src/schemas/literal/literal.ts\n// @__NO_SIDE_EFFECTS__\nfunction literal(literal_, message2) {\n  return {\n    kind: \"schema\",\n    type: \"literal\",\n    reference: literal,\n    expects: _stringify(literal_),\n    async: false,\n    literal: literal_,\n    message: message2,\n    get \"~standard\"() {\n      return _getStandardProps(this);\n    },\n    \"~run\"(dataset, config2) {\n      if (dataset.value === this.literal) {\n        dataset.typed = true;\n      } else {\n        _addIssue(this, \"type\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/schemas/looseObject/looseObject.ts\n// @__NO_SIDE_EFFECTS__\nfunction looseObject(entries2, message2) {\n  return {\n    kind: \"schema\",\n    type: \"loose_object\",\n    reference: looseObject,\n    expects: \"Object\",\n    async: false,\n    entries: entries2,\n    message: message2,\n    get \"~standard\"() {\n      return _getStandardProps(this);\n    },\n    \"~run\"(dataset, config2) {\n      const input = dataset.value;\n      if (input && typeof input === \"object\") {\n        dataset.typed = true;\n        dataset.value = {};\n        for (const key in this.entries) {\n          const valueSchema = this.entries[key];\n          if (key in input || (valueSchema.type === \"exact_optional\" || valueSchema.type === \"optional\" || valueSchema.type === \"nullish\") && // @ts-expect-error\n          valueSchema.default !== void 0) {\n            const value2 = key in input ? (\n              // @ts-expect-error\n              input[key]\n            ) : getDefault(valueSchema);\n            const valueDataset = valueSchema[\"~run\"]({ value: value2 }, config2);\n            if (valueDataset.issues) {\n              const pathItem = {\n                type: \"object\",\n                origin: \"value\",\n                input,\n                key,\n                value: value2\n              };\n              for (const issue of valueDataset.issues) {\n                if (issue.path) {\n                  issue.path.unshift(pathItem);\n                } else {\n                  issue.path = [pathItem];\n                }\n                dataset.issues?.push(issue);\n              }\n              if (!dataset.issues) {\n                dataset.issues = valueDataset.issues;\n              }\n              if (config2.abortEarly) {\n                dataset.typed = false;\n                break;\n              }\n            }\n            if (!valueDataset.typed) {\n              dataset.typed = false;\n            }\n            dataset.value[key] = valueDataset.value;\n          } else if (valueSchema.fallback !== void 0) {\n            dataset.value[key] = getFallback(valueSchema);\n          } else if (valueSchema.type !== \"exact_optional\" && valueSchema.type !== \"optional\" && valueSchema.type !== \"nullish\") {\n            _addIssue(this, \"key\", dataset, config2, {\n              input: void 0,\n              expected: `\"${key}\"`,\n              path: [\n                {\n                  type: \"object\",\n                  origin: \"key\",\n                  input,\n                  key,\n                  // @ts-expect-error\n                  value: input[key]\n                }\n              ]\n            });\n            if (config2.abortEarly) {\n              break;\n            }\n          }\n        }\n        if (!dataset.issues || !config2.abortEarly) {\n          for (const key in input) {\n            if (_isValidObjectKey(input, key) && !(key in this.entries)) {\n              dataset.value[key] = input[key];\n            }\n          }\n        }\n      } else {\n        _addIssue(this, \"type\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/schemas/looseObject/looseObjectAsync.ts\n// @__NO_SIDE_EFFECTS__\nfunction looseObjectAsync(entries2, message2) {\n  return {\n    kind: \"schema\",\n    type: \"loose_object\",\n    reference: looseObjectAsync,\n    expects: \"Object\",\n    async: true,\n    entries: entries2,\n    message: message2,\n    get \"~standard\"() {\n      return _getStandardProps(this);\n    },\n    async \"~run\"(dataset, config2) {\n      const input = dataset.value;\n      if (input && typeof input === \"object\") {\n        dataset.typed = true;\n        dataset.value = {};\n        const valueDatasets = await Promise.all(\n          Object.entries(this.entries).map(async ([key, valueSchema]) => {\n            if (key in input || (valueSchema.type === \"exact_optional\" || valueSchema.type === \"optional\" || valueSchema.type === \"nullish\") && // @ts-expect-error\n            valueSchema.default !== void 0) {\n              const value2 = key in input ? (\n                // @ts-expect-error\n                input[key]\n              ) : await getDefault(valueSchema);\n              return [\n                key,\n                value2,\n                valueSchema,\n                await valueSchema[\"~run\"]({ value: value2 }, config2)\n              ];\n            }\n            return [\n              key,\n              // @ts-expect-error\n              input[key],\n              valueSchema,\n              null\n            ];\n          })\n        );\n        for (const [key, value2, valueSchema, valueDataset] of valueDatasets) {\n          if (valueDataset) {\n            if (valueDataset.issues) {\n              const pathItem = {\n                type: \"object\",\n                origin: \"value\",\n                input,\n                key,\n                value: value2\n              };\n              for (const issue of valueDataset.issues) {\n                if (issue.path) {\n                  issue.path.unshift(pathItem);\n                } else {\n                  issue.path = [pathItem];\n                }\n                dataset.issues?.push(issue);\n              }\n              if (!dataset.issues) {\n                dataset.issues = valueDataset.issues;\n              }\n              if (config2.abortEarly) {\n                dataset.typed = false;\n                break;\n              }\n            }\n            if (!valueDataset.typed) {\n              dataset.typed = false;\n            }\n            dataset.value[key] = valueDataset.value;\n          } else if (valueSchema.fallback !== void 0) {\n            dataset.value[key] = await getFallback(valueSchema);\n          } else if (valueSchema.type !== \"exact_optional\" && valueSchema.type !== \"optional\" && valueSchema.type !== \"nullish\") {\n            _addIssue(this, \"key\", dataset, config2, {\n              input: void 0,\n              expected: `\"${key}\"`,\n              path: [\n                {\n                  type: \"object\",\n                  origin: \"key\",\n                  input,\n                  key,\n                  value: value2\n                }\n              ]\n            });\n            if (config2.abortEarly) {\n              break;\n            }\n          }\n        }\n        if (!dataset.issues || !config2.abortEarly) {\n          for (const key in input) {\n            if (_isValidObjectKey(input, key) && !(key in this.entries)) {\n              dataset.value[key] = input[key];\n            }\n          }\n        }\n      } else {\n        _addIssue(this, \"type\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/schemas/looseTuple/looseTuple.ts\n// @__NO_SIDE_EFFECTS__\nfunction looseTuple(items, message2) {\n  return {\n    kind: \"schema\",\n    type: \"loose_tuple\",\n    reference: looseTuple,\n    expects: \"Array\",\n    async: false,\n    items,\n    message: message2,\n    get \"~standard\"() {\n      return _getStandardProps(this);\n    },\n    \"~run\"(dataset, config2) {\n      const input = dataset.value;\n      if (Array.isArray(input)) {\n        dataset.typed = true;\n        dataset.value = [];\n        for (let key = 0; key < this.items.length; key++) {\n          const value2 = input[key];\n          const itemDataset = this.items[key][\"~run\"]({ value: value2 }, config2);\n          if (itemDataset.issues) {\n            const pathItem = {\n              type: \"array\",\n              origin: \"value\",\n              input,\n              key,\n              value: value2\n            };\n            for (const issue of itemDataset.issues) {\n              if (issue.path) {\n                issue.path.unshift(pathItem);\n              } else {\n                issue.path = [pathItem];\n              }\n              dataset.issues?.push(issue);\n            }\n            if (!dataset.issues) {\n              dataset.issues = itemDataset.issues;\n            }\n            if (config2.abortEarly) {\n              dataset.typed = false;\n              break;\n            }\n          }\n          if (!itemDataset.typed) {\n            dataset.typed = false;\n          }\n          dataset.value.push(itemDataset.value);\n        }\n        if (!dataset.issues || !config2.abortEarly) {\n          for (let key = this.items.length; key < input.length; key++) {\n            dataset.value.push(input[key]);\n          }\n        }\n      } else {\n        _addIssue(this, \"type\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/schemas/looseTuple/looseTupleAsync.ts\n// @__NO_SIDE_EFFECTS__\nfunction looseTupleAsync(items, message2) {\n  return {\n    kind: \"schema\",\n    type: \"loose_tuple\",\n    reference: looseTupleAsync,\n    expects: \"Array\",\n    async: true,\n    items,\n    message: message2,\n    get \"~standard\"() {\n      return _getStandardProps(this);\n    },\n    async \"~run\"(dataset, config2) {\n      const input = dataset.value;\n      if (Array.isArray(input)) {\n        dataset.typed = true;\n        dataset.value = [];\n        const itemDatasets = await Promise.all(\n          this.items.map(async (item, key) => {\n            const value2 = input[key];\n            return [key, value2, await item[\"~run\"]({ value: value2 }, config2)];\n          })\n        );\n        for (const [key, value2, itemDataset] of itemDatasets) {\n          if (itemDataset.issues) {\n            const pathItem = {\n              type: \"array\",\n              origin: \"value\",\n              input,\n              key,\n              value: value2\n            };\n            for (const issue of itemDataset.issues) {\n              if (issue.path) {\n                issue.path.unshift(pathItem);\n              } else {\n                issue.path = [pathItem];\n              }\n              dataset.issues?.push(issue);\n            }\n            if (!dataset.issues) {\n              dataset.issues = itemDataset.issues;\n            }\n            if (config2.abortEarly) {\n              dataset.typed = false;\n              break;\n            }\n          }\n          if (!itemDataset.typed) {\n            dataset.typed = false;\n          }\n          dataset.value.push(itemDataset.value);\n        }\n        if (!dataset.issues || !config2.abortEarly) {\n          for (let key = this.items.length; key < input.length; key++) {\n            dataset.value.push(input[key]);\n          }\n        }\n      } else {\n        _addIssue(this, \"type\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/schemas/map/map.ts\n// @__NO_SIDE_EFFECTS__\nfunction map(key, value2, message2) {\n  return {\n    kind: \"schema\",\n    type: \"map\",\n    reference: map,\n    expects: \"Map\",\n    async: false,\n    key,\n    value: value2,\n    message: message2,\n    get \"~standard\"() {\n      return _getStandardProps(this);\n    },\n    \"~run\"(dataset, config2) {\n      const input = dataset.value;\n      if (input instanceof Map) {\n        dataset.typed = true;\n        dataset.value = /* @__PURE__ */ new Map();\n        for (const [inputKey, inputValue] of input) {\n          const keyDataset = this.key[\"~run\"]({ value: inputKey }, config2);\n          if (keyDataset.issues) {\n            const pathItem = {\n              type: \"map\",\n              origin: \"key\",\n              input,\n              key: inputKey,\n              value: inputValue\n            };\n            for (const issue of keyDataset.issues) {\n              if (issue.path) {\n                issue.path.unshift(pathItem);\n              } else {\n                issue.path = [pathItem];\n              }\n              dataset.issues?.push(issue);\n            }\n            if (!dataset.issues) {\n              dataset.issues = keyDataset.issues;\n            }\n            if (config2.abortEarly) {\n              dataset.typed = false;\n              break;\n            }\n          }\n          const valueDataset = this.value[\"~run\"](\n            { value: inputValue },\n            config2\n          );\n          if (valueDataset.issues) {\n            const pathItem = {\n              type: \"map\",\n              origin: \"value\",\n              input,\n              key: inputKey,\n              value: inputValue\n            };\n            for (const issue of valueDataset.issues) {\n              if (issue.path) {\n                issue.path.unshift(pathItem);\n              } else {\n                issue.path = [pathItem];\n              }\n              dataset.issues?.push(issue);\n            }\n            if (!dataset.issues) {\n              dataset.issues = valueDataset.issues;\n            }\n            if (config2.abortEarly) {\n              dataset.typed = false;\n              break;\n            }\n          }\n          if (!keyDataset.typed || !valueDataset.typed) {\n            dataset.typed = false;\n          }\n          dataset.value.set(keyDataset.value, valueDataset.value);\n        }\n      } else {\n        _addIssue(this, \"type\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/schemas/map/mapAsync.ts\n// @__NO_SIDE_EFFECTS__\nfunction mapAsync(key, value2, message2) {\n  return {\n    kind: \"schema\",\n    type: \"map\",\n    reference: mapAsync,\n    expects: \"Map\",\n    async: true,\n    key,\n    value: value2,\n    message: message2,\n    get \"~standard\"() {\n      return _getStandardProps(this);\n    },\n    async \"~run\"(dataset, config2) {\n      const input = dataset.value;\n      if (input instanceof Map) {\n        dataset.typed = true;\n        dataset.value = /* @__PURE__ */ new Map();\n        const datasets = await Promise.all(\n          [...input].map(\n            ([inputKey, inputValue]) => Promise.all([\n              inputKey,\n              inputValue,\n              this.key[\"~run\"]({ value: inputKey }, config2),\n              this.value[\"~run\"]({ value: inputValue }, config2)\n            ])\n          )\n        );\n        for (const [\n          inputKey,\n          inputValue,\n          keyDataset,\n          valueDataset\n        ] of datasets) {\n          if (keyDataset.issues) {\n            const pathItem = {\n              type: \"map\",\n              origin: \"key\",\n              input,\n              key: inputKey,\n              value: inputValue\n            };\n            for (const issue of keyDataset.issues) {\n              if (issue.path) {\n                issue.path.unshift(pathItem);\n              } else {\n                issue.path = [pathItem];\n              }\n              dataset.issues?.push(issue);\n            }\n            if (!dataset.issues) {\n              dataset.issues = keyDataset.issues;\n            }\n            if (config2.abortEarly) {\n              dataset.typed = false;\n              break;\n            }\n          }\n          if (valueDataset.issues) {\n            const pathItem = {\n              type: \"map\",\n              origin: \"value\",\n              input,\n              key: inputKey,\n              value: inputValue\n            };\n            for (const issue of valueDataset.issues) {\n              if (issue.path) {\n                issue.path.unshift(pathItem);\n              } else {\n                issue.path = [pathItem];\n              }\n              dataset.issues?.push(issue);\n            }\n            if (!dataset.issues) {\n              dataset.issues = valueDataset.issues;\n            }\n            if (config2.abortEarly) {\n              dataset.typed = false;\n              break;\n            }\n          }\n          if (!keyDataset.typed || !valueDataset.typed) {\n            dataset.typed = false;\n          }\n          dataset.value.set(keyDataset.value, valueDataset.value);\n        }\n      } else {\n        _addIssue(this, \"type\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/schemas/nan/nan.ts\n// @__NO_SIDE_EFFECTS__\nfunction nan(message2) {\n  return {\n    kind: \"schema\",\n    type: \"nan\",\n    reference: nan,\n    expects: \"NaN\",\n    async: false,\n    message: message2,\n    get \"~standard\"() {\n      return _getStandardProps(this);\n    },\n    \"~run\"(dataset, config2) {\n      if (Number.isNaN(dataset.value)) {\n        dataset.typed = true;\n      } else {\n        _addIssue(this, \"type\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/schemas/never/never.ts\n// @__NO_SIDE_EFFECTS__\nfunction never(message2) {\n  return {\n    kind: \"schema\",\n    type: \"never\",\n    reference: never,\n    expects: \"never\",\n    async: false,\n    message: message2,\n    get \"~standard\"() {\n      return _getStandardProps(this);\n    },\n    \"~run\"(dataset, config2) {\n      _addIssue(this, \"type\", dataset, config2);\n      return dataset;\n    }\n  };\n}\n\n// src/schemas/nonNullable/nonNullable.ts\n// @__NO_SIDE_EFFECTS__\nfunction nonNullable(wrapped, message2) {\n  return {\n    kind: \"schema\",\n    type: \"non_nullable\",\n    reference: nonNullable,\n    expects: \"!null\",\n    async: false,\n    wrapped,\n    message: message2,\n    get \"~standard\"() {\n      return _getStandardProps(this);\n    },\n    \"~run\"(dataset, config2) {\n      if (dataset.value !== null) {\n        dataset = this.wrapped[\"~run\"](dataset, config2);\n      }\n      if (dataset.value === null) {\n        _addIssue(this, \"type\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/schemas/nonNullable/nonNullableAsync.ts\n// @__NO_SIDE_EFFECTS__\nfunction nonNullableAsync(wrapped, message2) {\n  return {\n    kind: \"schema\",\n    type: \"non_nullable\",\n    reference: nonNullableAsync,\n    expects: \"!null\",\n    async: true,\n    wrapped,\n    message: message2,\n    get \"~standard\"() {\n      return _getStandardProps(this);\n    },\n    async \"~run\"(dataset, config2) {\n      if (dataset.value !== null) {\n        dataset = await this.wrapped[\"~run\"](dataset, config2);\n      }\n      if (dataset.value === null) {\n        _addIssue(this, \"type\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/schemas/nonNullish/nonNullish.ts\n// @__NO_SIDE_EFFECTS__\nfunction nonNullish(wrapped, message2) {\n  return {\n    kind: \"schema\",\n    type: \"non_nullish\",\n    reference: nonNullish,\n    expects: \"(!null & !undefined)\",\n    async: false,\n    wrapped,\n    message: message2,\n    get \"~standard\"() {\n      return _getStandardProps(this);\n    },\n    \"~run\"(dataset, config2) {\n      if (!(dataset.value === null || dataset.value === void 0)) {\n        dataset = this.wrapped[\"~run\"](dataset, config2);\n      }\n      if (dataset.value === null || dataset.value === void 0) {\n        _addIssue(this, \"type\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/schemas/nonNullish/nonNullishAsync.ts\n// @__NO_SIDE_EFFECTS__\nfunction nonNullishAsync(wrapped, message2) {\n  return {\n    kind: \"schema\",\n    type: \"non_nullish\",\n    reference: nonNullishAsync,\n    expects: \"(!null & !undefined)\",\n    async: true,\n    wrapped,\n    message: message2,\n    get \"~standard\"() {\n      return _getStandardProps(this);\n    },\n    async \"~run\"(dataset, config2) {\n      if (!(dataset.value === null || dataset.value === void 0)) {\n        dataset = await this.wrapped[\"~run\"](dataset, config2);\n      }\n      if (dataset.value === null || dataset.value === void 0) {\n        _addIssue(this, \"type\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/schemas/nonOptional/nonOptional.ts\n// @__NO_SIDE_EFFECTS__\nfunction nonOptional(wrapped, message2) {\n  return {\n    kind: \"schema\",\n    type: \"non_optional\",\n    reference: nonOptional,\n    expects: \"!undefined\",\n    async: false,\n    wrapped,\n    message: message2,\n    get \"~standard\"() {\n      return _getStandardProps(this);\n    },\n    \"~run\"(dataset, config2) {\n      if (dataset.value !== void 0) {\n        dataset = this.wrapped[\"~run\"](dataset, config2);\n      }\n      if (dataset.value === void 0) {\n        _addIssue(this, \"type\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/schemas/nonOptional/nonOptionalAsync.ts\n// @__NO_SIDE_EFFECTS__\nfunction nonOptionalAsync(wrapped, message2) {\n  return {\n    kind: \"schema\",\n    type: \"non_optional\",\n    reference: nonOptionalAsync,\n    expects: \"!undefined\",\n    async: true,\n    wrapped,\n    message: message2,\n    get \"~standard\"() {\n      return _getStandardProps(this);\n    },\n    async \"~run\"(dataset, config2) {\n      if (dataset.value !== void 0) {\n        dataset = await this.wrapped[\"~run\"](dataset, config2);\n      }\n      if (dataset.value === void 0) {\n        _addIssue(this, \"type\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/schemas/null/null.ts\n// @__NO_SIDE_EFFECTS__\nfunction null_(message2) {\n  return {\n    kind: \"schema\",\n    type: \"null\",\n    reference: null_,\n    expects: \"null\",\n    async: false,\n    message: message2,\n    get \"~standard\"() {\n      return _getStandardProps(this);\n    },\n    \"~run\"(dataset, config2) {\n      if (dataset.value === null) {\n        dataset.typed = true;\n      } else {\n        _addIssue(this, \"type\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/schemas/nullable/nullable.ts\n// @__NO_SIDE_EFFECTS__\nfunction nullable(wrapped, default_) {\n  return {\n    kind: \"schema\",\n    type: \"nullable\",\n    reference: nullable,\n    expects: `(${wrapped.expects} | null)`,\n    async: false,\n    wrapped,\n    default: default_,\n    get \"~standard\"() {\n      return _getStandardProps(this);\n    },\n    \"~run\"(dataset, config2) {\n      if (dataset.value === null) {\n        if (this.default !== void 0) {\n          dataset.value = getDefault(this, dataset, config2);\n        }\n        if (dataset.value === null) {\n          dataset.typed = true;\n          return dataset;\n        }\n      }\n      return this.wrapped[\"~run\"](dataset, config2);\n    }\n  };\n}\n\n// src/schemas/nullable/nullableAsync.ts\n// @__NO_SIDE_EFFECTS__\nfunction nullableAsync(wrapped, default_) {\n  return {\n    kind: \"schema\",\n    type: \"nullable\",\n    reference: nullableAsync,\n    expects: `(${wrapped.expects} | null)`,\n    async: true,\n    wrapped,\n    default: default_,\n    get \"~standard\"() {\n      return _getStandardProps(this);\n    },\n    async \"~run\"(dataset, config2) {\n      if (dataset.value === null) {\n        if (this.default !== void 0) {\n          dataset.value = await getDefault(this, dataset, config2);\n        }\n        if (dataset.value === null) {\n          dataset.typed = true;\n          return dataset;\n        }\n      }\n      return this.wrapped[\"~run\"](dataset, config2);\n    }\n  };\n}\n\n// src/schemas/nullish/nullish.ts\n// @__NO_SIDE_EFFECTS__\nfunction nullish(wrapped, default_) {\n  return {\n    kind: \"schema\",\n    type: \"nullish\",\n    reference: nullish,\n    expects: `(${wrapped.expects} | null | undefined)`,\n    async: false,\n    wrapped,\n    default: default_,\n    get \"~standard\"() {\n      return _getStandardProps(this);\n    },\n    \"~run\"(dataset, config2) {\n      if (dataset.value === null || dataset.value === void 0) {\n        if (this.default !== void 0) {\n          dataset.value = getDefault(this, dataset, config2);\n        }\n        if (dataset.value === null || dataset.value === void 0) {\n          dataset.typed = true;\n          return dataset;\n        }\n      }\n      return this.wrapped[\"~run\"](dataset, config2);\n    }\n  };\n}\n\n// src/schemas/nullish/nullishAsync.ts\n// @__NO_SIDE_EFFECTS__\nfunction nullishAsync(wrapped, default_) {\n  return {\n    kind: \"schema\",\n    type: \"nullish\",\n    reference: nullishAsync,\n    expects: `(${wrapped.expects} | null | undefined)`,\n    async: true,\n    wrapped,\n    default: default_,\n    get \"~standard\"() {\n      return _getStandardProps(this);\n    },\n    async \"~run\"(dataset, config2) {\n      if (dataset.value === null || dataset.value === void 0) {\n        if (this.default !== void 0) {\n          dataset.value = await getDefault(this, dataset, config2);\n        }\n        if (dataset.value === null || dataset.value === void 0) {\n          dataset.typed = true;\n          return dataset;\n        }\n      }\n      return this.wrapped[\"~run\"](dataset, config2);\n    }\n  };\n}\n\n// src/schemas/number/number.ts\n// @__NO_SIDE_EFFECTS__\nfunction number(message2) {\n  return {\n    kind: \"schema\",\n    type: \"number\",\n    reference: number,\n    expects: \"number\",\n    async: false,\n    message: message2,\n    get \"~standard\"() {\n      return _getStandardProps(this);\n    },\n    \"~run\"(dataset, config2) {\n      if (typeof dataset.value === \"number\" && !isNaN(dataset.value)) {\n        dataset.typed = true;\n      } else {\n        _addIssue(this, \"type\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/schemas/object/object.ts\n// @__NO_SIDE_EFFECTS__\nfunction object(entries2, message2) {\n  return {\n    kind: \"schema\",\n    type: \"object\",\n    reference: object,\n    expects: \"Object\",\n    async: false,\n    entries: entries2,\n    message: message2,\n    get \"~standard\"() {\n      return _getStandardProps(this);\n    },\n    \"~run\"(dataset, config2) {\n      const input = dataset.value;\n      if (input && typeof input === \"object\") {\n        dataset.typed = true;\n        dataset.value = {};\n        for (const key in this.entries) {\n          const valueSchema = this.entries[key];\n          if (key in input || (valueSchema.type === \"exact_optional\" || valueSchema.type === \"optional\" || valueSchema.type === \"nullish\") && // @ts-expect-error\n          valueSchema.default !== void 0) {\n            const value2 = key in input ? (\n              // @ts-expect-error\n              input[key]\n            ) : getDefault(valueSchema);\n            const valueDataset = valueSchema[\"~run\"]({ value: value2 }, config2);\n            if (valueDataset.issues) {\n              const pathItem = {\n                type: \"object\",\n                origin: \"value\",\n                input,\n                key,\n                value: value2\n              };\n              for (const issue of valueDataset.issues) {\n                if (issue.path) {\n                  issue.path.unshift(pathItem);\n                } else {\n                  issue.path = [pathItem];\n                }\n                dataset.issues?.push(issue);\n              }\n              if (!dataset.issues) {\n                dataset.issues = valueDataset.issues;\n              }\n              if (config2.abortEarly) {\n                dataset.typed = false;\n                break;\n              }\n            }\n            if (!valueDataset.typed) {\n              dataset.typed = false;\n            }\n            dataset.value[key] = valueDataset.value;\n          } else if (valueSchema.fallback !== void 0) {\n            dataset.value[key] = getFallback(valueSchema);\n          } else if (valueSchema.type !== \"exact_optional\" && valueSchema.type !== \"optional\" && valueSchema.type !== \"nullish\") {\n            _addIssue(this, \"key\", dataset, config2, {\n              input: void 0,\n              expected: `\"${key}\"`,\n              path: [\n                {\n                  type: \"object\",\n                  origin: \"key\",\n                  input,\n                  key,\n                  // @ts-expect-error\n                  value: input[key]\n                }\n              ]\n            });\n            if (config2.abortEarly) {\n              break;\n            }\n          }\n        }\n      } else {\n        _addIssue(this, \"type\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/schemas/object/objectAsync.ts\n// @__NO_SIDE_EFFECTS__\nfunction objectAsync(entries2, message2) {\n  return {\n    kind: \"schema\",\n    type: \"object\",\n    reference: objectAsync,\n    expects: \"Object\",\n    async: true,\n    entries: entries2,\n    message: message2,\n    get \"~standard\"() {\n      return _getStandardProps(this);\n    },\n    async \"~run\"(dataset, config2) {\n      const input = dataset.value;\n      if (input && typeof input === \"object\") {\n        dataset.typed = true;\n        dataset.value = {};\n        const valueDatasets = await Promise.all(\n          Object.entries(this.entries).map(async ([key, valueSchema]) => {\n            if (key in input || (valueSchema.type === \"exact_optional\" || valueSchema.type === \"optional\" || valueSchema.type === \"nullish\") && // @ts-expect-error\n            valueSchema.default !== void 0) {\n              const value2 = key in input ? (\n                // @ts-expect-error\n                input[key]\n              ) : await getDefault(valueSchema);\n              return [\n                key,\n                value2,\n                valueSchema,\n                await valueSchema[\"~run\"]({ value: value2 }, config2)\n              ];\n            }\n            return [\n              key,\n              // @ts-expect-error\n              input[key],\n              valueSchema,\n              null\n            ];\n          })\n        );\n        for (const [key, value2, valueSchema, valueDataset] of valueDatasets) {\n          if (valueDataset) {\n            if (valueDataset.issues) {\n              const pathItem = {\n                type: \"object\",\n                origin: \"value\",\n                input,\n                key,\n                value: value2\n              };\n              for (const issue of valueDataset.issues) {\n                if (issue.path) {\n                  issue.path.unshift(pathItem);\n                } else {\n                  issue.path = [pathItem];\n                }\n                dataset.issues?.push(issue);\n              }\n              if (!dataset.issues) {\n                dataset.issues = valueDataset.issues;\n              }\n              if (config2.abortEarly) {\n                dataset.typed = false;\n                break;\n              }\n            }\n            if (!valueDataset.typed) {\n              dataset.typed = false;\n            }\n            dataset.value[key] = valueDataset.value;\n          } else if (valueSchema.fallback !== void 0) {\n            dataset.value[key] = await getFallback(valueSchema);\n          } else if (valueSchema.type !== \"exact_optional\" && valueSchema.type !== \"optional\" && valueSchema.type !== \"nullish\") {\n            _addIssue(this, \"key\", dataset, config2, {\n              input: void 0,\n              expected: `\"${key}\"`,\n              path: [\n                {\n                  type: \"object\",\n                  origin: \"key\",\n                  input,\n                  key,\n                  value: value2\n                }\n              ]\n            });\n            if (config2.abortEarly) {\n              break;\n            }\n          }\n        }\n      } else {\n        _addIssue(this, \"type\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/schemas/objectWithRest/objectWithRest.ts\n// @__NO_SIDE_EFFECTS__\nfunction objectWithRest(entries2, rest, message2) {\n  return {\n    kind: \"schema\",\n    type: \"object_with_rest\",\n    reference: objectWithRest,\n    expects: \"Object\",\n    async: false,\n    entries: entries2,\n    rest,\n    message: message2,\n    get \"~standard\"() {\n      return _getStandardProps(this);\n    },\n    \"~run\"(dataset, config2) {\n      const input = dataset.value;\n      if (input && typeof input === \"object\") {\n        dataset.typed = true;\n        dataset.value = {};\n        for (const key in this.entries) {\n          const valueSchema = this.entries[key];\n          if (key in input || (valueSchema.type === \"exact_optional\" || valueSchema.type === \"optional\" || valueSchema.type === \"nullish\") && // @ts-expect-error\n          valueSchema.default !== void 0) {\n            const value2 = key in input ? (\n              // @ts-expect-error\n              input[key]\n            ) : getDefault(valueSchema);\n            const valueDataset = valueSchema[\"~run\"]({ value: value2 }, config2);\n            if (valueDataset.issues) {\n              const pathItem = {\n                type: \"object\",\n                origin: \"value\",\n                input,\n                key,\n                value: value2\n              };\n              for (const issue of valueDataset.issues) {\n                if (issue.path) {\n                  issue.path.unshift(pathItem);\n                } else {\n                  issue.path = [pathItem];\n                }\n                dataset.issues?.push(issue);\n              }\n              if (!dataset.issues) {\n                dataset.issues = valueDataset.issues;\n              }\n              if (config2.abortEarly) {\n                dataset.typed = false;\n                break;\n              }\n            }\n            if (!valueDataset.typed) {\n              dataset.typed = false;\n            }\n            dataset.value[key] = valueDataset.value;\n          } else if (valueSchema.fallback !== void 0) {\n            dataset.value[key] = getFallback(valueSchema);\n          } else if (valueSchema.type !== \"exact_optional\" && valueSchema.type !== \"optional\" && valueSchema.type !== \"nullish\") {\n            _addIssue(this, \"key\", dataset, config2, {\n              input: void 0,\n              expected: `\"${key}\"`,\n              path: [\n                {\n                  type: \"object\",\n                  origin: \"key\",\n                  input,\n                  key,\n                  // @ts-expect-error\n                  value: input[key]\n                }\n              ]\n            });\n            if (config2.abortEarly) {\n              break;\n            }\n          }\n        }\n        if (!dataset.issues || !config2.abortEarly) {\n          for (const key in input) {\n            if (_isValidObjectKey(input, key) && !(key in this.entries)) {\n              const valueDataset = this.rest[\"~run\"](\n                // @ts-expect-error\n                { value: input[key] },\n                config2\n              );\n              if (valueDataset.issues) {\n                const pathItem = {\n                  type: \"object\",\n                  origin: \"value\",\n                  input,\n                  key,\n                  // @ts-expect-error\n                  value: input[key]\n                };\n                for (const issue of valueDataset.issues) {\n                  if (issue.path) {\n                    issue.path.unshift(pathItem);\n                  } else {\n                    issue.path = [pathItem];\n                  }\n                  dataset.issues?.push(issue);\n                }\n                if (!dataset.issues) {\n                  dataset.issues = valueDataset.issues;\n                }\n                if (config2.abortEarly) {\n                  dataset.typed = false;\n                  break;\n                }\n              }\n              if (!valueDataset.typed) {\n                dataset.typed = false;\n              }\n              dataset.value[key] = valueDataset.value;\n            }\n          }\n        }\n      } else {\n        _addIssue(this, \"type\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/schemas/objectWithRest/objectWithRestAsync.ts\n// @__NO_SIDE_EFFECTS__\nfunction objectWithRestAsync(entries2, rest, message2) {\n  return {\n    kind: \"schema\",\n    type: \"object_with_rest\",\n    reference: objectWithRestAsync,\n    expects: \"Object\",\n    async: true,\n    entries: entries2,\n    rest,\n    message: message2,\n    get \"~standard\"() {\n      return _getStandardProps(this);\n    },\n    async \"~run\"(dataset, config2) {\n      const input = dataset.value;\n      if (input && typeof input === \"object\") {\n        dataset.typed = true;\n        dataset.value = {};\n        const [normalDatasets, restDatasets] = await Promise.all([\n          // If key is present or its an optional schema with a default value,\n          // parse input of key or default value asynchronously\n          Promise.all(\n            Object.entries(this.entries).map(async ([key, valueSchema]) => {\n              if (key in input || (valueSchema.type === \"exact_optional\" || valueSchema.type === \"optional\" || valueSchema.type === \"nullish\") && // @ts-expect-error\n              valueSchema.default !== void 0) {\n                const value2 = key in input ? (\n                  // @ts-expect-error\n                  input[key]\n                ) : await getDefault(valueSchema);\n                return [\n                  key,\n                  value2,\n                  valueSchema,\n                  await valueSchema[\"~run\"]({ value: value2 }, config2)\n                ];\n              }\n              return [\n                key,\n                // @ts-expect-error\n                input[key],\n                valueSchema,\n                null\n              ];\n            })\n          ),\n          // Parse other entries with rest schema asynchronously\n          // Hint: We exclude specific keys for security reasons\n          Promise.all(\n            Object.entries(input).filter(\n              ([key]) => _isValidObjectKey(input, key) && !(key in this.entries)\n            ).map(\n              async ([key, value2]) => [\n                key,\n                value2,\n                await this.rest[\"~run\"]({ value: value2 }, config2)\n              ]\n            )\n          )\n        ]);\n        for (const [key, value2, valueSchema, valueDataset] of normalDatasets) {\n          if (valueDataset) {\n            if (valueDataset.issues) {\n              const pathItem = {\n                type: \"object\",\n                origin: \"value\",\n                input,\n                key,\n                value: value2\n              };\n              for (const issue of valueDataset.issues) {\n                if (issue.path) {\n                  issue.path.unshift(pathItem);\n                } else {\n                  issue.path = [pathItem];\n                }\n                dataset.issues?.push(issue);\n              }\n              if (!dataset.issues) {\n                dataset.issues = valueDataset.issues;\n              }\n              if (config2.abortEarly) {\n                dataset.typed = false;\n                break;\n              }\n            }\n            if (!valueDataset.typed) {\n              dataset.typed = false;\n            }\n            dataset.value[key] = valueDataset.value;\n          } else if (valueSchema.fallback !== void 0) {\n            dataset.value[key] = await getFallback(valueSchema);\n          } else if (valueSchema.type !== \"exact_optional\" && valueSchema.type !== \"optional\" && valueSchema.type !== \"nullish\") {\n            _addIssue(this, \"key\", dataset, config2, {\n              input: void 0,\n              expected: `\"${key}\"`,\n              path: [\n                {\n                  type: \"object\",\n                  origin: \"key\",\n                  input,\n                  key,\n                  value: value2\n                }\n              ]\n            });\n            if (config2.abortEarly) {\n              break;\n            }\n          }\n        }\n        if (!dataset.issues || !config2.abortEarly) {\n          for (const [key, value2, valueDataset] of restDatasets) {\n            if (valueDataset.issues) {\n              const pathItem = {\n                type: \"object\",\n                origin: \"value\",\n                input,\n                key,\n                value: value2\n              };\n              for (const issue of valueDataset.issues) {\n                if (issue.path) {\n                  issue.path.unshift(pathItem);\n                } else {\n                  issue.path = [pathItem];\n                }\n                dataset.issues?.push(issue);\n              }\n              if (!dataset.issues) {\n                dataset.issues = valueDataset.issues;\n              }\n              if (config2.abortEarly) {\n                dataset.typed = false;\n                break;\n              }\n            }\n            if (!valueDataset.typed) {\n              dataset.typed = false;\n            }\n            dataset.value[key] = valueDataset.value;\n          }\n        }\n      } else {\n        _addIssue(this, \"type\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/schemas/optional/optional.ts\n// @__NO_SIDE_EFFECTS__\nfunction optional(wrapped, default_) {\n  return {\n    kind: \"schema\",\n    type: \"optional\",\n    reference: optional,\n    expects: `(${wrapped.expects} | undefined)`,\n    async: false,\n    wrapped,\n    default: default_,\n    get \"~standard\"() {\n      return _getStandardProps(this);\n    },\n    \"~run\"(dataset, config2) {\n      if (dataset.value === void 0) {\n        if (this.default !== void 0) {\n          dataset.value = getDefault(this, dataset, config2);\n        }\n        if (dataset.value === void 0) {\n          dataset.typed = true;\n          return dataset;\n        }\n      }\n      return this.wrapped[\"~run\"](dataset, config2);\n    }\n  };\n}\n\n// src/schemas/optional/optionalAsync.ts\n// @__NO_SIDE_EFFECTS__\nfunction optionalAsync(wrapped, default_) {\n  return {\n    kind: \"schema\",\n    type: \"optional\",\n    reference: optionalAsync,\n    expects: `(${wrapped.expects} | undefined)`,\n    async: true,\n    wrapped,\n    default: default_,\n    get \"~standard\"() {\n      return _getStandardProps(this);\n    },\n    async \"~run\"(dataset, config2) {\n      if (dataset.value === void 0) {\n        if (this.default !== void 0) {\n          dataset.value = await getDefault(this, dataset, config2);\n        }\n        if (dataset.value === void 0) {\n          dataset.typed = true;\n          return dataset;\n        }\n      }\n      return this.wrapped[\"~run\"](dataset, config2);\n    }\n  };\n}\n\n// src/schemas/picklist/picklist.ts\n// @__NO_SIDE_EFFECTS__\nfunction picklist(options, message2) {\n  return {\n    kind: \"schema\",\n    type: \"picklist\",\n    reference: picklist,\n    expects: _joinExpects(options.map(_stringify), \"|\"),\n    async: false,\n    options,\n    message: message2,\n    get \"~standard\"() {\n      return _getStandardProps(this);\n    },\n    \"~run\"(dataset, config2) {\n      if (this.options.includes(dataset.value)) {\n        dataset.typed = true;\n      } else {\n        _addIssue(this, \"type\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/schemas/promise/promise.ts\n// @__NO_SIDE_EFFECTS__\nfunction promise(message2) {\n  return {\n    kind: \"schema\",\n    type: \"promise\",\n    reference: promise,\n    expects: \"Promise\",\n    async: false,\n    message: message2,\n    get \"~standard\"() {\n      return _getStandardProps(this);\n    },\n    \"~run\"(dataset, config2) {\n      if (dataset.value instanceof Promise) {\n        dataset.typed = true;\n      } else {\n        _addIssue(this, \"type\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/schemas/record/record.ts\n// @__NO_SIDE_EFFECTS__\nfunction record(key, value2, message2) {\n  return {\n    kind: \"schema\",\n    type: \"record\",\n    reference: record,\n    expects: \"Object\",\n    async: false,\n    key,\n    value: value2,\n    message: message2,\n    get \"~standard\"() {\n      return _getStandardProps(this);\n    },\n    \"~run\"(dataset, config2) {\n      const input = dataset.value;\n      if (input && typeof input === \"object\") {\n        dataset.typed = true;\n        dataset.value = {};\n        for (const entryKey in input) {\n          if (_isValidObjectKey(input, entryKey)) {\n            const entryValue = input[entryKey];\n            const keyDataset = this.key[\"~run\"]({ value: entryKey }, config2);\n            if (keyDataset.issues) {\n              const pathItem = {\n                type: \"object\",\n                origin: \"key\",\n                input,\n                key: entryKey,\n                value: entryValue\n              };\n              for (const issue of keyDataset.issues) {\n                issue.path = [pathItem];\n                dataset.issues?.push(issue);\n              }\n              if (!dataset.issues) {\n                dataset.issues = keyDataset.issues;\n              }\n              if (config2.abortEarly) {\n                dataset.typed = false;\n                break;\n              }\n            }\n            const valueDataset = this.value[\"~run\"](\n              { value: entryValue },\n              config2\n            );\n            if (valueDataset.issues) {\n              const pathItem = {\n                type: \"object\",\n                origin: \"value\",\n                input,\n                key: entryKey,\n                value: entryValue\n              };\n              for (const issue of valueDataset.issues) {\n                if (issue.path) {\n                  issue.path.unshift(pathItem);\n                } else {\n                  issue.path = [pathItem];\n                }\n                dataset.issues?.push(issue);\n              }\n              if (!dataset.issues) {\n                dataset.issues = valueDataset.issues;\n              }\n              if (config2.abortEarly) {\n                dataset.typed = false;\n                break;\n              }\n            }\n            if (!keyDataset.typed || !valueDataset.typed) {\n              dataset.typed = false;\n            }\n            if (keyDataset.typed) {\n              dataset.value[keyDataset.value] = valueDataset.value;\n            }\n          }\n        }\n      } else {\n        _addIssue(this, \"type\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/schemas/record/recordAsync.ts\n// @__NO_SIDE_EFFECTS__\nfunction recordAsync(key, value2, message2) {\n  return {\n    kind: \"schema\",\n    type: \"record\",\n    reference: recordAsync,\n    expects: \"Object\",\n    async: true,\n    key,\n    value: value2,\n    message: message2,\n    get \"~standard\"() {\n      return _getStandardProps(this);\n    },\n    async \"~run\"(dataset, config2) {\n      const input = dataset.value;\n      if (input && typeof input === \"object\") {\n        dataset.typed = true;\n        dataset.value = {};\n        const datasets = await Promise.all(\n          Object.entries(input).filter(([key2]) => _isValidObjectKey(input, key2)).map(\n            ([entryKey, entryValue]) => Promise.all([\n              entryKey,\n              entryValue,\n              this.key[\"~run\"]({ value: entryKey }, config2),\n              this.value[\"~run\"]({ value: entryValue }, config2)\n            ])\n          )\n        );\n        for (const [\n          entryKey,\n          entryValue,\n          keyDataset,\n          valueDataset\n        ] of datasets) {\n          if (keyDataset.issues) {\n            const pathItem = {\n              type: \"object\",\n              origin: \"key\",\n              input,\n              key: entryKey,\n              value: entryValue\n            };\n            for (const issue of keyDataset.issues) {\n              issue.path = [pathItem];\n              dataset.issues?.push(issue);\n            }\n            if (!dataset.issues) {\n              dataset.issues = keyDataset.issues;\n            }\n            if (config2.abortEarly) {\n              dataset.typed = false;\n              break;\n            }\n          }\n          if (valueDataset.issues) {\n            const pathItem = {\n              type: \"object\",\n              origin: \"value\",\n              input,\n              key: entryKey,\n              value: entryValue\n            };\n            for (const issue of valueDataset.issues) {\n              if (issue.path) {\n                issue.path.unshift(pathItem);\n              } else {\n                issue.path = [pathItem];\n              }\n              dataset.issues?.push(issue);\n            }\n            if (!dataset.issues) {\n              dataset.issues = valueDataset.issues;\n            }\n            if (config2.abortEarly) {\n              dataset.typed = false;\n              break;\n            }\n          }\n          if (!keyDataset.typed || !valueDataset.typed) {\n            dataset.typed = false;\n          }\n          if (keyDataset.typed) {\n            dataset.value[keyDataset.value] = valueDataset.value;\n          }\n        }\n      } else {\n        _addIssue(this, \"type\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/schemas/set/set.ts\n// @__NO_SIDE_EFFECTS__\nfunction set(value2, message2) {\n  return {\n    kind: \"schema\",\n    type: \"set\",\n    reference: set,\n    expects: \"Set\",\n    async: false,\n    value: value2,\n    message: message2,\n    get \"~standard\"() {\n      return _getStandardProps(this);\n    },\n    \"~run\"(dataset, config2) {\n      const input = dataset.value;\n      if (input instanceof Set) {\n        dataset.typed = true;\n        dataset.value = /* @__PURE__ */ new Set();\n        for (const inputValue of input) {\n          const valueDataset = this.value[\"~run\"](\n            { value: inputValue },\n            config2\n          );\n          if (valueDataset.issues) {\n            const pathItem = {\n              type: \"set\",\n              origin: \"value\",\n              input,\n              key: null,\n              value: inputValue\n            };\n            for (const issue of valueDataset.issues) {\n              if (issue.path) {\n                issue.path.unshift(pathItem);\n              } else {\n                issue.path = [pathItem];\n              }\n              dataset.issues?.push(issue);\n            }\n            if (!dataset.issues) {\n              dataset.issues = valueDataset.issues;\n            }\n            if (config2.abortEarly) {\n              dataset.typed = false;\n              break;\n            }\n          }\n          if (!valueDataset.typed) {\n            dataset.typed = false;\n          }\n          dataset.value.add(valueDataset.value);\n        }\n      } else {\n        _addIssue(this, \"type\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/schemas/set/setAsync.ts\n// @__NO_SIDE_EFFECTS__\nfunction setAsync(value2, message2) {\n  return {\n    kind: \"schema\",\n    type: \"set\",\n    reference: setAsync,\n    expects: \"Set\",\n    async: true,\n    value: value2,\n    message: message2,\n    get \"~standard\"() {\n      return _getStandardProps(this);\n    },\n    async \"~run\"(dataset, config2) {\n      const input = dataset.value;\n      if (input instanceof Set) {\n        dataset.typed = true;\n        dataset.value = /* @__PURE__ */ new Set();\n        const valueDatasets = await Promise.all(\n          [...input].map(\n            async (inputValue) => [\n              inputValue,\n              await this.value[\"~run\"]({ value: inputValue }, config2)\n            ]\n          )\n        );\n        for (const [inputValue, valueDataset] of valueDatasets) {\n          if (valueDataset.issues) {\n            const pathItem = {\n              type: \"set\",\n              origin: \"value\",\n              input,\n              key: null,\n              value: inputValue\n            };\n            for (const issue of valueDataset.issues) {\n              if (issue.path) {\n                issue.path.unshift(pathItem);\n              } else {\n                issue.path = [pathItem];\n              }\n              dataset.issues?.push(issue);\n            }\n            if (!dataset.issues) {\n              dataset.issues = valueDataset.issues;\n            }\n            if (config2.abortEarly) {\n              dataset.typed = false;\n              break;\n            }\n          }\n          if (!valueDataset.typed) {\n            dataset.typed = false;\n          }\n          dataset.value.add(valueDataset.value);\n        }\n      } else {\n        _addIssue(this, \"type\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/schemas/strictObject/strictObject.ts\n// @__NO_SIDE_EFFECTS__\nfunction strictObject(entries2, message2) {\n  return {\n    kind: \"schema\",\n    type: \"strict_object\",\n    reference: strictObject,\n    expects: \"Object\",\n    async: false,\n    entries: entries2,\n    message: message2,\n    get \"~standard\"() {\n      return _getStandardProps(this);\n    },\n    \"~run\"(dataset, config2) {\n      const input = dataset.value;\n      if (input && typeof input === \"object\") {\n        dataset.typed = true;\n        dataset.value = {};\n        for (const key in this.entries) {\n          const valueSchema = this.entries[key];\n          if (key in input || (valueSchema.type === \"exact_optional\" || valueSchema.type === \"optional\" || valueSchema.type === \"nullish\") && // @ts-expect-error\n          valueSchema.default !== void 0) {\n            const value2 = key in input ? (\n              // @ts-expect-error\n              input[key]\n            ) : getDefault(valueSchema);\n            const valueDataset = valueSchema[\"~run\"]({ value: value2 }, config2);\n            if (valueDataset.issues) {\n              const pathItem = {\n                type: \"object\",\n                origin: \"value\",\n                input,\n                key,\n                value: value2\n              };\n              for (const issue of valueDataset.issues) {\n                if (issue.path) {\n                  issue.path.unshift(pathItem);\n                } else {\n                  issue.path = [pathItem];\n                }\n                dataset.issues?.push(issue);\n              }\n              if (!dataset.issues) {\n                dataset.issues = valueDataset.issues;\n              }\n              if (config2.abortEarly) {\n                dataset.typed = false;\n                break;\n              }\n            }\n            if (!valueDataset.typed) {\n              dataset.typed = false;\n            }\n            dataset.value[key] = valueDataset.value;\n          } else if (valueSchema.fallback !== void 0) {\n            dataset.value[key] = getFallback(valueSchema);\n          } else if (valueSchema.type !== \"exact_optional\" && valueSchema.type !== \"optional\" && valueSchema.type !== \"nullish\") {\n            _addIssue(this, \"key\", dataset, config2, {\n              input: void 0,\n              expected: `\"${key}\"`,\n              path: [\n                {\n                  type: \"object\",\n                  origin: \"key\",\n                  input,\n                  key,\n                  // @ts-expect-error\n                  value: input[key]\n                }\n              ]\n            });\n            if (config2.abortEarly) {\n              break;\n            }\n          }\n        }\n        if (!dataset.issues || !config2.abortEarly) {\n          for (const key in input) {\n            if (!(key in this.entries)) {\n              _addIssue(this, \"key\", dataset, config2, {\n                input: key,\n                expected: \"never\",\n                path: [\n                  {\n                    type: \"object\",\n                    origin: \"key\",\n                    input,\n                    key,\n                    // @ts-expect-error\n                    value: input[key]\n                  }\n                ]\n              });\n              break;\n            }\n          }\n        }\n      } else {\n        _addIssue(this, \"type\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/schemas/strictObject/strictObjectAsync.ts\n// @__NO_SIDE_EFFECTS__\nfunction strictObjectAsync(entries2, message2) {\n  return {\n    kind: \"schema\",\n    type: \"strict_object\",\n    reference: strictObjectAsync,\n    expects: \"Object\",\n    async: true,\n    entries: entries2,\n    message: message2,\n    get \"~standard\"() {\n      return _getStandardProps(this);\n    },\n    async \"~run\"(dataset, config2) {\n      const input = dataset.value;\n      if (input && typeof input === \"object\") {\n        dataset.typed = true;\n        dataset.value = {};\n        const valueDatasets = await Promise.all(\n          Object.entries(this.entries).map(async ([key, valueSchema]) => {\n            if (key in input || (valueSchema.type === \"exact_optional\" || valueSchema.type === \"optional\" || valueSchema.type === \"nullish\") && // @ts-expect-error\n            valueSchema.default !== void 0) {\n              const value2 = key in input ? (\n                // @ts-expect-error\n                input[key]\n              ) : await getDefault(valueSchema);\n              return [\n                key,\n                value2,\n                valueSchema,\n                await valueSchema[\"~run\"]({ value: value2 }, config2)\n              ];\n            }\n            return [\n              key,\n              // @ts-expect-error\n              input[key],\n              valueSchema,\n              null\n            ];\n          })\n        );\n        for (const [key, value2, valueSchema, valueDataset] of valueDatasets) {\n          if (valueDataset) {\n            if (valueDataset.issues) {\n              const pathItem = {\n                type: \"object\",\n                origin: \"value\",\n                input,\n                key,\n                value: value2\n              };\n              for (const issue of valueDataset.issues) {\n                if (issue.path) {\n                  issue.path.unshift(pathItem);\n                } else {\n                  issue.path = [pathItem];\n                }\n                dataset.issues?.push(issue);\n              }\n              if (!dataset.issues) {\n                dataset.issues = valueDataset.issues;\n              }\n              if (config2.abortEarly) {\n                dataset.typed = false;\n                break;\n              }\n            }\n            if (!valueDataset.typed) {\n              dataset.typed = false;\n            }\n            dataset.value[key] = valueDataset.value;\n          } else if (valueSchema.fallback !== void 0) {\n            dataset.value[key] = await getFallback(valueSchema);\n          } else if (valueSchema.type !== \"exact_optional\" && valueSchema.type !== \"optional\" && valueSchema.type !== \"nullish\") {\n            _addIssue(this, \"key\", dataset, config2, {\n              input: void 0,\n              expected: `\"${key}\"`,\n              path: [\n                {\n                  type: \"object\",\n                  origin: \"key\",\n                  input,\n                  key,\n                  value: value2\n                }\n              ]\n            });\n            if (config2.abortEarly) {\n              break;\n            }\n          }\n        }\n        if (!dataset.issues || !config2.abortEarly) {\n          for (const key in input) {\n            if (!(key in this.entries)) {\n              _addIssue(this, \"key\", dataset, config2, {\n                input: key,\n                expected: \"never\",\n                path: [\n                  {\n                    type: \"object\",\n                    origin: \"key\",\n                    input,\n                    key,\n                    // @ts-expect-error\n                    value: input[key]\n                  }\n                ]\n              });\n              break;\n            }\n          }\n        }\n      } else {\n        _addIssue(this, \"type\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/schemas/strictTuple/strictTuple.ts\n// @__NO_SIDE_EFFECTS__\nfunction strictTuple(items, message2) {\n  return {\n    kind: \"schema\",\n    type: \"strict_tuple\",\n    reference: strictTuple,\n    expects: \"Array\",\n    async: false,\n    items,\n    message: message2,\n    get \"~standard\"() {\n      return _getStandardProps(this);\n    },\n    \"~run\"(dataset, config2) {\n      const input = dataset.value;\n      if (Array.isArray(input)) {\n        dataset.typed = true;\n        dataset.value = [];\n        for (let key = 0; key < this.items.length; key++) {\n          const value2 = input[key];\n          const itemDataset = this.items[key][\"~run\"]({ value: value2 }, config2);\n          if (itemDataset.issues) {\n            const pathItem = {\n              type: \"array\",\n              origin: \"value\",\n              input,\n              key,\n              value: value2\n            };\n            for (const issue of itemDataset.issues) {\n              if (issue.path) {\n                issue.path.unshift(pathItem);\n              } else {\n                issue.path = [pathItem];\n              }\n              dataset.issues?.push(issue);\n            }\n            if (!dataset.issues) {\n              dataset.issues = itemDataset.issues;\n            }\n            if (config2.abortEarly) {\n              dataset.typed = false;\n              break;\n            }\n          }\n          if (!itemDataset.typed) {\n            dataset.typed = false;\n          }\n          dataset.value.push(itemDataset.value);\n        }\n        if (!(dataset.issues && config2.abortEarly) && this.items.length < input.length) {\n          _addIssue(this, \"type\", dataset, config2, {\n            input: input[this.items.length],\n            expected: \"never\",\n            path: [\n              {\n                type: \"array\",\n                origin: \"value\",\n                input,\n                key: this.items.length,\n                value: input[this.items.length]\n              }\n            ]\n          });\n        }\n      } else {\n        _addIssue(this, \"type\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/schemas/strictTuple/strictTupleAsync.ts\n// @__NO_SIDE_EFFECTS__\nfunction strictTupleAsync(items, message2) {\n  return {\n    kind: \"schema\",\n    type: \"strict_tuple\",\n    reference: strictTupleAsync,\n    expects: \"Array\",\n    async: true,\n    items,\n    message: message2,\n    get \"~standard\"() {\n      return _getStandardProps(this);\n    },\n    async \"~run\"(dataset, config2) {\n      const input = dataset.value;\n      if (Array.isArray(input)) {\n        dataset.typed = true;\n        dataset.value = [];\n        const itemDatasets = await Promise.all(\n          this.items.map(async (item, key) => {\n            const value2 = input[key];\n            return [key, value2, await item[\"~run\"]({ value: value2 }, config2)];\n          })\n        );\n        for (const [key, value2, itemDataset] of itemDatasets) {\n          if (itemDataset.issues) {\n            const pathItem = {\n              type: \"array\",\n              origin: \"value\",\n              input,\n              key,\n              value: value2\n            };\n            for (const issue of itemDataset.issues) {\n              if (issue.path) {\n                issue.path.unshift(pathItem);\n              } else {\n                issue.path = [pathItem];\n              }\n              dataset.issues?.push(issue);\n            }\n            if (!dataset.issues) {\n              dataset.issues = itemDataset.issues;\n            }\n            if (config2.abortEarly) {\n              dataset.typed = false;\n              break;\n            }\n          }\n          if (!itemDataset.typed) {\n            dataset.typed = false;\n          }\n          dataset.value.push(itemDataset.value);\n        }\n        if (!(dataset.issues && config2.abortEarly) && this.items.length < input.length) {\n          _addIssue(this, \"type\", dataset, config2, {\n            input: input[this.items.length],\n            expected: \"never\",\n            path: [\n              {\n                type: \"array\",\n                origin: \"value\",\n                input,\n                key: this.items.length,\n                value: input[this.items.length]\n              }\n            ]\n          });\n        }\n      } else {\n        _addIssue(this, \"type\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/schemas/string/string.ts\n// @__NO_SIDE_EFFECTS__\nfunction string(message2) {\n  return {\n    kind: \"schema\",\n    type: \"string\",\n    reference: string,\n    expects: \"string\",\n    async: false,\n    message: message2,\n    get \"~standard\"() {\n      return _getStandardProps(this);\n    },\n    \"~run\"(dataset, config2) {\n      if (typeof dataset.value === \"string\") {\n        dataset.typed = true;\n      } else {\n        _addIssue(this, \"type\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/schemas/symbol/symbol.ts\n// @__NO_SIDE_EFFECTS__\nfunction symbol(message2) {\n  return {\n    kind: \"schema\",\n    type: \"symbol\",\n    reference: symbol,\n    expects: \"symbol\",\n    async: false,\n    message: message2,\n    get \"~standard\"() {\n      return _getStandardProps(this);\n    },\n    \"~run\"(dataset, config2) {\n      if (typeof dataset.value === \"symbol\") {\n        dataset.typed = true;\n      } else {\n        _addIssue(this, \"type\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/schemas/tuple/tuple.ts\n// @__NO_SIDE_EFFECTS__\nfunction tuple(items, message2) {\n  return {\n    kind: \"schema\",\n    type: \"tuple\",\n    reference: tuple,\n    expects: \"Array\",\n    async: false,\n    items,\n    message: message2,\n    get \"~standard\"() {\n      return _getStandardProps(this);\n    },\n    \"~run\"(dataset, config2) {\n      const input = dataset.value;\n      if (Array.isArray(input)) {\n        dataset.typed = true;\n        dataset.value = [];\n        for (let key = 0; key < this.items.length; key++) {\n          const value2 = input[key];\n          const itemDataset = this.items[key][\"~run\"]({ value: value2 }, config2);\n          if (itemDataset.issues) {\n            const pathItem = {\n              type: \"array\",\n              origin: \"value\",\n              input,\n              key,\n              value: value2\n            };\n            for (const issue of itemDataset.issues) {\n              if (issue.path) {\n                issue.path.unshift(pathItem);\n              } else {\n                issue.path = [pathItem];\n              }\n              dataset.issues?.push(issue);\n            }\n            if (!dataset.issues) {\n              dataset.issues = itemDataset.issues;\n            }\n            if (config2.abortEarly) {\n              dataset.typed = false;\n              break;\n            }\n          }\n          if (!itemDataset.typed) {\n            dataset.typed = false;\n          }\n          dataset.value.push(itemDataset.value);\n        }\n      } else {\n        _addIssue(this, \"type\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/schemas/tuple/tupleAsync.ts\n// @__NO_SIDE_EFFECTS__\nfunction tupleAsync(items, message2) {\n  return {\n    kind: \"schema\",\n    type: \"tuple\",\n    reference: tupleAsync,\n    expects: \"Array\",\n    async: true,\n    items,\n    message: message2,\n    get \"~standard\"() {\n      return _getStandardProps(this);\n    },\n    async \"~run\"(dataset, config2) {\n      const input = dataset.value;\n      if (Array.isArray(input)) {\n        dataset.typed = true;\n        dataset.value = [];\n        const itemDatasets = await Promise.all(\n          this.items.map(async (item, key) => {\n            const value2 = input[key];\n            return [key, value2, await item[\"~run\"]({ value: value2 }, config2)];\n          })\n        );\n        for (const [key, value2, itemDataset] of itemDatasets) {\n          if (itemDataset.issues) {\n            const pathItem = {\n              type: \"array\",\n              origin: \"value\",\n              input,\n              key,\n              value: value2\n            };\n            for (const issue of itemDataset.issues) {\n              if (issue.path) {\n                issue.path.unshift(pathItem);\n              } else {\n                issue.path = [pathItem];\n              }\n              dataset.issues?.push(issue);\n            }\n            if (!dataset.issues) {\n              dataset.issues = itemDataset.issues;\n            }\n            if (config2.abortEarly) {\n              dataset.typed = false;\n              break;\n            }\n          }\n          if (!itemDataset.typed) {\n            dataset.typed = false;\n          }\n          dataset.value.push(itemDataset.value);\n        }\n      } else {\n        _addIssue(this, \"type\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/schemas/tupleWithRest/tupleWithRest.ts\n// @__NO_SIDE_EFFECTS__\nfunction tupleWithRest(items, rest, message2) {\n  return {\n    kind: \"schema\",\n    type: \"tuple_with_rest\",\n    reference: tupleWithRest,\n    expects: \"Array\",\n    async: false,\n    items,\n    rest,\n    message: message2,\n    get \"~standard\"() {\n      return _getStandardProps(this);\n    },\n    \"~run\"(dataset, config2) {\n      const input = dataset.value;\n      if (Array.isArray(input)) {\n        dataset.typed = true;\n        dataset.value = [];\n        for (let key = 0; key < this.items.length; key++) {\n          const value2 = input[key];\n          const itemDataset = this.items[key][\"~run\"]({ value: value2 }, config2);\n          if (itemDataset.issues) {\n            const pathItem = {\n              type: \"array\",\n              origin: \"value\",\n              input,\n              key,\n              value: value2\n            };\n            for (const issue of itemDataset.issues) {\n              if (issue.path) {\n                issue.path.unshift(pathItem);\n              } else {\n                issue.path = [pathItem];\n              }\n              dataset.issues?.push(issue);\n            }\n            if (!dataset.issues) {\n              dataset.issues = itemDataset.issues;\n            }\n            if (config2.abortEarly) {\n              dataset.typed = false;\n              break;\n            }\n          }\n          if (!itemDataset.typed) {\n            dataset.typed = false;\n          }\n          dataset.value.push(itemDataset.value);\n        }\n        if (!dataset.issues || !config2.abortEarly) {\n          for (let key = this.items.length; key < input.length; key++) {\n            const value2 = input[key];\n            const itemDataset = this.rest[\"~run\"]({ value: value2 }, config2);\n            if (itemDataset.issues) {\n              const pathItem = {\n                type: \"array\",\n                origin: \"value\",\n                input,\n                key,\n                value: value2\n              };\n              for (const issue of itemDataset.issues) {\n                if (issue.path) {\n                  issue.path.unshift(pathItem);\n                } else {\n                  issue.path = [pathItem];\n                }\n                dataset.issues?.push(issue);\n              }\n              if (!dataset.issues) {\n                dataset.issues = itemDataset.issues;\n              }\n              if (config2.abortEarly) {\n                dataset.typed = false;\n                break;\n              }\n            }\n            if (!itemDataset.typed) {\n              dataset.typed = false;\n            }\n            dataset.value.push(itemDataset.value);\n          }\n        }\n      } else {\n        _addIssue(this, \"type\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/schemas/tupleWithRest/tupleWithRestAsync.ts\n// @__NO_SIDE_EFFECTS__\nfunction tupleWithRestAsync(items, rest, message2) {\n  return {\n    kind: \"schema\",\n    type: \"tuple_with_rest\",\n    reference: tupleWithRestAsync,\n    expects: \"Array\",\n    async: true,\n    items,\n    rest,\n    message: message2,\n    get \"~standard\"() {\n      return _getStandardProps(this);\n    },\n    async \"~run\"(dataset, config2) {\n      const input = dataset.value;\n      if (Array.isArray(input)) {\n        dataset.typed = true;\n        dataset.value = [];\n        const [normalDatasets, restDatasets] = await Promise.all([\n          // Parse schema of each normal item\n          Promise.all(\n            this.items.map(async (item, key) => {\n              const value2 = input[key];\n              return [\n                key,\n                value2,\n                await item[\"~run\"]({ value: value2 }, config2)\n              ];\n            })\n          ),\n          // Parse other items with rest schema\n          Promise.all(\n            input.slice(this.items.length).map(async (value2, key) => {\n              return [\n                key + this.items.length,\n                value2,\n                await this.rest[\"~run\"]({ value: value2 }, config2)\n              ];\n            })\n          )\n        ]);\n        for (const [key, value2, itemDataset] of normalDatasets) {\n          if (itemDataset.issues) {\n            const pathItem = {\n              type: \"array\",\n              origin: \"value\",\n              input,\n              key,\n              value: value2\n            };\n            for (const issue of itemDataset.issues) {\n              if (issue.path) {\n                issue.path.unshift(pathItem);\n              } else {\n                issue.path = [pathItem];\n              }\n              dataset.issues?.push(issue);\n            }\n            if (!dataset.issues) {\n              dataset.issues = itemDataset.issues;\n            }\n            if (config2.abortEarly) {\n              dataset.typed = false;\n              break;\n            }\n          }\n          if (!itemDataset.typed) {\n            dataset.typed = false;\n          }\n          dataset.value.push(itemDataset.value);\n        }\n        if (!dataset.issues || !config2.abortEarly) {\n          for (const [key, value2, itemDataset] of restDatasets) {\n            if (itemDataset.issues) {\n              const pathItem = {\n                type: \"array\",\n                origin: \"value\",\n                input,\n                key,\n                value: value2\n              };\n              for (const issue of itemDataset.issues) {\n                if (issue.path) {\n                  issue.path.unshift(pathItem);\n                } else {\n                  issue.path = [pathItem];\n                }\n                dataset.issues?.push(issue);\n              }\n              if (!dataset.issues) {\n                dataset.issues = itemDataset.issues;\n              }\n              if (config2.abortEarly) {\n                dataset.typed = false;\n                break;\n              }\n            }\n            if (!itemDataset.typed) {\n              dataset.typed = false;\n            }\n            dataset.value.push(itemDataset.value);\n          }\n        }\n      } else {\n        _addIssue(this, \"type\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/schemas/undefined/undefined.ts\n// @__NO_SIDE_EFFECTS__\nfunction undefined_(message2) {\n  return {\n    kind: \"schema\",\n    type: \"undefined\",\n    reference: undefined_,\n    expects: \"undefined\",\n    async: false,\n    message: message2,\n    get \"~standard\"() {\n      return _getStandardProps(this);\n    },\n    \"~run\"(dataset, config2) {\n      if (dataset.value === void 0) {\n        dataset.typed = true;\n      } else {\n        _addIssue(this, \"type\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/schemas/undefinedable/undefinedable.ts\n// @__NO_SIDE_EFFECTS__\nfunction undefinedable(wrapped, default_) {\n  return {\n    kind: \"schema\",\n    type: \"undefinedable\",\n    reference: undefinedable,\n    expects: `(${wrapped.expects} | undefined)`,\n    async: false,\n    wrapped,\n    default: default_,\n    get \"~standard\"() {\n      return _getStandardProps(this);\n    },\n    \"~run\"(dataset, config2) {\n      if (dataset.value === void 0) {\n        if (this.default !== void 0) {\n          dataset.value = getDefault(this, dataset, config2);\n        }\n        if (dataset.value === void 0) {\n          dataset.typed = true;\n          return dataset;\n        }\n      }\n      return this.wrapped[\"~run\"](dataset, config2);\n    }\n  };\n}\n\n// src/schemas/undefinedable/undefinedableAsync.ts\n// @__NO_SIDE_EFFECTS__\nfunction undefinedableAsync(wrapped, default_) {\n  return {\n    kind: \"schema\",\n    type: \"undefinedable\",\n    reference: undefinedableAsync,\n    expects: `(${wrapped.expects} | undefined)`,\n    async: true,\n    wrapped,\n    default: default_,\n    get \"~standard\"() {\n      return _getStandardProps(this);\n    },\n    async \"~run\"(dataset, config2) {\n      if (dataset.value === void 0) {\n        if (this.default !== void 0) {\n          dataset.value = await getDefault(this, dataset, config2);\n        }\n        if (dataset.value === void 0) {\n          dataset.typed = true;\n          return dataset;\n        }\n      }\n      return this.wrapped[\"~run\"](dataset, config2);\n    }\n  };\n}\n\n// src/schemas/union/utils/_subIssues/_subIssues.ts\n// @__NO_SIDE_EFFECTS__\nfunction _subIssues(datasets) {\n  let issues;\n  if (datasets) {\n    for (const dataset of datasets) {\n      if (issues) {\n        issues.push(...dataset.issues);\n      } else {\n        issues = dataset.issues;\n      }\n    }\n  }\n  return issues;\n}\n\n// src/schemas/union/union.ts\n// @__NO_SIDE_EFFECTS__\nfunction union(options, message2) {\n  return {\n    kind: \"schema\",\n    type: \"union\",\n    reference: union,\n    expects: _joinExpects(\n      options.map((option) => option.expects),\n      \"|\"\n    ),\n    async: false,\n    options,\n    message: message2,\n    get \"~standard\"() {\n      return _getStandardProps(this);\n    },\n    \"~run\"(dataset, config2) {\n      let validDataset;\n      let typedDatasets;\n      let untypedDatasets;\n      for (const schema of this.options) {\n        const optionDataset = schema[\"~run\"]({ value: dataset.value }, config2);\n        if (optionDataset.typed) {\n          if (optionDataset.issues) {\n            if (typedDatasets) {\n              typedDatasets.push(optionDataset);\n            } else {\n              typedDatasets = [optionDataset];\n            }\n          } else {\n            validDataset = optionDataset;\n            break;\n          }\n        } else {\n          if (untypedDatasets) {\n            untypedDatasets.push(optionDataset);\n          } else {\n            untypedDatasets = [optionDataset];\n          }\n        }\n      }\n      if (validDataset) {\n        return validDataset;\n      }\n      if (typedDatasets) {\n        if (typedDatasets.length === 1) {\n          return typedDatasets[0];\n        }\n        _addIssue(this, \"type\", dataset, config2, {\n          issues: _subIssues(typedDatasets)\n        });\n        dataset.typed = true;\n      } else if (untypedDatasets?.length === 1) {\n        return untypedDatasets[0];\n      } else {\n        _addIssue(this, \"type\", dataset, config2, {\n          issues: _subIssues(untypedDatasets)\n        });\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/schemas/union/unionAsync.ts\n// @__NO_SIDE_EFFECTS__\nfunction unionAsync(options, message2) {\n  return {\n    kind: \"schema\",\n    type: \"union\",\n    reference: unionAsync,\n    expects: _joinExpects(\n      options.map((option) => option.expects),\n      \"|\"\n    ),\n    async: true,\n    options,\n    message: message2,\n    get \"~standard\"() {\n      return _getStandardProps(this);\n    },\n    async \"~run\"(dataset, config2) {\n      let validDataset;\n      let typedDatasets;\n      let untypedDatasets;\n      for (const schema of this.options) {\n        const optionDataset = await schema[\"~run\"](\n          { value: dataset.value },\n          config2\n        );\n        if (optionDataset.typed) {\n          if (optionDataset.issues) {\n            if (typedDatasets) {\n              typedDatasets.push(optionDataset);\n            } else {\n              typedDatasets = [optionDataset];\n            }\n          } else {\n            validDataset = optionDataset;\n            break;\n          }\n        } else {\n          if (untypedDatasets) {\n            untypedDatasets.push(optionDataset);\n          } else {\n            untypedDatasets = [optionDataset];\n          }\n        }\n      }\n      if (validDataset) {\n        return validDataset;\n      }\n      if (typedDatasets) {\n        if (typedDatasets.length === 1) {\n          return typedDatasets[0];\n        }\n        _addIssue(this, \"type\", dataset, config2, {\n          issues: _subIssues(typedDatasets)\n        });\n        dataset.typed = true;\n      } else if (untypedDatasets?.length === 1) {\n        return untypedDatasets[0];\n      } else {\n        _addIssue(this, \"type\", dataset, config2, {\n          issues: _subIssues(untypedDatasets)\n        });\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/schemas/unknown/unknown.ts\n// @__NO_SIDE_EFFECTS__\nfunction unknown() {\n  return {\n    kind: \"schema\",\n    type: \"unknown\",\n    reference: unknown,\n    expects: \"unknown\",\n    async: false,\n    get \"~standard\"() {\n      return _getStandardProps(this);\n    },\n    \"~run\"(dataset) {\n      dataset.typed = true;\n      return dataset;\n    }\n  };\n}\n\n// src/schemas/variant/variant.ts\n// @__NO_SIDE_EFFECTS__\nfunction variant(key, options, message2) {\n  return {\n    kind: \"schema\",\n    type: \"variant\",\n    reference: variant,\n    expects: \"Object\",\n    async: false,\n    key,\n    options,\n    message: message2,\n    get \"~standard\"() {\n      return _getStandardProps(this);\n    },\n    \"~run\"(dataset, config2) {\n      const input = dataset.value;\n      if (input && typeof input === \"object\") {\n        let outputDataset;\n        let maxDiscriminatorPriority = 0;\n        let invalidDiscriminatorKey = this.key;\n        let expectedDiscriminators = [];\n        const parseOptions = (variant2, allKeys) => {\n          for (const schema of variant2.options) {\n            if (schema.type === \"variant\") {\n              parseOptions(schema, new Set(allKeys).add(schema.key));\n            } else {\n              let keysAreValid = true;\n              let currentPriority = 0;\n              for (const currentKey of allKeys) {\n                const discriminatorSchema = schema.entries[currentKey];\n                if (currentKey in input ? discriminatorSchema[\"~run\"](\n                  // @ts-expect-error\n                  { typed: false, value: input[currentKey] },\n                  { abortEarly: true }\n                ).issues : discriminatorSchema.type !== \"exact_optional\" && discriminatorSchema.type !== \"optional\" && discriminatorSchema.type !== \"nullish\") {\n                  keysAreValid = false;\n                  if (invalidDiscriminatorKey !== currentKey && (maxDiscriminatorPriority < currentPriority || maxDiscriminatorPriority === currentPriority && currentKey in input && !(invalidDiscriminatorKey in input))) {\n                    maxDiscriminatorPriority = currentPriority;\n                    invalidDiscriminatorKey = currentKey;\n                    expectedDiscriminators = [];\n                  }\n                  if (invalidDiscriminatorKey === currentKey) {\n                    expectedDiscriminators.push(\n                      schema.entries[currentKey].expects\n                    );\n                  }\n                  break;\n                }\n                currentPriority++;\n              }\n              if (keysAreValid) {\n                const optionDataset = schema[\"~run\"]({ value: input }, config2);\n                if (!outputDataset || !outputDataset.typed && optionDataset.typed) {\n                  outputDataset = optionDataset;\n                }\n              }\n            }\n            if (outputDataset && !outputDataset.issues) {\n              break;\n            }\n          }\n        };\n        parseOptions(this, /* @__PURE__ */ new Set([this.key]));\n        if (outputDataset) {\n          return outputDataset;\n        }\n        _addIssue(this, \"type\", dataset, config2, {\n          // @ts-expect-error\n          input: input[invalidDiscriminatorKey],\n          expected: _joinExpects(expectedDiscriminators, \"|\"),\n          path: [\n            {\n              type: \"object\",\n              origin: \"value\",\n              input,\n              key: invalidDiscriminatorKey,\n              // @ts-expect-error\n              value: input[invalidDiscriminatorKey]\n            }\n          ]\n        });\n      } else {\n        _addIssue(this, \"type\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/schemas/variant/variantAsync.ts\n// @__NO_SIDE_EFFECTS__\nfunction variantAsync(key, options, message2) {\n  return {\n    kind: \"schema\",\n    type: \"variant\",\n    reference: variantAsync,\n    expects: \"Object\",\n    async: true,\n    key,\n    options,\n    message: message2,\n    get \"~standard\"() {\n      return _getStandardProps(this);\n    },\n    async \"~run\"(dataset, config2) {\n      const input = dataset.value;\n      if (input && typeof input === \"object\") {\n        let outputDataset;\n        let maxDiscriminatorPriority = 0;\n        let invalidDiscriminatorKey = this.key;\n        let expectedDiscriminators = [];\n        const parseOptions = async (variant2, allKeys) => {\n          for (const schema of variant2.options) {\n            if (schema.type === \"variant\") {\n              await parseOptions(schema, new Set(allKeys).add(schema.key));\n            } else {\n              let keysAreValid = true;\n              let currentPriority = 0;\n              for (const currentKey of allKeys) {\n                const discriminatorSchema = schema.entries[currentKey];\n                if (currentKey in input ? (await discriminatorSchema[\"~run\"](\n                  // @ts-expect-error\n                  { typed: false, value: input[currentKey] },\n                  { abortEarly: true }\n                )).issues : discriminatorSchema.type !== \"exact_optional\" && discriminatorSchema.type !== \"optional\" && discriminatorSchema.type !== \"nullish\") {\n                  keysAreValid = false;\n                  if (invalidDiscriminatorKey !== currentKey && (maxDiscriminatorPriority < currentPriority || maxDiscriminatorPriority === currentPriority && currentKey in input && !(invalidDiscriminatorKey in input))) {\n                    maxDiscriminatorPriority = currentPriority;\n                    invalidDiscriminatorKey = currentKey;\n                    expectedDiscriminators = [];\n                  }\n                  if (invalidDiscriminatorKey === currentKey) {\n                    expectedDiscriminators.push(\n                      schema.entries[currentKey].expects\n                    );\n                  }\n                  break;\n                }\n                currentPriority++;\n              }\n              if (keysAreValid) {\n                const optionDataset = await schema[\"~run\"](\n                  { value: input },\n                  config2\n                );\n                if (!outputDataset || !outputDataset.typed && optionDataset.typed) {\n                  outputDataset = optionDataset;\n                }\n              }\n            }\n            if (outputDataset && !outputDataset.issues) {\n              break;\n            }\n          }\n        };\n        await parseOptions(this, /* @__PURE__ */ new Set([this.key]));\n        if (outputDataset) {\n          return outputDataset;\n        }\n        _addIssue(this, \"type\", dataset, config2, {\n          // @ts-expect-error\n          input: input[invalidDiscriminatorKey],\n          expected: _joinExpects(expectedDiscriminators, \"|\"),\n          path: [\n            {\n              type: \"object\",\n              origin: \"value\",\n              input,\n              key: invalidDiscriminatorKey,\n              // @ts-expect-error\n              value: input[invalidDiscriminatorKey]\n            }\n          ]\n        });\n      } else {\n        _addIssue(this, \"type\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/schemas/void/void.ts\n// @__NO_SIDE_EFFECTS__\nfunction void_(message2) {\n  return {\n    kind: \"schema\",\n    type: \"void\",\n    reference: void_,\n    expects: \"void\",\n    async: false,\n    message: message2,\n    get \"~standard\"() {\n      return _getStandardProps(this);\n    },\n    \"~run\"(dataset, config2) {\n      if (dataset.value === void 0) {\n        dataset.typed = true;\n      } else {\n        _addIssue(this, \"type\", dataset, config2);\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/methods/keyof/keyof.ts\n// @__NO_SIDE_EFFECTS__\nfunction keyof(schema, message2) {\n  return picklist(Object.keys(schema.entries), message2);\n}\n\n// src/methods/message/message.ts\n// @__NO_SIDE_EFFECTS__\nfunction message(schema, message_) {\n  return {\n    ...schema,\n    get \"~standard\"() {\n      return _getStandardProps(this);\n    },\n    \"~run\"(dataset, config2) {\n      return schema[\"~run\"](dataset, { ...config2, message: message_ });\n    }\n  };\n}\n\n// src/methods/omit/omit.ts\n// @__NO_SIDE_EFFECTS__\nfunction omit(schema, keys) {\n  const entries2 = {\n    ...schema.entries\n  };\n  for (const key of keys) {\n    delete entries2[key];\n  }\n  return {\n    ...schema,\n    entries: entries2,\n    get \"~standard\"() {\n      return _getStandardProps(this);\n    }\n  };\n}\n\n// src/methods/parse/parse.ts\nfunction parse(schema, input, config2) {\n  const dataset = schema[\"~run\"]({ value: input }, getGlobalConfig(config2));\n  if (dataset.issues) {\n    throw new ValiError(dataset.issues);\n  }\n  return dataset.value;\n}\n\n// src/methods/parse/parseAsync.ts\nasync function parseAsync(schema, input, config2) {\n  const dataset = await schema[\"~run\"](\n    { value: input },\n    getGlobalConfig(config2)\n  );\n  if (dataset.issues) {\n    throw new ValiError(dataset.issues);\n  }\n  return dataset.value;\n}\n\n// src/methods/parser/parser.ts\n// @__NO_SIDE_EFFECTS__\nfunction parser(schema, config2) {\n  const func = (input) => parse(schema, input, config2);\n  func.schema = schema;\n  func.config = config2;\n  return func;\n}\n\n// src/methods/parser/parserAsync.ts\n// @__NO_SIDE_EFFECTS__\nfunction parserAsync(schema, config2) {\n  const func = (input) => parseAsync(schema, input, config2);\n  func.schema = schema;\n  func.config = config2;\n  return func;\n}\n\n// src/methods/partial/partial.ts\n// @__NO_SIDE_EFFECTS__\nfunction partial(schema, keys) {\n  const entries2 = {};\n  for (const key in schema.entries) {\n    entries2[key] = !keys || keys.includes(key) ? optional(schema.entries[key]) : schema.entries[key];\n  }\n  return {\n    ...schema,\n    entries: entries2,\n    get \"~standard\"() {\n      return _getStandardProps(this);\n    }\n  };\n}\n\n// src/methods/partial/partialAsync.ts\n// @__NO_SIDE_EFFECTS__\nfunction partialAsync(schema, keys) {\n  const entries2 = {};\n  for (const key in schema.entries) {\n    entries2[key] = !keys || keys.includes(key) ? optionalAsync(schema.entries[key]) : schema.entries[key];\n  }\n  return {\n    ...schema,\n    entries: entries2,\n    get \"~standard\"() {\n      return _getStandardProps(this);\n    }\n  };\n}\n\n// src/methods/pick/pick.ts\n// @__NO_SIDE_EFFECTS__\nfunction pick(schema, keys) {\n  const entries2 = {};\n  for (const key of keys) {\n    entries2[key] = schema.entries[key];\n  }\n  return {\n    ...schema,\n    entries: entries2,\n    get \"~standard\"() {\n      return _getStandardProps(this);\n    }\n  };\n}\n\n// src/methods/pipe/pipe.ts\n// @__NO_SIDE_EFFECTS__\nfunction pipe(...pipe2) {\n  return {\n    ...pipe2[0],\n    pipe: pipe2,\n    get \"~standard\"() {\n      return _getStandardProps(this);\n    },\n    \"~run\"(dataset, config2) {\n      for (const item of pipe2) {\n        if (item.kind !== \"metadata\") {\n          if (dataset.issues && (item.kind === \"schema\" || item.kind === \"transformation\")) {\n            dataset.typed = false;\n            break;\n          }\n          if (!dataset.issues || !config2.abortEarly && !config2.abortPipeEarly) {\n            dataset = item[\"~run\"](dataset, config2);\n          }\n        }\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/methods/pipe/pipeAsync.ts\n// @__NO_SIDE_EFFECTS__\nfunction pipeAsync(...pipe2) {\n  return {\n    ...pipe2[0],\n    pipe: pipe2,\n    async: true,\n    get \"~standard\"() {\n      return _getStandardProps(this);\n    },\n    async \"~run\"(dataset, config2) {\n      for (const item of pipe2) {\n        if (item.kind !== \"metadata\") {\n          if (dataset.issues && (item.kind === \"schema\" || item.kind === \"transformation\")) {\n            dataset.typed = false;\n            break;\n          }\n          if (!dataset.issues || !config2.abortEarly && !config2.abortPipeEarly) {\n            dataset = await item[\"~run\"](dataset, config2);\n          }\n        }\n      }\n      return dataset;\n    }\n  };\n}\n\n// src/methods/required/required.ts\n// @__NO_SIDE_EFFECTS__\nfunction required(schema, arg2, arg3) {\n  const keys = Array.isArray(arg2) ? arg2 : void 0;\n  const message2 = Array.isArray(arg2) ? arg3 : arg2;\n  const entries2 = {};\n  for (const key in schema.entries) {\n    entries2[key] = !keys || keys.includes(key) ? nonOptional(schema.entries[key], message2) : schema.entries[key];\n  }\n  return {\n    ...schema,\n    entries: entries2,\n    get \"~standard\"() {\n      return _getStandardProps(this);\n    }\n  };\n}\n\n// src/methods/required/requiredAsync.ts\n// @__NO_SIDE_EFFECTS__\nfunction requiredAsync(schema, arg2, arg3) {\n  const keys = Array.isArray(arg2) ? arg2 : void 0;\n  const message2 = Array.isArray(arg2) ? arg3 : arg2;\n  const entries2 = {};\n  for (const key in schema.entries) {\n    entries2[key] = !keys || keys.includes(key) ? nonOptionalAsync(schema.entries[key], message2) : schema.entries[key];\n  }\n  return {\n    ...schema,\n    entries: entries2,\n    get \"~standard\"() {\n      return _getStandardProps(this);\n    }\n  };\n}\n\n// src/methods/safeParse/safeParse.ts\n// @__NO_SIDE_EFFECTS__\nfunction safeParse(schema, input, config2) {\n  const dataset = schema[\"~run\"]({ value: input }, getGlobalConfig(config2));\n  return {\n    typed: dataset.typed,\n    success: !dataset.issues,\n    output: dataset.value,\n    issues: dataset.issues\n  };\n}\n\n// src/methods/safeParse/safeParseAsync.ts\n// @__NO_SIDE_EFFECTS__\nasync function safeParseAsync(schema, input, config2) {\n  const dataset = await schema[\"~run\"](\n    { value: input },\n    getGlobalConfig(config2)\n  );\n  return {\n    typed: dataset.typed,\n    success: !dataset.issues,\n    output: dataset.value,\n    issues: dataset.issues\n  };\n}\n\n// src/methods/safeParser/safeParser.ts\n// @__NO_SIDE_EFFECTS__\nfunction safeParser(schema, config2) {\n  const func = (input) => safeParse(schema, input, config2);\n  func.schema = schema;\n  func.config = config2;\n  return func;\n}\n\n// src/methods/safeParser/safeParserAsync.ts\n// @__NO_SIDE_EFFECTS__\nfunction safeParserAsync(schema, config2) {\n  const func = (input) => safeParseAsync(schema, input, config2);\n  func.schema = schema;\n  func.config = config2;\n  return func;\n}\n\n// src/methods/summarize/summarize.ts\n// @__NO_SIDE_EFFECTS__\nfunction summarize(issues) {\n  let summary = \"\";\n  for (const issue of issues) {\n    if (summary) {\n      summary += \"\\n\";\n    }\n    summary += `\\xD7 ${issue.message}`;\n    const dotPath = getDotPath(issue);\n    if (dotPath) {\n      summary += `\n  \\u2192 at ${dotPath}`;\n    }\n  }\n  return summary;\n}\n\n// src/methods/unwrap/unwrap.ts\n// @__NO_SIDE_EFFECTS__\nfunction unwrap(schema) {\n  return schema.wrapped;\n}\nexport {\n  BASE64_REGEX,\n  BIC_REGEX,\n  CUID2_REGEX,\n  DECIMAL_REGEX,\n  DIGITS_REGEX,\n  EMAIL_REGEX,\n  EMOJI_REGEX,\n  HEXADECIMAL_REGEX,\n  HEX_COLOR_REGEX,\n  IMEI_REGEX,\n  IPV4_REGEX,\n  IPV6_REGEX,\n  IP_REGEX,\n  ISO_DATE_REGEX,\n  ISO_DATE_TIME_REGEX,\n  ISO_TIMESTAMP_REGEX,\n  ISO_TIME_REGEX,\n  ISO_TIME_SECOND_REGEX,\n  ISO_WEEK_REGEX,\n  MAC48_REGEX,\n  MAC64_REGEX,\n  MAC_REGEX,\n  NANO_ID_REGEX,\n  OCTAL_REGEX,\n  RFC_EMAIL_REGEX,\n  SLUG_REGEX,\n  ULID_REGEX,\n  UUID_REGEX,\n  ValiError,\n  _addIssue,\n  _getByteCount,\n  _getGraphemeCount,\n  _getLastMetadata,\n  _getStandardProps,\n  _getWordCount,\n  _isLuhnAlgo,\n  _isValidObjectKey,\n  _joinExpects,\n  _stringify,\n  any,\n  args,\n  argsAsync,\n  array,\n  arrayAsync,\n  assert,\n  awaitAsync,\n  base64,\n  bic,\n  bigint,\n  blob,\n  boolean,\n  brand,\n  bytes,\n  check,\n  checkAsync,\n  checkItems,\n  checkItemsAsync,\n  config,\n  creditCard,\n  cuid2,\n  custom,\n  customAsync,\n  date,\n  decimal,\n  deleteGlobalConfig,\n  deleteGlobalMessage,\n  deleteSchemaMessage,\n  deleteSpecificMessage,\n  description,\n  digits,\n  email,\n  emoji,\n  empty,\n  endsWith,\n  entries,\n  entriesFromList,\n  entriesFromObjects,\n  enum_ as enum,\n  enum_,\n  everyItem,\n  exactOptional,\n  exactOptionalAsync,\n  excludes,\n  fallback,\n  fallbackAsync,\n  file,\n  filterItems,\n  findItem,\n  finite,\n  flatten,\n  flavor,\n  forward,\n  forwardAsync,\n  function_ as function,\n  function_,\n  getDefault,\n  getDefaults,\n  getDefaultsAsync,\n  getDescription,\n  getDotPath,\n  getFallback,\n  getFallbacks,\n  getFallbacksAsync,\n  getGlobalConfig,\n  getGlobalMessage,\n  getMetadata,\n  getSchemaMessage,\n  getSpecificMessage,\n  getTitle,\n  graphemes,\n  gtValue,\n  hash,\n  hexColor,\n  hexadecimal,\n  imei,\n  includes,\n  instance,\n  integer,\n  intersect,\n  intersectAsync,\n  ip,\n  ipv4,\n  ipv6,\n  is,\n  isOfKind,\n  isOfType,\n  isValiError,\n  isoDate,\n  isoDateTime,\n  isoTime,\n  isoTimeSecond,\n  isoTimestamp,\n  isoWeek,\n  keyof,\n  lazy,\n  lazyAsync,\n  length,\n  literal,\n  looseObject,\n  looseObjectAsync,\n  looseTuple,\n  looseTupleAsync,\n  ltValue,\n  mac,\n  mac48,\n  mac64,\n  map,\n  mapAsync,\n  mapItems,\n  maxBytes,\n  maxEntries,\n  maxGraphemes,\n  maxLength,\n  maxSize,\n  maxValue,\n  maxWords,\n  message,\n  metadata,\n  mimeType,\n  minBytes,\n  minEntries,\n  minGraphemes,\n  minLength,\n  minSize,\n  minValue,\n  minWords,\n  multipleOf,\n  nan,\n  nanoid,\n  never,\n  nonEmpty,\n  nonNullable,\n  nonNullableAsync,\n  nonNullish,\n  nonNullishAsync,\n  nonOptional,\n  nonOptionalAsync,\n  normalize,\n  notBytes,\n  notEntries,\n  notGraphemes,\n  notLength,\n  notSize,\n  notValue,\n  notValues,\n  notWords,\n  null_ as null,\n  null_,\n  nullable,\n  nullableAsync,\n  nullish,\n  nullishAsync,\n  number,\n  object,\n  objectAsync,\n  objectWithRest,\n  objectWithRestAsync,\n  octal,\n  omit,\n  optional,\n  optionalAsync,\n  parse,\n  parseAsync,\n  parseJson,\n  parser,\n  parserAsync,\n  partial,\n  partialAsync,\n  partialCheck,\n  partialCheckAsync,\n  pick,\n  picklist,\n  pipe,\n  pipeAsync,\n  promise,\n  rawCheck,\n  rawCheckAsync,\n  rawTransform,\n  rawTransformAsync,\n  readonly,\n  record,\n  recordAsync,\n  reduceItems,\n  regex,\n  required,\n  requiredAsync,\n  returns,\n  returnsAsync,\n  rfcEmail,\n  safeInteger,\n  safeParse,\n  safeParseAsync,\n  safeParser,\n  safeParserAsync,\n  set,\n  setAsync,\n  setGlobalConfig,\n  setGlobalMessage,\n  setSchemaMessage,\n  setSpecificMessage,\n  size,\n  slug,\n  someItem,\n  sortItems,\n  startsWith,\n  strictObject,\n  strictObjectAsync,\n  strictTuple,\n  strictTupleAsync,\n  string,\n  stringifyJson,\n  summarize,\n  symbol,\n  title,\n  toLowerCase,\n  toMaxValue,\n  toMinValue,\n  toUpperCase,\n  transform,\n  transformAsync,\n  trim,\n  trimEnd,\n  trimStart,\n  tuple,\n  tupleAsync,\n  tupleWithRest,\n  tupleWithRestAsync,\n  ulid,\n  undefined_ as undefined,\n  undefined_,\n  undefinedable,\n  undefinedableAsync,\n  union,\n  unionAsync,\n  unknown,\n  unwrap,\n  url,\n  uuid,\n  value,\n  values,\n  variant,\n  variantAsync,\n  void_ as void,\n  void_,\n  words\n};\n","var $ = Object.defineProperty;\nvar q = (r, e, t) => e in r ? $(r, e, { enumerable: !0, configurable: !0, writable: !0, value: t }) : r[e] = t;\nvar w = (r, e, t) => q(r, typeof e != \"symbol\" ? e + \"\" : e, t);\nvar D = Object.defineProperty, G = (r, e, t) => e in r ? D(r, e, { enumerable: !0, configurable: !0, writable: !0, value: t }) : r[e] = t, E = (r, e, t) => G(r, typeof e != \"symbol\" ? e + \"\" : e, t);\nfunction I(r) {\n  return (e) => e instanceof r;\n}\nfunction L(r, e) {\n  const t = class extends Error {\n    constructor(...d) {\n      const l = typeof e == \"function\" ? e(...d) : typeof e == \"string\" ? [e] : e || [];\n      super(...l), this.name = r;\n    }\n  };\n  E(t, \"is\", I(t));\n  let c = t;\n  return Object.defineProperty(c, \"name\", { value: r }), c;\n}\nfunction H(r, e, t) {\n  const c = class extends L(r, t) {\n    constructor(...l) {\n      super(...l), E(this, \"data\"), this.data = e(...l);\n    }\n  };\n  E(c, \"is\", I(c));\n  let o = c;\n  return Object.defineProperty(o, \"name\", { value: r }), o;\n}\nclass J extends L(\"CancelledError\", \"Promise was canceled\") {\n}\nclass K extends H(\n  \"TimeoutError\",\n  (e) => ({ timeout: e }),\n  (e, t) => [`Timeout reached: ${e}ms`, { cause: t }]\n) {\n}\nconst S = Symbol(\"resolved\");\nfunction V(r) {\n  return typeof r == \"object\" && !!r && \"tag\" in r && r.tag === S;\n}\nfunction M(r) {\n  return { tag: S, value: r };\n}\nfunction C(r, e) {\n  return r.reject = e.reject, r.resolve = e.resolve, r;\n}\nclass g extends Promise {\n  constructor(t, c) {\n    let o, d, l, p;\n    typeof t == \"function\" ? (l = t, p = c || {}) : p = t || {};\n    let u, a;\n    const x = () => !!a, O = () => !!u;\n    let f = {};\n    const b = [], T = () => {\n      b.forEach((m) => m()), b.splice(0, b.length), f = {};\n    }, y = new AbortController(), k = () => O() || x();\n    super((m, F) => {\n      const { abortOnResolve: P = !0, abortOnReject: A = !0 } = p;\n      d = (n) => {\n        var h, s;\n        k() || (m(n), u = [n], (h = f.resolved) == null || h.forEach((i) => i(n)), (s = f.finalized) == null || s.forEach((i) => i({ kind: \"resolved\", result: n })), T(), P && y.abort(M(n)));\n      }, o = (n) => {\n        var h, s;\n        k() || (F(n), a = [n], (h = f.rejected) == null || h.forEach((i) => i(n)), (s = f.finalized) == null || s.forEach((i) => i({ kind: \"rejected\", reason: n })), T(), A && y.abort(n));\n      };\n      const { abortSignal: j } = p;\n      if (j) {\n        if (j.aborted)\n          return o(j.reason);\n        const n = () => {\n          o(j.reason);\n        };\n        j.addEventListener(\"abort\", n, !0), b.push(() => {\n          j.removeEventListener(\"abort\", n, !0);\n        });\n      }\n      const { timeout: R } = p;\n      if (R) {\n        const n = setTimeout(() => {\n          o(new K(R));\n        }, R);\n        b.push(() => {\n          clearTimeout(n);\n        });\n      }\n      try {\n        const n = () => {\n        }, h = l && l(d, o, {\n          abortSignal: y.signal,\n          get isRejected() {\n            return x();\n          },\n          get isResolved() {\n            return O();\n          },\n          on(s, i) {\n            if (u || a) {\n              if (s === \"finalized\") {\n                const v = u ? { kind: \"resolved\", result: u[0] } : { kind: \"rejected\", reason: a[0] };\n                i(v);\n              } else s === \"resolved\" && u ? i(u[0]) : s === \"rejected\" && a && i(a[0]);\n              return n;\n            }\n            return f[s] || (f[s] = []), f[s].push(i), () => {\n              const v = f[s] || [], z = v.indexOf(i);\n              z >= 0 && v.splice(z, 1);\n            };\n          },\n          get result() {\n            return u == null ? void 0 : u[0];\n          },\n          get rejectReason() {\n            return a == null ? void 0 : a[0];\n          },\n          throwIfRejected() {\n            if (a)\n              throw a[0];\n          }\n        });\n        h instanceof Promise && h.catch(o);\n      } catch (n) {\n        o(n);\n      }\n    });\n    /**\n     * Rejects the initially created promise.\n     *\n     * This method not only aborts the signal passed to the executor, but also rejects the\n     * promise itself calling all chained listeners.\n     *\n     * The reason passed to the method is being passed as-is to the executor's context.\n     */\n    w(this, \"reject\");\n    /**\n     * Resolves the promise.\n     */\n    w(this, \"resolve\");\n    this.reject = o, this.resolve = d;\n  }\n  static fn(t, c) {\n    return new g(async (o, d, l) => {\n      try {\n        o(await t(l));\n      } catch (p) {\n        d(p);\n      }\n    }, c);\n  }\n  static resolve(t) {\n    return this.fn(() => t);\n  }\n  /**\n   * @see Promise.reject\n   */\n  static reject(t) {\n    return new g((c, o) => {\n      o(t);\n    });\n  }\n  /**\n   * Rejects the promise with the `CancelledError` error.\n   */\n  cancel() {\n    this.reject(new J());\n  }\n  /**\n   * @see Promise.catch\n   */\n  catch(t) {\n    return this.then(void 0, t);\n  }\n  /**\n   * @see Promise.finally\n   */\n  finally(t) {\n    return C(super.finally(t), this);\n  }\n  /**\n   * @see Promise.then\n   */\n  then(t, c) {\n    return C(\n      super.then(t, c),\n      this\n    );\n  }\n}\nexport {\n  g as BetterPromise,\n  J as CancelledError,\n  K as TimeoutError,\n  V as isResolved,\n  M as withResolved\n};\n//# sourceMappingURL=index.js.map\n","import { BetterPromise as y } from \"better-promises\";\nfunction ar(r) {\n  return r.replace(/[A-Z]/g, (n) => `-${n.toLowerCase()}`);\n}\nfunction E(r) {\n  return r.replace(/[A-Z]/g, (n) => `_${n.toLowerCase()}`);\n}\nfunction ir(r) {\n  return Object.entries(r).reduce((n, [t, e]) => (n[E(t)] = e, n), {});\n}\nfunction F(r) {\n  return r.replace(/_[a-z]/g, (n) => n[1].toUpperCase());\n}\nfunction I(r) {\n  return Object.entries(r).reduce((n, [t, e]) => (n[F(t)] = e, n), {});\n}\nfunction v(r) {\n  const n = I(r);\n  for (const t in n) {\n    const e = n[t];\n    e && typeof e == \"object\" && !(e instanceof Date) && (n[t] = Array.isArray(e) ? e.map(v) : v(e));\n  }\n  return n;\n}\nfunction cr(r) {\n  return r.replace(/_([a-z])/g, (n, t) => `-${t.toLowerCase()}`);\n}\nfunction m(r) {\n  return `tapps/${r}`;\n}\nfunction sr(r, n) {\n  sessionStorage.setItem(m(r), JSON.stringify(n));\n}\nfunction fr(r) {\n  const n = sessionStorage.getItem(m(r));\n  try {\n    return n ? JSON.parse(n) : void 0;\n  } catch {\n  }\n}\nfunction lr(...r) {\n  const n = r.flat(1);\n  return [\n    n.push.bind(n),\n    () => {\n      n.forEach((t) => {\n        t();\n      });\n    }\n  ];\n}\n// @__NO_SIDE_EFFECTS__\nfunction hr(r, n) {\n  n || (n = {});\n  const {\n    textColor: t,\n    bgColor: e,\n    shouldLog: a\n  } = n, u = a === void 0 ? !0 : a, i = typeof u == \"boolean\" ? () => u : u, s = (f, o, ...c) => {\n    if (o || i()) {\n      const l = \"font-weight:bold;padding:0 5px;border-radius:100px\", [x, O, j] = {\n        log: [\"#0089c3\", \"white\", \"INFO\"],\n        error: [\"#ff0000F0\", \"white\", \"ERR\"],\n        warn: [\"#D38E15\", \"white\", \"WARN\"]\n      }[f];\n      console[f](\n        `%c${j} ${Intl.DateTimeFormat(\"en-GB\", {\n          hour: \"2-digit\",\n          minute: \"2-digit\",\n          second: \"2-digit\",\n          fractionalSecondDigits: 3,\n          timeZone: \"UTC\"\n        }).format(/* @__PURE__ */ new Date())}%c %c${r}`,\n        `${l};background-color:${x};color:${O}`,\n        \"\",\n        `${l};${t ? `color:${t};` : \"\"}${e ? `background-color:${e}` : \"\"}`,\n        ...c\n      );\n    }\n  };\n  return [\n    [\"log\", \"forceLog\"],\n    [\"warn\", \"forceWarn\"],\n    [\"error\", \"forceError\"]\n  ].reduce((f, [o, c]) => (f[o] = s.bind(void 0, o, !1), f[c] = s.bind(void 0, o, !0), f), {});\n}\nvar P = function(r, n, t) {\n  if (t || arguments.length === 2) for (var e = 0, a = n.length, u; e < a; e++)\n    (u || !(e in n)) && (u || (u = Array.prototype.slice.call(n, 0, e)), u[e] = n[e]);\n  return r.concat(u || Array.prototype.slice.call(n));\n};\nfunction d(r, n, t, e, a, u, i, s, f) {\n  switch (arguments.length) {\n    case 1:\n      return r;\n    case 2:\n      return function() {\n        return n(r.apply(this, arguments));\n      };\n    case 3:\n      return function() {\n        return t(n(r.apply(this, arguments)));\n      };\n    case 4:\n      return function() {\n        return e(t(n(r.apply(this, arguments))));\n      };\n    case 5:\n      return function() {\n        return a(e(t(n(r.apply(this, arguments)))));\n      };\n    case 6:\n      return function() {\n        return u(a(e(t(n(r.apply(this, arguments))))));\n      };\n    case 7:\n      return function() {\n        return i(u(a(e(t(n(r.apply(this, arguments)))))));\n      };\n    case 8:\n      return function() {\n        return s(i(u(a(e(t(n(r.apply(this, arguments))))))));\n      };\n    case 9:\n      return function() {\n        return f(s(i(u(a(e(t(n(r.apply(this, arguments)))))))));\n      };\n  }\n}\nfunction h(r, n, t, e, a, u, i, s, f) {\n  switch (arguments.length) {\n    case 1:\n      return r;\n    case 2:\n      return n(r);\n    case 3:\n      return t(n(r));\n    case 4:\n      return e(t(n(r)));\n    case 5:\n      return a(e(t(n(r))));\n    case 6:\n      return u(a(e(t(n(r)))));\n    case 7:\n      return i(u(a(e(t(n(r))))));\n    case 8:\n      return s(i(u(a(e(t(n(r)))))));\n    case 9:\n      return f(s(i(u(a(e(t(n(r))))))));\n    default: {\n      for (var o = arguments[0], c = 1; c < arguments.length; c++)\n        o = arguments[c](o);\n      return o;\n    }\n  }\n}\nvar w = function(r, n) {\n  var t = typeof r == \"number\" ? function(e) {\n    return e.length >= r;\n  } : r;\n  return function() {\n    var e = Array.from(arguments);\n    return t(arguments) ? n.apply(this, e) : function(a) {\n      return n.apply(void 0, P([a], e, !1));\n    };\n  };\n}, R = function(r) {\n  return r._tag === \"Left\";\n}, $ = function(r) {\n  return { _tag: \"Left\", left: r };\n}, _ = function(r) {\n  return { _tag: \"Right\", right: r };\n}, C = $, k = _, A = R, D = function(r, n) {\n  return function(t) {\n    return A(t) ? r(t.left) : n(t.right);\n  };\n}, g = D;\nfunction K(r) {\n  return d(k, r.of);\n}\nfunction U(r) {\n  return d(C, r.of);\n}\nfunction W(r) {\n  return function(n, t) {\n    return r.chain(n, function(e) {\n      return A(e) ? r.of(e) : t(e.right);\n    });\n  };\n}\nfunction B(r) {\n  return function(n, t) {\n    return function(e) {\n      return r.map(e, g(n, t));\n    };\n  };\n}\nvar L = function(r, n) {\n  return h(r, M(n));\n}, N = function(r, n) {\n  return h(r, V(n));\n}, M = function(r) {\n  return function(n) {\n    return function() {\n      return Promise.resolve().then(n).then(r);\n    };\n  };\n}, V = function(r) {\n  return function(n) {\n    return function() {\n      return Promise.all([Promise.resolve().then(n), Promise.resolve().then(r)]).then(function(t) {\n        var e = t[0], a = t[1];\n        return e(a);\n      });\n    };\n  };\n}, p = function(r) {\n  return function() {\n    return Promise.resolve(r);\n  };\n}, Z = /* @__PURE__ */ w(2, function(r, n) {\n  return function() {\n    return Promise.resolve().then(r).then(function(t) {\n      return n(t)();\n    });\n  };\n}), S = \"Task\", z = {\n  URI: S,\n  map: L\n}, T = {\n  of: p\n}, G = {\n  URI: S,\n  map: L,\n  of: p,\n  ap: N,\n  chain: Z\n}, J = function(r, n, t, e) {\n  function a(u) {\n    return u instanceof t ? u : new t(function(i) {\n      i(u);\n    });\n  }\n  return new (t || (t = Promise))(function(u, i) {\n    function s(c) {\n      try {\n        o(e.next(c));\n      } catch (l) {\n        i(l);\n      }\n    }\n    function f(c) {\n      try {\n        o(e.throw(c));\n      } catch (l) {\n        i(l);\n      }\n    }\n    function o(c) {\n      c.done ? u(c.value) : a(c.value).then(s, f);\n    }\n    o((e = e.apply(r, n || [])).next());\n  });\n}, q = function(r, n) {\n  var t = { label: 0, sent: function() {\n    if (u[0] & 1) throw u[1];\n    return u[1];\n  }, trys: [], ops: [] }, e, a, u, i;\n  return i = { next: s(0), throw: s(1), return: s(2) }, typeof Symbol == \"function\" && (i[Symbol.iterator] = function() {\n    return this;\n  }), i;\n  function s(o) {\n    return function(c) {\n      return f([o, c]);\n    };\n  }\n  function f(o) {\n    if (e) throw new TypeError(\"Generator is already executing.\");\n    for (; i && (i = 0, o[0] && (t = 0)), t; ) try {\n      if (e = 1, a && (u = o[0] & 2 ? a.return : o[0] ? a.throw || ((u = a.return) && u.call(a), 0) : a.next) && !(u = u.call(a, o[1])).done) return u;\n      switch (a = 0, u && (o = [o[0] & 2, u.value]), o[0]) {\n        case 0:\n        case 1:\n          u = o;\n          break;\n        case 4:\n          return t.label++, { value: o[1], done: !1 };\n        case 5:\n          t.label++, a = o[1], o = [0];\n          continue;\n        case 7:\n          o = t.ops.pop(), t.trys.pop();\n          continue;\n        default:\n          if (u = t.trys, !(u = u.length > 0 && u[u.length - 1]) && (o[0] === 6 || o[0] === 2)) {\n            t = 0;\n            continue;\n          }\n          if (o[0] === 3 && (!u || o[1] > u[0] && o[1] < u[3])) {\n            t.label = o[1];\n            break;\n          }\n          if (o[0] === 6 && t.label < u[1]) {\n            t.label = u[1], u = o;\n            break;\n          }\n          if (u && t.label < u[2]) {\n            t.label = u[2], t.ops.push(o);\n            break;\n          }\n          u[2] && t.ops.pop(), t.trys.pop();\n          continue;\n      }\n      o = n.call(r, t);\n    } catch (c) {\n      o = [6, c], a = 0;\n    } finally {\n      e = u = 0;\n    }\n    if (o[0] & 5) throw o[1];\n    return { value: o[0] ? o[1] : void 0, done: !0 };\n  }\n}, H = /* @__PURE__ */ U(T), Q = /* @__PURE__ */ K(T), X = p, b = /* @__PURE__ */ B(z), Y = b, rr = function(r, n) {\n  return function() {\n    return J(void 0, void 0, void 0, function() {\n      var t;\n      return q(this, function(e) {\n        switch (e.label) {\n          case 0:\n            return e.trys.push([0, 2, , 3]), [4, r().then(_)];\n          case 1:\n            return [2, e.sent()];\n          case 2:\n            return t = e.sent(), [2, $(n(t))];\n          case 3:\n            return [\n              2\n              /*return*/\n            ];\n        }\n      });\n    });\n  };\n}, nr = /* @__PURE__ */ w(2, W(G)), tr = nr;\nfunction er(r) {\n  const n = (t) => {\n    throw t;\n  };\n  return typeof r == \"function\" ? y.resolve(h(r, b(n, (t) => t))()) : h(r, g(n, (t) => t));\n}\nfunction gr(r) {\n  return Object.assign(\n    (...n) => er(r(...n)),\n    r\n  );\n}\nconst ur = Object.assign(\n  (r, n) => h(\n    rr(\n      () => new y((t, e, a) => r(\n        (u) => t(k(u)),\n        (u) => t(C(u)),\n        a\n      ), n),\n      (t) => t\n    ),\n    tr(g(H, Q))\n  ),\n  {\n    fn: (r, n) => ur((t, e, a) => {\n      const u = r(a);\n      h(\n        typeof u == \"function\" ? u : X(u),\n        Y(e, t)\n      )();\n    }, n)\n  }\n);\nexport {\n  ur as BetterTaskEither,\n  ar as camelToKebab,\n  E as camelToSnake,\n  ir as camelToSnakeObjKeys,\n  lr as createCbCollector,\n  hr as createLogger,\n  v as deepSnakeToCamelObjKeys,\n  fr as getStorageValue,\n  sr as setStorageValue,\n  F as snakeToCamel,\n  I as snakeToCamelObjKeys,\n  cr as snakeToKebab,\n  er as throwifyAnyEither,\n  gr as throwifyFpFn\n};\n//# sourceMappingURL=index.js.map\n","var l = Object.defineProperty;\nvar o = (e, t, n) => t in e ? l(e, t, { enumerable: !0, configurable: !0, writable: !0, value: n }) : e[t] = n;\nvar c = (e, t, n) => o(e, typeof t != \"symbol\" ? t + \"\" : t, n);\nfunction f(e) {\n  return (t) => t instanceof e;\n}\nfunction u(e, t) {\n  const s = class s extends Error {\n    constructor(...d) {\n      const i = typeof t == \"function\" ? t(...d) : typeof t == \"string\" ? [t] : t || [];\n      super(...i), this.name = e;\n    }\n  };\n  c(s, \"is\", f(s));\n  let n = s;\n  return Object.defineProperty(n, \"name\", { value: e }), n;\n}\nfunction y(e, t, n) {\n  const a = class a extends u(e, n) {\n    constructor(...r) {\n      super(...r);\n      c(this, \"data\");\n      this.data = t(...r);\n    }\n  };\n  c(a, \"is\", f(a));\n  let s = a;\n  return Object.defineProperty(s, \"name\", { value: e }), s;\n}\nexport {\n  u as errorClass,\n  y as errorClassWithData\n};\n//# sourceMappingURL=index.js.map\n","import { throwifyFpFn as g } from \"@tma.js/toolkit\";\nimport { pipe as c, string as n, check as S, transform as p, union as A, instance as D, parse as L, looseObject as l, optional as i, number as w, boolean as m, integer as N, date as O, record as I, is as U, unknown as z } from \"valibot\";\nfunction E(t, r, e, u, a, s, o, R, J) {\n  switch (arguments.length) {\n    case 1:\n      return t;\n    case 2:\n      return r(t);\n    case 3:\n      return e(r(t));\n    case 4:\n      return u(e(r(t)));\n    case 5:\n      return a(u(e(r(t))));\n    case 6:\n      return s(a(u(e(r(t)))));\n    case 7:\n      return o(s(a(u(e(r(t))))));\n    case 8:\n      return R(o(s(a(u(e(r(t)))))));\n    case 9:\n      return J(R(o(s(a(u(e(r(t))))))));\n    default: {\n      for (var y = arguments[0], _ = 1; _ < arguments.length; _++)\n        y = arguments[_](y);\n      return y;\n    }\n  }\n}\nvar V = function(t) {\n  return t._tag === \"Left\";\n}, q = function(t) {\n  return { _tag: \"Left\", left: t };\n}, v = function(t) {\n  return { _tag: \"Right\", right: t };\n}, Q = q, f = v, x = function(t) {\n  return function(r) {\n    return j(r) ? r : f(t(r.right));\n  };\n}, j = V, G = function(t, r) {\n  try {\n    return f(t());\n  } catch (e) {\n    return Q(r(e));\n  }\n};\nfunction M(t) {\n  const r = (e) => {\n    const u = {};\n    return new URLSearchParams(e).forEach((a, s) => {\n      const o = u[s];\n      Array.isArray(o) ? o.push(a) : o === void 0 ? u[s] = a : u[s] = [o, a];\n    }), L(t, u);\n  };\n  return c(\n    A([n(), D(URLSearchParams)]),\n    S((e) => {\n      try {\n        return r(e), !0;\n      } catch {\n        return !1;\n      }\n    }, \"The value doesn't match required schema\"),\n    p(r)\n  );\n}\nfunction H(t) {\n  return c(\n    n(),\n    S((r) => {\n      try {\n        return JSON.parse(r), !0;\n      } catch {\n        return !1;\n      }\n    }, \"Input is not a valid JSON value\"),\n    p(JSON.parse),\n    t\n  );\n}\nfunction h(t) {\n  return c(n(), H(t));\n}\nfunction W(t) {\n  return c(\n    A([n(), D(URLSearchParams)]),\n    M(t)\n  );\n}\nfunction d(t) {\n  return (r) => t.test(r);\n}\nconst K = d(/^#[\\da-f]{3}$/i), X = d(/^#[\\da-f]{4}$/i), Y = d(/^#[\\da-f]{6}$/i), Z = d(/^#[\\da-f]{8}$/i);\nfunction k(t) {\n  return [Y, Z, K, X].some((r) => r(t));\n}\nfunction $(t) {\n  let r = \"#\";\n  for (let e = 0; e < t.length - 1; e += 1)\n    r += t[1 + e].repeat(2);\n  return r;\n}\nfunction b(t) {\n  const r = t.replace(/\\s/g, \"\").toLowerCase();\n  if (/^#[\\da-f]{3}$/i.test(r))\n    return f($(r.toLowerCase() + \"f\"));\n  if (/^#[\\da-f]{4}$/i.test(r))\n    return f($(r.toLowerCase()));\n  if (/^#[\\da-f]{6}$/i.test(r))\n    return f(r.toLowerCase() + \"ff\");\n  if (/^#[\\da-f]{8}$/i.test(r))\n    return f(r.toLowerCase());\n  const e = r.match(/^rgb\\((\\d{1,3}),(\\d{1,3}),(\\d{1,3})\\)$/) || r.match(/^rgba\\((\\d{1,3}),(\\d{1,3}),(\\d{1,3}),(\\d{1,3})\\)$/);\n  return e ? f(\n    e.slice(1).reduce(\n      (u, a) => u + parseInt(a, 10).toString(16).padStart(2, \"0\"),\n      \"#\"\n    ).padEnd(9, \"f\")\n  ) : Q(new Error(`Value \"${t}\" does not satisfy any of known RGB formats.`));\n}\nfunction tt(t) {\n  return E(\n    b(t),\n    x((r) => r.slice(0, 7))\n  );\n}\nconst ct = g(tt), ft = g(b);\nfunction rt() {\n  return l({\n    id: w(),\n    photo_url: i(n()),\n    type: n(),\n    title: n(),\n    username: i(n())\n  });\n}\nfunction P() {\n  return l({\n    added_to_attachment_menu: i(m()),\n    allows_write_to_pm: i(m()),\n    first_name: n(),\n    id: w(),\n    is_bot: i(m()),\n    is_premium: i(m()),\n    last_name: i(n()),\n    language_code: i(n()),\n    photo_url: i(n()),\n    username: i(n())\n  });\n}\nfunction et() {\n  return l({\n    auth_date: c(\n      n(),\n      p((t) => new Date(Number(t) * 1e3)),\n      O()\n    ),\n    can_send_after: i(c(n(), p(Number), N())),\n    chat: i(h(rt())),\n    chat_type: i(n()),\n    chat_instance: i(n()),\n    hash: n(),\n    query_id: i(n()),\n    receiver: i(h(P())),\n    start_param: i(n()),\n    signature: n(),\n    user: i(h(P()))\n  });\n}\nfunction F() {\n  return W(et());\n}\nfunction B() {\n  return I(\n    n(),\n    c(\n      A([n(), w()]),\n      p((t) => typeof t == \"number\" ? `#${(t & 16777215).toString(16).padStart(6, \"0\")}` : t),\n      S(k)\n    )\n  );\n}\nfunction nt() {\n  const t = i(c(n(), p((r) => r === \"1\")));\n  return l({\n    tgWebAppBotInline: t,\n    tgWebAppData: i(F()),\n    tgWebAppDefaultColors: i(h(B())),\n    tgWebAppFullscreen: t,\n    tgWebAppPlatform: n(),\n    tgWebAppShowSettings: t,\n    tgWebAppStartParam: i(n()),\n    tgWebAppThemeParams: h(B()),\n    tgWebAppVersion: n()\n  });\n}\nfunction T() {\n  return W(nt());\n}\nfunction pt(t) {\n  try {\n    return U(T(), t);\n  } catch {\n    return !1;\n  }\n}\nfunction ht() {\n  return l({\n    eventType: n(),\n    eventData: i(z())\n  });\n}\nfunction at(t) {\n  return G(\n    () => L(F(), t),\n    (r) => r\n  );\n}\nfunction it(t) {\n  return G(\n    () => L(T(), t),\n    (r) => r\n  );\n}\nconst lt = g(at), mt = g(it);\nfunction C(t, r) {\n  return r || (r = (e, u) => JSON.stringify(u)), new URLSearchParams(\n    Object.entries(t).reduce((e, [u, a]) => (Array.isArray(a) ? e.push(...a.map((s) => [u, String(s)])) : a != null && e.push([\n      u,\n      a instanceof Date ? (a.getTime() / 1e3 | 0).toString() : typeof a == \"string\" || typeof a == \"number\" ? String(a) : typeof a == \"boolean\" ? a ? \"1\" : \"0\" : r(u, a)\n    ]), e), [])\n  ).toString();\n}\nfunction ut(t) {\n  return C(t);\n}\nfunction gt(t) {\n  return C(t, (r, e) => r === \"tgWebAppData\" ? ut(e) : JSON.stringify(e));\n}\nexport {\n  et as initData,\n  rt as initDataChat,\n  F as initDataQuery,\n  P as initDataUser,\n  k as isAnyRGB,\n  pt as isLaunchParamsQuery,\n  Y as isRGB,\n  Z as isRGBA,\n  X as isRGBAShort,\n  K as isRGBShort,\n  nt as launchParams,\n  T as launchParamsQuery,\n  ht as miniAppsMessage,\n  lt as parseInitDataQuery,\n  at as parseInitDataQueryFp,\n  mt as parseLaunchParamsQuery,\n  it as parseLaunchParamsQueryFp,\n  h as pipeJsonToSchema,\n  W as pipeQueryToSchema,\n  ut as serializeInitDataQuery,\n  gt as serializeLaunchParamsQuery,\n  B as themeParams,\n  ct as toRGB,\n  tt as toRGBFp,\n  ft as toRGBFull,\n  b as toRGBFullFp\n};\n//# sourceMappingURL=index.js.map\n","export default function(n){return{all:n=n||new Map,on:function(t,e){var i=n.get(t);i?i.push(e):n.set(t,[e])},off:function(t,e){var i=n.get(t);i&&(e?i.splice(i.indexOf(e)>>>0,1):n.set(t,[]))},emit:function(t,e){var i=n.get(t);i&&i.slice().map(function(n){n(e)}),(i=n.get(\"*\"))&&i.slice().map(function(n){n(t,e)})}}}\n//# sourceMappingURL=mitt.mjs.map\n","import { is as U, looseObject as m, function as te, nullish as E, boolean as V, number as B, string as P, optional as D, unknown as Me, parse as R, any as Ce } from \"valibot\";\nimport { throwifyFpFn as $, getStorageValue as Le, setStorageValue as re, createLogger as qe, throwifyAnyEither as M, createCbCollector as ne, BetterTaskEither as oe } from \"@tma.js/toolkit\";\nimport { createLogger as fr, deepSnakeToCamelObjKeys as lr } from \"@tma.js/toolkit\";\nimport { BetterPromise as ae, TimeoutError as Fe } from \"better-promises\";\nimport { CancelledError as wr, TimeoutError as hr } from \"better-promises\";\nimport { errorClass as k, errorClassWithData as We } from \"error-kid\";\nimport { parseLaunchParamsQueryFp as se, themeParams as Re, pipeJsonToSchema as ie, miniAppsMessage as ue, serializeLaunchParamsQuery as Ue, parseLaunchParamsQuery as Ie } from \"@tma.js/transformers\";\nimport { signal as d, computed as ce } from \"@tma.js/signals\";\nimport Oe from \"mitt\";\nfunction pe(e) {\n  return U(\n    m({ TelegramWebviewProxy: m({ postEvent: te() }) }),\n    e\n  );\n}\nfunction _e() {\n  try {\n    return window.self !== window.top;\n  } catch {\n    return !0;\n  }\n}\nvar je = function(e, t, r) {\n  if (r || arguments.length === 2) for (var n = 0, a = t.length, o; n < a; n++)\n    (o || !(n in t)) && (o || (o = Array.prototype.slice.call(t, 0, n)), o[n] = t[n]);\n  return e.concat(o || Array.prototype.slice.call(t));\n};\nfunction ze(e) {\n  return e;\n}\nfunction S(e, t, r, n, a, o, s, i, c) {\n  switch (arguments.length) {\n    case 1:\n      return e;\n    case 2:\n      return function() {\n        return t(e.apply(this, arguments));\n      };\n    case 3:\n      return function() {\n        return r(t(e.apply(this, arguments)));\n      };\n    case 4:\n      return function() {\n        return n(r(t(e.apply(this, arguments))));\n      };\n    case 5:\n      return function() {\n        return a(n(r(t(e.apply(this, arguments)))));\n      };\n    case 6:\n      return function() {\n        return o(a(n(r(t(e.apply(this, arguments))))));\n      };\n    case 7:\n      return function() {\n        return s(o(a(n(r(t(e.apply(this, arguments)))))));\n      };\n    case 8:\n      return function() {\n        return i(s(o(a(n(r(t(e.apply(this, arguments))))))));\n      };\n    case 9:\n      return function() {\n        return c(i(s(o(a(n(r(t(e.apply(this, arguments)))))))));\n      };\n  }\n}\nfunction l(e, t, r, n, a, o, s, i, c) {\n  switch (arguments.length) {\n    case 1:\n      return e;\n    case 2:\n      return t(e);\n    case 3:\n      return r(t(e));\n    case 4:\n      return n(r(t(e)));\n    case 5:\n      return a(n(r(t(e))));\n    case 6:\n      return o(a(n(r(t(e)))));\n    case 7:\n      return s(o(a(n(r(t(e))))));\n    case 8:\n      return i(s(o(a(n(r(t(e)))))));\n    case 9:\n      return c(i(s(o(a(n(r(t(e))))))));\n    default: {\n      for (var u = arguments[0], p = 1; p < arguments.length; p++)\n        u = arguments[p](u);\n      return u;\n    }\n  }\n}\nvar C = function(e, t) {\n  var r = typeof e == \"number\" ? function(n) {\n    return n.length >= e;\n  } : e;\n  return function() {\n    var n = Array.from(arguments);\n    return r(arguments) ? t.apply(this, n) : function(a) {\n      return t.apply(void 0, je([a], n, !1));\n    };\n  };\n}, Ge = { _tag: \"None\" }, Ve = function(e) {\n  return { _tag: \"Some\", value: e };\n}, Be = function(e) {\n  return e._tag === \"Left\";\n}, De = function(e) {\n  return { _tag: \"Left\", left: e };\n}, Ne = function(e) {\n  return { _tag: \"Right\", right: e };\n}, w = De, _ = Ne, fe = /* @__PURE__ */ C(2, function(e, t) {\n  return v(e) ? e : t(e.right);\n}), Je = function(e) {\n  return function(t) {\n    return v(t) ? t : _(e(t.right));\n  };\n}, Qe = function(e, t) {\n  return function(r) {\n    return v(r) ? w(e(r.left)) : _(t(r.right));\n  };\n}, He = function(e) {\n  return function(t) {\n    return v(t) ? w(e(t.left)) : t;\n  };\n}, v = Be, le = function(e, t) {\n  return function(r) {\n    return v(r) ? e(r.left) : t(r.right);\n  };\n}, Ke = le, I = le, Ye = I, O = function(e, t) {\n  try {\n    return _(e());\n  } catch (r) {\n    return w(t(r));\n  }\n}, Xe = fe, Ze = fe, et = Ge, tt = Ve, rt = function(e) {\n  return e._tag === \"None\";\n}, nt = function(e, t) {\n  return function(r) {\n    return rt(r) ? e() : t(r.value);\n  };\n}, ot = nt;\nfunction at(e) {\n  return S(_, e.of);\n}\nfunction st(e) {\n  return S(w, e.of);\n}\nfunction it(e) {\n  return function(t, r) {\n    return e.chain(t, function(n) {\n      return v(n) ? e.of(n) : r(n.right);\n    });\n  };\n}\nfunction ut(e) {\n  return function(t, r, n) {\n    return e.map(t, Qe(r, n));\n  };\n}\nfunction ct(e) {\n  return function(t, r) {\n    return function(n) {\n      return e.map(n, I(t, r));\n    };\n  };\n}\nvar me = function(e, t) {\n  return l(e, _t(t));\n}, pt = function(e, t) {\n  return l(e, ft(t));\n}, _t = function(e) {\n  return function(t) {\n    return function() {\n      return Promise.resolve().then(t).then(e);\n    };\n  };\n}, ft = function(e) {\n  return function(t) {\n    return function() {\n      return Promise.all([Promise.resolve().then(t), Promise.resolve().then(e)]).then(function(r) {\n        var n = r[0], a = r[1];\n        return n(a);\n      });\n    };\n  };\n}, we = function(e) {\n  return function() {\n    return Promise.resolve(e);\n  };\n}, lt = /* @__PURE__ */ C(2, function(e, t) {\n  return function() {\n    return Promise.resolve().then(e).then(function(r) {\n      return t(r)();\n    });\n  };\n}), he = \"Task\", ge = {\n  URI: he,\n  map: me\n}, de = {\n  of: we\n}, mt = {\n  URI: he,\n  map: me,\n  of: we,\n  ap: pt,\n  chain: lt\n}, wt = /* @__PURE__ */ st(de), ve = /* @__PURE__ */ at(de), be = /* @__PURE__ */ ct(ge), ye = /* @__PURE__ */ C(3, ut(ge)), Ee = /* @__PURE__ */ C(2, it(mt)), ht = Ee, Pe = Ee;\nclass gt extends k(\"MethodUnsupportedError\", (t, r) => [\n  `Method \"${t}\" is unsupported in Mini Apps version ${r}`\n]) {\n}\nclass dt extends k(\"MethodParameterUnsupportedError\", (t, r, n) => [\n  `Parameter \"${r}\" of \"${t}\" method is unsupported in Mini Apps version ${n}`\n]) {\n}\nclass vt extends We(\n  \"LaunchParamsRetrieveError\",\n  (t) => ({ errors: t }),\n  (t) => [\n    [\n      \"Unable to retrieve launch parameters from any known source. Perhaps, you have opened your app outside Telegram?\",\n      \" Refer to docs for more information:\",\n      \"https://docs.telegram-mini-apps.com/packages/tma-js-bridge/environment\",\n      \"\",\n      \"Collected errors:\",\n      ...t.map(({ source: r, error: n }) => `Source: ${r} / ${n instanceof Error ? n.message : String(n)}`)\n    ].join(`\n`)\n  ]\n) {\n}\nclass bt extends k(\"InvalidLaunchParamsError\", (t, r) => [\n  `Invalid value for launch params: ${t}`,\n  { cause: r }\n]) {\n}\nclass xe extends k(\"UnknownEnvError\") {\n}\nclass yt extends k(\n  \"InvokeCustomMethodError\",\n  (t) => [`Server returned error: ${t}`]\n) {\n}\nconst N = \"launchParams\";\nfunction J(e) {\n  return e.replace(/^[^?#]*[?#]/, \"\").replace(/[?#]/g, \"&\");\n}\nconst Et = S(L, Xe(se)), Jt = $(Et), Pt = S(L, Je((e) => {\n  const t = new URLSearchParams(e).get(\"tgWebAppData\");\n  return t ? tt(t) : et;\n})), Qt = S(\n  Pt,\n  Ye((e) => {\n    throw e;\n  }, (e) => e),\n  ot(() => {\n  }, (e) => e)\n);\nfunction L() {\n  const e = [];\n  for (const [t, r] of [\n    // Try to retrieve launch parameters from the current location. This method\n    // can return nothing in case, location was changed, and then the page was\n    // reloaded.\n    [() => J(window.location.href), \"window.location.href\"],\n    // Then, try using the lower level API - window.performance.\n    [() => {\n      const n = performance.getEntriesByType(\"navigation\")[0];\n      return n && J(n.name);\n    }, \"performance navigation entries\"],\n    // Finally, try using the session storage.\n    [() => Le(N), \"local storage\"]\n  ]) {\n    const n = t();\n    if (!n) {\n      e.push({ source: r, error: new Error(\"Source is empty\") });\n      continue;\n    }\n    const a = l(\n      se(n),\n      Ke((o) => o, () => !0)\n    );\n    if (typeof a != \"boolean\") {\n      e.push({ source: r, error: a });\n      continue;\n    }\n    return re(N, n), _(n);\n  }\n  return w(new vt(e));\n}\nconst Ht = $(L);\nfunction xt(e, t) {\n  const r = /* @__PURE__ */ new Map(), n = Oe(), a = (o, s, i = !1) => {\n    const c = r.get(o) || /* @__PURE__ */ new Map();\n    r.set(o, c);\n    const u = c.get(s) || [];\n    c.set(s, u);\n    const p = u.findIndex((f) => f[1] === i);\n    if (p >= 0 && (n.off(o, u[p][0]), u.splice(p, 1), !u.length && (c.delete(s), !c.size))) {\n      const f = r.size;\n      r.delete(o), f && !r.size && t();\n    }\n  };\n  return {\n    on(o, s, i) {\n      !r.size && e();\n      const c = () => {\n        a(o, s, i);\n      }, u = (...h) => {\n        i && c(), o === \"*\" ? s({ name: h[0], payload: h[1] }) : s(...h);\n      };\n      n.on(o, u);\n      const p = r.get(o) || /* @__PURE__ */ new Map();\n      r.set(o, p);\n      const f = p.get(s) || [];\n      return p.set(s, f), f.push([u, i || !1]), c;\n    },\n    off: a,\n    // eslint-disable-next-line @typescript-eslint/unbound-method\n    emit: n.emit,\n    clear() {\n      const o = r.size;\n      n.all.clear(), r.clear(), o && t();\n    }\n  };\n}\nfunction F(e, t) {\n  window.dispatchEvent(new MessageEvent(\"message\", {\n    data: JSON.stringify({ eventType: e, eventData: t }),\n    // We specify this kind of source here in order to allow the package's \"on\" function to\n    // capture it. The reason is this function always checks the event source and relies on\n    // it to be the parent window.\n    source: window.parent\n  }));\n}\nconst T = d(!1), j = d(\"https://web.telegram.org\"), kt = (e) => {\n  g().log(\"Event received:\", e);\n}, ke = ce(T);\nfunction Kt(e) {\n  e !== T() && (T.set(e), (e ? z : At)(\"*\", kt));\n}\nconst Se = ce(j);\nfunction Yt(e) {\n  j.set(e), g().log(\"New target origin set\", e);\n}\nconst x = d((...e) => {\n  window.parent.postMessage(...e);\n}), g = d(qe(\"Bridge\", {\n  bgColor: \"#9147ff\",\n  textColor: \"white\",\n  shouldLog: ke\n}));\nfunction Xt() {\n  $t(), [x, j, Se, T, ke, g].forEach((e) => {\n    e.unsubAll(), \"reset\" in e && e.reset();\n  });\n}\nfunction W(e, t, r) {\n  const n = [r], a = e[t];\n  typeof a == \"function\" && n.push(a);\n  const o = (...i) => {\n    n.forEach((c) => c(...i));\n  }, s = Object.assign((...i) => {\n    o(...i);\n  }, {\n    // Unwraps the composer.\n    unwrap() {\n      const { length: i } = n;\n      if (i === 1) {\n        delete e[t];\n        return;\n      }\n      if (i === 2) {\n        H(e, t, n[1]);\n        return;\n      }\n      n.unshift(1), H(e, t, o);\n    }\n  });\n  Ae(\n    e,\n    t,\n    () => s,\n    (i) => n.push(i)\n  );\n}\nfunction Q(e, t) {\n  const r = e[t];\n  Ae(e, t, () => r, (n) => {\n    Object.entries(n).forEach(([a, o]) => {\n      r[a] = o;\n    });\n  });\n}\nfunction Ae(e, t, r, n) {\n  Object.defineProperty(e, t, {\n    enumerable: !0,\n    configurable: !0,\n    get: r,\n    set: n\n  });\n}\nfunction H(e, t, r) {\n  Object.defineProperty(e, t, {\n    enumerable: !0,\n    configurable: !0,\n    writable: !0,\n    value: r\n  });\n}\nconst St = {\n  clipboard_text_received: m({\n    req_id: P(),\n    data: E(P())\n  }),\n  custom_method_invoked: m({\n    req_id: P(),\n    result: D(Me()),\n    error: D(P())\n  }),\n  popup_closed: E(\n    m({ button_id: E(P(), () => {\n    }) }),\n    {}\n  ),\n  viewport_changed: E(\n    m({\n      height: B(),\n      width: E(B(), () => window.innerWidth),\n      is_state_stable: V(),\n      is_expanded: V()\n    }),\n    // TODO: At the moment, macOS has a bug with the invalid event payload - it is always equal to\n    //  null. Leaving this default value until the bug is fixed.\n    () => ({\n      height: window.innerHeight,\n      is_state_stable: !0,\n      is_expanded: !0\n    })\n  ),\n  theme_changed: m({\n    theme_params: Re()\n  })\n};\nfunction K(e) {\n  if (e.source !== window.parent)\n    return;\n  let t;\n  try {\n    t = R(ie(ue()), e.data);\n  } catch {\n    return;\n  }\n  const { eventType: r, eventData: n } = t, a = St[r];\n  let o;\n  try {\n    o = a ? R(a, n) : n;\n  } catch (s) {\n    return g().forceError(\n      [\n        `An error occurred processing the \"${r}\" event from the Telegram application.`,\n        \"Please, file an issue here:\",\n        \"https://github.com/Telegram-Mini-Apps/tma.js/issues/new/choose\"\n      ].join(`\n`),\n      t,\n      s\n    );\n  }\n  Tt(r, o);\n}\nconst {\n  on: z,\n  off: At,\n  emit: Tt,\n  clear: $t\n} = xt(\n  () => {\n    const e = window;\n    !e.TelegramGameProxy && (e.TelegramGameProxy = {}), W(e.TelegramGameProxy, \"receiveEvent\", F), Q(e, \"TelegramGameProxy\"), !e.Telegram && (e.Telegram = {}), !e.Telegram.WebView && (e.Telegram.WebView = {}), W(e.Telegram.WebView, \"receiveEvent\", F), Q(e.Telegram, \"WebView\"), W(e, \"TelegramGameProxy_receiveEvent\", F), window.addEventListener(\"message\", K);\n  },\n  () => {\n    [\n      [\"TelegramGameProxy_receiveEvent\"],\n      [\"TelegramGameProxy\", \"receiveEvent\"],\n      [\"Telegram\", \"WebView\", \"receiveEvent\"]\n    ].forEach((e) => {\n      const t = window;\n      let r = [void 0, t];\n      for (const o of e)\n        if (r = [r[1], r[1][o]], !r[1])\n          return;\n      const [n, a] = r;\n      \"unwrap\" in a && (a.unwrap(), n && n !== t && !Object.keys(n).length && delete t[e[0]]);\n    }), window.removeEventListener(\"message\", K);\n  }\n), Mt = (...e) => x()(...e);\nfunction Ct(e, t) {\n  l(\n    A(\n      // @ts-expect-error It's ok, TS can't determine a specific override.\n      e,\n      t\n    ),\n    He((r) => {\n      throw r;\n    })\n  );\n}\nfunction A(e, t) {\n  g().log(\"Posting event:\", t ? { eventType: e, eventData: t } : { eventType: e });\n  const r = window, n = JSON.stringify({ eventType: e, eventData: t });\n  return _e() ? (Mt(n, Se()), _(void 0)) : pe(r) ? (r.TelegramWebviewProxy.postEvent(e, JSON.stringify(t)), _(void 0)) : U(m({ external: m({ notify: te() }) }), r) ? (r.external.notify(n), _(void 0)) : w(new xe());\n}\nfunction G(e, t, r = {}) {\n  const {\n    // If no capture function was passed, we capture the first compatible event.\n    capture: n = () => !0,\n    postEvent: a = A\n  } = r, o = d(), [s, i] = ne();\n  (Array.isArray(t) ? t : [t]).forEach((u) => {\n    s(\n      z(u, (p) => {\n        const f = Array.isArray(t);\n        n(f ? { event: u, payload: p } : p) && o.set([\n          f ? { event: u, payload: p } : p\n        ]);\n      })\n    );\n  });\n  const c = (u) => (i(), u);\n  return l(\n    async () => a(e, r.params),\n    Pe(() => oe((u, p, f) => {\n      const h = o();\n      if (h)\n        return u(h[0]);\n      const b = (y) => {\n        y && u(y[0]);\n      }, q = () => {\n        o.unsub(b);\n      };\n      o.sub(b), f.on(\"finalized\", q);\n    }, r)),\n    ye(c, c)\n  );\n}\nfunction Zt(e, t, r) {\n  const { postEvent: n } = r || {};\n  return M(\n    // @ts-expect-error TypeScript will not be able to handle our overrides here.\n    G(e, t, {\n      ...r,\n      postEvent: n ? (...a) => {\n        try {\n          return n(...a), _(void 0);\n        } catch (o) {\n          return w(o);\n        }\n      } : A\n    })\n  );\n}\nfunction er(e, t) {\n  const r = Lt(\n    // @ts-expect-error TS doesn't get what override we are going to use.\n    e,\n    t\n  );\n  return typeof r == \"function\" ? ae.fn(() => M(r)) : r;\n}\nfunction Lt(e, t) {\n  const r = pe(window);\n  if (!e)\n    return r || l(L(), I(() => !1, () => !0));\n  if (r)\n    return ve(!0);\n  const { timeout: n = 100 } = t || {};\n  return l(\n    G(\"web_app_request_theme\", \"theme_changed\", { ...t, timeout: n }),\n    be(\n      (a) => Fe.is(a) || xe.is(a) ? _(!1) : w(a),\n      () => _(!0)\n    )\n  );\n}\nfunction tr({ launchParams: e, onEvent: t, resetPostMessage: r } = {}) {\n  if (e) {\n    const o = typeof e == \"string\" || e instanceof URLSearchParams ? e.toString() : (\n      // Here we have to trick serializeLaunchParamsQuery into thinking, it serializes a valid\n      // value. We are doing it because we are working with tgWebAppData presented as a\n      // string, not an object as serializeLaunchParamsQuery requires.\n      Ue({ ...e, tgWebAppData: void 0 }) + (e.tgWebAppData ? `&tgWebAppData=${encodeURIComponent(e.tgWebAppData.toString())}` : \"\")\n    );\n    try {\n      Ie(o);\n    } catch (s) {\n      throw new bt(o, s);\n    }\n    re(\"launchParams\", o);\n  }\n  if (_e()) {\n    if (!t)\n      return;\n    r && x.reset();\n    const o = x();\n    x.set((...s) => {\n      const [i] = s, c = () => {\n        o(...s);\n      };\n      try {\n        const u = R(ie(ue()), i);\n        t({ name: u.eventType, params: u.eventData }, c);\n      } catch {\n        c();\n      }\n    });\n    return;\n  }\n  const n = window.TelegramWebviewProxy || {}, a = n.postEvent || (() => {\n  });\n  window.TelegramWebviewProxy = {\n    ...n,\n    postEvent(o, s) {\n      const i = () => {\n        a(o, s);\n      };\n      t ? t({\n        name: o,\n        params: s ? JSON.parse(s) : void 0\n      }, i) : i();\n    }\n  }, g().log(\"Environment was mocked by the mockTelegramEnv function\");\n}\nfunction qt(e) {\n  return ({ req_id: t }) => t === e;\n}\nconst Y = {\n  \"6.0\": [\n    \"iframe_ready\",\n    \"iframe_will_reload\",\n    \"web_app_close\",\n    \"web_app_data_send\",\n    \"web_app_expand\",\n    \"web_app_open_link\",\n    \"web_app_ready\",\n    \"web_app_request_theme\",\n    \"web_app_request_viewport\",\n    \"web_app_setup_main_button\",\n    \"web_app_setup_closing_behavior\"\n  ],\n  6.1: [\n    \"web_app_open_tg_link\",\n    \"web_app_open_invoice\",\n    \"web_app_setup_back_button\",\n    \"web_app_set_background_color\",\n    \"web_app_set_header_color\",\n    \"web_app_trigger_haptic_feedback\"\n  ],\n  6.2: [\"web_app_open_popup\"],\n  6.4: [\n    \"web_app_close_scan_qr_popup\",\n    \"web_app_open_scan_qr_popup\",\n    \"web_app_read_text_from_clipboard\",\n    { method: \"web_app_open_link\", param: \"try_instant_view\" }\n  ],\n  6.7: [\"web_app_switch_inline_query\"],\n  6.9: [\n    \"web_app_invoke_custom_method\",\n    \"web_app_request_write_access\",\n    \"web_app_request_phone\",\n    { method: \"web_app_set_header_color\", param: \"color\" }\n  ],\n  \"6.10\": [\"web_app_setup_settings_button\"],\n  7.2: [\n    \"web_app_biometry_get_info\",\n    \"web_app_biometry_open_settings\",\n    \"web_app_biometry_request_access\",\n    \"web_app_biometry_request_auth\",\n    \"web_app_biometry_update_token\"\n  ],\n  7.6: [\n    { method: \"web_app_open_link\", param: \"try_browser\" },\n    { method: \"web_app_close\", param: \"return_back\" }\n  ],\n  7.7: [\"web_app_setup_swipe_behavior\"],\n  7.8: [\"web_app_share_to_story\"],\n  \"7.10\": [\n    \"web_app_setup_secondary_button\",\n    \"web_app_set_bottom_bar_color\",\n    { method: \"web_app_setup_main_button\", param: \"has_shine_effect\" }\n  ],\n  \"8.0\": [\n    \"web_app_request_safe_area\",\n    \"web_app_request_content_safe_area\",\n    \"web_app_request_fullscreen\",\n    \"web_app_exit_fullscreen\",\n    \"web_app_set_emoji_status\",\n    \"web_app_add_to_home_screen\",\n    \"web_app_check_home_screen\",\n    \"web_app_request_emoji_status_access\",\n    \"web_app_check_location\",\n    \"web_app_open_location_settings\",\n    \"web_app_request_file_download\",\n    \"web_app_request_location\",\n    \"web_app_send_prepared_message\",\n    \"web_app_start_accelerometer\",\n    \"web_app_start_device_orientation\",\n    \"web_app_start_gyroscope\",\n    \"web_app_stop_accelerometer\",\n    \"web_app_stop_device_orientation\",\n    \"web_app_stop_gyroscope\",\n    \"web_app_toggle_orientation_lock\"\n  ],\n  \"9.0\": [\n    \"web_app_device_storage_clear\",\n    \"web_app_device_storage_get_key\",\n    \"web_app_device_storage_save_key\",\n    \"web_app_secure_storage_clear\",\n    \"web_app_secure_storage_get_key\",\n    \"web_app_secure_storage_restore_key\",\n    \"web_app_secure_storage_save_key\"\n  ],\n  9.1: [\"web_app_hide_keyboard\"]\n};\nfunction X(e, t) {\n  return Object.keys(Y).find((n) => Y[n].some((a) => t ? typeof a == \"object\" && a.method === e && a.param === t : a === e)) || null;\n}\nfunction Z(e) {\n  return e.split(\".\").map(Number);\n}\nfunction Ft(e, t) {\n  const r = Z(e), n = Z(t), a = Math.max(r.length, n.length);\n  for (let o = 0; o < a; o += 1) {\n    const s = r[o] || 0, i = n[o] || 0;\n    if (s !== i)\n      return s > i ? 1 : -1;\n  }\n  return 0;\n}\nfunction ee(e, t, r) {\n  const n = r ? X(\n    e,\n    t\n  ) : X(e);\n  return n ? Ft(n, r || t) <= 0 : !1;\n}\nfunction rr(e, t = \"strict\") {\n  const r = typeof t == \"function\" ? t : (n) => {\n    const { method: a, version: o } = n, s = \"param\" in n ? new dt(a, n.param, o) : new gt(a, o);\n    if (t === \"strict\")\n      throw s;\n    return g().forceWarn(s.message);\n  };\n  return (n, a) => ee(n, e) ? n === \"web_app_set_header_color\" && U(m({ color: Ce() }), a) && !ee(n, \"color\", e) ? r({ version: e, method: n, param: \"color\" }) : Ct(n, a) : r({ version: e, method: n });\n}\nfunction Wt(e, t, r, n) {\n  return l(\n    G(\"web_app_invoke_custom_method\", \"custom_method_invoked\", {\n      ...n || {},\n      params: { method: e, params: t, req_id: r },\n      capture: qt(r)\n    }),\n    ht(({ result: a, error: o }) => o ? wt(new yt(o)) : ve(a))\n  );\n}\nfunction nr(e, t, r, n) {\n  return ae.fn(() => l(\n    // @ts-expect-error TypeScript is unable to determine required override.\n    Wt(e, t, r, n),\n    be(\n      (a) => {\n        throw a;\n      },\n      (a) => a\n    )\n  )());\n}\nfunction Rt(e, t, r = {}) {\n  const {\n    // If no capture function was passed, we capture the first compatible event.\n    capture: n = () => !0,\n    postEvent: a = A\n  } = r, o = d(), [s, i] = ne();\n  (Array.isArray(t) ? t : [t]).forEach((u) => {\n    s(\n      z(u, (p) => {\n        (Array.isArray(t) ? n({ event: u, payload: p }) : n(p)) && o.set([p]);\n      })\n    );\n  });\n  const c = (u) => (i(), u);\n  return l(\n    async () => a(e, r.params),\n    Pe(() => oe((u, p, f) => {\n      const h = o();\n      if (h)\n        return u(h[0]);\n      const b = (y) => {\n        y && u(y[0]);\n      }, q = () => {\n        o.unsub(b);\n      };\n      o.sub(b), f.on(\"finalized\", q);\n    }, r)),\n    ye(c, c)\n  );\n}\nfunction or(e, t, r) {\n  const { postEvent: n } = r || {};\n  return M(\n    // @ts-expect-error TypeScript will not be able to handle our overrides here.\n    Rt(e, t, {\n      ...r,\n      postEvent: n ? (...a) => {\n        try {\n          return n(...a), _(void 0);\n        } catch (o) {\n          return w(o);\n        }\n      } : A\n    })\n  );\n}\nfunction ar() {\n  Object.hasOwn || (Object.hasOwn = function(e, t) {\n    return Object.prototype.hasOwnProperty.call(e, t);\n  });\n}\nfunction Te(e) {\n  return O(() => decodeURIComponent(\n    atob(\n      e.replace(/-/g, \"+\").replace(/_/g, \"/\")\n    ).split(\"\").map((t) => \"%\" + (\"00\" + t.charCodeAt(0).toString(16)).slice(-2)).join(\"\")\n  ), (t) => t);\n}\nconst sr = $(Te);\nfunction $e(e) {\n  return btoa(\n    encodeURIComponent(e).replace(/%([0-9A-F]{2})/g, (t, r) => String.fromCharCode(parseInt(`0x${r}`)))\n  ).replace(/\\+/g, \"-\").replace(/\\//g, \"_\");\n}\nvar Ut = function(e) {\n  return O(function() {\n    return JSON.parse(e);\n  }, ze);\n};\nfunction It(e) {\n  const t = $e(typeof e == \"string\" ? e : JSON.stringify(e));\n  return t.length > 512 ? w(new Error(\"Value is too long for start parameter\")) : _(t);\n}\nconst ir = $(It);\nfunction ur(e, t) {\n  return M(\n    Ot(\n      e,\n      // @ts-expect-error TypeScript is unable to detect a correct override.\n      typeof t == \"function\" ? (r) => O(() => t(r), (n) => n) : t\n    )\n  );\n}\nfunction Ot(e, t) {\n  return l(\n    Te(e),\n    Ze((r) => t ? typeof t == \"function\" ? t(r) : Ut(r) : _(r))\n  );\n}\nfunction cr(e) {\n  return $e(e).length <= 512;\n}\nexport {\n  wr as CancelledError,\n  bt as InvalidLaunchParamsError,\n  yt as InvokeCustomMethodFailedError,\n  vt as LaunchParamsRetrieveError,\n  dt as MethodParameterUnsupportedError,\n  gt as MethodUnsupportedError,\n  hr as TimeoutError,\n  xe as UnknownEnvError,\n  ar as applyPolyfills,\n  qt as captureSameReq,\n  Ft as compareVersions,\n  fr as createLogger,\n  rr as createPostEvent,\n  ir as createStartParam,\n  It as createStartParamFp,\n  ke as debug,\n  sr as decodeBase64Url,\n  Te as decodeBase64UrlFp,\n  ur as decodeStartParam,\n  Ot as decodeStartParamFp,\n  lr as deepSnakeToCamelObjKeys,\n  F as emitEvent,\n  $e as encodeBase64Url,\n  X as getReleaseVersion,\n  pe as hasWebviewProxy,\n  nr as invokeCustomMethod,\n  Wt as invokeCustomMethodFp,\n  _e as isIframe,\n  cr as isSafeToCreateStartParam,\n  er as isTMA,\n  Lt as isTMAFp,\n  g as logger,\n  tr as mockTelegramEnv,\n  At as off,\n  $t as offAll,\n  z as on,\n  Ct as postEvent,\n  A as postEventFp,\n  Mt as postMessage,\n  x as postMessageImpl,\n  or as request,\n  Zt as request2,\n  G as request2Fp,\n  Rt as requestFp,\n  Xt as resetGlobals,\n  Jt as retrieveLaunchParams,\n  Et as retrieveLaunchParamsFp,\n  Qt as retrieveRawInitData,\n  Pt as retrieveRawInitDataFp,\n  Ht as retrieveRawLaunchParams,\n  L as retrieveRawLaunchParamsFp,\n  Kt as setDebug,\n  Yt as setTargetOrigin,\n  ee as supports,\n  Se as targetOrigin\n};\n//# sourceMappingURL=index.js.map\n","import { type MethodName, supports } from '@tma.js/bridge';\nimport { type Computed, computed } from '@tma.js/signals';\nimport type { Version } from '@tma.js/types';\n\nimport { access } from '@/helpers/access.js';\nimport type { MaybeAccessor } from '@/types.js';\n\nexport function createIsSupportedSignal(\n  method: MethodName,\n  version: MaybeAccessor<Version>,\n): Computed<boolean> {\n  return computed(() => supports(method, access(version)));\n}\n","import { getApplicativeMonoid } from './Applicative';\nimport { apFirst as apFirst_, apS as apS_, apSecond as apSecond_, getApplySemigroup as getApplySemigroup_ } from './Apply';\nimport * as chainable from './Chain';\nimport { chainEitherK as chainEitherK_, fromEitherK as fromEitherK_, tapEither as tapEither_ } from './FromEither';\nimport { constNull, constUndefined, dual, flow, identity, pipe } from './function';\nimport { as as as_, asUnit as asUnit_, bindTo as bindTo_, flap as flap_, let as let__ } from './Functor';\nimport * as _ from './internal';\nimport { not } from './Predicate';\nimport { first, last } from './Semigroup';\nimport { separated } from './Separated';\nimport { wiltDefault, witherDefault } from './Witherable';\nimport { guard as guard_ } from './Zero';\n// -------------------------------------------------------------------------------------\n// constructors\n// -------------------------------------------------------------------------------------\n/**\n * `None` doesn't have a constructor, instead you can use it directly as a value. Represents a missing value.\n *\n * @category constructors\n * @since 2.0.0\n */\nexport var none = _.none;\n/**\n * Constructs a `Some`. Represents an optional value that exists.\n *\n * @category constructors\n * @since 2.0.0\n */\nexport var some = _.some;\nexport function fromPredicate(predicate) {\n    return function (a) { return (predicate(a) ? some(a) : none); };\n}\n/**\n * Returns the `Left` value of an `Either` if possible.\n *\n * @example\n * import { getLeft, none, some } from 'fp-ts/Option'\n * import { right, left } from 'fp-ts/Either'\n *\n * assert.deepStrictEqual(getLeft(right(1)), none)\n * assert.deepStrictEqual(getLeft(left('a')), some('a'))\n *\n * @category constructors\n * @since 2.0.0\n */\nexport var getLeft = function (ma) { return (ma._tag === 'Right' ? none : some(ma.left)); };\n/**\n * Returns the `Right` value of an `Either` if possible.\n *\n * @example\n * import { getRight, none, some } from 'fp-ts/Option'\n * import { right, left } from 'fp-ts/Either'\n *\n * assert.deepStrictEqual(getRight(right(1)), some(1))\n * assert.deepStrictEqual(getRight(left('a')), none)\n *\n * @category constructors\n * @since 2.0.0\n */\nexport var getRight = function (ma) { return (ma._tag === 'Left' ? none : some(ma.right)); };\nvar _map = function (fa, f) { return pipe(fa, map(f)); };\nvar _ap = function (fab, fa) { return pipe(fab, ap(fa)); };\nvar _reduce = function (fa, b, f) { return pipe(fa, reduce(b, f)); };\nvar _foldMap = function (M) {\n    var foldMapM = foldMap(M);\n    return function (fa, f) { return pipe(fa, foldMapM(f)); };\n};\nvar _reduceRight = function (fa, b, f) { return pipe(fa, reduceRight(b, f)); };\nvar _traverse = function (F) {\n    var traverseF = traverse(F);\n    return function (ta, f) { return pipe(ta, traverseF(f)); };\n};\n/* istanbul ignore next */\nvar _alt = function (fa, that) { return pipe(fa, alt(that)); };\nvar _filter = function (fa, predicate) { return pipe(fa, filter(predicate)); };\n/* istanbul ignore next */\nvar _filterMap = function (fa, f) { return pipe(fa, filterMap(f)); };\n/* istanbul ignore next */\nvar _extend = function (wa, f) { return pipe(wa, extend(f)); };\n/* istanbul ignore next */\nvar _partition = function (fa, predicate) {\n    return pipe(fa, partition(predicate));\n};\n/* istanbul ignore next */\nvar _partitionMap = function (fa, f) { return pipe(fa, partitionMap(f)); };\n/**\n * @category type lambdas\n * @since 2.0.0\n */\nexport var URI = 'Option';\n/**\n * @category instances\n * @since 2.0.0\n */\nexport var getShow = function (S) { return ({\n    show: function (ma) { return (isNone(ma) ? 'none' : \"some(\".concat(S.show(ma.value), \")\")); }\n}); };\n/**\n * @example\n * import { none, some, getEq } from 'fp-ts/Option'\n * import * as N from 'fp-ts/number'\n *\n * const E = getEq(N.Eq)\n * assert.strictEqual(E.equals(none, none), true)\n * assert.strictEqual(E.equals(none, some(1)), false)\n * assert.strictEqual(E.equals(some(1), none), false)\n * assert.strictEqual(E.equals(some(1), some(2)), false)\n * assert.strictEqual(E.equals(some(1), some(1)), true)\n *\n * @category instances\n * @since 2.0.0\n */\nexport var getEq = function (E) { return ({\n    equals: function (x, y) { return x === y || (isNone(x) ? isNone(y) : isNone(y) ? false : E.equals(x.value, y.value)); }\n}); };\n/**\n * The `Ord` instance allows `Option` values to be compared with\n * `compare`, whenever there is an `Ord` instance for\n * the type the `Option` contains.\n *\n * `None` is considered to be less than any `Some` value.\n *\n *\n * @example\n * import { none, some, getOrd } from 'fp-ts/Option'\n * import * as N from 'fp-ts/number'\n *\n * const O = getOrd(N.Ord)\n * assert.strictEqual(O.compare(none, none), 0)\n * assert.strictEqual(O.compare(none, some(1)), -1)\n * assert.strictEqual(O.compare(some(1), none), 1)\n * assert.strictEqual(O.compare(some(1), some(2)), -1)\n * assert.strictEqual(O.compare(some(1), some(1)), 0)\n *\n * @category instances\n * @since 2.0.0\n */\nexport var getOrd = function (O) { return ({\n    equals: getEq(O).equals,\n    compare: function (x, y) { return (x === y ? 0 : isSome(x) ? (isSome(y) ? O.compare(x.value, y.value) : 1) : isSome(y) ? -1 : 0); }\n}); };\n/**\n * Monoid returning the left-most non-`None` value. If both operands are `Some`s then the inner values are\n * concatenated using the provided `Semigroup`\n *\n * | x       | y       | concat(x, y)       |\n * | ------- | ------- | ------------------ |\n * | none    | none    | none               |\n * | some(a) | none    | some(a)            |\n * | none    | some(b) | some(b)            |\n * | some(a) | some(b) | some(concat(a, b)) |\n *\n * @example\n * import { getMonoid, some, none } from 'fp-ts/Option'\n * import { SemigroupSum } from 'fp-ts/number'\n *\n * const M = getMonoid(SemigroupSum)\n * assert.deepStrictEqual(M.concat(none, none), none)\n * assert.deepStrictEqual(M.concat(some(1), none), some(1))\n * assert.deepStrictEqual(M.concat(none, some(1)), some(1))\n * assert.deepStrictEqual(M.concat(some(1), some(2)), some(3))\n *\n * @category instances\n * @since 2.0.0\n */\nexport var getMonoid = function (S) { return ({\n    concat: function (x, y) { return (isNone(x) ? y : isNone(y) ? x : some(S.concat(x.value, y.value))); },\n    empty: none\n}); };\n/**\n * @category mapping\n * @since 2.0.0\n */\nexport var map = function (f) { return function (fa) {\n    return isNone(fa) ? none : some(f(fa.value));\n}; };\n/**\n * @category instances\n * @since 2.7.0\n */\nexport var Functor = {\n    URI: URI,\n    map: _map\n};\n/**\n * Maps the `Some` value of this `Option` to the specified constant value.\n *\n * @category mapping\n * @since 2.16.0\n */\nexport var as = dual(2, as_(Functor));\n/**\n * Maps the `Some` value of this `Option` to the void constant value.\n *\n * @category mapping\n * @since 2.16.0\n */\nexport var asUnit = asUnit_(Functor);\n/**\n * @category constructors\n * @since 2.7.0\n */\nexport var of = some;\n/**\n * @category instances\n * @since 2.10.0\n */\nexport var Pointed = {\n    URI: URI,\n    of: of\n};\n/**\n * @since 2.0.0\n */\nexport var ap = function (fa) { return function (fab) {\n    return isNone(fab) ? none : isNone(fa) ? none : some(fab.value(fa.value));\n}; };\n/**\n * @category instances\n * @since 2.10.0\n */\nexport var Apply = {\n    URI: URI,\n    map: _map,\n    ap: _ap\n};\n/**\n * @category instances\n * @since 2.7.0\n */\nexport var Applicative = {\n    URI: URI,\n    map: _map,\n    ap: _ap,\n    of: of\n};\n/**\n * @category sequencing\n * @since 2.14.0\n */\nexport var flatMap = /*#__PURE__*/ dual(2, function (ma, f) { return (isNone(ma) ? none : f(ma.value)); });\n/**\n * @category instances\n * @since 2.10.0\n */\nexport var Chain = {\n    URI: URI,\n    map: _map,\n    ap: _ap,\n    chain: flatMap\n};\n/**\n * @category instances\n * @since 2.7.0\n */\nexport var Monad = {\n    URI: URI,\n    map: _map,\n    ap: _ap,\n    of: of,\n    chain: flatMap\n};\n/**\n * @category folding\n * @since 2.0.0\n */\nexport var reduce = function (b, f) { return function (fa) {\n    return isNone(fa) ? b : f(b, fa.value);\n}; };\n/**\n * @category folding\n * @since 2.0.0\n */\nexport var foldMap = function (M) { return function (f) { return function (fa) {\n    return isNone(fa) ? M.empty : f(fa.value);\n}; }; };\n/**\n * @category folding\n * @since 2.0.0\n */\nexport var reduceRight = function (b, f) { return function (fa) {\n    return isNone(fa) ? b : f(fa.value, b);\n}; };\n/**\n * @category instances\n * @since 2.7.0\n */\nexport var Foldable = {\n    URI: URI,\n    reduce: _reduce,\n    foldMap: _foldMap,\n    reduceRight: _reduceRight\n};\n/**\n * Returns the provided `Option` `that` if `self` is `None`, otherwise returns `self`.\n *\n * @param self - The first `Option` to be checked.\n * @param that - The `Option` to return if `self` is `None`.\n *\n * @example\n * import * as O from \"fp-ts/Option\"\n *\n * assert.deepStrictEqual(O.orElse(O.none, () => O.none), O.none)\n * assert.deepStrictEqual(O.orElse(O.some(1), () => O.none), O.some(1))\n * assert.deepStrictEqual(O.orElse(O.none, () => O.some('b')), O.some('b'))\n * assert.deepStrictEqual(O.orElse(O.some(1), () => O.some('b')), O.some(1))\n *\n * @category error handling\n * @since 2.16.0\n */\nexport var orElse = dual(2, function (self, that) { return (isNone(self) ? that() : self); });\n/**\n * Alias of `orElse`.\n *\n * Less strict version of [`alt`](#alt).\n *\n * The `W` suffix (short for **W**idening) means that the return types will be merged.\n *\n * @category legacy\n * @since 2.9.0\n */\nexport var altW = orElse;\n/**\n * Alias of `orElse`.\n *\n * @category legacy\n * @since 2.0.0\n */\nexport var alt = orElse;\n/**\n * @category instances\n * @since 2.7.0\n */\nexport var Alt = {\n    URI: URI,\n    map: _map,\n    alt: _alt\n};\n/**\n * @since 2.7.0\n */\nexport var zero = function () { return none; };\n/**\n * @category instances\n * @since 2.11.0\n */\nexport var Zero = {\n    URI: URI,\n    zero: zero\n};\n/**\n * @category do notation\n * @since 2.11.0\n */\nexport var guard = /*#__PURE__*/ guard_(Zero, Pointed);\n/**\n * @category instances\n * @since 2.7.0\n */\nexport var Alternative = {\n    URI: URI,\n    map: _map,\n    ap: _ap,\n    of: of,\n    alt: _alt,\n    zero: zero\n};\n/**\n * @since 2.0.0\n */\nexport var extend = function (f) { return function (wa) {\n    return isNone(wa) ? none : some(f(wa));\n}; };\n/**\n * @category instances\n * @since 2.7.0\n */\nexport var Extend = {\n    URI: URI,\n    map: _map,\n    extend: _extend\n};\n/**\n * @category filtering\n * @since 2.0.0\n */\nexport var compact = /*#__PURE__*/ flatMap(identity);\nvar defaultSeparated = /*#__PURE__*/ separated(none, none);\n/**\n * @category filtering\n * @since 2.0.0\n */\nexport var separate = function (ma) {\n    return isNone(ma) ? defaultSeparated : separated(getLeft(ma.value), getRight(ma.value));\n};\n/**\n * @category instances\n * @since 2.7.0\n */\nexport var Compactable = {\n    URI: URI,\n    compact: compact,\n    separate: separate\n};\n/**\n * @category filtering\n * @since 2.0.0\n */\nexport var filter = function (predicate) {\n    return function (fa) {\n        return isNone(fa) ? none : predicate(fa.value) ? fa : none;\n    };\n};\n/**\n * @category filtering\n * @since 2.0.0\n */\nexport var filterMap = function (f) { return function (fa) {\n    return isNone(fa) ? none : f(fa.value);\n}; };\n/**\n * @category filtering\n * @since 2.0.0\n */\nexport var partition = function (predicate) {\n    return function (fa) {\n        return separated(_filter(fa, not(predicate)), _filter(fa, predicate));\n    };\n};\n/**\n * @category filtering\n * @since 2.0.0\n */\nexport var partitionMap = function (f) { return flow(map(f), separate); };\n/**\n * @category instances\n * @since 2.7.0\n */\nexport var Filterable = {\n    URI: URI,\n    map: _map,\n    compact: compact,\n    separate: separate,\n    filter: _filter,\n    filterMap: _filterMap,\n    partition: _partition,\n    partitionMap: _partitionMap\n};\n/**\n * @category traversing\n * @since 2.6.3\n */\nexport var traverse = function (F) {\n    return function (f) {\n        return function (ta) {\n            return isNone(ta) ? F.of(none) : F.map(f(ta.value), some);\n        };\n    };\n};\n/**\n * @category traversing\n * @since 2.6.3\n */\nexport var sequence = function (F) {\n    return function (ta) {\n        return isNone(ta) ? F.of(none) : F.map(ta.value, some);\n    };\n};\n/**\n * @category instances\n * @since 2.7.0\n */\nexport var Traversable = {\n    URI: URI,\n    map: _map,\n    reduce: _reduce,\n    foldMap: _foldMap,\n    reduceRight: _reduceRight,\n    traverse: _traverse,\n    sequence: sequence\n};\nvar _wither = /*#__PURE__*/ witherDefault(Traversable, Compactable);\nvar _wilt = /*#__PURE__*/ wiltDefault(Traversable, Compactable);\n/**\n * @category filtering\n * @since 2.6.5\n */\nexport var wither = function (F) {\n    var _witherF = _wither(F);\n    return function (f) { return function (fa) { return _witherF(fa, f); }; };\n};\n/**\n * @category filtering\n * @since 2.6.5\n */\nexport var wilt = function (F) {\n    var _wiltF = _wilt(F);\n    return function (f) { return function (fa) { return _wiltF(fa, f); }; };\n};\n/**\n * @category instances\n * @since 2.7.0\n */\nexport var Witherable = {\n    URI: URI,\n    map: _map,\n    reduce: _reduce,\n    foldMap: _foldMap,\n    reduceRight: _reduceRight,\n    traverse: _traverse,\n    sequence: sequence,\n    compact: compact,\n    separate: separate,\n    filter: _filter,\n    filterMap: _filterMap,\n    partition: _partition,\n    partitionMap: _partitionMap,\n    wither: _wither,\n    wilt: _wilt\n};\n/**\n * @since 2.7.0\n */\nexport var throwError = function () { return none; };\n/**\n * @category instances\n * @since 2.7.0\n */\nexport var MonadThrow = {\n    URI: URI,\n    map: _map,\n    ap: _ap,\n    of: of,\n    chain: flatMap,\n    throwError: throwError\n};\n/**\n * Transforms an `Either` to an `Option` discarding the error.\n *\n * Alias of [getRight](#getright)\n *\n * @category conversions\n * @since 2.0.0\n */\nexport var fromEither = getRight;\n/**\n * @category instances\n * @since 2.11.0\n */\nexport var FromEither = {\n    URI: URI,\n    fromEither: fromEither\n};\n// -------------------------------------------------------------------------------------\n// refinements\n// -------------------------------------------------------------------------------------\n/**\n * Returns `true` if the option is an instance of `Some`, `false` otherwise.\n *\n * @example\n * import { some, none, isSome } from 'fp-ts/Option'\n *\n * assert.strictEqual(isSome(some(1)), true)\n * assert.strictEqual(isSome(none), false)\n *\n * @category refinements\n * @since 2.0.0\n */\nexport var isSome = _.isSome;\n/**\n * Returns `true` if the option is `None`, `false` otherwise.\n *\n * @example\n * import { some, none, isNone } from 'fp-ts/Option'\n *\n * assert.strictEqual(isNone(some(1)), false)\n * assert.strictEqual(isNone(none), true)\n *\n * @category refinements\n * @since 2.0.0\n */\nexport var isNone = function (fa) { return fa._tag === 'None'; };\n/**\n * Less strict version of [`match`](#match).\n *\n * The `W` suffix (short for **W**idening) means that the handler return types will be merged.\n *\n * @category pattern matching\n * @since 2.10.0\n */\nexport var matchW = function (onNone, onSome) {\n    return function (ma) {\n        return isNone(ma) ? onNone() : onSome(ma.value);\n    };\n};\n/**\n * Alias of [`matchW`](#matchw).\n *\n * @category pattern matching\n * @since 2.10.0\n */\nexport var foldW = matchW;\n/**\n * Takes a (lazy) default value, a function, and an `Option` value, if the `Option` value is `None` the default value is\n * returned, otherwise the function is applied to the value inside the `Some` and the result is returned.\n *\n * @example\n * import { some, none, match } from 'fp-ts/Option'\n * import { pipe } from 'fp-ts/function'\n *\n * assert.strictEqual(\n *   pipe(\n *     some(1),\n *     match(() => 'a none', a => `a some containing ${a}`)\n *   ),\n *   'a some containing 1'\n * )\n *\n * assert.strictEqual(\n *   pipe(\n *     none,\n *     match(() => 'a none', a => `a some containing ${a}`)\n *   ),\n *   'a none'\n * )\n *\n * @category pattern matching\n * @since 2.10.0\n */\nexport var match = matchW;\n/**\n * Alias of [`match`](#match).\n *\n * @category pattern matching\n * @since 2.0.0\n */\nexport var fold = match;\n/**\n * Less strict version of [`getOrElse`](#getorelse).\n *\n * The `W` suffix (short for **W**idening) means that the handler return type will be merged.\n *\n * @category error handling\n * @since 2.6.0\n */\nexport var getOrElseW = function (onNone) {\n    return function (ma) {\n        return isNone(ma) ? onNone() : ma.value;\n    };\n};\n/**\n * Extracts the value out of the structure, if it exists. Otherwise returns the given default value\n *\n * @example\n * import { some, none, getOrElse } from 'fp-ts/Option'\n * import { pipe } from 'fp-ts/function'\n *\n * assert.strictEqual(\n *   pipe(\n *     some(1),\n *     getOrElse(() => 0)\n *   ),\n *   1\n * )\n * assert.strictEqual(\n *   pipe(\n *     none,\n *     getOrElse(() => 0)\n *   ),\n *   0\n * )\n *\n * @category error handling\n * @since 2.0.0\n */\nexport var getOrElse = getOrElseW;\n/**\n * @category mapping\n * @since 2.10.0\n */\nexport var flap = /*#__PURE__*/ flap_(Functor);\n/**\n * Combine two effectful actions, keeping only the result of the first.\n *\n * @since 2.0.0\n */\nexport var apFirst = /*#__PURE__*/ apFirst_(Apply);\n/**\n * Combine two effectful actions, keeping only the result of the second.\n *\n * @since 2.0.0\n */\nexport var apSecond = /*#__PURE__*/ apSecond_(Apply);\n/**\n * @category sequencing\n * @since 2.0.0\n */\nexport var flatten = compact;\n/**\n * Composes computations in sequence, using the return value of one computation to determine the next computation and\n * keeping only the result of the first.\n *\n * @category combinators\n * @since 2.15.0\n */\nexport var tap = /*#__PURE__*/ dual(2, chainable.tap(Chain));\n/**\n * Composes computations in sequence, using the return value of one computation to determine the next computation and\n * keeping only the result of the first.\n *\n * @example\n * import { pipe } from 'fp-ts/function'\n * import * as O from 'fp-ts/Option'\n * import * as E from 'fp-ts/Either'\n *\n * const compute = (value: number) => pipe(\n *   O.of(value),\n *   O.tapEither((value) => value > 0 ? E.right('ok') : E.left('error')),\n * )\n *\n * assert.deepStrictEqual(compute(1), O.of(1))\n * assert.deepStrictEqual(compute(-42), O.none)\n *\n * @category combinators\n * @since 2.16.0\n */\nexport var tapEither = /*#__PURE__*/ dual(2, tapEither_(FromEither, Chain));\n/**\n * @since 2.0.0\n */\nexport var duplicate = /*#__PURE__*/ extend(identity);\n/**\n * @category lifting\n * @since 2.11.0\n */\nexport var fromEitherK = /*#__PURE__*/ fromEitherK_(FromEither);\n/**\n * @category sequencing\n * @since 2.11.0\n */\nexport var chainEitherK = \n/*#__PURE__*/ chainEitherK_(FromEither, Chain);\n/**\n * Alias of `tapEither`.\n *\n * @category legacy\n * @since 2.12.0\n */\nexport var chainFirstEitherK = tapEither;\n/**\n * Constructs a new `Option` from a nullable type. If the value is `null` or `undefined`, returns `None`, otherwise\n * returns the value wrapped in a `Some`.\n *\n * @example\n * import { none, some, fromNullable } from 'fp-ts/Option'\n *\n * assert.deepStrictEqual(fromNullable(undefined), none)\n * assert.deepStrictEqual(fromNullable(null), none)\n * assert.deepStrictEqual(fromNullable(1), some(1))\n *\n * @category conversions\n * @since 2.0.0\n */\nexport var fromNullable = function (a) { return (a == null ? none : some(a)); };\n/**\n * Transforms an exception into an `Option`. If `f` throws, returns `None`, otherwise returns the output wrapped in a\n * `Some`.\n *\n * See also [`tryCatchK`](#trycatchk).\n *\n * @example\n * import { none, some, tryCatch } from 'fp-ts/Option'\n *\n * assert.deepStrictEqual(\n *   tryCatch(() => {\n *     throw new Error()\n *   }),\n *   none\n * )\n * assert.deepStrictEqual(tryCatch(() => 1), some(1))\n *\n * @category interop\n * @since 2.0.0\n */\nexport var tryCatch = function (f) {\n    try {\n        return some(f());\n    }\n    catch (e) {\n        return none;\n    }\n};\n/**\n * Converts a function that may throw to one returning a `Option`.\n *\n * @category interop\n * @since 2.10.0\n */\nexport var tryCatchK = function (f) {\n    return function () {\n        var a = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            a[_i] = arguments[_i];\n        }\n        return tryCatch(function () { return f.apply(void 0, a); });\n    };\n};\n/**\n * Returns a *smart constructor* from a function that returns a nullable value.\n *\n * @example\n * import { fromNullableK, none, some } from 'fp-ts/Option'\n *\n * const f = (s: string): number | undefined => {\n *   const n = parseFloat(s)\n *   return isNaN(n) ? undefined : n\n * }\n *\n * const g = fromNullableK(f)\n *\n * assert.deepStrictEqual(g('1'), some(1))\n * assert.deepStrictEqual(g('a'), none)\n *\n * @category lifting\n * @since 2.9.0\n */\nexport var fromNullableK = function (f) { return flow(f, fromNullable); };\n/**\n * This is `chain` + `fromNullable`, useful when working with optional values.\n *\n * @example\n * import { some, none, fromNullable, chainNullableK } from 'fp-ts/Option'\n * import { pipe } from 'fp-ts/function'\n *\n * interface Employee {\n *   readonly company?: {\n *     readonly address?: {\n *       readonly street?: {\n *         readonly name?: string\n *       }\n *     }\n *   }\n * }\n *\n * const employee1: Employee = { company: { address: { street: { name: 'high street' } } } }\n *\n * assert.deepStrictEqual(\n *   pipe(\n *     fromNullable(employee1.company),\n *     chainNullableK(company => company.address),\n *     chainNullableK(address => address.street),\n *     chainNullableK(street => street.name)\n *   ),\n *   some('high street')\n * )\n *\n * const employee2: Employee = { company: { address: { street: {} } } }\n *\n * assert.deepStrictEqual(\n *   pipe(\n *     fromNullable(employee2.company),\n *     chainNullableK(company => company.address),\n *     chainNullableK(address => address.street),\n *     chainNullableK(street => street.name)\n *   ),\n *   none\n * )\n *\n * @category sequencing\n * @since 2.9.0\n */\nexport var chainNullableK = function (f) {\n    return function (ma) {\n        return isNone(ma) ? none : fromNullable(f(ma.value));\n    };\n};\n/**\n * Extracts the value out of the structure, if it exists. Otherwise returns `null`.\n *\n * @example\n * import { some, none, toNullable } from 'fp-ts/Option'\n * import { pipe } from 'fp-ts/function'\n *\n * assert.strictEqual(\n *   pipe(\n *     some(1),\n *     toNullable\n *   ),\n *   1\n * )\n * assert.strictEqual(\n *   pipe(\n *     none,\n *     toNullable\n *   ),\n *   null\n * )\n *\n * @category conversions\n * @since 2.0.0\n */\nexport var toNullable = /*#__PURE__*/ match(constNull, identity);\n/**\n * Extracts the value out of the structure, if it exists. Otherwise returns `undefined`.\n *\n * @example\n * import { some, none, toUndefined } from 'fp-ts/Option'\n * import { pipe } from 'fp-ts/function'\n *\n * assert.strictEqual(\n *   pipe(\n *     some(1),\n *     toUndefined\n *   ),\n *   1\n * )\n * assert.strictEqual(\n *   pipe(\n *     none,\n *     toUndefined\n *   ),\n *   undefined\n * )\n *\n * @category conversions\n * @since 2.0.0\n */\nexport var toUndefined = /*#__PURE__*/ match(constUndefined, identity);\nexport function elem(E) {\n    return function (a, ma) {\n        if (ma === undefined) {\n            var elemE_1 = elem(E);\n            return function (ma) { return elemE_1(a, ma); };\n        }\n        return isNone(ma) ? false : E.equals(a, ma.value);\n    };\n}\n/**\n * Returns `true` if the predicate is satisfied by the wrapped value\n *\n * @example\n * import { some, none, exists } from 'fp-ts/Option'\n * import { pipe } from 'fp-ts/function'\n *\n * assert.strictEqual(\n *   pipe(\n *     some(1),\n *     exists(n => n > 0)\n *   ),\n *   true\n * )\n * assert.strictEqual(\n *   pipe(\n *     some(1),\n *     exists(n => n > 1)\n *   ),\n *   false\n * )\n * assert.strictEqual(\n *   pipe(\n *     none,\n *     exists(n => n > 0)\n *   ),\n *   false\n * )\n *\n * @since 2.0.0\n */\nexport var exists = function (predicate) {\n    return function (ma) {\n        return isNone(ma) ? false : predicate(ma.value);\n    };\n};\n// -------------------------------------------------------------------------------------\n// do notation\n// -------------------------------------------------------------------------------------\n/**\n * @category do notation\n * @since 2.9.0\n */\nexport var Do = /*#__PURE__*/ of(_.emptyRecord);\n/**\n * @category do notation\n * @since 2.8.0\n */\nexport var bindTo = /*#__PURE__*/ bindTo_(Functor);\nvar let_ = /*#__PURE__*/ let__(Functor);\nexport { \n/**\n * @category do notation\n * @since 2.13.0\n */\nlet_ as let };\n/**\n * @category do notation\n * @since 2.8.0\n */\nexport var bind = /*#__PURE__*/ chainable.bind(Chain);\n/**\n * @category do notation\n * @since 2.8.0\n */\nexport var apS = /*#__PURE__*/ apS_(Apply);\n/**\n * @since 2.11.0\n */\nexport var ApT = /*#__PURE__*/ of(_.emptyReadonlyArray);\n// -------------------------------------------------------------------------------------\n// array utils\n// -------------------------------------------------------------------------------------\n/**\n * Equivalent to `ReadonlyNonEmptyArray#traverseWithIndex(Applicative)`.\n *\n * @category traversing\n * @since 2.11.0\n */\nexport var traverseReadonlyNonEmptyArrayWithIndex = function (f) {\n    return function (as) {\n        var o = f(0, _.head(as));\n        if (isNone(o)) {\n            return none;\n        }\n        var out = [o.value];\n        for (var i = 1; i < as.length; i++) {\n            var o_1 = f(i, as[i]);\n            if (isNone(o_1)) {\n                return none;\n            }\n            out.push(o_1.value);\n        }\n        return some(out);\n    };\n};\n/**\n * Equivalent to `ReadonlyArray#traverseWithIndex(Applicative)`.\n *\n * @category traversing\n * @since 2.11.0\n */\nexport var traverseReadonlyArrayWithIndex = function (f) {\n    var g = traverseReadonlyNonEmptyArrayWithIndex(f);\n    return function (as) { return (_.isNonEmpty(as) ? g(as) : ApT); };\n};\n/**\n * Equivalent to `ReadonlyArray#traverseWithIndex(Applicative)`.\n *\n * @category traversing\n * @since 2.9.0\n */\nexport var traverseArrayWithIndex = traverseReadonlyArrayWithIndex;\n/**\n * Equivalent to `ReadonlyArray#traverse(Applicative)`.\n *\n * @category traversing\n * @since 2.9.0\n */\nexport var traverseArray = function (f) {\n    return traverseReadonlyArrayWithIndex(function (_, a) { return f(a); });\n};\n/**\n * Equivalent to `ReadonlyArray#sequence(Applicative)`.\n *\n * @category traversing\n * @since 2.9.0\n */\nexport var sequenceArray = \n/*#__PURE__*/ traverseArray(identity);\n// -------------------------------------------------------------------------------------\n// legacy\n// -------------------------------------------------------------------------------------\n/**\n * Alias of `flatMap`.\n *\n * @category legacy\n * @since 2.0.0\n */\nexport var chain = flatMap;\n/**\n * Alias of `tap`.\n *\n * @category legacy\n * @since 2.0.0\n */\nexport var chainFirst = tap;\n// -------------------------------------------------------------------------------------\n// deprecated\n// -------------------------------------------------------------------------------------\n/**\n * Use `Refinement` module instead.\n *\n * @category zone of death\n * @since 2.0.0\n * @deprecated\n */\nexport function getRefinement(getOption) {\n    return function (a) { return isSome(getOption(a)); };\n}\n/**\n * Use [`chainNullableK`](#chainnullablek) instead.\n *\n * @category zone of death\n * @since 2.0.0\n * @deprecated\n */\nexport var mapNullable = chainNullableK;\n/**\n * This instance is deprecated, use small, specific instances instead.\n * For example if a function needs a `Functor` instance, pass `O.Functor` instead of `O.option`\n * (where `O` is from `import O from 'fp-ts/Option'`)\n *\n * @category zone of death\n * @since 2.0.0\n * @deprecated\n */\nexport var option = {\n    URI: URI,\n    map: _map,\n    of: of,\n    ap: _ap,\n    chain: flatMap,\n    reduce: _reduce,\n    foldMap: _foldMap,\n    reduceRight: _reduceRight,\n    traverse: _traverse,\n    sequence: sequence,\n    zero: zero,\n    alt: _alt,\n    extend: _extend,\n    compact: compact,\n    separate: separate,\n    filter: _filter,\n    filterMap: _filterMap,\n    partition: _partition,\n    partitionMap: _partitionMap,\n    wither: _wither,\n    wilt: _wilt,\n    throwError: throwError\n};\n/**\n * Use [`getApplySemigroup`](./Apply.ts.html#getapplysemigroup) instead.\n *\n * @category zone of death\n * @since 2.0.0\n * @deprecated\n */\nexport var getApplySemigroup = /*#__PURE__*/ getApplySemigroup_(Apply);\n/**\n * Use [`getApplicativeMonoid`](./Applicative.ts.html#getapplicativemonoid) instead.\n *\n * @category zone of death\n * @since 2.0.0\n * @deprecated\n */\nexport var getApplyMonoid = /*#__PURE__*/ getApplicativeMonoid(Applicative);\n/**\n * Use\n *\n * ```ts\n * import { first } from 'fp-ts/Semigroup'\n * import { getMonoid } from 'fp-ts/Option'\n *\n * getMonoid(first())\n * ```\n *\n * instead.\n *\n * Monoid returning the left-most non-`None` value\n *\n * | x       | y       | concat(x, y) |\n * | ------- | ------- | ------------ |\n * | none    | none    | none         |\n * | some(a) | none    | some(a)      |\n * | none    | some(b) | some(b)      |\n * | some(a) | some(b) | some(a)      |\n *\n * @example\n * import { getFirstMonoid, some, none } from 'fp-ts/Option'\n *\n * const M = getFirstMonoid<number>()\n * assert.deepStrictEqual(M.concat(none, none), none)\n * assert.deepStrictEqual(M.concat(some(1), none), some(1))\n * assert.deepStrictEqual(M.concat(none, some(2)), some(2))\n * assert.deepStrictEqual(M.concat(some(1), some(2)), some(1))\n *\n * @category zone of death\n * @since 2.0.0\n * @deprecated\n */\nexport var getFirstMonoid = function () { return getMonoid(first()); };\n/**\n * Use\n *\n * ```ts\n * import { last } from 'fp-ts/Semigroup'\n * import { getMonoid } from 'fp-ts/Option'\n *\n * getMonoid(last())\n * ```\n *\n * instead.\n *\n * Monoid returning the right-most non-`None` value\n *\n * | x       | y       | concat(x, y) |\n * | ------- | ------- | ------------ |\n * | none    | none    | none         |\n * | some(a) | none    | some(a)      |\n * | none    | some(b) | some(b)      |\n * | some(a) | some(b) | some(b)      |\n *\n * @example\n * import { getLastMonoid, some, none } from 'fp-ts/Option'\n *\n * const M = getLastMonoid<number>()\n * assert.deepStrictEqual(M.concat(none, none), none)\n * assert.deepStrictEqual(M.concat(some(1), none), some(1))\n * assert.deepStrictEqual(M.concat(none, some(2)), some(2))\n * assert.deepStrictEqual(M.concat(some(1), some(2)), some(2))\n *\n * @category zone of death\n * @since 2.0.0\n * @deprecated\n */\nexport var getLastMonoid = function () { return getMonoid(last()); };\n","import { throwifyFpFn, throwifyAnyEither, type AnyFn } from '@tma.js/toolkit';\nimport * as O from 'fp-ts/Option';\nimport { pipe } from 'fp-ts/function';\n\nimport type { WithChecksFp, WithChecks } from '@/with-checks/withChecksFp.js';\n\nexport function throwifyWithChecksFp<\n  Fn extends AnyFn,\n  HasSupportCheck extends boolean,\n  SupportsMapKeySchema extends string,\n>(\n  fn: WithChecksFp<Fn, HasSupportCheck, SupportsMapKeySchema>,\n): WithChecks<Fn, HasSupportCheck, SupportsMapKeySchema> {\n  return Object.assign(throwifyFpFn(fn), {\n    ifAvailable(...args: Parameters<Fn>) {\n      return pipe(\n        fn.ifAvailable(...args),\n        O.match(\n          () => ({ ok: false }),\n          data => ({\n            ok: true,\n            data: throwifyAnyEither(data),\n          }),\n        ),\n      );\n    },\n  }) as unknown as WithChecks<Fn, HasSupportCheck, SupportsMapKeySchema>;\n}\n","import { ap as ap_ } from './Apply';\nimport * as E from './Either';\nimport { flow, pipe } from './function';\nimport { map as map_ } from './Functor';\nexport function right(F) {\n    return flow(E.right, F.of);\n}\nexport function left(F) {\n    return flow(E.left, F.of);\n}\nexport function rightF(F) {\n    return function (fa) { return F.map(fa, E.right); };\n}\nexport function leftF(F) {\n    return function (fe) { return F.map(fe, E.left); };\n}\nexport function fromNullable(F) {\n    return function (e) { return flow(E.fromNullable(e), F.of); };\n}\nexport function fromNullableK(F) {\n    var fromNullableF = fromNullable(F);\n    return function (e) {\n        var fromNullableFE = fromNullableF(e);\n        return function (f) { return flow(f, fromNullableFE); };\n    };\n}\nexport function chainNullableK(M) {\n    var chainM = chain(M);\n    var fromNullableKM = fromNullableK(M);\n    return function (e) {\n        var fromNullableKMe = fromNullableKM(e);\n        return function (f) { return chainM(fromNullableKMe(f)); };\n    };\n}\nexport function map(F) {\n    return map_(F, E.Functor);\n}\nexport function ap(F) {\n    return ap_(F, E.Apply);\n}\nexport function chain(M) {\n    var flatMapM = flatMap(M);\n    return function (f) { return function (ma) { return flatMapM(ma, f); }; };\n}\n/** @internal */\nexport function flatMap(M) {\n    return function (ma, f) { return M.chain(ma, function (e) { return (E.isLeft(e) ? M.of(e) : f(e.right)); }); };\n}\nexport function alt(M) {\n    return function (second) { return function (first) { return M.chain(first, function (e) { return (E.isLeft(e) ? second() : M.of(e)); }); }; };\n}\nexport function bimap(F) {\n    var mapBothF = mapBoth(F);\n    return function (f, g) { return function (self) { return mapBothF(self, f, g); }; };\n}\n/** @internal */\nexport function mapBoth(F) {\n    return function (self, f, g) { return F.map(self, E.bimap(f, g)); };\n}\nexport function mapLeft(F) {\n    var mapErrorF = mapError(F);\n    return function (f) { return function (self) { return mapErrorF(self, f); }; };\n}\n/** @internal */\nexport function mapError(F) {\n    return function (self, f) { return F.map(self, E.mapLeft(f)); };\n}\nexport function altValidation(M, S) {\n    return function (second) { return function (first) {\n        return M.chain(first, E.match(function (e1) {\n            return M.map(second(), E.mapLeft(function (e2) { return S.concat(e1, e2); }));\n        }, right(M)));\n    }; };\n}\nexport function match(F) {\n    return function (onLeft, onRight) { return function (ma) { return F.map(ma, E.match(onLeft, onRight)); }; };\n}\nexport function matchE(M) {\n    return function (onLeft, onRight) { return function (ma) { return M.chain(ma, E.match(onLeft, onRight)); }; };\n}\nexport function getOrElse(M) {\n    return function (onLeft) { return function (ma) { return M.chain(ma, E.match(onLeft, M.of)); }; };\n}\nexport function orElse(M) {\n    return function (onLeft) { return function (ma) { return M.chain(ma, function (e) { return (E.isLeft(e) ? onLeft(e.left) : M.of(e)); }); }; };\n}\nexport function orElseFirst(M) {\n    var tapErrorM = tapError(M);\n    return function (onLeft) { return function (ma) { return tapErrorM(ma, onLeft); }; };\n}\n/** @internal */\nexport function tapError(M) {\n    var orElseM = orElse(M);\n    return function (ma, onLeft) {\n        return pipe(ma, orElseM(function (e) { return M.map(onLeft(e), function (eb) { return (E.isLeft(eb) ? eb : E.left(e)); }); }));\n    };\n}\nexport function orLeft(M) {\n    return function (onLeft) { return function (ma) {\n        return M.chain(ma, E.match(function (e) { return M.map(onLeft(e), E.left); }, function (a) { return M.of(E.right(a)); }));\n    }; };\n}\nexport function swap(F) {\n    return function (ma) { return F.map(ma, E.swap); };\n}\nexport function toUnion(F) {\n    return function (fa) { return F.map(fa, E.toUnion); };\n}\n/** @deprecated  */\n/* istanbul ignore next */\nexport function getEitherM(M) {\n    var _ap = ap(M);\n    var _map = map(M);\n    var _chain = chain(M);\n    var _alt = alt(M);\n    var _bimap = bimap(M);\n    var _mapLeft = mapLeft(M);\n    var _fold = matchE(M);\n    var _getOrElse = getOrElse(M);\n    var _orElse = orElse(M);\n    return {\n        map: function (fa, f) { return pipe(fa, _map(f)); },\n        ap: function (fab, fa) { return pipe(fab, _ap(fa)); },\n        of: right(M),\n        chain: function (ma, f) { return pipe(ma, _chain(f)); },\n        alt: function (fa, that) { return pipe(fa, _alt(that)); },\n        bimap: function (fea, f, g) { return pipe(fea, _bimap(f, g)); },\n        mapLeft: function (fea, f) { return pipe(fea, _mapLeft(f)); },\n        fold: function (fa, onLeft, onRight) { return pipe(fa, _fold(onLeft, onRight)); },\n        getOrElse: function (fa, onLeft) { return pipe(fa, _getOrElse(onLeft)); },\n        orElse: function (fa, f) { return pipe(fa, _orElse(f)); },\n        swap: swap(M),\n        rightM: rightF(M),\n        leftM: leftF(M),\n        left: left(M)\n    };\n}\n","/**\n * ```ts\n * interface Task<A> {\n *   (): Promise<A>\n * }\n * ```\n *\n * `Task<A>` represents an asynchronous computation that yields a value of type `A` and **never fails**.\n * If you want to represent an asynchronous computation that may fail, please see `TaskEither`.\n *\n * @since 2.0.0\n */\nimport { getApplicativeMonoid } from './Applicative';\nimport { apFirst as apFirst_, apS as apS_, apSecond as apSecond_, getApplySemigroup as getApplySemigroup_ } from './Apply';\nimport * as chainable from './Chain';\nimport { fromIOK as fromIOK_, tapIO as tapIO_ } from './FromIO';\nimport { dual, identity, pipe } from './function';\nimport { as as as_, asUnit as asUnit_, bindTo as bindTo_, flap as flap_, let as let__ } from './Functor';\nimport * as _ from './internal';\n// -------------------------------------------------------------------------------------\n// conversions\n// -------------------------------------------------------------------------------------\n/**\n * @category conversions\n * @since 2.0.0\n */\nexport var fromIO = function (ma) { return function () { return Promise.resolve().then(ma); }; };\n// -------------------------------------------------------------------------------------\n// combinators\n// -------------------------------------------------------------------------------------\n/**\n * Creates a task that will complete after a time delay\n *\n * @example\n * import { sequenceT } from 'fp-ts/Apply'\n * import * as T from 'fp-ts/Task'\n * import { takeRight } from 'fp-ts/Array'\n *\n * async function test() {\n *   const log: Array<string> = []\n *   const append = (message: string): T.Task<void> =>\n *     T.fromIO(() => {\n *       log.push(message)\n *     })\n *   const fa = append('a')\n *   const fb = T.delay(20)(append('b'))\n *   const fc = T.delay(10)(append('c'))\n *   const fd = append('d')\n *   await sequenceT(T.ApplyPar)(fa, fb, fc, fd)()\n *   assert.deepStrictEqual(takeRight(2)(log), ['c', 'b'])\n * }\n *\n * test()\n *\n * @since 2.0.0\n */\nexport function delay(millis) {\n    return function (ma) { return function () {\n        return new Promise(function (resolve) {\n            setTimeout(function () {\n                Promise.resolve().then(ma).then(resolve);\n            }, millis);\n        });\n    }; };\n}\nvar _map = function (fa, f) { return pipe(fa, map(f)); };\nvar _apPar = function (fab, fa) { return pipe(fab, ap(fa)); };\nvar _apSeq = function (fab, fa) { return flatMap(fab, function (f) { return pipe(fa, map(f)); }); };\n/**\n * `map` can be used to turn functions `(a: A) => B` into functions `(fa: F<A>) => F<B>` whose argument and return types\n * use the type constructor `F` to represent some computational context.\n *\n * @category mapping\n * @since 2.0.0\n */\nexport var map = function (f) { return function (fa) { return function () {\n    return Promise.resolve().then(fa).then(f);\n}; }; };\n/**\n * @since 2.0.0\n */\nexport var ap = function (fa) { return function (fab) { return function () {\n    return Promise.all([Promise.resolve().then(fab), Promise.resolve().then(fa)]).then(function (_a) {\n        var f = _a[0], a = _a[1];\n        return f(a);\n    });\n}; }; };\n/**\n * @category constructors\n * @since 2.0.0\n */\nexport var of = function (a) { return function () { return Promise.resolve(a); }; };\n/**\n * @category sequencing\n * @since 2.14.0\n */\nexport var flatMap = /*#__PURE__*/ dual(2, function (ma, f) {\n    return function () {\n        return Promise.resolve()\n            .then(ma)\n            .then(function (a) { return f(a)(); });\n    };\n});\n/**\n * @category sequencing\n * @since 2.0.0\n */\nexport var flatten = /*#__PURE__*/ flatMap(identity);\n/**\n * @category type lambdas\n * @since 2.0.0\n */\nexport var URI = 'Task';\n/**\n * Monoid returning the first completed task.\n *\n * Note: uses `Promise.race` internally.\n *\n * @example\n * import * as T from 'fp-ts/Task'\n *\n * async function test() {\n *   const S = T.getRaceMonoid<string>()\n *   const fa = T.delay(20)(T.of('a'))\n *   const fb = T.delay(10)(T.of('b'))\n *   assert.deepStrictEqual(await S.concat(fa, fb)(), 'b')\n * }\n *\n * test()\n *\n * @category instances\n * @since 2.0.0\n */\nexport function getRaceMonoid() {\n    return {\n        concat: function (x, y) { return function () { return Promise.race([Promise.resolve().then(x), Promise.resolve().then(y)]); }; },\n        empty: never\n    };\n}\n/**\n * @category instances\n * @since 2.7.0\n */\nexport var Functor = {\n    URI: URI,\n    map: _map\n};\n/**\n * Maps the value to the specified constant value.\n *\n * @category mapping\n * @since 2.16.0\n */\nexport var as = dual(2, as_(Functor));\n/**\n * Maps the value to the void constant value.\n *\n * @category mapping\n * @since 2.16.0\n */\nexport var asUnit = asUnit_(Functor);\n/**\n * @category mapping\n * @since 2.10.0\n */\nexport var flap = /*#__PURE__*/ flap_(Functor);\n/**\n * @category instances\n * @since 2.10.0\n */\nexport var Pointed = {\n    URI: URI,\n    of: of\n};\n/**\n * Runs computations in parallel.\n *\n * @category instances\n * @since 2.10.0\n */\nexport var ApplyPar = {\n    URI: URI,\n    map: _map,\n    ap: _apPar\n};\n/**\n * Combine two effectful actions, keeping only the result of the first.\n *\n * @since 2.0.0\n */\nexport var apFirst = /*#__PURE__*/ apFirst_(ApplyPar);\n/**\n * Combine two effectful actions, keeping only the result of the second.\n *\n * @since 2.0.0\n */\nexport var apSecond = /*#__PURE__*/ apSecond_(ApplyPar);\n/**\n * Runs computations in parallel.\n *\n * @category instances\n * @since 2.7.0\n */\nexport var ApplicativePar = {\n    URI: URI,\n    map: _map,\n    ap: _apPar,\n    of: of\n};\n/**\n * Runs computations sequentially.\n *\n * @category instances\n * @since 2.10.0\n */\nexport var ApplySeq = {\n    URI: URI,\n    map: _map,\n    ap: _apSeq\n};\n/**\n * Runs computations sequentially.\n *\n * @category instances\n * @since 2.7.0\n */\nexport var ApplicativeSeq = {\n    URI: URI,\n    map: _map,\n    ap: _apSeq,\n    of: of\n};\n/**\n * @category instances\n * @since 2.10.0\n */\nexport var Chain = {\n    URI: URI,\n    map: _map,\n    ap: _apPar,\n    chain: flatMap\n};\n/**\n * @category instances\n * @since 2.10.0\n */\nexport var Monad = {\n    URI: URI,\n    map: _map,\n    of: of,\n    ap: _apPar,\n    chain: flatMap\n};\n/**\n * @category instances\n * @since 2.10.0\n */\nexport var MonadIO = {\n    URI: URI,\n    map: _map,\n    of: of,\n    ap: _apPar,\n    chain: flatMap,\n    fromIO: fromIO\n};\n/**\n * @category zone of death\n * @since 2.7.0\n * @deprecated\n */\nexport var fromTask = identity;\n/**\n * @category instances\n * @since 2.10.0\n */\nexport var MonadTask = {\n    URI: URI,\n    map: _map,\n    of: of,\n    ap: _apPar,\n    chain: flatMap,\n    fromIO: fromIO,\n    fromTask: fromTask\n};\n/**\n * @category instances\n * @since 2.10.0\n */\nexport var FromIO = {\n    URI: URI,\n    fromIO: fromIO\n};\n/** @internal */\nvar _FlatMap = {\n    flatMap: flatMap\n};\n/** @internal */\nvar _FromIO = {\n    fromIO: FromIO.fromIO\n};\n/**\n * @category sequencing\n * @since 2.16.0\n */\nexport var flatMapIO = _.flatMapIO(_FromIO, _FlatMap);\n/**\n * Composes computations in sequence, using the return value of one computation to determine the next computation and\n * keeping only the result of the first.\n *\n * @category combinators\n * @since 2.15.0\n */\nexport var tap = /*#__PURE__*/ dual(2, chainable.tap(Chain));\n/**\n * Composes computations in sequence, using the return value of one computation to determine the next computation and\n * keeping only the result of the first.\n *\n * @example\n * import { pipe } from 'fp-ts/function'\n * import * as T from 'fp-ts/Task'\n * import * as Console from 'fp-ts/Console'\n *\n * // Will produce `Hello, fp-ts` to the stdout\n * const effect = pipe(\n *   T.of('fp-ts'),\n *   T.tapIO((value) => Console.log(`Hello, ${value}`)),\n * )\n *\n * async function test() {\n *   assert.deepStrictEqual(await effect(), 'fp-ts')\n * }\n *\n * test()\n *\n * @category combinators\n * @since 2.16.0\n */\nexport var tapIO = /*#__PURE__*/ dual(2, tapIO_(FromIO, Chain));\n/**\n * @category lifting\n * @since 2.4.0\n */\nexport var fromIOK = \n/*#__PURE__*/ fromIOK_(FromIO);\n/**\n * Alias of `flatMapIO`.\n *\n * @category legacy\n * @since 2.4.0\n */\nexport var chainIOK = flatMapIO;\n/**\n * Alias of `tapIO`.\n *\n * @category legacy\n * @since 2.10.0\n */\nexport var chainFirstIOK = tapIO;\n/**\n * @category instances\n * @since 2.10.0\n */\nexport var FromTask = {\n    URI: URI,\n    fromIO: fromIO,\n    fromTask: fromTask\n};\n// -------------------------------------------------------------------------------------\n// utils\n// -------------------------------------------------------------------------------------\n/**\n * A `Task` that never completes.\n *\n * @since 2.0.0\n */\nexport var never = function () { return new Promise(function (_) { return undefined; }); };\n// -------------------------------------------------------------------------------------\n// do notation\n// -------------------------------------------------------------------------------------\n/**\n * @category do notation\n * @since 2.9.0\n */\nexport var Do = /*#__PURE__*/ of(_.emptyRecord);\n/**\n * @category do notation\n * @since 2.8.0\n */\nexport var bindTo = /*#__PURE__*/ bindTo_(Functor);\nvar let_ = /*#__PURE__*/ let__(Functor);\nexport { \n/**\n * @category do notation\n * @since 2.13.0\n */\nlet_ as let };\n/**\n * @category do notation\n * @since 2.8.0\n */\nexport var bind = /*#__PURE__*/ chainable.bind(Chain);\n/**\n * @category do notation\n * @since 2.8.0\n */\nexport var apS = /*#__PURE__*/ apS_(ApplyPar);\n/**\n * @since 2.11.0\n */\nexport var ApT = /*#__PURE__*/ of(_.emptyReadonlyArray);\n// -------------------------------------------------------------------------------------\n// array utils\n// -------------------------------------------------------------------------------------\n/**\n * Equivalent to `ReadonlyNonEmptyArray#traverseWithIndex(ApplicativePar)`.\n *\n * @category traversing\n * @since 2.11.0\n */\nexport var traverseReadonlyNonEmptyArrayWithIndex = function (f) {\n    return function (as) {\n        return function () {\n            return Promise.all(as.map(function (a, i) { return Promise.resolve().then(function () { return f(i, a)(); }); }));\n        };\n    };\n};\n/**\n * Equivalent to `ReadonlyArray#traverseWithIndex(ApplicativePar)`.\n *\n * @category traversing\n * @since 2.11.0\n */\nexport var traverseReadonlyArrayWithIndex = function (f) {\n    var g = traverseReadonlyNonEmptyArrayWithIndex(f);\n    return function (as) { return (_.isNonEmpty(as) ? g(as) : ApT); };\n};\n/**\n * Equivalent to `ReadonlyNonEmptyArray#traverseWithIndex(ApplicativeSeq)`.\n *\n * @category traversing\n * @since 2.11.0\n */\nexport var traverseReadonlyNonEmptyArrayWithIndexSeq = function (f) {\n    return function (as) {\n        return function () {\n            return _.tail(as).reduce(function (acc, a, i) {\n                return acc.then(function (bs) {\n                    return Promise.resolve()\n                        .then(f(i + 1, a))\n                        .then(function (b) {\n                        bs.push(b);\n                        return bs;\n                    });\n                });\n            }, Promise.resolve()\n                .then(f(0, _.head(as)))\n                .then(_.singleton));\n        };\n    };\n};\n/**\n * Equivalent to `ReadonlyArray#traverseWithIndex(ApplicativeSeq)`.\n *\n * @category traversing\n * @since 2.11.0\n */\nexport var traverseReadonlyArrayWithIndexSeq = function (f) {\n    var g = traverseReadonlyNonEmptyArrayWithIndexSeq(f);\n    return function (as) { return (_.isNonEmpty(as) ? g(as) : ApT); };\n};\n/**\n * Equivalent to `ReadonlyArray#traverseWithIndex(Applicative)`.\n *\n * @category traversing\n * @since 2.9.0\n */\nexport var traverseArrayWithIndex = traverseReadonlyArrayWithIndex;\n/**\n * Equivalent to `ReadonlyArray#traverse(Applicative)`.\n *\n * @category traversing\n * @since 2.9.0\n */\nexport var traverseArray = function (f) {\n    return traverseReadonlyArrayWithIndex(function (_, a) { return f(a); });\n};\n/**\n * Equivalent to `ReadonlyArray#sequence(Applicative)`.\n *\n * @category traversing\n * @since 2.9.0\n */\nexport var sequenceArray = \n/*#__PURE__*/ traverseArray(identity);\n/**\n * Equivalent to `ReadonlyArray#traverseWithIndex(ApplicativeSeq)`.\n *\n * @category traversing\n * @since 2.9.0\n */\nexport var traverseSeqArrayWithIndex = traverseReadonlyArrayWithIndexSeq;\n/**\n * Equivalent to `ReadonlyArray#traverse(ApplicativeSeq)`.\n *\n * @category traversing\n * @since 2.9.0\n */\nexport var traverseSeqArray = function (f) {\n    return traverseReadonlyArrayWithIndexSeq(function (_, a) { return f(a); });\n};\n/**\n * Equivalent to `ReadonlyArray#sequence(ApplicativeSeq)`.\n *\n * @category traversing\n * @since 2.9.0\n */\nexport var sequenceSeqArray = \n/*#__PURE__*/ traverseSeqArray(identity);\n// -------------------------------------------------------------------------------------\n// legacy\n// -------------------------------------------------------------------------------------\n/**\n * Alias of `flatMap`.\n *\n * @category legacy\n * @since 2.0.0\n */\nexport var chain = flatMap;\n/**\n * Alias of `tap`.\n *\n * @category legacy\n * @since 2.0.0\n */\nexport var chainFirst = tap;\n// -------------------------------------------------------------------------------------\n// deprecated\n// -------------------------------------------------------------------------------------\n/**\n * This instance is deprecated, use small, specific instances instead.\n * For example if a function needs a `Functor` instance, pass `T.Functor` instead of `T.task`\n * (where `T` is from `import T from 'fp-ts/Task'`)\n *\n * @category zone of death\n * @since 2.0.0\n * @deprecated\n */\nexport var task = {\n    URI: URI,\n    map: _map,\n    of: of,\n    ap: _apPar,\n    chain: flatMap,\n    fromIO: fromIO,\n    fromTask: fromTask\n};\n/**\n * This instance is deprecated, use small, specific instances instead.\n * For example if a function needs a `Functor` instance, pass `T.Functor` instead of `T.taskSeq`\n * (where `T` is from `import T from 'fp-ts/Task'`)\n *\n * @category zone of death\n * @since 2.0.0\n * @deprecated\n */\nexport var taskSeq = {\n    URI: URI,\n    map: _map,\n    of: of,\n    ap: _apSeq,\n    chain: flatMap,\n    fromIO: fromIO,\n    fromTask: fromTask\n};\n/**\n * Use [`getApplySemigroup`](./Apply.ts.html#getapplysemigroup) instead.\n *\n * @category zone of death\n * @since 2.0.0\n * @deprecated\n */\nexport var getSemigroup = /*#__PURE__*/ getApplySemigroup_(ApplySeq);\n/**\n * Use [`getApplicativeMonoid`](./Applicative.ts.html#getapplicativemonoid) instead.\n *\n * Lift a monoid into 'Task', the inner values are concatenated using the provided `Monoid`.\n *\n * @category zone of death\n * @since 2.0.0\n * @deprecated\n */\nexport var getMonoid = /*#__PURE__*/ getApplicativeMonoid(ApplicativeSeq);\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nimport { getApplicativeMonoid } from './Applicative';\nimport { ap as ap_, apFirst as apFirst_, apS as apS_, apSecond as apSecond_, getApplySemigroup as getApplySemigroup_ } from './Apply';\nimport * as chainable from './Chain';\nimport { compact as compact_, separate as separate_ } from './Compactable';\nimport * as E from './Either';\nimport * as ET from './EitherT';\nimport { filter as filter_, filterMap as filterMap_, partition as partition_, partitionMap as partitionMap_ } from './Filterable';\nimport { chainOptionK as chainOptionK_, filterOrElse as filterOrElse_, fromEitherK as fromEitherK_, fromOption as fromOption_, fromOptionK as fromOptionK_, fromPredicate as fromPredicate_, tapEither as tapEither_ } from './FromEither';\nimport { fromIOK as fromIOK_, tapIO as tapIO_ } from './FromIO';\nimport { fromTaskK as fromTaskK_, tapTask as tapTask_ } from './FromTask';\nimport { dual, flow, identity, pipe, SK } from './function';\nimport { as as as_, asUnit as asUnit_, bindTo as bindTo_, flap as flap_, let as let__ } from './Functor';\nimport * as _ from './internal';\nimport * as T from './Task';\n// -------------------------------------------------------------------------------------\n// constructors\n// -------------------------------------------------------------------------------------\n/**\n * @category constructors\n * @since 2.0.0\n */\nexport var left = /*#__PURE__*/ ET.left(T.Pointed);\n/**\n * @category constructors\n * @since 2.0.0\n */\nexport var right = /*#__PURE__*/ ET.right(T.Pointed);\n/**\n * @category constructors\n * @since 2.0.0\n */\nexport var rightTask = /*#__PURE__*/ ET.rightF(T.Functor);\n/**\n * @category constructors\n * @since 2.0.0\n */\nexport var leftTask = /*#__PURE__*/ ET.leftF(T.Functor);\n/**\n * @category constructors\n * @since 2.0.0\n */\nexport var rightIO = /*#__PURE__*/ flow(T.fromIO, rightTask);\n/**\n * @category constructors\n * @since 2.0.0\n */\nexport var leftIO = /*#__PURE__*/ flow(T.fromIO, leftTask);\n// -------------------------------------------------------------------------------------\n// conversions\n// -------------------------------------------------------------------------------------\n/**\n * @category conversions\n * @since 2.7.0\n */\nexport var fromIO = rightIO;\n/**\n * @category conversions\n * @since 2.7.0\n */\nexport var fromTask = rightTask;\n/**\n * @category conversions\n * @since 2.0.0\n */\nexport var fromEither = T.of;\n/**\n * @category conversions\n * @since 2.0.0\n */\nexport var fromIOEither = T.fromIO;\n/**\n * @category conversions\n * @since 2.11.0\n */\nexport var fromTaskOption = function (onNone) {\n    return T.map(E.fromOption(onNone));\n};\n/**\n * @category pattern matching\n * @since 2.10.0\n */\nexport var match = \n/*#__PURE__*/ ET.match(T.Functor);\n/**\n * Less strict version of [`match`](#match).\n *\n * The `W` suffix (short for **W**idening) means that the handler return types will be merged.\n *\n * @category pattern matching\n * @since 2.10.0\n */\nexport var matchW = match;\n/**\n * The `E` suffix (short for **E**ffect) means that the handlers return an effect (`Task`).\n *\n * @category pattern matching\n * @since 2.10.0\n */\nexport var matchE = /*#__PURE__*/ ET.matchE(T.Monad);\n/**\n * Alias of [`matchE`](#matche).\n *\n * @category pattern matching\n * @since 2.0.0\n */\nexport var fold = matchE;\n/**\n * Less strict version of [`matchE`](#matche).\n *\n * The `W` suffix (short for **W**idening) means that the handler return types will be merged.\n *\n * @category pattern matching\n * @since 2.10.0\n */\nexport var matchEW = matchE;\n/**\n * Alias of [`matchEW`](#matchew).\n *\n * @category pattern matching\n * @since 2.10.0\n */\nexport var foldW = matchEW;\n/**\n * @category error handling\n * @since 2.0.0\n */\nexport var getOrElse = \n/*#__PURE__*/ ET.getOrElse(T.Monad);\n/**\n * Less strict version of [`getOrElse`](#getorelse).\n *\n * The `W` suffix (short for **W**idening) means that the handler return type will be merged.\n *\n * @category error handling\n * @since 2.6.0\n */\nexport var getOrElseW = getOrElse;\n/**\n * Transforms a `Promise` that may reject to a `Promise` that never rejects and returns an `Either` instead.\n *\n * See also [`tryCatchK`](#trycatchk).\n *\n * @example\n * import { left, right } from 'fp-ts/Either'\n * import { tryCatch } from 'fp-ts/TaskEither'\n *\n * tryCatch(() => Promise.resolve(1), String)().then(result => {\n *   assert.deepStrictEqual(result, right(1))\n * })\n * tryCatch(() => Promise.reject('error'), String)().then(result => {\n *   assert.deepStrictEqual(result, left('error'))\n * })\n *\n * @category interop\n * @since 2.0.0\n */\nexport var tryCatch = function (f, onRejected) {\n    return function () { return __awaiter(void 0, void 0, void 0, function () {\n        var reason_1;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    _a.trys.push([0, 2, , 3]);\n                    return [4 /*yield*/, f().then(_.right)];\n                case 1: return [2 /*return*/, _a.sent()];\n                case 2:\n                    reason_1 = _a.sent();\n                    return [2 /*return*/, _.left(onRejected(reason_1))];\n                case 3: return [2 /*return*/];\n            }\n        });\n    }); };\n};\n/**\n * Converts a function returning a `Promise` to one returning a `TaskEither`.\n *\n * @category interop\n * @since 2.5.0\n */\nexport var tryCatchK = function (f, onRejected) {\n    return function () {\n        var a = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            a[_i] = arguments[_i];\n        }\n        return tryCatch(function () { return f.apply(void 0, a); }, onRejected);\n    };\n};\n/**\n * @category conversions\n * @since 2.10.0\n */\nexport var toUnion = /*#__PURE__*/ ET.toUnion(T.Functor);\n/**\n * @category conversions\n * @since 2.12.0\n */\nexport var fromNullable = /*#__PURE__*/ ET.fromNullable(T.Pointed);\n/**\n * Use `liftNullable`.\n *\n * @category legacy\n * @since 2.12.0\n */\nexport var fromNullableK = /*#__PURE__*/ ET.fromNullableK(T.Pointed);\n/**\n * Use `flatMapNullable`.\n *\n * @category legacy\n * @since 2.12.0\n */\nexport var chainNullableK = \n/*#__PURE__*/ ET.chainNullableK(T.Monad);\n// -------------------------------------------------------------------------------------\n// combinators\n// -------------------------------------------------------------------------------------\n/**\n * Returns `ma` if is a `Right` or the value returned by `onLeft` otherwise.\n *\n * See also [alt](#alt).\n *\n * @example\n * import * as E from 'fp-ts/Either'\n * import { pipe } from 'fp-ts/function'\n * import * as TE from 'fp-ts/TaskEither'\n *\n * async function test() {\n *   const errorHandler = TE.orElse((error: string) => TE.right(`recovering from ${error}...`))\n *   assert.deepStrictEqual(await pipe(TE.right('ok'), errorHandler)(), E.right('ok'))\n *   assert.deepStrictEqual(await pipe(TE.left('ko'), errorHandler)(), E.right('recovering from ko...'))\n * }\n *\n * test()\n *\n * @category error handling\n * @since 2.0.0\n */\nexport var orElse = \n/*#__PURE__*/ ET.orElse(T.Monad);\n/**\n * Less strict version of [`orElse`](#orelse).\n *\n * The `W` suffix (short for **W**idening) means that the return types will be merged.\n *\n * @category error handling\n * @since 2.10.0\n */\nexport var orElseW = orElse;\n/**\n * Returns an effect that effectfully \"peeks\" at the failure of this effect.\n *\n * @category error handling\n * @since 2.15.0\n */\nexport var tapError = /*#__PURE__*/ dual(2, ET.tapError(T.Monad));\n/**\n * @category error handling\n * @since 2.12.0\n */\nexport var orElseFirstIOK = function (onLeft) { return tapError(fromIOK(onLeft)); };\n/**\n * @category error handling\n * @since 2.12.0\n */\nexport var orElseFirstTaskK = function (onLeft) { return tapError(fromTaskK(onLeft)); };\n/**\n * @category error handling\n * @since 2.11.0\n */\nexport var orLeft = \n/*#__PURE__*/ ET.orLeft(T.Monad);\n/**\n * @since 2.0.0\n */\nexport var swap = /*#__PURE__*/ ET.swap(T.Functor);\n/**\n * @category lifting\n * @since 2.11.0\n */\nexport var fromTaskOptionK = function (onNone) {\n    var from = fromTaskOption(onNone);\n    return function (f) { return flow(f, from); };\n};\n/**\n * Use `flatMapTaskOption`.\n *\n * The `W` suffix (short for **W**idening) means that the error types will be merged.\n *\n * @category legacy\n * @since 2.12.3\n */\nexport var chainTaskOptionKW = function (onNone) {\n    return function (f) {\n        return function (ma) {\n            return flatMap(ma, fromTaskOptionK(onNone)(f));\n        };\n    };\n};\n/**\n * Use `flatMapTaskOption`.\n *\n * @category legacy\n * @since 2.11.0\n */\nexport var chainTaskOptionK = chainTaskOptionKW;\n/**\n * @category lifting\n * @since 2.4.0\n */\nexport var fromIOEitherK = function (f) { return flow(f, fromIOEither); };\nvar _map = function (fa, f) { return pipe(fa, map(f)); };\nvar _apPar = function (fab, fa) { return pipe(fab, ap(fa)); };\nvar _apSeq = function (fab, fa) { return flatMap(fab, function (f) { return pipe(fa, map(f)); }); };\n/* istanbul ignore next */\nvar _alt = function (fa, that) { return pipe(fa, alt(that)); };\n/**\n * `map` can be used to turn functions `(a: A) => B` into functions `(fa: F<A>) => F<B>` whose argument and return types\n * use the type constructor `F` to represent some computational context.\n *\n * @category mapping\n * @since 2.0.0\n */\nexport var map = /*#__PURE__*/ ET.map(T.Functor);\n/**\n * Returns a `TaskEither` whose failure and success channels have been mapped by the specified pair of functions, `f` and `g`.\n *\n * @example\n * import * as TaskEither from 'fp-ts/TaskEither'\n * import * as Either from 'fp-ts/Either'\n *\n * const f = (s: string) => new Error(s)\n * const g = (n: number) => n * 2\n *\n * async function test() {\n *   assert.deepStrictEqual(await TaskEither.mapBoth(TaskEither.right(1), f, g)(), Either.right(2))\n *   assert.deepStrictEqual(await TaskEither.mapBoth(TaskEither.left('err'), f, g)(), Either.left(new Error('err')))\n * }\n *\n * test()\n *\n * @category error handling\n * @since 2.16.0\n */\nexport var mapBoth = /*#__PURE__*/ dual(3, ET.mapBoth(T.Functor));\n/**\n * Alias of `mapBoth`.\n *\n * @category legacy\n * @since 2.0.0\n */\nexport var bimap = mapBoth;\n/**\n * Returns a `TaskEither` with its error channel mapped using the specified function.\n *\n * @example\n * import * as TaskEither from 'fp-ts/TaskEither'\n * import * as Either from 'fp-ts/Either'\n *\n * const f = (s: string) => new Error(s)\n *\n * async function test() {\n *   assert.deepStrictEqual(await TaskEither.mapError(TaskEither.right(1), f)(), Either.right(1))\n *   assert.deepStrictEqual(await TaskEither.mapError(TaskEither.left('err'), f)(), Either.left(new Error('err')))\n * }\n *\n * test()\n *\n * @category error handling\n * @since 2.16.0\n */\nexport var mapError = /*#__PURE__*/ dual(2, ET.mapError(T.Functor));\n/**\n * Alias of `mapError`.\n *\n * @category legacy\n * @since 2.0.0\n */\nexport var mapLeft = mapError;\n/**\n * @since 2.0.0\n */\nexport var ap = \n/*#__PURE__*/ ET.ap(T.ApplyPar);\n/**\n * Less strict version of [`ap`](#ap).\n *\n * The `W` suffix (short for **W**idening) means that the error types will be merged.\n *\n * @since 2.8.0\n */\nexport var apW = ap;\n/**\n * @category sequencing\n * @since 2.14.0\n */\nexport var flatMap = /*#__PURE__*/ dual(2, ET.flatMap(T.Monad));\n/**\n * Less strict version of [`flatten`](#flatten).\n *\n * The `W` suffix (short for **W**idening) means that the error types will be merged.\n *\n * @category sequencing\n * @since 2.11.0\n */\nexport var flattenW = \n/*#__PURE__*/ flatMap(identity);\n/**\n * @category sequencing\n * @since 2.0.0\n */\nexport var flatten = flattenW;\n/**\n * Identifies an associative operation on a type constructor. It is similar to `Semigroup`, except that it applies to\n * types of kind `* -> *`.\n *\n * In case of `TaskEither` returns `fa` if is a `Right` or the value returned by `that` otherwise.\n *\n * See also [orElse](#orelse).\n *\n * @example\n * import * as E from 'fp-ts/Either'\n * import { pipe } from 'fp-ts/function'\n * import * as TE from 'fp-ts/TaskEither'\n *\n * async function test() {\n *   assert.deepStrictEqual(\n *     await pipe(\n *       TE.right(1),\n *       TE.alt(() => TE.right(2))\n *     )(),\n *     E.right(1)\n *   )\n *   assert.deepStrictEqual(\n *     await pipe(\n *       TE.left('a'),\n *       TE.alt(() => TE.right(2))\n *     )(),\n *     E.right(2)\n *   )\n *   assert.deepStrictEqual(\n *     await pipe(\n *       TE.left('a'),\n *       TE.alt(() => TE.left('b'))\n *     )(),\n *     E.left('b')\n *   )\n * }\n *\n * test()\n *\n * @category error handling\n * @since 2.0.0\n */\nexport var alt = \n/*#__PURE__*/ ET.alt(T.Monad);\n/**\n * Less strict version of [`alt`](#alt).\n *\n * The `W` suffix (short for **W**idening) means that the error and the return types will be merged.\n *\n * @category error handling\n * @since 2.9.0\n */\nexport var altW = alt;\n/**\n * @category constructors\n * @since 2.0.0\n */\nexport var of = right;\n/**\n * @since 2.7.0\n */\nexport var throwError = left;\n/**\n * @category type lambdas\n * @since 2.0.0\n */\nexport var URI = 'TaskEither';\n/**\n * The default [`ApplicativePar`](#applicativepar) instance returns the first error, if you want to\n * get all errors you need to provide a way to concatenate them via a `Semigroup`.\n *\n * @example\n * import * as E from 'fp-ts/Either'\n * import { pipe } from 'fp-ts/function'\n * import * as RA from 'fp-ts/ReadonlyArray'\n * import * as S from 'fp-ts/Semigroup'\n * import * as string from 'fp-ts/string'\n * import * as T from 'fp-ts/Task'\n * import * as TE from 'fp-ts/TaskEither'\n *\n * interface User {\n *   readonly id: string\n *   readonly name: string\n * }\n *\n * const remoteDatabase: ReadonlyArray<User> = [\n *   { id: 'id1', name: 'John' },\n *   { id: 'id2', name: 'Mary' },\n *   { id: 'id3', name: 'Joey' }\n * ]\n *\n * const fetchUser = (id: string): TE.TaskEither<string, User> =>\n *   pipe(\n *     remoteDatabase,\n *     RA.findFirst((user) => user.id === id),\n *     TE.fromOption(() => `${id} not found`)\n *   )\n *\n * async function test() {\n *   assert.deepStrictEqual(\n *     await pipe(['id4', 'id5'], RA.traverse(TE.ApplicativePar)(fetchUser))(),\n *     E.left('id4 not found') // <= first error\n *   )\n *\n *   const Applicative = TE.getApplicativeTaskValidation(\n *     T.ApplyPar,\n *     pipe(string.Semigroup, S.intercalate(', '))\n *   )\n *\n *   assert.deepStrictEqual(\n *     await pipe(['id4', 'id5'], RA.traverse(Applicative)(fetchUser))(),\n *     E.left('id4 not found, id5 not found') // <= all errors\n *   )\n * }\n *\n * test()\n *\n * @category error handling\n * @since 2.7.0\n */\nexport function getApplicativeTaskValidation(A, S) {\n    var ap = ap_(A, E.getApplicativeValidation(S));\n    return {\n        URI: URI,\n        _E: undefined,\n        map: _map,\n        ap: function (fab, fa) { return pipe(fab, ap(fa)); },\n        of: of\n    };\n}\n/**\n * The default [`Alt`](#alt) instance returns the last error, if you want to\n * get all errors you need to provide a way to concatenate them via a `Semigroup`.\n *\n * See [`getAltValidation`](./Either.ts.html#getaltvalidation).\n *\n * @category error handling\n * @since 2.7.0\n */\nexport function getAltTaskValidation(S) {\n    var alt = ET.altValidation(T.Monad, S);\n    return {\n        URI: URI,\n        _E: undefined,\n        map: _map,\n        alt: function (fa, that) { return pipe(fa, alt(that)); }\n    };\n}\n/**\n * @category filtering\n * @since 2.10.0\n */\nexport var getCompactable = function (M) {\n    var C = E.getCompactable(M);\n    return {\n        URI: URI,\n        _E: undefined,\n        compact: compact_(T.Functor, C),\n        separate: separate_(T.Functor, C, E.Functor)\n    };\n};\n/**\n * @category filtering\n * @since 2.1.0\n */\nexport function getFilterable(M) {\n    var F = E.getFilterable(M);\n    var C = getCompactable(M);\n    var filter = filter_(T.Functor, F);\n    var filterMap = filterMap_(T.Functor, F);\n    var partition = partition_(T.Functor, F);\n    var partitionMap = partitionMap_(T.Functor, F);\n    return {\n        URI: URI,\n        _E: undefined,\n        map: _map,\n        compact: C.compact,\n        separate: C.separate,\n        filter: function (fa, predicate) { return pipe(fa, filter(predicate)); },\n        filterMap: function (fa, f) { return pipe(fa, filterMap(f)); },\n        partition: function (fa, predicate) { return pipe(fa, partition(predicate)); },\n        partitionMap: function (fa, f) { return pipe(fa, partitionMap(f)); }\n    };\n}\n/**\n * @category instances\n * @since 2.7.0\n */\nexport var Functor = {\n    URI: URI,\n    map: _map\n};\n/**\n * Maps the `Right` value of this `TaskEither` to the specified constant value.\n *\n * @category mapping\n * @since 2.16.0\n */\nexport var as = dual(2, as_(Functor));\n/**\n * Maps the `Right` value of this `TaskEither` to the void constant value.\n *\n * @category mapping\n * @since 2.16.0\n */\nexport var asUnit = asUnit_(Functor);\n/**\n * @category mapping\n * @since 2.10.0\n */\nexport var flap = /*#__PURE__*/ flap_(Functor);\n/**\n * @category instances\n * @since 2.10.0\n */\nexport var Pointed = {\n    URI: URI,\n    of: of\n};\n/**\n * Runs computations in parallel.\n *\n * @category instances\n * @since 2.10.0\n */\nexport var ApplyPar = {\n    URI: URI,\n    map: _map,\n    ap: _apPar\n};\n/**\n * Combine two effectful actions, keeping only the result of the first.\n *\n * @since 2.0.0\n */\nexport var apFirst = /*#__PURE__*/ apFirst_(ApplyPar);\n/**\n * Less strict version of [`apFirst`](#apfirst).\n *\n * The `W` suffix (short for **W**idening) means that the error types will be merged.\n *\n * @since 2.12.0\n */\nexport var apFirstW = apFirst;\n/**\n * Combine two effectful actions, keeping only the result of the second.\n *\n * @since 2.0.0\n */\nexport var apSecond = /*#__PURE__*/ apSecond_(ApplyPar);\n/**\n * Less strict version of [`apSecond`](#apsecond).\n *\n * The `W` suffix (short for **W**idening) means that the error types will be merged.\n *\n * @since 2.12.0\n */\nexport var apSecondW = apSecond;\n/**\n * Runs computations in parallel.\n *\n * @category instances\n * @since 2.7.0\n */\nexport var ApplicativePar = {\n    URI: URI,\n    map: _map,\n    ap: _apPar,\n    of: of\n};\n/**\n * Runs computations sequentially.\n *\n * @category instances\n * @since 2.10.0\n */\nexport var ApplySeq = {\n    URI: URI,\n    map: _map,\n    ap: _apSeq\n};\n/**\n * Runs computations sequentially.\n *\n * @category instances\n * @since 2.7.0\n */\nexport var ApplicativeSeq = {\n    URI: URI,\n    map: _map,\n    ap: _apSeq,\n    of: of\n};\n/**\n * @category instances\n * @since 2.10.0\n */\nexport var Chain = {\n    URI: URI,\n    map: _map,\n    ap: _apPar,\n    chain: flatMap\n};\n/**\n * @category instances\n * @since 2.10.0\n */\nexport var Monad = {\n    URI: URI,\n    map: _map,\n    ap: _apPar,\n    chain: flatMap,\n    of: of\n};\n/**\n * @category instances\n * @since 2.10.0\n */\nexport var MonadIO = {\n    URI: URI,\n    map: _map,\n    ap: _apPar,\n    chain: flatMap,\n    of: of,\n    fromIO: fromIO\n};\n/**\n * @category instances\n * @since 2.10.0\n */\nexport var MonadTask = {\n    URI: URI,\n    map: _map,\n    ap: _apPar,\n    chain: flatMap,\n    of: of,\n    fromIO: fromIO,\n    fromTask: fromTask\n};\n/**\n * @category instances\n * @since 2.10.0\n */\nexport var MonadThrow = {\n    URI: URI,\n    map: _map,\n    ap: _apPar,\n    chain: flatMap,\n    of: of,\n    throwError: throwError\n};\n/**\n * @category instances\n * @since 2.10.0\n */\nexport var FromEither = {\n    URI: URI,\n    fromEither: fromEither\n};\n/**\n * @category instances\n * @since 2.10.0\n */\nexport var FromIO = {\n    URI: URI,\n    fromIO: fromIO\n};\n/**\n * @category instances\n * @since 2.10.0\n */\nexport var FromTask = {\n    URI: URI,\n    fromIO: fromIO,\n    fromTask: fromTask\n};\n/**\n * Composes computations in sequence, using the return value of one computation to determine the next computation and\n * keeping only the result of the first.\n *\n * @category combinators\n * @since 2.15.0\n */\nexport var tap = /*#__PURE__*/ dual(2, chainable.tap(Chain));\n/**\n * Composes computations in sequence, using the return value of one computation to determine the next computation and\n * keeping only the result of the first.\n *\n * @example\n * import * as E from 'fp-ts/Either'\n * import { pipe } from 'fp-ts/function'\n * import * as TE from 'fp-ts/TaskEither'\n *\n * const checkString = (value: string) => pipe(\n *   TE.of(value),\n *   TE.tapEither(() => value.length > 0 ? E.right('ok') : E.left('error'))\n * )\n *\n * async function test() {\n *   assert.deepStrictEqual(await checkString('')(), E.left('error'))\n *   assert.deepStrictEqual(await checkString('fp-ts')(), E.right('fp-ts'))\n * }\n *\n * test()\n *\n * @category combinators\n * @since 2.16.0\n */\nexport var tapEither = /*#__PURE__*/ dual(2, tapEither_(FromEither, Chain));\n/**\n * Composes computations in sequence, using the return value of one computation to determine the next computation and\n * keeping only the result of the first.\n *\n * @example\n * import { pipe } from 'fp-ts/function'\n * import * as TE from 'fp-ts/TaskEither'\n * import * as E from 'fp-ts/Either'\n * import * as Console from 'fp-ts/Console'\n *\n *\n * // Will produce `Hello, fp-ts` to the stdout\n * const effectA = TE.tapIO(\n *   TE.of(1),\n *   (value) => Console.log(`Hello, ${value}`)\n * )\n *\n * // No output to the stdout\n * const effectB = pipe(\n *   TE.left('error'),\n *   TE.tapIO((value) => Console.log(`Hello, ${value}`))\n * )\n *\n * async function test() {\n *   assert.deepStrictEqual(await effectA(), E.of(1))\n *   assert.deepStrictEqual(await effectB(), E.left('error'))\n * }\n *\n * test()\n *\n * @category combinators\n * @since 2.16.0\n */\nexport var tapIO = /*#__PURE__*/ dual(2, tapIO_(FromIO, Chain));\n/**\n * Composes computations in sequence, using the return value of one computation to determine the next computation and\n * keeping only the result of the first.\n *\n * @example\n * import * as TE from 'fp-ts/TaskEither'\n * import * as T from 'fp-ts/Task'\n * import * as E from 'fp-ts/Either'\n *\n *\n * const effect = TE.tapIO(\n *   TE.of(1),\n *   (value) => T.of(value + 1)\n * )\n *\n * async function test() {\n *   assert.deepStrictEqual(await effect(), E.of(1))\n * }\n *\n * test()\n *\n * @category combinators\n * @since 2.16.0\n */\nexport var tapTask = /*#__PURE__*/ dual(2, tapTask_(FromTask, Chain));\n/**\n * @category instances\n * @since 2.7.0\n */\nexport var Bifunctor = {\n    URI: URI,\n    bimap: mapBoth,\n    mapLeft: mapError\n};\n/**\n * @category instances\n * @since 2.7.0\n */\nexport var Alt = {\n    URI: URI,\n    map: _map,\n    alt: _alt\n};\n/**\n * @category conversions\n * @since 2.0.0\n */\nexport var fromOption = \n/*#__PURE__*/ fromOption_(FromEither);\n/**\n * Use `liftOption`.\n *\n * @category legacy\n * @since 2.10.0\n */\nexport var fromOptionK = \n/*#__PURE__*/ fromOptionK_(FromEither);\n/**\n * Use `flatMapOption`.\n *\n * @category legacy\n * @since 2.10.0\n */\nexport var chainOptionK = /*#__PURE__*/ chainOptionK_(FromEither, Chain);\n/**\n * Use `flatMapOption`.\n *\n * @category legacy\n * @since 2.13.2\n */\nexport var chainOptionKW = chainOptionK;\n/** @internal */\nvar _FromEither = {\n    fromEither: FromEither.fromEither\n};\n/**\n * @category lifting\n * @since 2.15.0\n */\nexport var liftNullable = /*#__PURE__*/ _.liftNullable(_FromEither);\n/**\n * @category lifting\n * @since 2.15.0\n */\nexport var liftOption = /*#__PURE__*/ _.liftOption(_FromEither);\n/** @internal */\nvar _FlatMap = {\n    flatMap: flatMap\n};\n/** @internal */\nvar _FromIO = {\n    fromIO: FromIO.fromIO\n};\n/** @internal */\nvar _FromTask = {\n    fromTask: fromTask\n};\n/**\n * @category sequencing\n * @since 2.15.0\n */\nexport var flatMapNullable = /*#__PURE__*/ _.flatMapNullable(_FromEither, _FlatMap);\n/**\n * @category sequencing\n * @since 2.15.0\n */\nexport var flatMapOption = /*#__PURE__*/ _.flatMapOption(_FromEither, _FlatMap);\n/**\n * @category sequencing\n * @since 2.15.0\n */\nexport var flatMapEither = /*#__PURE__*/ _.flatMapEither(_FromEither, _FlatMap);\n/**\n * @category sequencing\n * @since 2.15.0\n */\nexport var flatMapIO = /*#__PURE__*/ _.flatMapIO(_FromIO, _FlatMap);\n/**\n * @category sequencing\n * @since 2.16.0\n */\nexport var flatMapTask = /*#__PURE__*/ _.flatMapTask(_FromTask, _FlatMap);\n/**\n * @category sequencing\n * @since 2.16.0\n */\nexport var flatMapIOEither = /*#__PURE__*/ dual(2, function (self, f) {\n    return flatMap(self, fromIOEitherK(f));\n});\n/**\n * @category sequencing\n * @since 2.16.0\n */\nexport var flatMapTaskOption = /*#__PURE__*/ dual(3, function (self, f, onNone) {\n    return flatMap(self, function (a) { return fromTaskOption(function () { return onNone(a); })(f(a)); });\n});\n/**\n * Alias of `flatMapEither`.\n *\n * @category legacy\n * @since 2.4.0\n */\nexport var chainEitherK = flatMapEither;\n/**\n * Alias of `flatMapEither`.\n *\n * @category legacy\n * @since 2.6.1\n */\nexport var chainEitherKW = flatMapEither;\n/**\n * Alias of `tapEither`.\n *\n * @category legacy\n * @since 2.12.0\n */\nexport var chainFirstEitherK = tapEither;\n/**\n * Alias of `tapEither`.\n *\n * Less strict version of [`chainFirstEitherK`](#chainfirsteitherk).\n *\n * The `W` suffix (short for **W**idening) means that the error types will be merged.\n *\n * @category legacy\n * @since 2.12.0\n */\nexport var chainFirstEitherKW = tapEither;\n/**\n * @category lifting\n * @since 2.0.0\n */\nexport var fromPredicate = /*#__PURE__*/ fromPredicate_(FromEither);\n/**\n * @category filtering\n * @since 2.0.0\n */\nexport var filterOrElse = /*#__PURE__*/ filterOrElse_(FromEither, Chain);\n/**\n * Less strict version of [`filterOrElse`](#filterorelse).\n *\n * The `W` suffix (short for **W**idening) means that the error types will be merged.\n *\n * @category filtering\n * @since 2.9.0\n */\nexport var filterOrElseW = filterOrElse;\n/**\n * @category lifting\n * @since 2.4.0\n */\nexport var fromEitherK = /*#__PURE__*/ fromEitherK_(FromEither);\n/**\n * @category lifting\n * @since 2.10.0\n */\nexport var fromIOK = /*#__PURE__*/ fromIOK_(FromIO);\n/**\n * Alias of `flatMapIO`.\n *\n * @category legacy\n * @since 2.10.0\n */\nexport var chainIOK = flatMapIO;\n/**\n * Alias of `tapIO`.\n *\n * @category legacy\n * @since 2.10.0\n */\nexport var chainFirstIOK = tapIO;\n/**\n * @category lifting\n * @since 2.10.0\n */\nexport var fromTaskK = /*#__PURE__*/ fromTaskK_(FromTask);\n/**\n * Alias of `flatMapTask`.\n *\n * @category legacy\n * @since 2.10.0\n */\nexport var chainTaskK = flatMapTask;\n/**\n * Alias of `tapTask`.\n *\n * @category legacy\n * @since 2.10.0\n */\nexport var chainFirstTaskK = tapTask;\n/**\n * Alias of `flatMapIOEither`.\n *\n * Less strict version of [`chainIOEitherK`](#chainioeitherk).\n *\n * The `W` suffix (short for **W**idening) means that the error types will be merged.\n *\n * @category legacy\n * @since 2.6.1\n */\nexport var chainIOEitherKW = flatMapIOEither;\n/**\n * Alias of `flatMapIOEither`.\n *\n * @category legacy\n * @since 2.4.0\n */\nexport var chainIOEitherK = flatMapIOEither;\nexport function taskify(f) {\n    return function () {\n        var args = Array.prototype.slice.call(arguments);\n        return function () {\n            return new Promise(function (resolve) {\n                var cbResolver = function (e, r) { return (e != null ? resolve(_.left(e)) : resolve(_.right(r))); };\n                f.apply(null, args.concat(cbResolver));\n            });\n        };\n    };\n}\n/**\n * Make sure that a resource is cleaned up in the event of an exception (\\*). The release action is called regardless of\n * whether the body action throws (\\*) or returns.\n *\n * (\\*) i.e. returns a `Left`\n *\n * @since 2.0.0\n */\nexport var bracket = function (acquire, use, release) { return bracketW(acquire, use, release); };\n/**\n * Less strict version of [`bracket`](#bracket).\n *\n * The `W` suffix (short for **W**idening) means that the error types will be merged.\n *\n * @since 2.12.0\n */\nexport var bracketW = function (acquire, use, release) {\n    return flatMap(acquire, function (a) { return T.flatMap(use(a), function (e) { return flatMap(release(a, e), function () { return T.of(e); }); }); });\n};\n// -------------------------------------------------------------------------------------\n// do notation\n// -------------------------------------------------------------------------------------\n/**\n * @category do notation\n * @since 2.9.0\n */\nexport var Do = /*#__PURE__*/ of(_.emptyRecord);\n/**\n * @category do notation\n * @since 2.8.0\n */\nexport var bindTo = /*#__PURE__*/ bindTo_(Functor);\nvar let_ = /*#__PURE__*/ let__(Functor);\nexport { \n/**\n * @category do notation\n * @since 2.13.0\n */\nlet_ as let };\n/**\n * @category do notation\n * @since 2.8.0\n */\nexport var bind = /*#__PURE__*/ chainable.bind(Chain);\n/**\n * The `W` suffix (short for **W**idening) means that the error types will be merged.\n *\n * @category do notation\n * @since 2.8.0\n */\nexport var bindW = bind;\n/**\n * @category do notation\n * @since 2.8.0\n */\nexport var apS = /*#__PURE__*/ apS_(ApplyPar);\n/**\n * Less strict version of [`apS`](#aps).\n *\n * The `W` suffix (short for **W**idening) means that the error types will be merged.\n *\n * @category do notation\n * @since 2.8.0\n */\nexport var apSW = apS;\n/**\n * @since 2.11.0\n */\nexport var ApT = /*#__PURE__*/ of(_.emptyReadonlyArray);\n// -------------------------------------------------------------------------------------\n// array utils\n// -------------------------------------------------------------------------------------\n/**\n * Equivalent to `ReadonlyNonEmptyArray#traverseWithIndex(ApplicativePar)`.\n *\n * @category traversing\n * @since 2.11.0\n */\nexport var traverseReadonlyNonEmptyArrayWithIndex = function (f) {\n    return flow(T.traverseReadonlyNonEmptyArrayWithIndex(f), T.map(E.traverseReadonlyNonEmptyArrayWithIndex(SK)));\n};\n/**\n * Equivalent to `ReadonlyArray#traverseWithIndex(ApplicativePar)`.\n *\n * @category traversing\n * @since 2.11.0\n */\nexport var traverseReadonlyArrayWithIndex = function (f) {\n    var g = traverseReadonlyNonEmptyArrayWithIndex(f);\n    return function (as) { return (_.isNonEmpty(as) ? g(as) : ApT); };\n};\n/**\n * Equivalent to `ReadonlyArray#traverseWithIndex(ApplicativeSeq)`.\n *\n * @category traversing\n * @since 2.11.0\n */\nexport var traverseReadonlyNonEmptyArrayWithIndexSeq = function (f) {\n    return function (as) {\n        return function () {\n            return _.tail(as).reduce(function (acc, a, i) {\n                return acc.then(function (ebs) {\n                    return _.isLeft(ebs)\n                        ? acc\n                        : f(i + 1, a)().then(function (eb) {\n                            if (_.isLeft(eb)) {\n                                return eb;\n                            }\n                            ebs.right.push(eb.right);\n                            return ebs;\n                        });\n                });\n            }, f(0, _.head(as))().then(E.map(_.singleton)));\n        };\n    };\n};\n/**\n * Equivalent to `ReadonlyArray#traverseWithIndex(ApplicativeSeq)`.\n *\n * @category traversing\n * @since 2.11.0\n */\nexport var traverseReadonlyArrayWithIndexSeq = function (f) {\n    var g = traverseReadonlyNonEmptyArrayWithIndexSeq(f);\n    return function (as) { return (_.isNonEmpty(as) ? g(as) : ApT); };\n};\n/**\n * Equivalent to `ReadonlyArray#traverseWithIndex(Applicative)`.\n *\n * @category traversing\n * @since 2.9.0\n */\nexport var traverseArrayWithIndex = traverseReadonlyArrayWithIndex;\n/**\n * Equivalent to `ReadonlyArray#traverse(Applicative)`.\n *\n * @category traversing\n * @since 2.9.0\n */\nexport var traverseArray = function (f) { return traverseReadonlyArrayWithIndex(function (_, a) { return f(a); }); };\n/**\n * Equivalent to `ReadonlyArray#sequence(Applicative)`.\n *\n * @category traversing\n * @since 2.9.0\n */\nexport var sequenceArray = \n/*#__PURE__*/ traverseArray(identity);\n/**\n * Equivalent to `ReadonlyArray#traverseWithIndex(ApplicativeSeq)`.\n *\n * @category traversing\n * @since 2.9.0\n */\nexport var traverseSeqArrayWithIndex = traverseReadonlyArrayWithIndexSeq;\n/**\n * Equivalent to `ReadonlyArray#traverse(ApplicativeSeq)`.\n *\n * @category traversing\n * @since 2.9.0\n */\nexport var traverseSeqArray = function (f) { return traverseReadonlyArrayWithIndexSeq(function (_, a) { return f(a); }); };\n/**\n * Equivalent to `ReadonlyArray#sequence(ApplicativeSeq)`.\n *\n * @category traversing\n * @since 2.9.0\n */\nexport var sequenceSeqArray = \n/*#__PURE__*/ traverseSeqArray(identity);\n// -------------------------------------------------------------------------------------\n// legacy\n// -------------------------------------------------------------------------------------\n/**\n * Alias of `flatMap`.\n *\n * @category legacy\n * @since 2.0.0\n */\nexport var chain = flatMap;\n/**\n * Alias of `flatMap`.\n *\n * @category legacy\n * @since 2.6.0\n */\nexport var chainW = flatMap;\n/**\n * Alias of `tap`.\n *\n * @category legacy\n * @since 2.0.0\n */\nexport var chainFirst = tap;\n/**\n * Alias of `tap`.\n *\n * @category legacy\n * @since 2.8.0\n */\nexport var chainFirstW = tap;\n/**\n * Alias of `tapError`.\n *\n * @category legacy\n * @since 2.11.0\n */\nexport var orElseFirst = tapError;\n/**\n * Alias of `tapError`.\n *\n * @category legacy\n * @since 2.11.0\n */\nexport var orElseFirstW = tapError;\n// -------------------------------------------------------------------------------------\n// deprecated\n// -------------------------------------------------------------------------------------\n/**\n * This instance is deprecated, use small, specific instances instead.\n * For example if a function needs a `Functor` instance, pass `TE.Functor` instead of `TE.taskEither`\n * (where `TE` is from `import TE from 'fp-ts/TaskEither'`)\n *\n * @category zone of death\n * @since 2.0.0\n * @deprecated\n */\nexport var taskEither = {\n    URI: URI,\n    bimap: mapBoth,\n    mapLeft: mapError,\n    map: _map,\n    of: of,\n    ap: _apPar,\n    chain: flatMap,\n    alt: _alt,\n    fromIO: fromIO,\n    fromTask: fromTask,\n    throwError: throwError\n};\n/**\n * This instance is deprecated, use small, specific instances instead.\n * For example if a function needs a `Functor` instance, pass `TE.Functor` instead of `TE.taskEitherSeq`\n * (where `TE` is from `import TE from 'fp-ts/TaskEither'`)\n *\n * @category zone of death\n * @since 2.0.0\n * @deprecated\n */\nexport var taskEitherSeq = {\n    URI: URI,\n    bimap: mapBoth,\n    mapLeft: mapError,\n    map: _map,\n    of: of,\n    ap: _apSeq,\n    chain: flatMap,\n    alt: _alt,\n    fromIO: fromIO,\n    fromTask: fromTask,\n    throwError: throwError\n};\n/**\n * Use [`getApplySemigroup`](./Apply.ts.html#getapplysemigroup) instead.\n *\n * @category zone of death\n * @since 2.0.0\n * @deprecated\n */\nexport var getApplySemigroup = \n/*#__PURE__*/ getApplySemigroup_(ApplySeq);\n/**\n * Use [`getApplicativeMonoid`](./Applicative.ts.html#getapplicativemonoid) instead.\n *\n * @category zone of death\n * @since 2.0.0\n * @deprecated\n */\nexport var getApplyMonoid = \n/*#__PURE__*/ getApplicativeMonoid(ApplicativeSeq);\n/**\n * Use [`getApplySemigroup`](./Apply.ts.html#getapplysemigroup) instead.\n *\n * @category zone of death\n * @since 2.0.0\n * @deprecated\n */\nexport var getSemigroup = function (S) {\n    return getApplySemigroup_(T.ApplySeq)(E.getSemigroup(S));\n};\n/**\n * Use [`getApplicativeTaskValidation`](#getapplicativetaskvalidation) and [`getAltTaskValidation`](#getalttaskvalidation) instead.\n *\n * @category zone of death\n * @since 2.0.0\n * @deprecated\n */\nexport function getTaskValidation(SE) {\n    var applicativeTaskValidation = getApplicativeTaskValidation(T.ApplicativePar, SE);\n    var altTaskValidation = getAltTaskValidation(SE);\n    return {\n        URI: URI,\n        _E: undefined,\n        map: _map,\n        ap: applicativeTaskValidation.ap,\n        of: of,\n        chain: flatMap,\n        bimap: mapBoth,\n        mapLeft: mapError,\n        alt: altTaskValidation.alt,\n        fromIO: fromIO,\n        fromTask: fromTask,\n        throwError: throwError\n    };\n}\n","import { errorClass, errorClassWithData } from 'error-kid';\nimport type { BaseIssue } from 'valibot';\n\nfunction msgToTuple(message?: string): [string?] {\n  return [message];\n}\n\nexport class ValidationError extends errorClassWithData<\n  { input: unknown; issues: BaseIssue<any>[] },\n  [input: unknown, issues: BaseIssue<any>[]]\n>(\n  'ValidationError',\n  (input, issues) => ({ input, issues }),\n  'Validation error',\n) {\n}\n\nexport class CSSVarsBoundError extends errorClass(\n  'CSSVarsBoundError',\n  'CSS variables are already bound',\n) {\n}\n\nexport class DeviceStorageMethodError extends errorClassWithData<\n  { error: string },\n  [error: string]\n>('DeviceStorageMethodError', error => ({ error }), error => [error]) {\n}\n\nexport class SecureStorageMethodError extends errorClassWithData<\n  { error: string },\n  [error: string]\n>('SecureStorageMethodError', error => ({ error }), error => [error]) {\n}\n\nexport class NotAvailableError extends errorClass<[message: string]>(\n  'NotAvailableError',\n  msgToTuple,\n) {\n}\n\nexport class InvalidEnvError extends errorClass<[message?: string]>(\n  'InvalidEnvError',\n  msgToTuple,\n) {\n}\n\nexport class FunctionUnavailableError extends errorClass<[message?: string]>(\n  'FunctionNotAvailableError',\n  msgToTuple,\n) {\n}\n\nexport class InvalidArgumentsError extends errorClass<[message: string, cause?: unknown]>(\n  'InvalidArgumentsError',\n  (message, cause) => [message, { cause }],\n) {\n}\n\nexport class ConcurrentCallError extends errorClass<[message: string]>(\n  'ConcurrentCallError',\n  msgToTuple,\n) {\n}\n\nexport class SetEmojiStatusError extends errorClass<[error: string]>(\n  'SetEmojiStatusError',\n  error => [`Failed to set emoji status: ${error}`],\n) {\n}\n\nexport class AccessDeniedError extends errorClass<[message: string]>(\n  'AccessDeniedError',\n  msgToTuple,\n) {\n}\n\nexport class FullscreenFailedError extends errorClass<[message: string]>(\n  'FullscreenFailedError',\n  msgToTuple,\n) {\n}\n\nexport class ShareMessageError extends errorClass<[error: string]>(\n  'ShareMessageError',\n  msgToTuple,\n) {\n}\n\nexport class UnknownThemeParamsKeyError extends errorClass<[key: string]>(\n  'UnknownThemeParamsKeyError',\n  key => [`Unknown theme params key passed: ${key}`],\n) {\n}\n","import {\n  type MethodName,\n  supports,\n  type MethodNameWithVersionedParams,\n  type MethodVersionedParams,\n} from '@tma.js/bridge';\nimport { type Computed, computed } from '@tma.js/signals';\nimport type {\n  If,\n  IsNever,\n  AnyFnAnyEither,\n  RightOfReturn,\n  LeftOfReturn,\n  MaybeMonadReturnTypeToCommon,\n  MaybeCommonReturnTypeToMonad,\n  AnyFn,\n} from '@tma.js/toolkit';\nimport type { Version } from '@tma.js/types';\nimport * as E from 'fp-ts/Either';\nimport * as O from 'fp-ts/Option';\nimport * as TE from 'fp-ts/TaskEither';\n\nimport { FunctionUnavailableError } from '@/errors.js';\nimport { access } from '@/helpers/access.js';\nimport type { MaybeAccessor } from '@/types.js';\n\ntype IfReturnsTask<Fn extends AnyFnAnyEither, A, B> =\n  ReturnType<Fn> extends TE.TaskEither<any, any> ? A : B;\n\ntype OptionsBasedRequires<O extends WithChecksOptions<any>> = O extends { requires: any }\n  ? true : false;\n\ntype OptionsBasedSupports<O extends WithChecksOptions<any>> = O extends { supports: any }\n  ? Extract<keyof O['supports'], string> : never;\n\ntype OptionsBasedFn<Opts extends WithChecksOptions<any>> = (...args: any[]) => (\n  Opts['returns'] extends 'plain'\n    ? any\n    : Opts['returns'] extends 'promise'\n      ? PromiseLike<any>\n      : Opts['returns'] extends 'task'\n        ? TE.TaskEither<any, any>\n        : E.Either<any, any>\n);\n\n/**\n * @returns Error text if something is wrong.\n */\nexport type CustomSupportFn = () => string | undefined;\n\nexport type Require =\n  | MethodName\n  | CustomSupportFn\n  | { every: (MethodName | CustomSupportFn)[] }\n  | { some: (MethodName | CustomSupportFn)[] };\n\n/**\n * A map where the key is a method name with versioned parameters, and the value is a tuple\n * containing the method and parameter names. The third tuple value is a function accepting\n * the wrapped function arguments and returning true if support check must be applied.\n */\nexport type SupportsMap<Args extends any[]> = {\n  [OptionName: string]: {\n    [M in MethodNameWithVersionedParams]: {\n      /**\n       * Method name.\n       * @example 'web_app_set_header_color'\n       */\n      method: M;\n      /**\n       * Method version-dependent parameter.\n       * @example `color`\n       */\n      param: MethodVersionedParams<M>;\n      /**\n       * @returns True if the support function should be called.\n       * @param args - function arguments.\n       */\n      shouldCheck: (...args: Args) => boolean;\n    };\n  }[MethodNameWithVersionedParams];\n};\n\ntype WrappedFnReturnType<Fn extends AnyFn> = ReturnType<Fn> extends E.Either<any, any>\n  ? E.Either<FunctionUnavailableError | LeftOfReturn<Fn>, RightOfReturn<Fn>>\n  : ReturnType<Fn> extends TE.TaskEither<any, any>\n    ? TE.TaskEither<FunctionUnavailableError | LeftOfReturn<Fn>, RightOfReturn<Fn>>\n    : ReturnType<Fn> extends PromiseLike<infer U>\n      ? TE.TaskEither<FunctionUnavailableError, U>\n      : E.Either<FunctionUnavailableError, ReturnType<Fn>>;\n\nexport type WrappedFn<Fn extends AnyFn> = (...args: Parameters<Fn>) => WrappedFnReturnType<Fn>;\n\nexport type WithChecksFp<\n  Fn extends AnyFn,\n  HasSupportCheck extends boolean,\n  SupportsMapKeySchema extends string = never,\n> =\n  & WrappedFn<Fn>\n  & {\n  /**\n   * A signal returning `true` if the function is available in the current environment and\n   * conditions.\n   *\n   * To be more accurate, the method checks the following:\n   * 1. The current environment is Telegram Mini Apps.\n   * 2. The SDK package is initialized (if this requirement is specified).\n   * 3. If passed, the `isSupported` signal returned true.\n   * 4. If passed, the `isMounted` signal returned true.\n   *\n   * *You should use this function when possible because it provides must-have code security\n   * mechanisms and makes a developer sure that he is using the package properly.*\n   *\n   * @returns True if the function is available in the current environment.\n   * @example\n   * if (backButton.show.isAvailable()) {\n   *   backButton.show();\n   * }\n   */\n    isAvailable: Computed<boolean>;\n    /**\n   * Calls the function only in case it is available.\n   *\n   * It uses the `isAvailable` internally to check if the function is available for call.\n   * @example\n   * backButton.show.ifAvailable();\n   */\n    ifAvailable(...args: Parameters<Fn>): O.Option<MaybeCommonReturnTypeToMonad<Fn>>;\n  }\n  & If<HasSupportCheck, {\n  /**\n   * The signal returning `true` if the function is supported by the Telegram client,\n   * including some possible additional conditions.\n   *\n   * It is highly recommended to use this signal only in certain narrow cases when only the\n   * function support check is required, but not its availability.\n   *\n   * This signal is not applying additional operations like checking if the current environment\n   * is Mini Apps and the SDK is initialized.\n   *\n   * To check if the function is available for use, use the `isAvailable` signal.\n   *\n   * @returns True if this function is supported.\n   * @see isAvailable\n   * @example\n   * if (backButton.show.isSupported()) {\n   *   console.log('The method is supported');\n   * }\n   */\n    isSupported: Computed<boolean>;\n  }, {}>\n  & If<IsNever<SupportsMapKeySchema>, {}, {\n  /**\n   * A map where the key is the function-specific option name and value is a signal indicating\n   * if it is supported by the current environment.\n   * @example\n   * if (miniApp.setHeaderColor.isAvailable()) {\n   *   if (miniApp.setHeaderColor.supports('rgb')) {\n   *     miniApp.setHeaderColor('#ffaabb');\n   *   } else {\n   *     miniApp.setHeaderColor('bg_color');\n   *   }\n   * }\n   */\n    supports: (key: SupportsMapKeySchema) => boolean;\n  }>;\n\nexport type WithChecks<\n  Fn extends AnyFn,\n  HasSupportCheck extends boolean,\n  SupportsMapKeySchema extends string = never,\n> =\n  & ((...args: Parameters<Fn>) => MaybeMonadReturnTypeToCommon<Fn>)\n  & Omit<WithChecksFp<Fn, HasSupportCheck, SupportsMapKeySchema>, 'ifAvailable'>\n  & {\n  /**\n   * Calls the function only in case it is available.\n   *\n   * It uses the `isAvailable` internally to check if the function is available for call.\n   * @example\n   * backButton.show.ifAvailable();\n   */\n    ifAvailable(...args: Parameters<Fn>):\n      | { ok: true; data: MaybeMonadReturnTypeToCommon<Fn> }\n      | { ok: false };\n  };\n\nexport interface WithChecksOptions<Fn extends AnyFn> {\n  /**\n   * Signal returning true if the owning component is mounted.\n   */\n  isMounted?: () => boolean;\n  /**\n   * Signal returning true if the owning component is mounting.\n   */\n  isMounting?: () => boolean;\n  /**\n   * A value determining the function requirements. This will enable additional checks for\n   * the function before being called.\n   */\n  requires?: Require;\n  /**\n   * A signal to retrieve the current Telegram Mini Apps version or the value itself.\n   */\n  isTma: MaybeAccessor<boolean>;\n  /**\n   * A map where the key is a method name with versioned parameters, and the value is a tuple\n   * containing the method and parameter names. The third tuple value is a function accepting\n   * the wrapped function arguments and returning true if support check must be applied.\n   */\n  supports?: SupportsMap<Parameters<Fn>>;\n  /**\n   * A signal to retrieve the current Telegram Mini Apps version or the value itself.\n   */\n  version?: MaybeAccessor<Version>;\n  /**\n   * Allows to determine what exactly should be returned from the function - TaskEither or Either.\n   * There is no other way to know it until the function itself is called, but we need to perform\n   * some checks before calling it and return a valid value based on the function return type.\n   */\n  returns: Fn extends AnyFnAnyEither\n    ? IfReturnsTask<Fn, 'task', 'either'>\n    : ReturnType<Fn> extends PromiseLike<any> ? 'promise' : 'plain';\n}\n\nexport function withChecksFp<Fn extends AnyFn, O extends WithChecksOptions<Fn>>(\n  fn: Fn,\n  options: O,\n): WithChecksFp<Fn, OptionsBasedRequires<O>, OptionsBasedSupports<O>> {\n  const version = computed(() => access(options.version) || '100');\n  const isTma = computed(() => access(options.isTma));\n\n  // Simplify the isSupported value to work with an array of validators or a single object.\n  const { requires: optionsIsSupported, returns } = options;\n  const isSupportedSimplified = optionsIsSupported\n    ? typeof optionsIsSupported === 'object'\n      ? optionsIsSupported\n      : { every: [optionsIsSupported] }\n    : undefined;\n\n  /**\n   * @param optionName - target option.\n   * @returns True if specified option is supported.\n   */\n  const isOptionSupported = (optionName: string): boolean => {\n    if (!options.supports) {\n      return true;\n    }\n    const optionSettings = options.supports[optionName];\n    return supports(optionSettings.method, optionSettings.param, version());\n  };\n\n  /**\n   * @returns All found errors according to the isSupported variable value.\n   */\n  const calculateSupportError = (): string | undefined => {\n    // isSupported was not specified. In this case, we assume that the function has no\n    // dependencies and is always supported.\n    if (!isSupportedSimplified) {\n      return;\n    }\n    const [mode, requirements] = 'every' in isSupportedSimplified\n      ? ['every', isSupportedSimplified.every] as const\n      : ['some', isSupportedSimplified.some] as const;\n\n    for (let i = 0; i < requirements.length; i++) {\n      const requirement = requirements[i];\n      const error = typeof requirement === 'function'\n        ? requirement()\n        : supports(requirement, version())\n          ? undefined\n          : `it is unsupported in Mini Apps version ${version()}`;\n      // Return only if there was an error and all requirements must be satisfied, or\n      // this was the last one requirement (when some of the requirements must be met).\n      if (error && (mode === 'every' || i === requirements.length - 1)) {\n        return error;\n      }\n    }\n  };\n\n  /**\n   * @returns An error related to supports.<name> check.\n   */\n  const calculateOptionSupportError = (\n    ...args: Parameters<Fn>\n  ): string | undefined => {\n    for (const k in options.supports) {\n      if (options.supports[k].shouldCheck(...args) && !isOptionSupported(k)) {\n        return `option ${k} is not supported in Mini Apps version ${version()}`;\n      }\n    }\n  };\n\n  const isSupported = computed(() => !calculateSupportError());\n  const isInitialized = computed(() => version() !== '0.0');\n  const isMounted = computed(() => (options.isMounted ? options.isMounted() : true));\n  const isAvailable = computed(\n    () => isTma()\n      && isInitialized()\n      && isSupported()\n      && isMounted(),\n  );\n\n  const wrapError = (message: string): WrappedFnReturnType<Fn> => {\n    const err = new FunctionUnavailableError(message);\n    return (['task', 'promise'].includes(options.returns)\n      ? TE.left(err)\n      : E.left(err)) as WrappedFnReturnType<Fn>;\n  };\n\n  const call = (...args: Parameters<Fn>): MaybeCommonReturnTypeToMonad<Fn> => {\n    if (returns === 'plain') {\n      return E.tryCatch(() => fn(...args), e => e) as MaybeCommonReturnTypeToMonad<Fn>;\n    }\n    if (returns === 'promise') {\n      return TE.tryCatch(() => fn(...args), e => e) as MaybeCommonReturnTypeToMonad<Fn>;\n    }\n    return fn(...args);\n  };\n\n  return Object.assign(\n    (...args: Parameters<Fn>): WrappedFnReturnType<Fn> => {\n      const errMessagePrefix = 'Unable to call function:';\n      if (!isTma()) {\n        return wrapError(`${errMessagePrefix} it can't be called outside Mini Apps`);\n      }\n      if (!isInitialized()) {\n        return wrapError(`${errMessagePrefix} the SDK was not initialized. Use the SDK init() function`);\n      }\n      const supportErr = calculateSupportError();\n      if (supportErr) {\n        return wrapError(`${errMessagePrefix} ${supportErr}`);\n      }\n      const supportsOptionErr = calculateOptionSupportError(...args);\n      if (supportsOptionErr) {\n        return wrapError(`${errMessagePrefix} ${supportsOptionErr}`);\n      }\n      if (!isMounted()) {\n        const message = options.isMounting?.()\n          ? 'mounting. Wait for the mount completion'\n          : 'unmounted. Use the mount() method';\n        return wrapError(`${errMessagePrefix} the component is ${message}`);\n      }\n      return call(...args) as WrappedFnReturnType<Fn>;\n    },\n    fn,\n    {\n      isAvailable,\n      ifAvailable(...args: Parameters<Fn>): O.Option<MaybeCommonReturnTypeToMonad<Fn>> {\n        return isAvailable() ? O.some(call(...args)) : O.none;\n      },\n    },\n    isSupportedSimplified ? { isSupported } : {},\n    options.supports ? { supports: isOptionSupported } : {},\n  );\n}\n\nexport function createWithChecksFp<O extends WithChecksOptions<any>>(options: O) {\n  return <Fn extends OptionsBasedFn<O>>(fn: Fn): WithChecksFp<\n    Fn,\n    OptionsBasedRequires<O>,\n    OptionsBasedSupports<O>\n  > => withChecksFp(fn, options);\n}\n","import type { PostEventError, MethodName, MethodParams } from '@tma.js/bridge';\nimport { computed, type Computed } from '@tma.js/signals';\nimport * as E from 'fp-ts/Either';\nimport { pipe } from 'fp-ts/function';\n\nimport { Mountable } from '@/composables/Mountable.js';\nimport { Stateful } from '@/composables/Stateful.js';\nimport type { SharedFeatureOptions } from '@/fn-options/sharedFeatureOptions.js';\nimport type { WithPostEvent } from '@/fn-options/withPostEvent.js';\nimport type { WithStateRestore } from '@/fn-options/withStateRestore.js';\nimport type { WithVersion } from '@/fn-options/withVersion.js';\nimport { createIsSupportedSignal } from '@/helpers/createIsSupportedSignal.js';\nimport { removeUndefined } from '@/helpers/removeUndefined.js';\nimport { throwifyWithChecksFp } from '@/with-checks/throwifyWithChecksFp.js';\nimport {\n  type WithChecksFp,\n  type WithChecks,\n  createWithChecksFp,\n} from '@/with-checks/withChecksFp.js';\n\ntype ButtonEither = E.Either<PostEventError, void>;\n\ntype BoolFields<S> = {\n  [K in keyof S]-?: S[K] extends boolean ? K : never;\n}[keyof S];\n\nexport interface ButtonOptions<S, M extends MethodName>\n  extends SharedFeatureOptions,\n  WithStateRestore<S>,\n  WithPostEvent,\n  WithVersion {\n  /**\n   * The initial button state.\n   */\n  initialState: S;\n  /**\n   * Removes a component click listener.\n   * @param listener - a listener to remove.\n   * @param once - should the listener be called only once.\n   */\n  offClick: (listener: VoidFunction, once?: boolean) => void;\n  /**\n   * Adds a component click listener.\n   * @returns A function to remove listener.\n   * @param listener - a listener to add.\n   * @param once - should the listener be called only once.\n   */\n  onClick: (listener: VoidFunction, once?: boolean) => VoidFunction;\n  /**\n   * A Mini Apps method to commit changes.\n   */\n  method: M;\n  /**\n   * A function to create method payload.\n   * @param state\n   */\n  payload: (state: S) => MethodParams<M>;\n}\n\nexport class Button<S extends object, M extends MethodName> {\n  constructor({\n    isTma,\n    storage,\n    onClick,\n    offClick,\n    initialState,\n    isPageReload,\n    postEvent,\n    payload,\n    method,\n    version,\n  }: ButtonOptions<S, M>) {\n    const stateful = new Stateful({\n      initialState,\n      onChange(state) {\n        storage.set(state);\n      },\n    });\n    const mountable = new Mountable<S>({\n      initialState,\n      isPageReload,\n      onMounted: stateful.setState,\n      restoreState: storage.get,\n    });\n\n    const wrapOptions = { version, requires: method, isTma };\n    const wrapSupportedPlain = createWithChecksFp({\n      ...wrapOptions,\n      returns: 'plain',\n    });\n    const wrapMountedEither = createWithChecksFp({\n      ...wrapOptions,\n      returns: 'either',\n      isMounted: mountable.isMounted,\n    });\n\n    this.isMounted = mountable.isMounted;\n    this.isSupported = createIsSupportedSignal(method, version);\n    this.state = stateful.state;\n\n    this.setStateFp = wrapMountedEither(state => {\n      const nextState = { ...this.state(), ...removeUndefined(state) };\n      if (!stateful.hasDiff(nextState)) {\n        return E.right(undefined);\n      }\n      return pipe(\n        postEvent(method as any, payload(nextState)),\n        E.map(() => {\n          stateful.setState(nextState);\n        }),\n      );\n    });\n    this.setState = throwifyWithChecksFp(this.setStateFp);\n    this.onClickFp = wrapSupportedPlain(onClick);\n    this.onClick = throwifyWithChecksFp(this.onClickFp);\n    this.offClickFp = wrapSupportedPlain(offClick);\n    this.offClick = throwifyWithChecksFp(this.offClickFp);\n    this.mountFp = wrapSupportedPlain(() => {\n      const nothing = () => undefined;\n      return pipe(mountable.mount(), E.match(nothing, nothing));\n    });\n    this.mount = throwifyWithChecksFp(this.mountFp);\n    this.unmount = mountable.unmount;\n    this.stateSetters = key => {\n      const wrapped = wrapMountedEither(value => {\n        return this.setStateFp({ [key]: value } as unknown as Partial<S>);\n      });\n      return [throwifyWithChecksFp(wrapped), wrapped];\n    };\n    this.stateBoolSetters = <K extends keyof S>(key: K) => {\n      const [, setFp] = this.stateSetters(key);\n      const setFalse = wrapMountedEither(() => setFp(false as S[K]));\n      const setTrue = wrapMountedEither(() => setFp(true as S[K]));\n      return [\n        [throwifyWithChecksFp(setFalse), setFalse],\n        [throwifyWithChecksFp(setTrue), setTrue],\n      ];\n    };\n  }\n\n  /**\n   * Signal indicating if the component is currently mounted.\n   */\n  readonly isMounted: Computed<boolean>;\n\n  /**\n   * Signal indicating if the component is supported.\n   */\n  readonly isSupported: Computed<boolean>;\n\n  /**\n   * Complete button state.\n   */\n  readonly state: Computed<S>;\n\n  /**\n   * @returns A computed based on the specified state and its related key.\n   * @param key - a key to use.\n   */\n  stateGetter<K extends keyof S>(key: K): Computed<S[K]> {\n    return computed(() => this.state()[key]);\n  }\n\n  /**\n   * @returns A setter with checks for the specified key.\n   * @param key\n   */\n  readonly stateSetters: <K extends keyof S>(key: K) => [\n    throwing: WithChecks<(value: S[K]) => void, true>,\n    fp: WithChecksFp<(value: S[K]) => ButtonEither, true>,\n  ];\n\n  /**\n   * @returns Setters with checks to set a specified boolean key.\n   * @param key\n   */\n  readonly stateBoolSetters: <K extends BoolFields<S>>(key: K) => [\n    setFalse: [\n      throwing: WithChecks<() => void, true>,\n      fp: WithChecksFp<() => ButtonEither, true>,\n    ],\n    setTrue: [\n      throwing: WithChecks<() => void, true>,\n      fp: WithChecksFp<() => ButtonEither, true>,\n    ],\n  ];\n\n  /**\n   * Updates the button state.\n   */\n  readonly setStateFp: WithChecksFp<(state: Partial<S>) => ButtonEither, true>;\n\n  /**\n   * @see setStateFp\n   */\n  readonly setState: WithChecks<(state: Partial<S>) => void, true>;\n\n  /**\n   * Adds a new button listener.\n   * @param listener - event listener.\n   * @param once - should the listener be called only once.\n   * @returns A function to remove bound listener.\n   * @example\n   * const off = button.onClick(() => {\n   *   console.log('User clicked the button');\n   *   off();\n   * });\n   */\n  readonly onClickFp: WithChecksFp<(listener: VoidFunction, once?: boolean) => VoidFunction, true>;\n\n  /**\n   * @see onClickFp\n   */\n  readonly onClick: WithChecks<(listener: VoidFunction, once?: boolean) => VoidFunction, true>;\n\n  /**\n   * Removes the button click listener.\n   * @param listener - event listener.\n   * @param once - should the listener be called only once.\n   * @example\n   * function listener() {\n   *   console.log('User clicked the button');\n   *   button.offClick(listener);\n   * }\n   * button.onClick(listener);\n   */\n  readonly offClickFp: WithChecksFp<\n    (listener: VoidFunction, once?: boolean) => void,\n    true\n  >;\n\n  /**\n   * @see offClickFp\n   */\n  readonly offClick: WithChecks<(listener: VoidFunction, once?: boolean) => void, true>;\n\n  /**\n   * Mounts the component restoring its state.\n   * @since Mini Apps v6.1\n   */\n  readonly mountFp: WithChecksFp<() => void, true>;\n\n  /**\n   * @see mountFp\n   */\n  readonly mount: WithChecks<() => void, true>;\n\n  /**\n   * Unmounts the component.\n   *\n   * Note that this function does not remove listeners added via the `onClick`\n   * function, so you have to remove them on your own.\n   * @see onClick\n   */\n  readonly unmount: () => void;\n}\n","import type { PostEventError } from '@tma.js/bridge';\nimport type { Computed } from '@tma.js/signals';\nimport * as E from 'fp-ts/Either';\n\nimport { Button, type ButtonOptions } from '@/composables/Button.js';\nimport type { WithChecksFp, WithChecks } from '@/with-checks/withChecksFp.js';\n\nexport interface BackButtonState {\n  isVisible: boolean;\n}\n\nexport type BackButtonOptions = Omit<\n  ButtonOptions<BackButtonState, 'web_app_setup_back_button'>,\n  'method' | 'payload' | 'initialState'\n>;\n\n/**\n * @since Mini Apps v6.1\n */\nexport class BackButton {\n  constructor(options: BackButtonOptions) {\n    const button = new Button({\n      ...options,\n      method: 'web_app_setup_back_button',\n      payload: state => ({ is_visible: state.isVisible }),\n      initialState: { isVisible: false },\n    });\n\n    this.isVisible = button.stateGetter('isVisible');\n    this.isMounted = button.isMounted;\n    this.isSupported = button.isSupported;\n    [[this.hide, this.hideFp], [this.show, this.showFp]] = button.stateBoolSetters('isVisible');\n    this.onClick = button.onClick;\n    this.onClickFp = button.onClickFp;\n    this.offClick = button.offClick;\n    this.offClickFp = button.offClickFp;\n    this.mount = button.mount;\n    this.mountFp = button.mountFp;\n    this.unmount = button.unmount;\n  }\n\n  /**\n   * Signal indicating if the component is currently visible.\n   */\n  readonly isVisible: Computed<boolean>;\n\n  /**\n   * Signal indicating if the component is currently mounted.\n   */\n  readonly isMounted: Computed<boolean>;\n\n  /**\n   * Signal indicating if the component is supported.\n   */\n  readonly isSupported: Computed<boolean>;\n\n  /**\n   * Hides the button.\n   * @since Mini Apps v6.1\n   */\n  readonly hideFp: WithChecksFp<() => E.Either<PostEventError, void>, true>;\n\n  /**\n   * @see hideFp\n   */\n  readonly hide: WithChecks<() => void, true>;\n\n  /**\n   * Shows the button.\n   * @since Mini Apps v6.1\n   */\n  readonly showFp: WithChecksFp<() => E.Either<PostEventError, void>, true>;\n\n  /**\n   * @see showFp\n   */\n  readonly show: WithChecks<() => void, true>;\n\n  /**\n   * Adds a new button listener.\n   * @param listener - event listener.\n   * @param once - should the listener be called only once.\n   * @returns A function to remove bound listener.\n   * @since Mini Apps v6.1\n   * @example\n   * const off = button.onClick(() => {\n   *   console.log('User clicked the button');\n   *   off();\n   * });\n   */\n  readonly onClickFp: WithChecksFp<\n    (listener: VoidFunction, once?: boolean) => VoidFunction,\n    true\n  >;\n\n  /**\n   * @see onClickFp\n   */\n  readonly onClick: WithChecks<(listener: VoidFunction, once?: boolean) => VoidFunction, true>;\n\n  /**\n   * Removes the button click listener.\n   * @param listener - event listener.\n   * @param once - should the listener be called only once.\n   * @since Mini Apps v6.1\n   * @example\n   * function listener() {\n   *   console.log('User clicked the button');\n   *   button.offClick(listener);\n   * }\n   * button.onClick(listener);\n   */\n  readonly offClickFp: WithChecksFp<\n    (listener: VoidFunction, once?: boolean) => void,\n    true\n  >;\n\n  /**\n   * @see offClickFp\n   */\n  readonly offClick: WithChecks<(listener: VoidFunction, once?: boolean) => void, true>;\n\n  /**\n   * Mounts the component restoring its state.\n   * @since Mini Apps v6.1\n   */\n  readonly mountFp: WithChecksFp<() => void, true>;\n\n  /**\n   * @see mountFp\n   */\n  readonly mount: WithChecks<() => void, true>;\n\n  /**\n   * Unmounts the component.\n   *\n   * Note that this function does not remove listeners added via the `onClick`\n   * function, so you have to remove them on your own.\n   * @see onClick\n   */\n  readonly unmount: () => void;\n}\n","import { isTMAFp } from '@tma.js/bridge';\nimport { computed } from '@tma.js/signals';\n\nimport type { MaybeAccessor } from '@/types.js';\n\nexport interface SharedFeatureOptions {\n  /**\n   * True if the current environment is Telegram Mini Apps.\n   */\n  isTma: MaybeAccessor<boolean>;\n}\n\nexport function sharedFeatureOptions(): SharedFeatureOptions {\n  return { isTma: computed(() => isTMAFp()) };\n}\n","import { access } from '@/helpers/access.js';\nimport type { MaybeAccessor } from '@/types.js';\n\nexport function createFnOption<T>(mix: MaybeAccessor<T>) {\n  return <O extends object>(obj: O) => {\n    return { ...obj, ...access(mix) };\n  };\n}\n","import {\n  computed,\n  type Computed,\n  type Signal,\n  signal,\n  type SignalOptions,\n} from '@tma.js/signals';\n\nexport type SignalsTuple<T> = [Signal<T>, Computed<T>];\n\nconst signals: (Signal<any> | Computed<any>)[] = [];\n\n/**\n * Creates a new signal with the initial value.\n * @param initialValue - the initial value.\n * @param options - additional options.\n */\nexport function createSignal<T>(\n  initialValue: T,\n  options?: SignalOptions<T>,\n): Signal<T>;\n\n/**\n * Creates a new signal without the initial value.\n * @param initialValue - the initial value.\n * @param options - additional options.\n */\nexport function createSignal<T>(\n  initialValue?: T,\n  options?: SignalOptions<T | undefined>,\n): Signal<T | undefined>;\n\n// #__NO_SIDE_EFFECTS__\nexport function createSignal<T>(\n  initialValue?: T,\n  options?: SignalOptions<T | undefined>,\n): Signal<T | undefined> {\n  const s = signal(initialValue, options);\n  signals.push(s);\n  return s;\n}\n\n/**\n * Creates a signal, which wil be automatically updated if some of its dependant signals were\n * modified.\n * @param fn - computation function.\n * @param options - additional functions.\n */\n// #__NO_SIDE_EFFECTS__\nexport function createComputed<T>(fn: (prev?: T) => T, options?: SignalOptions<T>): Computed<T> {\n  const s = computed(fn, options);\n  signals.push(s);\n  return s;\n}\n\n/**\n * Resets all signals states.\n */\nexport function resetSignals() {\n  signals.forEach(s => {\n    s.unsubAll();\n    'reset' in s && s.reset();\n  });\n}\n\n/**\n * @returns A tuple, containing a manual and computed signals. The computed signal is based on\n * the manual one.\n * @param initialValue - the initial value.\n * @param options - additional options.\n */\nexport function createSignalsTuple<T>(\n  initialValue: T,\n  options?: SignalOptions<T>,\n): SignalsTuple<T>;\n\n/**\n * @returns A tuple, containing a manual and computed signals. The computed signal is based on\n * the manual one.\n * @param initialValue - an initial value.\n * @param options - additional options.\n */\nexport function createSignalsTuple<T>(\n  initialValue?: T,\n  options?: SignalOptions<T | undefined>,\n): SignalsTuple<T | undefined>;\n\n// #__NO_SIDE_EFFECTS__\nexport function createSignalsTuple<T>(\n  initialValue?: T,\n  options?: SignalOptions<T | undefined>,\n): SignalsTuple<T | undefined> {\n  const s = createSignal(initialValue, options);\n  return [s, createComputed(s)];\n}\n","import { postEventFp as _postEventFp, type PostEventFpFn, type PostEventFn } from '@tma.js/bridge';\nimport { throwifyAnyEither } from '@tma.js/toolkit';\n\nimport { createSignal } from '@/globals/signals-registry.js';\n\nexport const postEventFpSignal = createSignal(_postEventFp);\n\nexport const postEventFp: PostEventFpFn = (...args: any[]) => {\n  return (postEventFpSignal as any)()(...args);\n};\n\nexport const postEvent: PostEventFn = (...args: any[]) => {\n  return throwifyAnyEither((postEventFp as any)(...args));\n};\n","import { type PostEventFpFn } from '@tma.js/bridge';\n\nimport { createFnOption } from '@/fn-options/createFnOption.js';\nimport { postEventFp } from '@/globals/postEvent.js';\n\nexport interface WithPostEvent {\n  /**\n   * A postEvent function to use to call Mini Apps methods.\n   */\n  postEvent: PostEventFpFn;\n}\n\nexport const withPostEvent = createFnOption<WithPostEvent>({\n  postEvent: postEventFp,\n});\n","import { getStorageValue, setStorageValue } from '@tma.js/toolkit';\n\nexport interface ComponentStorage<T> {\n  get: () => T | undefined;\n  set: (value: T) => void;\n}\n\n/**\n * Creates a new sessionStorage-based component storage.\n * @param key - session storage key to use.\n */\nexport function createComponentSessionStorage<T>(key: string): ComponentStorage<T> {\n  return {\n    get: () => getStorageValue<T>(key),\n    set(value) {\n      setStorageValue<T>(key, value);\n    },\n  };\n}\n","/**\n * Returns the first navigation entry from window.performance.\n * @returns First navigation entry or null, in case performance functionality is not supported\n * or navigation entry was not found.\n */\nfunction getFirstNavigationEntry(): PerformanceNavigationTiming | undefined {\n  return performance.getEntriesByType('navigation')[0] as PerformanceNavigationTiming | undefined;\n}\n\n/**\n * @returns True, if the current page was reloaded.\n * @see https://stackoverflow.com/a/36444134/11894710\n */\nexport function isPageReload(): boolean {\n  const entry = getFirstNavigationEntry();\n  return !!entry && entry.type === 'reload';\n}\n","import { createFnOption } from '@/fn-options/createFnOption.js';\nimport { type ComponentStorage, createComponentSessionStorage } from '@/helpers/component-storage.js';\nimport { isPageReload } from '@/helpers/navigation.js';\nimport type { MaybeAccessor } from '@/types.js';\n\nexport interface WithStateRestore<T> {\n  /**\n   * A storage the component could use to store its data.\n   */\n  storage: ComponentStorage<T>;\n  /**\n   * True if the current page is reloaded.\n   */\n  isPageReload: MaybeAccessor<boolean>;\n}\n\nexport function withStateRestore<S>(storageName: string) {\n  return createFnOption<WithStateRestore<S>>({\n    storage: createComponentSessionStorage<S>(storageName),\n    isPageReload,\n  });\n}\n","import type { Version } from '@tma.js/types';\n\nimport { createSignal } from '@/globals/signals-registry.js';\n\n/**\n * The current Mini Apps version.\n */\nexport const version = createSignal<Version>('0.0');\n","import type { Version } from '@tma.js/types';\n\nimport { createFnOption } from '@/fn-options/createFnOption.js';\nimport { version } from '@/globals/version.js';\nimport type { MaybeAccessor } from '@/types.js';\n\nexport interface WithVersion {\n  /**\n   * The currently supported Telegram Mini Apps version by the Telegram client.\n   */\n  version: MaybeAccessor<Version>;\n}\n\nexport const withVersion = createFnOption<WithVersion>({ version });\n","import { on, off, type EventName } from '@tma.js/bridge';\nimport { pipe } from 'fp-ts/function';\n\nimport { sharedFeatureOptions } from '@/fn-options/sharedFeatureOptions.js';\nimport { withPostEvent } from '@/fn-options/withPostEvent.js';\nimport { withStateRestore } from '@/fn-options/withStateRestore.js';\nimport { withVersion } from '@/fn-options/withVersion.js';\n\nexport function buttonOptions<S>(storageName: string, trackedClickEvent: EventName) {\n  return {\n    ...pipe(\n      sharedFeatureOptions(),\n      withPostEvent,\n      withVersion,\n      withStateRestore<S>(storageName),\n    ),\n    onClick(listener: VoidFunction, once?: boolean): VoidFunction {\n      return on(trackedClickEvent, listener, once);\n    },\n    offClick(listener: VoidFunction, once?: boolean): void {\n      off(trackedClickEvent, listener, once);\n    },\n  };\n}\n","import { BackButton } from '@/features/BackButton/BackButton.js';\nimport { buttonOptions } from '@/fn-options/buttonOptions.js';\n\nexport const backButton = new BackButton(buttonOptions('backButton', 'back_button_pressed'));\n","import { batch, computed, signal } from '@tma.js/signals';\nimport * as TE from 'fp-ts/TaskEither';\nimport { pipe } from 'fp-ts/function';\n\nimport { access } from '@/helpers/access.js';\nimport type { AsyncOptions, MaybeAccessor } from '@/types.js';\n\nexport interface AsyncMountableOptions<S, E> {\n  /**\n   * A function to retrieve the initial state.\n   * @param options - additional options.\n   */\n  initialState: (options?: AsyncOptions) => TE.TaskEither<E, S>;\n  /**\n   * @returns True if the current page was reloaded.\n   */\n  isPageReload: MaybeAccessor<boolean>;\n  /**\n   * A function to call whenever the component was mounted.\n   * @param state - restored state.\n   */\n  onMounted?: (state: S) => void;\n  /**\n   * A function to call whenever the component was unmounted.\n   */\n  onUnmounted?: VoidFunction;\n  /**\n   * Attempts to restore previously saved component state. This function\n   * will only be called if the current page was reloaded.\n   */\n  restoreState: () => (S | undefined);\n}\n\nexport class AsyncMountable<S extends object, E> {\n  constructor({\n    initialState,\n    onMounted,\n    restoreState,\n    onUnmounted,\n    isPageReload,\n  }: AsyncMountableOptions<S, E>) {\n    this.mount = options => {\n      if (this._isMounted()) {\n        return TE.right(undefined);\n      }\n      const restored = access(isPageReload) ? restoreState() : undefined;\n      return pipe(\n        restored ? TE.right(restored) : initialState(options),\n        TE.map(state => {\n          // The user could call mount several times in a row while the\n          // component was still mounting. We should prevent calling the\n          // same hooks several times in this case.\n          if (!this._isMounted()) {\n            batch(() => {\n              this._isMounted.set(true);\n              onMounted?.(state);\n            });\n          }\n        }),\n      );\n    };\n\n    this.unmount = () => {\n      if (this._isMounted()) {\n        batch(() => {\n          this._isMounted.set(false);\n          onUnmounted?.();\n        });\n      }\n    };\n  }\n\n  private readonly _isMounted = signal(false);\n\n  /**\n   * Signal indicating if the component is mounted.\n   */\n  readonly isMounted = computed(this._isMounted);\n\n  /**\n   * Mounts the component restoring its state and calling required side effects.\n   * @param options - additional execution options.\n   */\n  readonly mount: (options?: AsyncOptions) => TE.TaskEither<E, void>;\n\n  /**\n   * Unmounts the component.\n   */\n  readonly unmount: () => void;\n}\n","import type {\n  RequestError,\n  PostEventError,\n  EventPayload,\n  BiometryAuthRequestStatus,\n  EventListener,\n  BiometryTokenUpdateStatus,\n} from '@tma.js/bridge';\nimport type { Computed } from '@tma.js/signals';\nimport { BetterPromise } from 'better-promises';\nimport * as E from 'fp-ts/Either';\nimport * as TE from 'fp-ts/TaskEither';\nimport { pipe } from 'fp-ts/function';\n\nimport { AsyncMountable } from '@/composables/AsyncMountable.js';\nimport { Stateful } from '@/composables/Stateful.js';\nimport { NotAvailableError } from '@/errors.js';\nimport type {\n  BiometryAuthenticateOptions, BiometryOptions,\n  BiometryRequestAccessOptions,\n  BiometryState,\n  BiometryUpdateTokenOptions,\n} from '@/features/Biometry/types.js';\nimport { createIsSupportedSignal } from '@/helpers/createIsSupportedSignal.js';\nimport type { AsyncOptions } from '@/types.js';\nimport { throwifyWithChecksFp } from '@/with-checks/throwifyWithChecksFp.js';\nimport { createWithChecksFp, WithChecks, WithChecksFp } from '@/with-checks/withChecksFp.js';\n\ntype BiometryTask<T> = TE.TaskEither<RequestError, T>;\n\ninterface AuthenticateResult {\n  /**\n   * Authentication status.\n   */\n  status: BiometryAuthRequestStatus;\n  /**\n   * Token from the local secure storage saved previously.\n   */\n  token?: string;\n}\n\nconst notAvailableError = new NotAvailableError('Biometry is not available');\n\nfunction eventToState(event: EventPayload<'biometry_info_received'>): BiometryState {\n  let available = false;\n  let tokenSaved = false;\n  let deviceId = '';\n  let accessRequested = false;\n  let type = '';\n  let accessGranted = false;\n  if (event.available) {\n    available = true;\n    tokenSaved = event.token_saved;\n    deviceId = event.device_id;\n    accessRequested = event.access_requested;\n    type = event.type;\n    accessGranted = event.access_granted;\n  }\n  return { available, tokenSaved, deviceId, type, accessGranted, accessRequested };\n}\n\n/**\n * @since Mini Apps v7.2\n */\nexport class Biometry {\n  constructor({\n    version,\n    request,\n    postEvent,\n    storage,\n    onInfoReceived,\n    offInfoReceived,\n    isTma,\n    isPageReload,\n  }: BiometryOptions) {\n    const listener: EventListener<'biometry_info_received'> = event => {\n      stateful.setState(eventToState(event));\n    };\n\n    const stateful = new Stateful<BiometryState>({\n      initialState: {\n        available: false,\n        type: 'unknown',\n        accessGranted: false,\n        accessRequested: false,\n        deviceId: '',\n        tokenSaved: false,\n      },\n      onChange: storage.set,\n    });\n    const mountable = new AsyncMountable({\n      initialState(options) {\n        return pipe(\n          request('web_app_biometry_get_info', 'biometry_info_received', options),\n          TE.map(eventToState),\n        );\n      },\n      isPageReload,\n      onMounted(state) {\n        stateful.setState(state);\n        onInfoReceived(listener);\n      },\n      onUnmounted() {\n        offInfoReceived(listener);\n      },\n      restoreState: storage.get,\n    });\n\n    const wrapOptions = { version, requires: 'web_app_biometry_request_auth', isTma } as const;\n    const wrapSupportedEither = createWithChecksFp({\n      ...wrapOptions,\n      returns: 'either',\n    });\n    const wrapSupportedTask = createWithChecksFp({\n      ...wrapOptions,\n      returns: 'task',\n    });\n    const wrapMountedTask = createWithChecksFp({\n      ...wrapOptions,\n      isMounted: mountable.isMounted,\n      returns: 'task',\n    });\n\n    this.isAvailable = stateful.getter('available');\n    this.isMounted = mountable.isMounted;\n    this.isSupported = createIsSupportedSignal('web_app_biometry_request_auth', version);\n    this.state = stateful.state;\n    this.unmount = mountable.unmount;\n    this.mountFp = wrapSupportedTask(mountable.mount);\n\n    this.authenticateFp = wrapMountedTask(options => {\n      return !this.isAvailable()\n        ? TE.left(notAvailableError)\n        : pipe(\n          request('web_app_biometry_request_auth', 'biometry_auth_requested', {\n            ...options,\n            params: { reason: ((options || {}).reason || '').trim() },\n          }),\n          TE.map(response => {\n            stateful.setState({ token: response.token });\n            return response;\n          }),\n        );\n    });\n\n    this.openSettingsFp = wrapSupportedEither(() => postEvent('web_app_biometry_open_settings'));\n\n    this.requestAccessFp = wrapMountedTask(options => {\n      return pipe(\n        request('web_app_biometry_request_access', 'biometry_info_received', {\n          ...options,\n          params: { reason: ((options || {}).reason || '').trim() },\n        }),\n        TE.chain(response => {\n          const state = eventToState(response);\n          if (!state.available) {\n            return TE.left(notAvailableError);\n          }\n          stateful.setState(state);\n          return TE.right(state.accessRequested);\n        }),\n      );\n    });\n\n    this.updateTokenFp = wrapMountedTask((options = {}) => {\n      return pipe(\n        request('web_app_biometry_update_token', 'biometry_token_updated', {\n          ...options,\n          params: { token: options.token || '', reason: options.reason?.trim() },\n        }),\n        TE.map(response => response.status),\n      );\n    });\n\n    this.authenticate = throwifyWithChecksFp(this.authenticateFp);\n    this.openSettings = throwifyWithChecksFp(this.openSettingsFp);\n    this.requestAccess = throwifyWithChecksFp(this.requestAccessFp);\n    this.updateToken = throwifyWithChecksFp(this.updateTokenFp);\n    this.mount = throwifyWithChecksFp(this.mountFp);\n  }\n\n  /**\n   * Signal indicating if biometry is available.\n   */\n  readonly isAvailable: Computed<boolean>;\n\n  /**\n   * Signal indicating if the component is supported.\n   */\n  readonly isSupported: Computed<boolean>;\n\n  /**\n   * Signal indicating if the component is mounted.\n   */\n  readonly isMounted: Computed<boolean>;\n\n  /**\n   * Complete component state.\n   */\n  readonly state: Computed<BiometryState>;\n\n  /**\n   * Attempts to authenticate a user using biometrics and fetch a previously stored secure token.\n   * @param options - method options.\n   * @since Mini Apps v7.2\n   * @returns Token from the local secure storage saved previously or undefined.\n   * @example\n   * const { status, token } = await biometry.authenticate({\n   *   reason: 'Authenticate to open wallet',\n   * });\n   */\n  readonly authenticateFp: WithChecksFp<(options?: BiometryAuthenticateOptions) => BiometryTask<{\n    /**\n     * Authentication status.\n     */\n    status: BiometryAuthRequestStatus;\n    /**\n     * Token from the local secure storage saved previously.\n     */\n    token?: string;\n  }>, true>;\n\n  /**\n   * @see authenticateFp\n   */\n  readonly authenticate: WithChecks<\n    (options?: BiometryAuthenticateOptions) => BetterPromise<AuthenticateResult>,\n    true\n  >;\n\n  /**\n   * Opens the biometric access settings for bots. Useful when you need to request biometrics\n   * access to users who haven't granted it yet.\n   *\n   * _Note that this method can be called only in response to user interaction with the Mini App\n   * interface (e.g. a click inside the Mini App or on the main button)_.\n   * @since Mini Apps v7.2\n   */\n  readonly openSettingsFp: WithChecksFp<() => E.Either<PostEventError, void>, true>;\n\n  /**\n   * @see openSettingsFp\n   */\n  readonly openSettings: WithChecks<() => void, true>;\n\n  /**\n   * Requests permission to use biometrics.\n   * @since Mini Apps v7.2\n   * @returns Promise with true, if access was granted.\n   * @example\n   * const accessGranted = await biometry.requestAccess({\n   *   reason: 'Authenticate to open wallet',\n   * });\n   */\n  readonly requestAccessFp: WithChecksFp<\n    (options?: BiometryRequestAccessOptions) => BiometryTask<boolean>,\n    true\n  >;\n\n  /**\n   * @see requestAccessFp\n   */\n  readonly requestAccess: WithChecks<\n    (options?: BiometryRequestAccessOptions) => BetterPromise<boolean>,\n    true\n  >;\n\n  /**\n   * Updates the biometric token in a secure storage on the device.\n   * @since Mini Apps v7.2\n   * @returns Promise with `true`, if token was updated.\n   * @example Setting a new token\n   * biometry.updateToken({\n   *   token: 'abcdef',\n   * })\n   * @example Deleting the token\n   * biometry.updateToken();\n   */\n  readonly updateTokenFp: WithChecksFp<\n    (options?: BiometryUpdateTokenOptions) => BiometryTask<BiometryTokenUpdateStatus>,\n    true\n  >;\n\n  /**\n   * @see updateTokenFp\n   */\n  readonly updateToken: WithChecks<\n    (options?: BiometryUpdateTokenOptions) => BetterPromise<BiometryTokenUpdateStatus>,\n    true\n  >;\n\n  /**\n   * Mounts the component restoring its state.\n   * @since Mini Apps v7.2\n   */\n  readonly mountFp: WithChecksFp<(options?: AsyncOptions) => BiometryTask<void>, true>;\n\n  /**\n   * @see mountFp\n   */\n  readonly mount: WithChecks<(options?: AsyncOptions) => BetterPromise<void>, true>;\n\n  /**\n   * Unmounts the component.\n   */\n  readonly unmount: () => void;\n}\n","import {\n  requestFp as _requestFp,\n  request2Fp as _request2Fp,\n  type RequestFpFn,\n  type RequestFn,\n  type Request2FpFn,\n  type Request2Fn,\n} from '@tma.js/bridge';\nimport { BetterPromise } from 'better-promises';\n\nimport { postEventFp } from '@/globals/postEvent.js';\n\n/**\n * @deprecated To be removed in the next major update. Use `request2fp` instead, it provides\n * a proper way of handling multiple events.\n */\nexport const requestFp: RequestFpFn = (method: any, events: any, options: any) => {\n  return _requestFp(method, events, {\n    postEvent: postEventFp,\n    ...options,\n  });\n};\n\nexport const request2Fp: Request2FpFn = (method: any, events: any, options: any) => {\n  return _request2Fp(method, events, {\n    postEvent: postEventFp,\n    ...options,\n  });\n};\n\n/**\n * @deprecated To be removed in the next major update. Use `request` instead, it provides\n * a proper way of handling multiple events.\n */\nexport const request: RequestFn = (...args: any[]) => {\n  return BetterPromise.fn(() => (requestFp as any)(...args)());\n};\n\nexport const request2: Request2Fn = (...args: any[]) => {\n  return BetterPromise.fn(() => (request2Fp as any)(...args)());\n};\n","import type { Request2FpFn } from '@tma.js/bridge';\n\nimport { createFnOption } from '@/fn-options/createFnOption.js';\nimport { request2Fp } from '@/globals/request.js';\n\nexport interface WithRequest {\n  /**\n   * A request function to use to call Mini Apps methods.\n   */\n  request: Request2FpFn;\n}\n\nexport const withRequest = createFnOption<WithRequest>({ request: request2Fp });\n","import { on, off } from '@tma.js/bridge';\nimport { pipe } from 'fp-ts/function';\n\nimport { Biometry } from '@/features/Biometry/Biometry.js';\nimport type { BiometryState } from '@/features/Biometry/types.js';\nimport { sharedFeatureOptions } from '@/fn-options/sharedFeatureOptions.js';\nimport { withPostEvent } from '@/fn-options/withPostEvent.js';\nimport { withRequest } from '@/fn-options/withRequest.js';\nimport { withStateRestore } from '@/fn-options/withStateRestore.js';\nimport { withVersion } from '@/fn-options/withVersion.js';\n\nexport const biometry = new Biometry({\n  ...pipe(\n    sharedFeatureOptions(),\n    withPostEvent,\n    withVersion,\n    withRequest,\n    withStateRestore<BiometryState>('biometry'),\n  ),\n  offInfoReceived(listener) {\n    off('biometry_info_received', listener);\n  },\n  onInfoReceived(listener) {\n    return on('biometry_info_received', listener);\n  },\n});\n","import type { PostEventError } from '@tma.js/bridge';\nimport type { Computed } from '@tma.js/signals';\nimport * as E from 'fp-ts/Either';\nimport { pipe } from 'fp-ts/function';\n\nimport { Mountable } from '@/composables/Mountable.js';\nimport { Stateful } from '@/composables/Stateful.js';\nimport type { SharedFeatureOptions } from '@/fn-options/sharedFeatureOptions.js';\nimport type { WithPostEvent } from '@/fn-options/withPostEvent.js';\nimport type { WithStateRestore } from '@/fn-options/withStateRestore.js';\nimport { throwifyWithChecksFp } from '@/with-checks/throwifyWithChecksFp.js';\nimport {\n  createWithChecksFp,\n  type WithChecks,\n  type WithChecksFp,\n} from '@/with-checks/withChecksFp.js';\n\nexport interface ClosingBehaviorState {\n  isConfirmationEnabled: boolean;\n}\n\nexport interface ClosingBehaviorOptions\n  extends WithStateRestore<ClosingBehaviorState>,\n  WithPostEvent,\n  SharedFeatureOptions {\n}\n\nexport class ClosingBehavior {\n  constructor({ postEvent, storage, isTma, isPageReload }: ClosingBehaviorOptions) {\n    const stateful = new Stateful({\n      initialState: { isConfirmationEnabled: false },\n      onChange(state) {\n        storage.set(state);\n      },\n    });\n    const mountable = new Mountable({\n      onMounted: stateful.setState,\n      restoreState: storage.get,\n      initialState: { isConfirmationEnabled: false },\n      isPageReload,\n    });\n\n    const wrapOptions = { requires: 'web_app_setup_closing_behavior', isTma } as const;\n    const wrapSupportedPlain = createWithChecksFp({\n      ...wrapOptions,\n      returns: 'plain',\n    });\n    const wrapMountedEither = createWithChecksFp({\n      ...wrapOptions,\n      returns: 'either',\n      isMounted: mountable.isMounted,\n    });\n\n    const setClosingConfirmation = (isConfirmationEnabled: boolean) => {\n      if (isConfirmationEnabled === this.isConfirmationEnabled()) {\n        return E.right(undefined);\n      }\n      stateful.setState({ isConfirmationEnabled });\n      return postEvent('web_app_setup_closing_behavior', {\n        need_confirmation: isConfirmationEnabled,\n      });\n    };\n\n    this.isConfirmationEnabled = stateful.getter('isConfirmationEnabled');\n    this.isMounted = mountable.isMounted;\n\n    this.disableConfirmationFp = wrapMountedEither(() => {\n      return setClosingConfirmation(false);\n    });\n    this.enableConfirmationFp = wrapMountedEither(() => {\n      return setClosingConfirmation(true);\n    });\n    this.mountFp = wrapSupportedPlain(() => {\n      const nothing = () => undefined;\n      return pipe(mountable.mount(), E.match(nothing, nothing));\n    });\n    this.unmount = mountable.unmount;\n\n    this.disableConfirmation = throwifyWithChecksFp(this.disableConfirmationFp);\n    this.enableConfirmation = throwifyWithChecksFp(this.enableConfirmationFp);\n    this.mount = throwifyWithChecksFp(this.mountFp);\n  }\n\n  /**\n   * Signal indicating if closing confirmation dialog is currently enabled.\n   */\n  readonly isConfirmationEnabled: Computed<boolean>;\n\n  /**\n   * Signal indicating if the component is currently mounted.\n   */\n  readonly isMounted: Computed<boolean>;\n\n  /**\n   * Mounts the component restoring its state.\n   */\n  readonly mountFp: WithChecksFp<() => void, false>;\n\n  /**\n   * @see mountFp\n   */\n  readonly mount: WithChecks<() => void, false>;\n\n  /**\n   * Unmounts the component.\n   */\n  readonly unmount: () => void;\n\n  /**\n   * Disables the closing confirmation dialog.\n   */\n  readonly disableConfirmationFp: WithChecksFp<() => E.Either<PostEventError, void>, false>;\n\n  /**\n   * @see disableConfirmationFp\n   */\n  readonly disableConfirmation: WithChecks<() => void, false>;\n\n  /**\n   * Enables the closing confirmation dialog.\n   */\n  readonly enableConfirmationFp: WithChecksFp<() => E.Either<PostEventError, void>, false>;\n\n  /**\n   * @see enableConfirmationFp\n   */\n  readonly enableConfirmation: WithChecks<() => void, false>;\n}\n","import { pipe } from 'fp-ts/function';\n\nimport {\n  ClosingBehavior,\n  type ClosingBehaviorState,\n} from '@/features/ClosingBehavior/ClosingBehavior.js';\nimport { sharedFeatureOptions } from '@/fn-options/sharedFeatureOptions.js';\nimport { withPostEvent } from '@/fn-options/withPostEvent.js';\nimport { withStateRestore } from '@/fn-options/withStateRestore.js';\n\nexport const closingBehavior = new ClosingBehavior(pipe(\n  sharedFeatureOptions(),\n  withStateRestore<ClosingBehaviorState>('closingBehavior'),\n  withPostEvent,\n));\n","import type { InvokeCustomMethodFpOptions, RequestError } from '@tma.js/bridge';\nimport type { Computed } from '@tma.js/signals';\nimport { BetterPromise } from 'better-promises';\nimport * as TE from 'fp-ts/TaskEither';\nimport { pipe } from 'fp-ts/function';\nimport { array, parse, record, string } from 'valibot';\n\nimport type { SharedFeatureOptions } from '@/fn-options/sharedFeatureOptions.js';\nimport type { WithInvokeCustomMethod } from '@/fn-options/withInvokeCustomMethod.js';\nimport type { WithVersion } from '@/fn-options/withVersion.js';\nimport { createIsSupportedSignal } from '@/helpers/createIsSupportedSignal.js';\nimport { throwifyWithChecksFp } from '@/with-checks/throwifyWithChecksFp.js';\nimport { createWithChecksFp, type WithChecks, type WithChecksFp } from '@/with-checks/withChecksFp.js';\n\ntype CloudStorageTask<T> = TE.TaskEither<RequestError, T>;\n\nexport interface CloudStorageOptions extends WithVersion,\n  WithInvokeCustomMethod,\n  SharedFeatureOptions {\n}\n\n/**\n * @since Mini Apps v6.9\n */\nexport class CloudStorage {\n  constructor({ version, isTma, invokeCustomMethod }: CloudStorageOptions) {\n    const wrapSupportedTask = createWithChecksFp({\n      version,\n      requires: 'web_app_invoke_custom_method',\n      isTma,\n      returns: 'task',\n    });\n\n    this.isSupported = createIsSupportedSignal('web_app_invoke_custom_method', version);\n    this.deleteItemFp = wrapSupportedTask((keyOrKeys, options) => {\n      const keys = Array.isArray(keyOrKeys) ? keyOrKeys : [keyOrKeys];\n      return pipe(\n        keys.length\n          ? invokeCustomMethod('deleteStorageValues', { keys }, options)\n          : TE.right(undefined),\n        TE.map(() => undefined),\n      );\n    });\n    this.getItemFp = wrapSupportedTask((key, options) => {\n      return pipe(\n        this.getItemsFp([key], options),\n        TE.map(values => values[key] || ''),\n      );\n    });\n    this.getItemsFp = wrapSupportedTask((keys, options) => {\n      return pipe(\n        keys.length ? invokeCustomMethod('getStorageValues', { keys }, options) : TE.right({}),\n        TE.map(data => {\n          return {\n            // Fulfill the response with probably missing keys.\n            ...keys.reduce<Record<string, string>>((acc, key) => {\n              acc[key] = '';\n              return acc;\n            }, {}),\n            ...parse(record(string(), string()), data),\n          };\n        }),\n      );\n    });\n    this.getKeysFp = wrapSupportedTask(options => {\n      return pipe(\n        invokeCustomMethod('getStorageKeys', {}, options),\n        TE.map(data => parse(array(string()), data)),\n      );\n    });\n    this.setItemFp = wrapSupportedTask((key, value, options) => {\n      return pipe(\n        invokeCustomMethod('saveStorageValue', { key, value }, options),\n        TE.map(() => undefined),\n      );\n    });\n    this.clearFp = wrapSupportedTask(options => {\n      return pipe(this.getKeysFp(options), TE.chain(this.deleteItemFp));\n    });\n\n    this.deleteItem = throwifyWithChecksFp(this.deleteItemFp);\n    this.getItem = throwifyWithChecksFp(this.getItemFp);\n    this.getItems = throwifyWithChecksFp(this.getItemsFp);\n    this.getKeys = throwifyWithChecksFp(this.getKeysFp);\n    this.setItem = throwifyWithChecksFp(this.setItemFp);\n    this.clear = throwifyWithChecksFp(this.clearFp);\n  }\n\n  /**\n   * Signal indicating if the component is supported.\n   */\n  readonly isSupported: Computed<boolean>;\n\n  /**\n   * Deletes specified key or keys from the cloud storage.\n   * @param keyOrKeys - key or keys to delete.\n   * @param options - request execution options.\n   * @since Mini Apps v6.9\n   */\n  readonly deleteItemFp: WithChecksFp<\n    (keyOrKeys: string | string[], options?: InvokeCustomMethodFpOptions) => CloudStorageTask<void>,\n    true\n  >;\n\n  readonly deleteItem: WithChecks<\n    (keyOrKeys: string | string[], options?: InvokeCustomMethodFpOptions) => BetterPromise<void>,\n    true\n  >;\n\n  /**\n   * Gets a single key value from the cloud storage.\n   * @param key - a key to get.\n   * @param options - request execution options.\n   * @returns A key value as a string.\n   * @since Mini Apps v6.9\n   */\n  readonly getItemFp: WithChecksFp<\n    (key: string, options?: InvokeCustomMethodFpOptions) => CloudStorageTask<string>,\n    true\n  >;\n\n  /**\n   * @see getItemFp\n   */\n  readonly getItem: WithChecks<{\n    <K extends string>(\n      keys: K[],\n      options?: InvokeCustomMethodFpOptions,\n    ): BetterPromise<Record<K, string>>;\n    (key: string, options?: InvokeCustomMethodFpOptions): BetterPromise<string>;\n  }, true>;\n\n  /**\n   * Gets multiple keys' values from the cloud storage.\n   * @param keys - keys list.\n   * @param options - request execution options.\n   * @returns A map, where a key is one of the specified in the `keys` argument,\n   * and a value is a corresponding storage value if an array of keys was passed.\n   * @since Mini Apps v6.9\n   */\n  readonly getItemsFp: WithChecksFp<\n    <K extends string>(\n      keys: K[],\n      options?: InvokeCustomMethodFpOptions,\n    ) => CloudStorageTask<Record<K, string>>,\n    true\n  >;\n\n  /**\n   * @see getItemsFp\n   */\n  readonly getItems: WithChecks<\n    <K extends string>(\n      keys: K[],\n      options?: InvokeCustomMethodFpOptions,\n    ) => BetterPromise<Record<K, string>>,\n    true\n  >;\n\n  /**\n   * Returns a list of all keys presented in the cloud storage.\n   * @param options - request execution options.\n   * @since Mini Apps v6.9\n   */\n  readonly getKeysFp: WithChecksFp<\n    (options?: InvokeCustomMethodFpOptions) => CloudStorageTask<string[]>,\n    true\n  >;\n\n  /**\n   * @see getKeysFp\n   */\n  readonly getKeys: WithChecks<\n    (options?: InvokeCustomMethodFpOptions) => BetterPromise<string[]>,\n    true\n  >;\n\n  /**\n   * Saves the specified value by a key.\n   * @param key - storage key.\n   * @param value - storage value.\n   * @param options - request execution options.\n   * @since Mini Apps v6.9\n   */\n  readonly setItemFp: WithChecksFp<\n    (key: string, value: string, options?: InvokeCustomMethodFpOptions) => CloudStorageTask<void>,\n    true\n  >;\n\n  /**\n   * @see setItemFp\n   */\n  readonly setItem: WithChecks<\n    (key: string, value: string, options?: InvokeCustomMethodFpOptions) => BetterPromise<void>,\n    true\n  >;\n\n  /**\n   * Clears the cloud storage.\n   * @param options - additional options.\n   * @since Mini Apps v6.9\n   */\n  readonly clearFp: WithChecksFp<\n    (options?: InvokeCustomMethodFpOptions) => CloudStorageTask<void>,\n    true\n  >;\n\n  /**\n   * @see clearFp\n   */\n  readonly clear: WithChecks<(options?: InvokeCustomMethodFpOptions) => BetterPromise<void>, true>;\n}\n","import { createSignal } from '@/globals/signals-registry.js';\n\nconst lastRequestId = createSignal(0);\n\n/**\n * @returns A new request identifier.\n */\nexport function createRequestId(): string {\n  lastRequestId.set(lastRequestId() + 1);\n  return lastRequestId().toString();\n}\n","import {\n  type RequestError,\n  type CustomMethodName,\n  type CustomMethodParams,\n  type InvokeCustomMethodOptions,\n  invokeCustomMethodFp,\n} from '@tma.js/bridge';\nimport * as TE from 'fp-ts/TaskEither';\n\nimport { createRequestId } from '@/globals/createRequestId.js';\nimport { postEventFp } from '@/globals/postEvent.js';\n\n/**\n * Invokes known custom method. Returns method execution result.\n * @param method - method name.\n * @param params - method parameters.\n * @param options - additional options.\n */\nexport function invokeCustomMethod<M extends CustomMethodName>(\n  method: M,\n  params: CustomMethodParams<M>,\n  options?: InvokeCustomMethodOptions,\n): TE.TaskEither<RequestError, unknown>;\n\n/**\n * Invokes unknown custom method. Returns method execution result.\n * @param method - method name.\n * @param params - method parameters.\n * @param options - additional options.\n */\nexport function invokeCustomMethod(\n  method: string,\n  params: object,\n  options?: InvokeCustomMethodOptions,\n): TE.TaskEither<RequestError, unknown>;\n\nexport function invokeCustomMethod(\n  method: string,\n  params: object,\n  options?: InvokeCustomMethodOptions,\n): TE.TaskEither<RequestError, unknown> {\n  return invokeCustomMethodFp(method, params, createRequestId(), {\n    ...options || {},\n    postEvent: postEventFp,\n  });\n}\n","import type {\n  CustomMethodParams,\n  CustomMethodName,\n  InvokeCustomMethodError,\n  InvokeCustomMethodFpOptions,\n  RequestError,\n} from '@tma.js/bridge';\nimport type * as TE from 'fp-ts/TaskEither';\n\nimport { createFnOption } from '@/fn-options/createFnOption.js';\nimport { invokeCustomMethod } from '@/globals/invokeCustomMethod.js';\n\nexport type { InvokeCustomMethodError };\n\nexport interface InvokeCustomMethodNoRequestIdFn {\n  <M extends CustomMethodName>(\n    this: void,\n    method: M,\n    params: CustomMethodParams<M>,\n    options?: InvokeCustomMethodFpOptions,\n  ): TE.TaskEither<InvokeCustomMethodError, unknown>;\n\n  (\n    this: void,\n    method: string,\n    params: object,\n    options?: InvokeCustomMethodFpOptions,\n  ): TE.TaskEither<RequestError, unknown>;\n}\n\nexport interface WithInvokeCustomMethod {\n  invokeCustomMethod: InvokeCustomMethodNoRequestIdFn;\n}\n\nexport const withInvokeCustomMethod = createFnOption<WithInvokeCustomMethod>({\n  invokeCustomMethod,\n});\n","import { pipe } from 'fp-ts/function';\n\nimport { CloudStorage } from '@/features/CloudStorage/CloudStorage.js';\nimport { sharedFeatureOptions } from '@/fn-options/sharedFeatureOptions.js';\nimport { withInvokeCustomMethod } from '@/fn-options/withInvokeCustomMethod.js';\nimport { withVersion } from '@/fn-options/withVersion.js';\n\nexport const cloudStorage = new CloudStorage(pipe(\n  sharedFeatureOptions(),\n  withVersion,\n  withInvokeCustomMethod,\n));\n","import { EventPayload, type MethodParams, type Request2CaptureFn, RequestError } from '@tma.js/bridge';\nimport * as TE from 'fp-ts/TaskEither';\nimport { pipe } from 'fp-ts/function';\n\nimport { DeviceStorageMethodError } from '@/errors.js';\nimport type { SharedFeatureOptions } from '@/fn-options/sharedFeatureOptions.js';\nimport type { WithCreateRequestId } from '@/fn-options/withCreateRequestId.js';\nimport type { WithRequest } from '@/fn-options/withRequest.js';\nimport type { WithVersion } from '@/fn-options/withVersion.js';\nimport { throwifyWithChecksFp } from '@/with-checks/throwifyWithChecksFp.js';\nimport {\n  createWithChecksFp,\n  type WithChecks,\n  type WithChecksFp,\n} from '@/with-checks/withChecksFp.js';\n\nexport type DeviceStorageError = RequestError | DeviceStorageMethodError;\n\nexport interface DeviceStorageOptions extends SharedFeatureOptions,\n  WithVersion,\n  WithRequest,\n  WithCreateRequestId {\n}\n\n/**\n * @since Mini Apps v9.0\n */\nexport class DeviceStorage {\n  constructor({ isTma, request, version, createRequestId }: DeviceStorageOptions) {\n    const wrapSupportedTask = createWithChecksFp({\n      version,\n      requires: 'web_app_device_storage_get_key',\n      isTma,\n      returns: 'task',\n    });\n\n    const invokeMethod = <\n      M extends (\n        | 'web_app_device_storage_save_key'\n        | 'web_app_device_storage_get_key'\n        | 'web_app_device_storage_save_key'\n        | 'web_app_device_storage_clear'\n      ),\n      E extends (\n        | 'device_storage_key_saved'\n        | 'device_storage_key_received'\n        | 'device_storage_cleared'\n      ),\n    >(\n      method: M,\n      event: E,\n      params: Omit<MethodParams<M>, 'req_id'>,\n    ): TE.TaskEither<DeviceStorageError, EventPayload<E>> => {\n      const requestId = createRequestId();\n      return pipe(\n        request<M, ('device_storage_failed' | E)[]>(method, ['device_storage_failed', event], {\n          params: { ...params, req_id: requestId },\n          capture: (event => {\n            return 'payload' in event ? event.payload.req_id === requestId : true;\n          }) as Request2CaptureFn<('device_storage_failed' | E)[]>,\n        }),\n        TE.chain(response => (\n          response.event === 'device_storage_failed'\n            ? TE.left(new DeviceStorageMethodError(response.payload.error || 'UNKNOWN_ERROR'))\n            : TE.right(response.payload as EventPayload<E>)\n        )),\n      );\n    };\n\n    this.getItemFp = wrapSupportedTask(key => {\n      return pipe(\n        invokeMethod('web_app_device_storage_get_key', 'device_storage_key_received', { key }),\n        TE.map(payload => payload.value),\n      );\n    });\n    this.setItemFp = wrapSupportedTask((key, value) => {\n      return pipe(\n        invokeMethod('web_app_device_storage_save_key', 'device_storage_key_saved', { key, value }),\n        TE.map(() => undefined),\n      );\n    });\n    this.deleteItemFp = wrapSupportedTask(key => {\n      return this.setItemFp(key, null);\n    });\n    this.clearFp = wrapSupportedTask(() => {\n      return pipe(\n        invokeMethod('web_app_device_storage_clear', 'device_storage_cleared', {}),\n        TE.map(() => undefined),\n      );\n    });\n\n    this.getItem = throwifyWithChecksFp(this.getItemFp);\n    this.setItem = throwifyWithChecksFp(this.setItemFp);\n    this.deleteItem = throwifyWithChecksFp(this.deleteItemFp);\n    this.clear = throwifyWithChecksFp(this.clearFp);\n  }\n\n  /**\n    * Retrieves an item using its key.\n    * @since Mini Apps v9.0\n    */\n  readonly getItemFp: WithChecksFp<\n    (key: string) => TE.TaskEither<DeviceStorageError, string | null>,\n    true\n  >;\n\n  /**\n   * @see getItemFp\n   */\n  readonly getItem: WithChecks<(key: string) => Promise<string | null>, true>;\n\n  /**\n    * Sets a new item in the storage.\n    * @since Mini Apps v9.0\n    */\n  readonly setItemFp: WithChecksFp<\n    (key: string, value: string | null) => TE.TaskEither<DeviceStorageError, void>,\n    true\n  >;\n\n  /**\n   * @see setItemFp\n   */\n  readonly setItem: WithChecks<(key: string, value: string | null) => Promise<void>, true>;\n\n  /**\n    * Removes a key from the storage.\n    * @since Mini Apps v9.0\n    */\n  readonly deleteItemFp: WithChecksFp<\n    (key: string) => TE.TaskEither<DeviceStorageError, void>,\n    true\n  >;\n\n  /**\n   * @see deleteItemFp\n   */\n  readonly deleteItem: WithChecks<(key: string) => Promise<void>, true>;\n\n  /**\n    * Removes all keys from the storage.\n    * @since Mini Apps v9.0\n    */\n  readonly clearFp: WithChecksFp<() => TE.TaskEither<DeviceStorageError, void>, true>;\n\n  /**\n   * @see clearFp\n   */\n  readonly clear: WithChecks<() => Promise<void>, true>;\n}\n","import { createFnOption } from '@/fn-options/createFnOption.js';\nimport { createRequestId } from '@/globals/createRequestId.js';\n\nexport interface WithCreateRequestId {\n  /**\n   * A function generating a request identifier.\n   */\n  createRequestId: () => string;\n}\n\nexport const withCreateRequestId = createFnOption<WithCreateRequestId>({ createRequestId });\n","import { pipe } from 'fp-ts/function';\n\nimport { sharedFeatureOptions } from '@/fn-options/sharedFeatureOptions.js';\nimport { withCreateRequestId } from '@/fn-options/withCreateRequestId.js';\nimport { withRequest } from '@/fn-options/withRequest.js';\nimport { withVersion } from '@/fn-options/withVersion.js';\n\nimport { DeviceStorage } from './DeviceStorage.js';\n\nexport const deviceStorage = new DeviceStorage(pipe(\n  sharedFeatureOptions(),\n  withVersion,\n  withRequest,\n  withCreateRequestId,\n));\n","import type { EmojiStatusAccessRequestedStatus, RequestError } from '@tma.js/bridge';\nimport * as TE from 'fp-ts/TaskEither';\nimport { pipe } from 'fp-ts/function';\n\nimport {\n  sharedFeatureOptions,\n  type SharedFeatureOptions,\n} from '@/fn-options/sharedFeatureOptions.js';\nimport { withRequest, type WithRequest } from '@/fn-options/withRequest.js';\nimport { withVersion, type WithVersion } from '@/fn-options/withVersion.js';\nimport type { AsyncOptions } from '@/types.js';\nimport { throwifyWithChecksFp } from '@/with-checks/throwifyWithChecksFp.js';\nimport { withChecksFp } from '@/with-checks/withChecksFp.js';\n\ninterface CreateOptions extends SharedFeatureOptions, WithVersion, WithRequest {\n}\n\nfunction create({ request, ...rest }: CreateOptions) {\n  return withChecksFp((\n    options: AsyncOptions,\n  ): TE.TaskEither<RequestError, EmojiStatusAccessRequestedStatus> => {\n    return pipe(\n      request('web_app_request_emoji_status_access', 'emoji_status_access_requested', options),\n      TE.map(response => response.status),\n    );\n  }, { ...rest, requires: 'web_app_request_emoji_status_access', returns: 'task' });\n}\n\n/**\n * Shows a native popup requesting permission for the bot to manage user's emoji status.\n * @param options - additional options.\n * @returns Emoji status access status.\n * @since Mini Apps v8.0\n * @example\n * const status = await requestEmojiStatusAccess();\n */\nexport const requestEmojiStatusAccessFp = create(pipe(\n  sharedFeatureOptions(),\n  withVersion,\n  withRequest,\n));\n\n/**\n * @see requestEmojiStatusAccessFp\n */\nexport const requestEmojiStatusAccess = throwifyWithChecksFp(requestEmojiStatusAccessFp);\n","import { RequestError } from '@tma.js/bridge';\nimport * as TE from 'fp-ts/TaskEither';\nimport { pipe } from 'fp-ts/function';\n\nimport { SetEmojiStatusError } from '@/errors.js';\nimport {\n  type SharedFeatureOptions,\n  sharedFeatureOptions,\n} from '@/fn-options/sharedFeatureOptions.js';\nimport { withRequest, type WithRequest } from '@/fn-options/withRequest.js';\nimport { withVersion, type WithVersion } from '@/fn-options/withVersion.js';\nimport type { AsyncOptions } from '@/types.js';\nimport { throwifyWithChecksFp } from '@/with-checks/throwifyWithChecksFp.js';\nimport { withChecksFp } from '@/with-checks/withChecksFp.js';\n\nexport interface SetEmojiStatusOptions extends AsyncOptions {\n  duration?: number;\n}\n\ninterface CreateOptions extends SharedFeatureOptions, WithRequest, WithVersion {\n}\n\nfunction create({ request, ...rest }: CreateOptions) {\n  return withChecksFp((\n    customEmojiId: string,\n    options?: SetEmojiStatusOptions,\n  ): TE.TaskEither<RequestError | SetEmojiStatusError, void> => {\n    return pipe(\n      request('web_app_set_emoji_status', ['emoji_status_set', 'emoji_status_failed'], {\n        params: {\n          custom_emoji_id: customEmojiId,\n          duration: (options || {}).duration,\n        },\n        ...options,\n      }),\n      TE.chainW(response => (\n        response.event === 'emoji_status_failed'\n          ? TE.left(new SetEmojiStatusError(response.payload.error))\n          : TE.right(undefined)\n      )),\n    );\n  }, {\n    ...rest,\n    requires: 'web_app_set_emoji_status',\n    returns: 'task',\n  });\n}\n\n/**\n * Opens a dialog allowing the user to set the specified custom emoji as their status.\n * @returns Nothing if status set was successful.\n * @param options - additional options.\n * @since Mini Apps v8.0\n * @example\n * pipe(\n *   setEmojiStatusFp('5361800828313167608'),\n *   TE.match(error => {\n *     console.error('Error occurred', error);\n *   }, () => {\n *     console.log('Status set');\n *   }),\n * );\n * const statusSet = await setEmojiStatus('5361800828313167608');\n */\nexport const setEmojiStatusFp = create(pipe(\n  sharedFeatureOptions(),\n  withRequest,\n  withVersion,\n));\n\n/**\n * @see setEmojiStatusFp\n */\nexport const setEmojiStatus = throwifyWithChecksFp(setEmojiStatusFp);\n","import type {\n  ImpactHapticFeedbackStyle,\n  NotificationHapticFeedbackType,\n  PostEventError,\n} from '@tma.js/bridge';\nimport type { Computed } from '@tma.js/signals';\nimport * as E from 'fp-ts/Either';\n\nimport type { SharedFeatureOptions } from '@/fn-options/sharedFeatureOptions.js';\nimport type { WithPostEvent } from '@/fn-options/withPostEvent.js';\nimport type { WithVersion } from '@/fn-options/withVersion.js';\nimport { createIsSupportedSignal } from '@/helpers/createIsSupportedSignal.js';\nimport { throwifyWithChecksFp } from '@/with-checks/throwifyWithChecksFp.js';\nimport { createWithChecksFp, type WithChecksFp, type WithChecks } from '@/with-checks/withChecksFp.js';\n\ntype HapticFeedbackEither = E.Either<PostEventError, void>;\n\nexport interface HapticFeedbackOptions extends WithVersion, WithPostEvent, SharedFeatureOptions {\n}\n\n/**\n * @since Mini Apps v6.1\n */\nexport class HapticFeedback {\n  constructor({ postEvent, isTma, version }: HapticFeedbackOptions) {\n    const HAPTIC_METHOD_NAME = 'web_app_trigger_haptic_feedback';\n    const wrapSupported = createWithChecksFp({\n      requires: HAPTIC_METHOD_NAME,\n      isTma,\n      version,\n      returns: 'plain',\n    });\n\n    this.isSupported = createIsSupportedSignal(HAPTIC_METHOD_NAME, version);\n    this.impactOccurredFp = wrapSupported(style => {\n      return postEvent(HAPTIC_METHOD_NAME, { type: 'impact', impact_style: style });\n    });\n    this.notificationOccurredFp = wrapSupported(type => {\n      return postEvent(HAPTIC_METHOD_NAME, { type: 'notification', notification_type: type });\n    });\n    this.selectionChangedFp = wrapSupported(() => {\n      return postEvent(HAPTIC_METHOD_NAME, { type: 'selection_change' });\n    });\n\n    this.impactOccurred = throwifyWithChecksFp(this.impactOccurredFp);\n    this.notificationOccurred = throwifyWithChecksFp(this.notificationOccurredFp);\n    this.selectionChanged = throwifyWithChecksFp(this.selectionChangedFp);\n  }\n\n  /**\n   * Signal indicating if the component is supported.\n   */\n  readonly isSupported: Computed<boolean>;\n\n  /**\n   * A method that tells if an impact occurred. The Telegram app may play the\n   * appropriate haptics based on style value passed.\n   * @param style - impact style.\n   * @since Mini Apps v6.1\n   */\n  impactOccurredFp: WithChecksFp<(style: ImpactHapticFeedbackStyle) => HapticFeedbackEither, true>;\n\n  /**\n   * @see impactOccurredFp\n   */\n  impactOccurred: WithChecks<(style: ImpactHapticFeedbackStyle) => void, true>;\n\n  /**\n   * A method tells that a task or action has succeeded, failed, or produced\n   * a warning. The Telegram app may play the appropriate haptics based on type\n   * value passed.\n   * @param type - notification type.\n   * @since Mini Apps v6.1\n   */\n  notificationOccurredFp: WithChecksFp<\n    (type: NotificationHapticFeedbackType) => HapticFeedbackEither,\n    true\n  >;\n\n  /**\n   * @see notificationOccurredFp\n   */\n  notificationOccurred: WithChecks<(type: NotificationHapticFeedbackType) => void, true>;\n\n  /**\n   * A method tells that the user has changed a selection. The Telegram app may\n   * play the appropriate haptics.\n   *\n   * Do not use this feedback when the user makes or confirms a selection; use\n   * it only when the selection changes.\n   * @since Mini Apps v6.1\n   */\n  selectionChangedFp: WithChecksFp<() => HapticFeedbackEither, true>;\n\n  /**\n   * @see selectionChangedFp\n   */\n  selectionChanged: WithChecks<() => void, true>;\n}\n","import { pipe } from 'fp-ts/function';\n\nimport { HapticFeedback } from '@/features/HapticFeedback/HapticFeedback.js';\nimport { sharedFeatureOptions } from '@/fn-options/sharedFeatureOptions.js';\nimport { withPostEvent } from '@/fn-options/withPostEvent.js';\nimport { withVersion } from '@/fn-options/withVersion.js';\n\nexport const hapticFeedback = new HapticFeedback(pipe(\n  sharedFeatureOptions(),\n  withPostEvent,\n  withVersion,\n));\n","import type { PostEventError } from '@tma.js/bridge';\nimport type * as E from 'fp-ts/Either';\nimport { pipe } from 'fp-ts/function';\n\nimport {\n  sharedFeatureOptions,\n  type SharedFeatureOptions,\n} from '@/fn-options/sharedFeatureOptions.js';\nimport { withPostEvent, type WithPostEvent } from '@/fn-options/withPostEvent.js';\nimport { withVersion, type WithVersion } from '@/fn-options/withVersion.js';\nimport { throwifyWithChecksFp } from '@/with-checks/throwifyWithChecksFp.js';\nimport { withChecksFp } from '@/with-checks/withChecksFp.js';\n\ninterface CreateOptions extends SharedFeatureOptions, WithPostEvent, WithVersion {\n}\n\nfunction create({ postEvent, ...rest }: CreateOptions) {\n  return withChecksFp((): E.Either<PostEventError, void> => {\n    return postEvent('web_app_add_to_home_screen');\n  }, { ...rest, requires: 'web_app_add_to_home_screen', returns: 'either' });\n}\n\n/**\n * Prompts the user to add the Mini App to the home screen.\n * @since Mini Apps v8.0\n */\nexport const addToHomeScreenFp = create(pipe(\n  sharedFeatureOptions(),\n  withVersion,\n  withPostEvent,\n));\n\n/**\n * @see addToHomeScreenFp\n */\nexport const addToHomeScreen = throwifyWithChecksFp(addToHomeScreenFp);\n","import type { HomeScreenStatus, RequestError } from '@tma.js/bridge';\nimport * as TE from 'fp-ts/TaskEither';\nimport { pipe } from 'fp-ts/function';\n\nimport {\n  sharedFeatureOptions,\n  type SharedFeatureOptions,\n} from '@/fn-options/sharedFeatureOptions.js';\nimport { withRequest, type WithRequest } from '@/fn-options/withRequest.js';\nimport { withVersion, type WithVersion } from '@/fn-options/withVersion.js';\nimport type { AsyncOptions } from '@/types.js';\nimport { throwifyWithChecksFp } from '@/with-checks/throwifyWithChecksFp.js';\nimport { withChecksFp } from '@/with-checks/withChecksFp.js';\n\ninterface CreateOptions extends SharedFeatureOptions, WithRequest, WithVersion {\n}\n\nfunction create({ request, ...rest }: CreateOptions) {\n  return withChecksFp((options?: AsyncOptions): TE.TaskEither<RequestError, HomeScreenStatus> => {\n    return pipe(\n      request('web_app_check_home_screen', 'home_screen_checked', options),\n      TE.map(response => response.status || 'unknown'),\n    );\n  }, { ...rest, requires: 'web_app_check_home_screen', returns: 'task' });\n}\n\n/**\n * Sends a request to the native Telegram application to check if the current mini\n * application is added to the device's home screen.\n * @param options - additional options.\n * @since Mini Apps v8.0\n */\nexport const checkHomeScreenStatusFp = create(pipe(\n  sharedFeatureOptions(),\n  withVersion,\n  withRequest,\n));\n\n/**\n * @see checkHomeScreenStatusFp\n */\nexport const checkHomeScreenStatus = throwifyWithChecksFp(checkHomeScreenStatusFp);\n","import { computed, type Computed, signal } from '@tma.js/signals';\nimport { throwifyFpFn } from '@tma.js/toolkit';\nimport type { InitData as InitDataType } from '@tma.js/types';\nimport * as E from 'fp-ts/Either';\nimport * as O from 'fp-ts/Option';\nimport { pipe } from 'fp-ts/function';\n\nexport interface InitDataOptions<Err> {\n  /**\n   * Retrieves init data from the current environment.\n   */\n  retrieveInitData: () => E.Either<Err, O.Option<{\n    raw: string;\n    obj: InitDataType;\n  }>>;\n}\n\nexport class InitData<Err extends Error> {\n  constructor({ retrieveInitData }: InitDataOptions<Err>) {\n    this.restoreFp = () => {\n      return pipe(\n        retrieveInitData(),\n        E.map(O.match(() => undefined, ({ raw, obj }) => {\n          this._state.set(obj);\n          this._raw.set(raw);\n        })),\n      );\n    };\n    this.restore = throwifyFpFn(this.restoreFp);\n  }\n\n  private fromState<K extends keyof InitDataType>(key: K): Computed<InitDataType[K] | undefined> {\n    return computed(() => {\n      const s = this._state();\n      return s ? s[key] : undefined;\n    });\n  }\n\n  private readonly _state = signal<InitDataType>();\n\n  private readonly _raw = signal<string>();\n\n  /**\n   * Complete component state.\n   */\n  readonly state = computed(this._state);\n\n  /**\n   * @see InitDataType.auth_date\n   */\n  readonly authDate = this.fromState('auth_date');\n\n  /**\n   * @see InitDataType.can_send_after\n   */\n  readonly canSendAfter = this.fromState('can_send_after');\n\n  /**\n   * Date after which it is allowed to call\n   * the [answerWebAppQuery](https://core.telegram.org/bots/api#answerwebappquery) method.\n   */\n  readonly canSendAfterDate = computed(() => {\n    const authDateValue = this.authDate();\n    const canSendAfterValue = this.canSendAfter();\n\n    return canSendAfterValue && authDateValue\n      ? new Date(authDateValue.getTime() + (canSendAfterValue * 1000))\n      : undefined;\n  });\n\n  /**\n   * @see InitDataType.chat\n   */\n  readonly chat = this.fromState('chat');\n\n  /**\n   * @see InitDataType.chat_type\n   */\n  readonly chatType = this.fromState('chat_type');\n\n  /**\n   * @see InitDataType.chat_instance\n   */\n  readonly chatInstance = this.fromState('chat_instance');\n\n  /**\n   * @see InitDataType.hash\n   */\n  readonly hash = this.fromState('hash');\n\n  /**\n   * @see InitDataType.query_id\n   */\n  readonly queryId = this.fromState('query_id');\n\n  /**\n   * Raw representation of init data.\n   */\n  readonly raw = computed(this._raw);\n\n  /**\n   * @see InitDataType.receiver\n   */\n  readonly receiver = this.fromState('receiver');\n\n  /**\n   * @see InitDataType.signature\n   */\n  readonly signature = this.fromState('signature');\n\n  /**\n   * @see InitDataType.start_param\n   */\n  readonly startParam = this.fromState('start_param');\n\n  /**\n   * @see InitDataType.user\n   */\n  readonly user = this.fromState('user');\n\n  /**\n   * Restores the component state.\n   */\n  readonly restoreFp: () => E.Either<Err, void>;\n\n  /**\n   * @see restoreFp\n   */\n  readonly restore: () => void;\n}\n","import { retrieveRawInitDataFp, retrieveLaunchParamsFp } from '@tma.js/bridge';\nimport * as E from 'fp-ts/Either';\nimport * as O from 'fp-ts/Option';\nimport { pipe } from 'fp-ts/function';\n\nimport { InitData } from '@/features/InitData/InitData.js';\n\nexport const initData = new InitData({\n  retrieveInitData() {\n    return pipe(\n      E.Do,\n      E.bindW('obj', () => pipe(\n        retrieveLaunchParamsFp(),\n        E.map(({ tgWebAppData }) => {\n          return tgWebAppData ? O.some(tgWebAppData) : O.none;\n        }),\n      )),\n      E.bindW('raw', retrieveRawInitDataFp),\n      E.map(({ obj, raw }) => {\n        return pipe(\n          O.Do,\n          O.bind('obj', () => obj),\n          O.bind('raw', () => raw),\n        );\n      }),\n    );\n  },\n});\n","import type { InvoiceStatus, RequestError } from '@tma.js/bridge';\nimport { computed, type Computed, signal } from '@tma.js/signals';\nimport { BetterPromise } from 'better-promises';\nimport * as TE from 'fp-ts/TaskEither';\nimport { pipe } from 'fp-ts/function';\n\nimport { ConcurrentCallError, InvalidArgumentsError } from '@/errors.js';\nimport type { SharedFeatureOptions } from '@/fn-options/sharedFeatureOptions.js';\nimport type { WithRequest } from '@/fn-options/withRequest.js';\nimport type { WithVersion } from '@/fn-options/withVersion.js';\nimport { createIsSupportedSignal } from '@/helpers/createIsSupportedSignal.js';\nimport type { AsyncOptions } from '@/types.js';\nimport { throwifyWithChecksFp } from '@/with-checks/throwifyWithChecksFp.js';\nimport { createWithChecksFp, type WithChecks, type WithChecksFp } from '@/with-checks/withChecksFp.js';\n\ntype InvoiceTask<E, T> = TE.TaskEither<RequestError | ConcurrentCallError | E, T>;\n\nexport interface InvoiceOptions extends WithVersion, WithRequest, SharedFeatureOptions {\n}\n\n/**\n * @since Mini Apps v6.1\n */\nexport class Invoice {\n  constructor({ version, request, isTma }: InvoiceOptions) {\n    const wrapSupportedTask = createWithChecksFp({\n      version,\n      isTma,\n      requires: 'web_app_open_invoice',\n      returns: 'task',\n    });\n\n    const isOpened = signal(false);\n    const toggleClosed = () => {\n      isOpened.set(false);\n    };\n\n    this.isSupported = createIsSupportedSignal('web_app_open_invoice', version);\n    this.isOpened = computed(isOpened);\n    this.openSlugFp = wrapSupportedTask((slug, options) => {\n      return pipe(\n        this.isOpened()\n          ? TE.left(new ConcurrentCallError('Invoice is already opened'))\n          : TE.right(undefined as never),\n        TE.chain(() => {\n          isOpened.set(true);\n          return request('web_app_open_invoice', 'invoice_closed', {\n            ...options,\n            params: { slug },\n            capture: data => slug === data.slug,\n          });\n        }),\n        TE.mapBoth(err => {\n          toggleClosed();\n          return err;\n        }, data => {\n          toggleClosed();\n          return data.status;\n        }),\n      );\n    });\n    this.openUrlFp = wrapSupportedTask((url, options) => {\n      const { hostname, pathname } = new URL(url, window.location.href);\n      if (hostname !== 't.me') {\n        return TE.left(new InvalidArgumentsError(`Link has unexpected hostname: ${hostname}`));\n      }\n\n      // Valid examples:\n      // \"/invoice/my-slug\"\n      // \"/$my-slug\"\n      const match = pathname.match(/^\\/(\\$|invoice\\/)([A-Za-z0-9\\-_=]+)$/);\n      if (!match) {\n        return TE.left(new InvalidArgumentsError(\n          'Expected to receive a link with a pathname in format \"/invoice/{slug}\" or \"/${slug}\"',\n        ));\n      }\n      return this.openSlugFp(match[2], options);\n    });\n\n    this.openUrl = throwifyWithChecksFp(this.openUrlFp);\n    this.openSlug = throwifyWithChecksFp(this.openSlugFp);\n  }\n\n  /**\n   * Signal indicating if any invoice is currently opened.\n   */\n  readonly isOpened: Computed<boolean>;\n\n  /**\n   * Signal indicating if the component is supported.\n   */\n  readonly isSupported: Computed<boolean>;\n\n  /**\n   * Opens an invoice using its slug or URL.\n   * @param slug - invoice slug.\n   * @param options - additional options.\n   * @since Mini Apps v6.1\n   * @example\n   * const status = await invoice.openSlug('kJNFS331');\n   */\n  readonly openSlugFp: WithChecksFp<\n    (slug: string, options?: AsyncOptions) => InvoiceTask<never, InvoiceStatus>,\n    true\n  >;\n\n  /**\n   * @see openSlugFp\n   */\n  readonly openSlug: WithChecks<\n    (slug: string, options?: AsyncOptions) => BetterPromise<InvoiceStatus>,\n    true\n  >;\n\n  /**\n   * Opens an invoice using its URL.\n   * @param url - invoice URL.\n   * @param options - additional options.\n   * @since Mini Apps v6.1\n   * @example\n   * const status = await invoice.openUrl('https://t.me/$kJNFS331');\n   */\n  readonly openUrlFp: WithChecksFp<\n    (url: string, options?: AsyncOptions) => (\n      InvoiceTask<InvalidArgumentsError, InvoiceStatus>\n    ),\n    true\n  >;\n\n  /**\n   * @see openUrlFp\n   */\n  readonly openUrl: WithChecks<\n    (url: string, options?: AsyncOptions) => BetterPromise<InvoiceStatus>,\n    true\n  >;\n}\n","import { pipe } from 'fp-ts/function';\n\nimport { Invoice } from '@/features/Invoice/Invoice.js';\nimport { sharedFeatureOptions } from '@/fn-options/sharedFeatureOptions.js';\nimport { withRequest } from '@/fn-options/withRequest.js';\nimport { withVersion } from '@/fn-options/withVersion.js';\n\nexport const invoice = new Invoice(pipe(sharedFeatureOptions(), withRequest, withVersion));\n","import type { OpenLinkBrowser, PostEventError } from '@tma.js/bridge';\nimport * as E from 'fp-ts/Either';\nimport { pipe } from 'fp-ts/function';\n\nimport { InvalidArgumentsError } from '@/errors.js';\nimport {\n  type SharedFeatureOptions,\n  sharedFeatureOptions,\n} from '@/fn-options/sharedFeatureOptions.js';\nimport { type WithPostEvent, withPostEvent } from '@/fn-options/withPostEvent.js';\nimport { throwifyWithChecksFp } from '@/with-checks/throwifyWithChecksFp.js';\nimport { withChecksFp } from '@/with-checks/withChecksFp.js';\n\ninterface CreateOptions extends SharedFeatureOptions, WithPostEvent {\n}\n\nexport interface OpenLinkOptions {\n  /**\n   * Attempts to use the instant view mode.\n   */\n  tryInstantView?: boolean;\n  /**\n   * A preferred browser to open the link in.\n   */\n  tryBrowser?: OpenLinkBrowser;\n}\n\nexport type OpenLinkError = PostEventError | InvalidArgumentsError;\n\nfunction create({ postEvent, ...rest }: CreateOptions) {\n  return withChecksFp((\n    url: string | URL,\n    options: OpenLinkOptions = {},\n  ): E.Either<OpenLinkError, void> => {\n    if (typeof url === 'string') {\n      try {\n        url = new URL(url);\n      } catch (e) {\n        return E.left(new InvalidArgumentsError(`\"${url.toString()}\" is invalid URL`, e));\n      }\n    }\n    return postEvent('web_app_open_link', {\n      url: url.toString(),\n      try_browser: options.tryBrowser,\n      try_instant_view: options.tryInstantView,\n    });\n  }, { ...rest, returns: 'either' });\n}\n\n/**\n * Opens a link.\n *\n * The Mini App will not be closed.\n *\n * Note that this method can be called only in response to the user\n * interaction with the Mini App interface (e.g. click inside the Mini App or on the main button).\n * @param url - URL to be opened.\n * @param options - additional options.\n * @example\n * openLink('https://google.com', {\n *   tryInstantView: true,\n *   tryBrowser: 'chrome',\n * });\n */\nexport const openLinkFp = create(pipe(\n  sharedFeatureOptions(),\n  withPostEvent,\n));\n\nexport const openLink = throwifyWithChecksFp(openLinkFp);\n","import { supports, type PostEventError } from '@tma.js/bridge';\nimport * as E from 'fp-ts/Either';\nimport { pipe } from 'fp-ts/function';\n\nimport { InvalidArgumentsError } from '@/errors.js';\nimport {\n  type SharedFeatureOptions,\n  sharedFeatureOptions,\n} from '@/fn-options/sharedFeatureOptions.js';\nimport { withPostEvent, type WithPostEvent } from '@/fn-options/withPostEvent.js';\nimport { withVersion, type WithVersion } from '@/fn-options/withVersion.js';\nimport { access } from '@/helpers/access.js';\nimport { throwifyWithChecksFp } from '@/with-checks/throwifyWithChecksFp.js';\nimport { withChecksFp } from '@/with-checks/withChecksFp.js';\n\ninterface CreateOptions extends SharedFeatureOptions, WithPostEvent, WithVersion {\n}\n\nexport type OpenTelegramLinkError = PostEventError | InvalidArgumentsError;\n\nfunction create({ postEvent, version, ...rest }: CreateOptions) {\n  return withChecksFp((\n    url: string | URL,\n  ): E.Either<OpenTelegramLinkError, void> => {\n    const urlString = url.toString();\n    if (!urlString.match(/^https:\\/\\/t.me\\/.+/)) {\n      return E.left(new InvalidArgumentsError(`\"${urlString}\" is invalid URL`));\n    }\n\n    if (supports('web_app_open_tg_link', access(version))) {\n      url = new URL(url);\n      return postEvent('web_app_open_tg_link', { path_full: url.pathname + url.search });\n    }\n\n    window.location.href = urlString;\n    return E.right(undefined);\n  }, { ...rest, returns: 'either' });\n}\n\n/**\n * Opens a Telegram link inside the Telegram app. The function expects passing a link in a full\n * format using the hostname \"t.me\".\n *\n * The Mini App will be closed.\n * @param url - URL to be opened.\n * @example\n * openTelegramLink('https://t.me/heyqbnk');\n */\nexport const openTelegramLinkFp = create(pipe(\n  sharedFeatureOptions(),\n  withPostEvent,\n  withVersion,\n));\n\n/**\n * @see openTelegramLinkFp\n */\nexport const openTelegramLink = throwifyWithChecksFp(openTelegramLinkFp);\n","import type { PostEventError } from '@tma.js/bridge';\nimport type * as E from 'fp-ts/Either';\n\nimport { openTelegramLinkFp } from '@/features/links/openTelegramLink.js';\nimport {\n  sharedFeatureOptions,\n  type SharedFeatureOptions,\n} from '@/fn-options/sharedFeatureOptions.js';\nimport { throwifyWithChecksFp } from '@/with-checks/throwifyWithChecksFp.js';\nimport { withChecksFp } from '@/with-checks/withChecksFp.js';\n\ninterface CreateOptions extends SharedFeatureOptions {\n  openTelegramLink: (url: string) => E.Either<PostEventError, void>;\n}\n\nexport type ShareURLError = PostEventError;\n\nfunction create({ openTelegramLink, ...rest }: CreateOptions) {\n  return withChecksFp((url: string, text?: string): E.Either<ShareURLError, void> => {\n    return openTelegramLink(\n      'https://t.me/share/url?' + new URLSearchParams({ url, text: text || '' })\n        .toString()\n        // By default, URL search params encode spaces with \"+\".\n        // We are replacing them with \"%20\", because plus symbols are working incorrectly\n        // in Telegram.\n        .replace(/\\+/g, '%20'),\n    );\n  }, { ...rest, returns: 'either' });\n}\n\n/**\n * Shares the specified URL with the passed to the chats, selected by user.\n * After being called, it closes the mini application.\n *\n * This method uses Telegram's Share Links.\n * @param url - URL to share.\n * @param text - text to append after the URL.\n * @see https://core.telegram.org/api/links#share-links\n * @see https://core.telegram.org/widgets/share#custom-buttons\n */\nexport const shareURLFp = create({\n  ...sharedFeatureOptions(),\n  openTelegramLink: openTelegramLinkFp,\n});\n\n/**\n * @see shareURLFp\n */\nexport const shareURL = throwifyWithChecksFp(shareURLFp);\n","import type { EventPayload, RequestError, PostEventError } from '@tma.js/bridge';\nimport type { Computed } from '@tma.js/signals';\nimport type { Maybe } from '@tma.js/toolkit';\nimport { BetterPromise } from 'better-promises';\nimport * as E from 'fp-ts/Either';\nimport * as TE from 'fp-ts/TaskEither';\nimport { pipe } from 'fp-ts/function';\n\nimport { AsyncMountable } from '@/composables/AsyncMountable.js';\nimport { Stateful } from '@/composables/Stateful.js';\nimport type {\n  LocationManagerOptions,\n  LocationManagerRequestLocationResponse,\n  LocationManagerState,\n} from '@/features/LocationManager/types.js';\nimport { createIsSupportedSignal } from '@/helpers/createIsSupportedSignal.js';\nimport type { AsyncOptions } from '@/types.js';\nimport { throwifyWithChecksFp } from '@/with-checks/throwifyWithChecksFp.js';\nimport { createWithChecksFp, type WithChecks, type WithChecksFp } from '@/with-checks/withChecksFp.js';\n\nfunction eventToState(event: EventPayload<'location_checked'>): LocationManagerState {\n  let available = false;\n  let accessRequested: Maybe<boolean>;\n  let accessGranted: Maybe<boolean>;\n  if (event.available) {\n    available = true;\n    accessRequested = event.access_requested;\n    accessGranted = event.access_granted;\n  }\n  return {\n    available,\n    accessGranted: accessGranted || false,\n    accessRequested: accessRequested || false,\n  };\n}\n\n/**\n * @since Mini Apps v8.0\n */\nexport class LocationManager {\n  constructor({\n    version,\n    request,\n    postEvent,\n    storage,\n    isTma,\n    isPageReload,\n  }: LocationManagerOptions) {\n    const stateful = new Stateful({\n      initialState: {\n        available: false,\n        accessGranted: false,\n        accessRequested: false,\n      },\n      onChange: storage.set,\n    });\n    const mountable = new AsyncMountable<LocationManagerState, RequestError>({\n      isPageReload,\n      restoreState: storage.get,\n      onMounted: stateful.setState,\n      initialState(options) {\n        return pipe(\n          request('web_app_check_location', 'location_checked', options),\n          TE.map(eventToState),\n        );\n      },\n    });\n\n    const wrapOptions = { version, requires: 'web_app_check_location', isTma } as const;\n    const wrapSupportedEither = createWithChecksFp({\n      ...wrapOptions,\n      returns: 'either',\n    });\n    const wrapSupportedTask = createWithChecksFp({\n      ...wrapOptions,\n      returns: 'task',\n    });\n    const wrapMountedTask = createWithChecksFp({\n      ...wrapOptions,\n      returns: 'task',\n      isMounted: mountable.isMounted,\n    });\n\n    this.isAvailable = stateful.getter('available');\n    this.isAccessRequested = stateful.getter('accessRequested');\n    this.isAccessGranted = stateful.getter('accessGranted');\n    this.isSupported = createIsSupportedSignal('web_app_check_location', version);\n    this.isMounted = mountable.isMounted;\n    this.state = stateful.state;\n\n    this.unmount = mountable.unmount;\n    this.mountFp = wrapSupportedTask(mountable.mount);\n    this.openSettingsFp = wrapSupportedEither(() => {\n      return postEvent('web_app_open_location_settings');\n    });\n    this.requestLocationFp = wrapMountedTask(options => {\n      return pipe(\n        request('web_app_request_location', 'location_requested', options),\n        TE.map(response => {\n          if (!response.available) {\n            stateful.setState({ available: false });\n            return null;\n          }\n          // eslint-disable-next-line @typescript-eslint/no-unused-vars\n          const { available, ...rest } = response;\n          return rest;\n        }),\n      );\n    });\n\n    this.mount = throwifyWithChecksFp(this.mountFp);\n    this.openSettings = throwifyWithChecksFp(this.openSettingsFp);\n    this.requestLocation = throwifyWithChecksFp(this.requestLocationFp);\n  }\n\n  /**\n   * Complete location manager state.\n   */\n  readonly state: Computed<LocationManagerState>;\n\n  /**\n   * Signal indicating whether the location data tracking is currently available.\n   */\n  readonly isAvailable: Computed<boolean>;\n\n  /**\n   * Signal indicating whether the user has granted the app permission to track location data.\n   */\n  readonly isAccessGranted: Computed<boolean>;\n\n  /**\n   * Signal indicating whether the app has previously requested permission to track location data.\n   */\n  readonly isAccessRequested: Computed<boolean>;\n\n  /**\n   * Signal indicating if the component is currently mounted.\n   */\n  readonly isMounted: Computed<boolean>;\n\n  /**\n   * Signal indicating if the component is supported.\n   */\n  readonly isSupported: Computed<boolean>;\n\n  /**\n   * Opens the location access settings for bots. Useful when you need to request location access\n   * from users who haven't granted it yet.\n   *\n   * Note that this method can be called only in response to user interaction with the Mini App\n   * interface (e.g., a click inside the Mini App or on the main button).\n   * @since Mini Apps v8.0\n   */\n  readonly openSettingsFp: WithChecksFp<() => E.Either<PostEventError, void>, true>;\n\n  /**\n   * @see openSettingsFp\n   */\n  readonly openSettings: WithChecks<() => void, true>;\n\n  /**\n   * Requests location data.\n   * @since Mini Apps v8.0\n   * @returns Promise with location data or null it access was not granted.\n   */\n  readonly requestLocationFp: WithChecksFp<\n    (options?: AsyncOptions) => (\n      TE.TaskEither<RequestError, LocationManagerRequestLocationResponse | null>\n    ),\n    true\n  >;\n\n  /**\n   * @see requestLocationFp\n   */\n  readonly requestLocation: WithChecks<\n    (options?: AsyncOptions) => BetterPromise<LocationManagerRequestLocationResponse | null>,\n    true\n  >;\n\n  /**\n   * Mounts the component restoring its state.\n   * @since Mini Apps v8.0\n   */\n  readonly mountFp: WithChecksFp<\n    (options?: AsyncOptions) => TE.TaskEither<RequestError, void>,\n    true\n  >;\n\n  /**\n   * @see mountFp\n   */\n  readonly mount: WithChecks<(options?: AsyncOptions) => BetterPromise<void>, true>;\n\n  /**\n   * Unmounts the component.\n   */\n  readonly unmount: () => void;\n}\n","import { pipe } from 'fp-ts/function';\n\nimport { LocationManager } from '@/features/LocationManager/LocationManager.js';\nimport type { LocationManagerState } from '@/features/LocationManager/types.js';\nimport { sharedFeatureOptions } from '@/fn-options/sharedFeatureOptions.js';\nimport { withPostEvent } from '@/fn-options/withPostEvent.js';\nimport { withRequest } from '@/fn-options/withRequest.js';\nimport { withStateRestore } from '@/fn-options/withStateRestore.js';\nimport { withVersion } from '@/fn-options/withVersion.js';\n\nexport const locationManager = new LocationManager(pipe(\n  sharedFeatureOptions(),\n  withPostEvent,\n  withVersion,\n  withRequest,\n  withStateRestore<LocationManagerState>('locationManager'),\n));\n","import type { PostEventError } from '@tma.js/bridge';\nimport { computed, type Computed } from '@tma.js/signals';\nimport type { RGB } from '@tma.js/types';\nimport * as E from 'fp-ts/Either';\n\nimport { Button, type ButtonOptions } from '@/composables/Button.js';\nimport { access } from '@/helpers/access.js';\nimport type { MaybeAccessor } from '@/types.js';\nimport type { WithChecks, WithChecksFp } from '@/with-checks/withChecksFp.js';\n\ntype MainButtonEither = E.Either<PostEventError, void>;\n\nexport interface MainButtonState {\n  isVisible: boolean;\n  bgColor?: RGB;\n  hasShineEffect: boolean;\n  isEnabled: boolean;\n  isLoaderVisible: boolean;\n  text: string;\n  textColor?: RGB;\n}\n\nexport interface MainButtonOptions extends Omit<\n  ButtonOptions<MainButtonState, 'web_app_setup_main_button'>,\n  'initialState' | 'method' | 'payload' | 'version'\n> {\n  /**\n   * Default values for different kinds of the button properties.\n   */\n  defaults: {\n    bgColor: MaybeAccessor<RGB>;\n    textColor: MaybeAccessor<RGB>;\n  };\n}\n\nexport class MainButton {\n  constructor({ defaults, ...options }: MainButtonOptions) {\n    const button = new Button({\n      ...options,\n      version: '100',\n      initialState: {\n        hasShineEffect: false,\n        isEnabled: true,\n        isLoaderVisible: false,\n        isVisible: false,\n        text: 'Continue',\n      },\n      method: 'web_app_setup_main_button',\n      payload: state => ({\n        has_shine_effect: state.hasShineEffect,\n        is_visible: state.isVisible,\n        is_active: state.isEnabled,\n        is_progress_visible: state.isLoaderVisible,\n        text: state.text,\n        color: state.bgColor,\n        text_color: state.textColor,\n      }),\n    });\n\n    const withDefault = (\n      field: 'bgColor' | 'textColor',\n      getDefault: MaybeAccessor<RGB>,\n    ) => {\n      const fromState = button.stateGetter(field);\n      return computed(() => fromState() || access(getDefault));\n    };\n\n    this.bgColor = withDefault('bgColor', defaults.bgColor);\n    this.textColor = withDefault('textColor', defaults.textColor);\n    this.hasShineEffect = button.stateGetter('hasShineEffect');\n    this.isEnabled = button.stateGetter('isEnabled');\n    this.isLoaderVisible = button.stateGetter('isLoaderVisible');\n    this.text = button.stateGetter('text');\n    this.isVisible = button.stateGetter('isVisible');\n    this.isMounted = button.isMounted;\n    this.state = button.state;\n\n    [this.setBgColor, this.setBgColorFp] = button.stateSetters('bgColor');\n    [this.setTextColor, this.setTextColorFp] = button.stateSetters('textColor');\n    [\n      [this.disableShineEffect, this.disableShineEffectFp],\n      [this.enableShineEffect, this.enableShineEffectFp],\n    ] = button.stateBoolSetters('hasShineEffect');\n    [\n      [this.disable, this.disableFp],\n      [this.enable, this.enableFp],\n    ] = button.stateBoolSetters('isEnabled');\n    [\n      [this.hideLoader, this.hideLoaderFp],\n      [this.showLoader, this.showLoaderFp],\n    ] = button.stateBoolSetters('isLoaderVisible');\n\n    [this.setText, this.setTextFp] = button.stateSetters('text');\n    [[this.hide, this.hideFp], [this.show, this.showFp]] = button.stateBoolSetters('isVisible');\n    this.setParams = button.setState;\n    this.setParamsFp = button.setStateFp;\n    this.onClick = button.onClick;\n    this.onClickFp = button.onClickFp;\n    this.offClick = button.offClick;\n    this.offClickFp = button.offClickFp;\n    this.mount = button.mount;\n    this.mountFp = button.mountFp;\n    this.unmount = button.unmount;\n  }\n\n  //#region Properties.\n  /**\n   * The button background color.\n   */\n  readonly bgColor: Computed<RGB>;\n\n  /**\n   * True if the button has a shining effect.\n   */\n  readonly hasShineEffect: Computed<boolean>;\n\n  /**\n   * True if the button is clickable.\n   */\n  readonly isEnabled: Computed<boolean>;\n\n  /**\n   * True if the button loader is visible.\n   */\n  readonly isLoaderVisible: Computed<boolean>;\n\n  /**\n   * True if the button is visible.\n   */\n  readonly isVisible: Computed<boolean>;\n\n  /**\n   * Signal indicating if the component is currently mounted.\n   */\n  readonly isMounted: Computed<boolean>;\n\n  /**\n   * The complete button state.\n   */\n  readonly state: Computed<MainButtonState>;\n\n  /**\n   * The button displayed text.\n   */\n  readonly text: Computed<string>;\n\n  /**\n   * The button text color.\n   *\n   * Note that this value is computed based on the external defaults. For\n   * example, if not explicitly set, this value may be equal to one of theme\n   * params colors.\n   */\n  readonly textColor: Computed<RGB>;\n  //#endregion\n\n  //#region Methods.\n  /**\n   * Shows the button.\n   */\n  readonly showFp: WithChecksFp<() => MainButtonEither, false>;\n\n  /**\n   * @see showFp\n   */\n  readonly show: WithChecks<() => void, false>;\n\n  /**\n   * Hides the button.\n   */\n  readonly hideFp: WithChecksFp<() => MainButtonEither, false>;\n\n  /**\n   * @see hideFp\n   */\n  readonly hide: WithChecks<() => void, false>;\n\n  /**\n   * Enables the button.\n   */\n  readonly enableFp: WithChecksFp<() => MainButtonEither, false>;\n\n  /**\n   * @see enableFp\n   */\n  readonly enable: WithChecks<() => void, false>;\n\n  /**\n   * Enables the button.\n   */\n  readonly enableShineEffectFp: WithChecksFp<() => MainButtonEither, false>;\n\n  /**\n   * @see enableShineEffectFp\n   */\n  readonly enableShineEffect: WithChecks<() => void, false>;\n\n  /**\n   * Disables the button.\n   */\n  readonly disableFp: WithChecksFp<() => MainButtonEither, false>;\n\n  /**\n   * @see disableFp\n   */\n  readonly disable: WithChecks<() => void, false>;\n\n  /**\n   * Enables the button.\n   */\n  readonly disableShineEffectFp: WithChecksFp<() => MainButtonEither, false>;\n\n  /**\n   * @see disableShineEffectFp\n   */\n  readonly disableShineEffect: WithChecks<() => void, false>;\n\n  /**\n   * Updates the button background color.\n   */\n  readonly setBgColorFp: WithChecksFp<(value: RGB) => MainButtonEither, false>;\n\n  /**\n   * @see setBgColorFp\n   */\n  readonly setBgColor: WithChecks<(value: RGB) => void, false>;\n\n  /**\n   * Updates the button text color.\n   */\n  readonly setTextColorFp: WithChecksFp<(value: RGB) => MainButtonEither, false>;\n\n  /**\n   * @see setTextColorFp\n   */\n  readonly setTextColor: WithChecks<(value: RGB) => void, false>;\n\n  /**\n   * Updates the button text.\n   */\n  readonly setTextFp: WithChecksFp<(value: string) => MainButtonEither, false>;\n\n  /**\n   * @see setTextFp\n   */\n  readonly setText: WithChecks<(value: string) => void, false>;\n\n  /**\n   * Shows the button loader.\n   */\n  readonly showLoaderFp: WithChecksFp<() => MainButtonEither, false>;\n\n  /**\n   * @see showLoaderFp\n   */\n  readonly showLoader: WithChecks<() => void, false>;\n\n  /**\n   * Hides the button loader.\n   */\n  readonly hideLoaderFp: WithChecksFp<() => MainButtonEither, false>;\n\n  /**\n   * @see hideLoaderFp\n   */\n  readonly hideLoader: WithChecks<() => void, false>;\n\n  /**\n   * Updates the button state.\n   * @param state - updates to apply.\n   * @example\n   * button.setParams({\n   *   text: 'Submit',\n   *   isEnabled: true,\n   *   hasShineEffect: true,\n   * });\n   */\n  readonly setParamsFp: WithChecksFp<(state: Partial<MainButtonState>) => MainButtonEither, false>;\n\n  readonly setParams: WithChecks<(state: Partial<MainButtonState>) => void, false>;\n\n  /**\n   * Mounts the component restoring its state.\n   */\n  readonly mountFp: WithChecksFp<() => void, false>;\n\n  /**\n   * @see mountFp\n   */\n  readonly mount: WithChecks<() => void, false>;\n\n  /**\n   * Unmounts the component.\n   */\n  readonly unmount: () => void;\n\n  /**\n   * Adds a new button listener.\n   * @param listener - event listener.\n   * @param once - should the listener be called only once.\n   * @returns A function to remove bound listener.\n   * @example\n   * const off = button.onClick(() => {\n   *   console.log('User clicked the button');\n   *   off();\n   * });\n   */\n  readonly onClickFp: WithChecksFp<(listener: VoidFunction, once?: boolean) => VoidFunction, false>;\n\n  /**\n   * @see onClickFp\n   */\n  readonly onClick: WithChecks<(listener: VoidFunction, once?: boolean) => VoidFunction, false>;\n\n  /**\n   * Removes the button click listener.\n   * @param listener - event listener.\n   * @param once - should the listener be called only once.\n   * @example\n   * function listener() {\n   *   console.log('User clicked the button');\n   *   button.offClick(listener);\n   * }\n   * button.onClick(listener);\n   */\n  readonly offClickFp: WithChecksFp<(listener: VoidFunction, once?: boolean) => void, false>;\n\n  /**\n   * @see offClickFp\n   */\n  readonly offClick: WithChecks<(listener: VoidFunction, once?: boolean) => void, false>;\n  //#endregion\n}\n","/**\n * Sets CSS variable globally.\n * @param name - variable name.\n * @param value - variable value.\n */\nexport function setCssVar(name: string, value: string | null): void {\n  document.documentElement.style.setProperty(name, value);\n}\n\n/**\n * Deletes specified CSS variable.\n * @param name - variable name.\n */\nexport function deleteCssVar(name: string): void {\n  document.documentElement.style.removeProperty(name);\n}\n","import { throwifyFpFn } from '@tma.js/toolkit';\nimport { toRGBFullFp } from '@tma.js/transformers';\nimport * as E from 'fp-ts/Either';\nimport { pipe } from 'fp-ts/function';\n\n/**\n * @param color - color in any format acceptable by the `toRGB` function.\n * @returns True if the color is recognized as dark.\n * @see toRGB\n */\nexport function isColorDarkFp(color: string): E.Either<Error, boolean> {\n  return pipe(\n    toRGBFullFp(color),\n    E.map(rgb => {\n      // Actual formula: hsp = Math.sqrt(0.299 * r * r + 0.587 * g * g + 0.114 * b * b)\n      // See: https://stackoverflow.com/a/596243\n      return Math.sqrt(\n        [0.299, 0.587, 0.114].reduce<number>((acc, modifier, idx) => {\n          // Extract part of #RRGGBB pattern and convert it to DEC.\n          const dec = parseInt(rgb.slice(1 + (idx * 2), 1 + ((idx + 1) * 2)), 16);\n          return acc + (dec * dec * modifier);\n        }, 0),\n      ) < 120;\n    }),\n  );\n}\n\n/**\n * @see isColorDarkFp\n */\nexport const isColorDark = throwifyFpFn(isColorDarkFp);\n","import type { EventListener } from '@tma.js/bridge';\nimport { computed, type Computed, signal } from '@tma.js/signals';\nimport { snakeToKebab } from '@tma.js/toolkit';\nimport type { ThemeParams as ThemeParamsType, RGB } from '@tma.js/types';\nimport * as E from 'fp-ts/Either';\n\nimport { Mountable } from '@/composables/Mountable.js';\nimport { Stateful } from '@/composables/Stateful.js';\nimport { CSSVarsBoundError } from '@/errors.js';\nimport type { SharedFeatureOptions } from '@/fn-options/sharedFeatureOptions.js';\nimport type { WithStateRestore } from '@/fn-options/withStateRestore.js';\nimport { access } from '@/helpers/access.js';\nimport { deleteCssVar, setCssVar } from '@/helpers/css-vars.js';\nimport { isColorDark } from '@/helpers/isColorDark.js';\nimport type { MaybeAccessor } from '@/types.js';\nimport { throwifyWithChecksFp } from '@/with-checks/throwifyWithChecksFp.js';\nimport {\n  createWithChecksFp,\n  type WithChecks,\n  type WithChecksFp,\n} from '@/with-checks/withChecksFp.js';\n\nexport type ThemeParamsState = ThemeParamsType;\n\nexport interface ThemeParamsOptions extends WithStateRestore<ThemeParamsState>,\n  SharedFeatureOptions {\n  /**\n   * Removes a theme change listener.\n   * @param listener - a listener to remove.\n   */\n  offChange: (listener: EventListener<'theme_changed'>) => void;\n  /**\n   * Adds a theme change listener.\n   * @returns A function to remove listener.\n   * @param listener - a listener to add.\n   */\n  onChange: (listener: EventListener<'theme_changed'>) => void;\n  /**\n   * Theme parameters initial state.\n   */\n  initialState: MaybeAccessor<ThemeParamsType>;\n}\n\nexport interface ThemeParamsGetCssVarNameFn {\n  /**\n   * @param property - palette key.\n   * @returns Computed complete CSS variable name.\n   */\n  (property: Extract<keyof ThemeParamsType, string>): string;\n}\n\nexport class ThemeParams {\n  constructor({\n    initialState,\n    onChange,\n    offChange,\n    isTma,\n    storage,\n    isPageReload,\n  }: ThemeParamsOptions) {\n    const stateful = new Stateful<ThemeParamsState>({\n      initialState: {},\n      onChange: storage.set,\n    });\n    const listener: EventListener<'theme_changed'> = event => {\n      stateful.setState(event.theme_params);\n    };\n    const mountable = new Mountable<ThemeParamsType>({\n      initialState: () => E.right(access(initialState)),\n      isPageReload,\n      onMounted(state) {\n        stateful.setState(state);\n        onChange(listener);\n      },\n      onUnmounted() {\n        offChange(listener);\n      },\n      restoreState: storage.get,\n    });\n\n    const wrapOptions = { isTma, returns: 'either' } as const;\n    const wrapSupportedEither = createWithChecksFp(wrapOptions);\n    const wrapMountedEither = createWithChecksFp({\n      ...wrapOptions,\n      isMounted: mountable.isMounted,\n    });\n\n    // Colors.\n    this.accentTextColor = stateful.getter('accent_text_color');\n    this.bgColor = stateful.getter('bg_color');\n    this.buttonColor = stateful.getter('button_color');\n    this.buttonTextColor = stateful.getter('button_text_color');\n    this.bottomBarBgColor = stateful.getter('bottom_bar_bg_color');\n    this.destructiveTextColor = stateful.getter('destructive_text_color');\n    this.headerBgColor = stateful.getter('header_bg_color');\n    this.hintColor = stateful.getter('hint_color');\n    this.linkColor = stateful.getter('link_color');\n    this.secondaryBgColor = stateful.getter('secondary_bg_color');\n    this.sectionBgColor = stateful.getter('section_bg_color');\n    this.sectionHeaderTextColor = stateful.getter('section_header_text_color');\n    this.sectionSeparatorColor = stateful.getter('section_separator_color');\n    this.subtitleTextColor = stateful.getter('subtitle_text_color');\n    this.textColor = stateful.getter('text_color');\n\n    // Other public signals.\n    this.state = stateful.state;\n    this.isMounted = mountable.isMounted;\n    this.bindCssVarsFp = wrapMountedEither(getCSSVarName => {\n      if (this._isCssVarsBound()) {\n        return E.left(new CSSVarsBoundError());\n      }\n      getCSSVarName ||= prop => `--tg-theme-${snakeToKebab(prop)}`;\n\n      const forEachEntry = (fn: (key: string, value: RGB) => void): void => {\n        Object.entries(stateful.state()).forEach(([k, v]) => {\n          v && fn(k, v);\n        });\n      };\n\n      const actualize = (): void => {\n        forEachEntry((k, v) => {\n          setCssVar(getCSSVarName(k), v);\n        });\n      };\n\n      actualize();\n      stateful.state.sub(actualize);\n      this._isCssVarsBound.set(true);\n\n      return E.right(() => {\n        forEachEntry(deleteCssVar);\n        stateful.state.unsub(actualize);\n        this._isCssVarsBound.set(false);\n      });\n    });\n    this.mountFp = wrapSupportedEither(mountable.mount);\n    this.unmount = mountable.unmount;\n\n    this.bindCssVars = throwifyWithChecksFp(this.bindCssVarsFp);\n    this.mount = throwifyWithChecksFp(this.mountFp);\n  }\n\n  //#region Colors.\n  /**\n   * @since v6.10\n   */\n  readonly accentTextColor: Computed<RGB | undefined>;\n\n  readonly bgColor: Computed<RGB | undefined>;\n\n  readonly buttonColor: Computed<RGB | undefined>;\n\n  readonly buttonTextColor: Computed<RGB | undefined>;\n\n  /**\n   * @since v7.10\n   */\n  readonly bottomBarBgColor: Computed<RGB | undefined>;\n\n  readonly destructiveTextColor: Computed<RGB | undefined>;\n\n  /**\n   * @since v6.10\n   */\n  readonly headerBgColor: Computed<RGB | undefined>;\n\n  readonly hintColor: Computed<RGB | undefined>;\n\n  readonly linkColor: Computed<RGB | undefined>;\n\n  readonly secondaryBgColor: Computed<RGB | undefined>;\n\n  /**\n   * @since v6.10\n   */\n  readonly sectionBgColor: Computed<RGB | undefined>;\n\n  /**\n   * @since v6.10\n   */\n  readonly sectionHeaderTextColor: Computed<RGB | undefined>;\n\n  /**\n   * @since v7.6\n   */\n  readonly sectionSeparatorColor: Computed<RGB | undefined>;\n\n  /**\n   * @since v6.10\n   */\n  readonly subtitleTextColor: Computed<RGB | undefined>;\n\n  readonly textColor: Computed<RGB | undefined>;\n  //#endregion\n\n  //#region CSS variables.\n  private readonly _isCssVarsBound = signal(false);\n\n  /**\n   * True if CSS variables are currently bound.\n   */\n  readonly isCssVarsBound = computed(this._isCssVarsBound);\n\n  /**\n   * Creates CSS variables connected with the current theme parameters.\n   *\n   * By default, created CSS variables names are following the pattern \"--tg-theme-{name}\", where\n   * {name} is a theme parameters key name converted from snake case to kebab case.\n   *\n   * Default variables:\n   * - `--tg-theme-bg-color`\n   * - `--tg-theme-secondary-text-color`\n   *\n   * Variables are being automatically updated if theme parameters were changed.\n   *\n   * @param getCSSVarName - function, returning complete CSS variable name for the specified\n   * theme parameters key.\n   * @returns Function to stop updating variables.\n   * @throws {CSSVarsBoundError} CSS variables are already bound\n   * @example Using custom CSS vars generator\n   * themeParams.bindCssVars(key => `--my-prefix-${key}`);\n   */\n  readonly bindCssVarsFp: WithChecksFp<\n    (getCSSVarName?: ThemeParamsGetCssVarNameFn) => E.Either<CSSVarsBoundError, VoidFunction>,\n    false\n  >;\n\n  /**\n   * @see bindCssVarsFp\n   */\n  readonly bindCssVars: WithChecks<\n    (getCSSVarName?: ThemeParamsGetCssVarNameFn) => VoidFunction,\n    false\n  >;\n  //#endregion\n\n  //#region Other public signals.\n  /**\n   * Complete component state.\n   */\n  readonly state: Computed<ThemeParamsType>;\n\n  /**\n   * @returns True if the current color scheme is recognized as dark.\n   * This value is calculated based on the current theme's background color.\n   */\n  readonly isDark = computed(() => {\n    const color = this.bgColor();\n    return !color || isColorDark(color);\n  });\n  //#endregion\n\n  //#region Mounting.\n  /**\n   * Signal indicating if the component is currently mounted.\n   */\n  readonly isMounted: Computed<boolean>;\n\n  /**\n   * Mounts the component restoring its state.\n   */\n  readonly mountFp: WithChecksFp<() => E.Either<never, void>, false>;\n\n  /**\n   * @see mountFp\n   */\n  readonly mount: WithChecks<() => void, false>;\n\n  /**\n   * Unmounts the component.\n   */\n  readonly unmount: () => void;\n  //#endregion\n}\n","import type { ThemeParams } from '@tma.js/types';\n\nimport { createSignal } from '@/globals/signals-registry.js';\n\n/**\n * Mini application's theme parameters.\n */\nexport const themeParams = createSignal<ThemeParams>({});\n","import { on, off } from '@tma.js/bridge';\nimport { pipe } from 'fp-ts/function';\n\nimport { ThemeParams, type ThemeParamsState } from '@/features/ThemeParams/ThemeParams.js';\nimport { sharedFeatureOptions } from '@/fn-options/sharedFeatureOptions.js';\nimport { withStateRestore } from '@/fn-options/withStateRestore.js';\nimport { themeParams as globalThemeParams } from '@/globals/themeParams.js';\n\nexport const themeParams = new ThemeParams({\n  ...pipe(\n    sharedFeatureOptions(),\n    withStateRestore<ThemeParamsState>('themeParams'),\n  ),\n  offChange(listener) {\n    off('theme_changed', listener);\n  },\n  onChange(listener) {\n    on('theme_changed', listener);\n  },\n  initialState: globalThemeParams,\n});\n","import type { EventName } from '@tma.js/bridge';\nimport { pipe } from 'fp-ts/function';\n\nimport { buttonOptions } from '@/fn-options/buttonOptions.js';\n\nexport function bottomButtonOptions<S, D>(\n  storageName: string,\n  trackedClickEvent: EventName,\n  defaults: D,\n) {\n  return pipe(\n    buttonOptions<S>(storageName, trackedClickEvent),\n    obj => ({ ...obj, defaults }),\n  );\n}\n","import { computed } from '@tma.js/signals';\n\nimport { MainButton } from '@/features/MainButton/MainButton.js';\nimport { themeParams } from '@/features/ThemeParams/instance.js';\nimport { bottomButtonOptions } from '@/fn-options/bottomButtonOptions.js';\n\nexport const mainButton = new MainButton(\n  bottomButtonOptions('mainButton', 'main_button_pressed', {\n    bgColor: computed(() => themeParams.buttonColor() || '#2481cc'),\n    textColor: computed(() => themeParams.buttonTextColor() || '#ffffff'),\n  }),\n);\n","import {\n  supports,\n  type PostEventError,\n  type EventPayload,\n  type EventListener,\n} from '@tma.js/bridge';\nimport { type Computed, computed } from '@tma.js/signals';\nimport { signal } from '@tma.js/signals';\nimport { createCbCollector, camelToKebab } from '@tma.js/toolkit';\nimport { isRGB } from '@tma.js/transformers';\nimport type { KnownThemeParamsKey, RGB, ThemeParams } from '@tma.js/types';\nimport * as E from 'fp-ts/Either';\nimport { pipe } from 'fp-ts/function';\n\nimport { Mountable } from '@/composables/Mountable.js';\nimport { Stateful } from '@/composables/Stateful.js';\nimport { CSSVarsBoundError, UnknownThemeParamsKeyError } from '@/errors.js';\nimport type { SharedFeatureOptions } from '@/fn-options/sharedFeatureOptions.js';\nimport type { WithPostEvent } from '@/fn-options/withPostEvent.js';\nimport type { WithStateRestore } from '@/fn-options/withStateRestore.js';\nimport type { WithVersion } from '@/fn-options/withVersion.js';\nimport { access } from '@/helpers/access.js';\nimport { deleteCssVar, setCssVar } from '@/helpers/css-vars.js';\nimport { isColorDark } from '@/helpers/isColorDark.js';\nimport { throwifyWithChecksFp } from '@/with-checks/throwifyWithChecksFp.js';\nimport {\n  createWithChecksFp,\n  type WithChecks,\n  withChecksFp,\n  type WithChecksFp,\n} from '@/with-checks/withChecksFp.js';\n\ntype AnyColor = RGB | KnownThemeParamsKey | string;\n\nexport interface MiniAppState {\n  bgColor: AnyColor;\n  bottomBarColor: AnyColor;\n  headerColor: AnyColor;\n  isActive: boolean;\n}\n\nexport interface MiniAppGetCssVarNameFn {\n  /**\n   * @param property - mini app property.\n   * @returns Computed complete CSS variable name.\n   */\n  (property: 'bgColor' | 'bottomBarColor' | 'headerColor'): string;\n}\n\ntype WithListeners<Handlers extends string, Payload> = {\n  [K in Handlers]: (listener: (payload: Payload) => void) => void;\n};\n\nexport interface MiniAppOptions extends WithPostEvent,\n  WithVersion,\n  WithStateRestore<MiniAppState>,\n  WithListeners<'onVisibilityChanged' | 'offVisibilityChanged', EventPayload<'visibility_changed'>>,\n  SharedFeatureOptions {\n  /**\n   * The current theme parameters.\n   */\n  theme: Computed<ThemeParams>;\n}\n\n/**\n * @since Mini Apps v6.1\n */\nexport class MiniApp {\n  constructor({\n    storage,\n    isPageReload,\n    version,\n    postEvent,\n    isTma,\n    theme,\n    onVisibilityChanged,\n    offVisibilityChanged,\n  }: MiniAppOptions) {\n    //#region Mounting.\n    const visibilityChangedListener: EventListener<'visibility_changed'> = event => {\n      stateful.setState({ isActive: event.is_visible });\n    };\n    const themeChangedListener = (theme: ThemeParams) => {\n      // Sometimes we may have the following colors to be specified as some theme params keys.\n      // Due to the Mini Apps nature, we are not really allowed to do that, but we want to provide\n      // such an opportunity to developers.\n      //\n      // So if the developer specified some field as a reference to some theme params key, we\n      // should find an according RGB color for it and send it to the Telegram client. We have one\n      // exclusion here - the method 'web_app_set_header_color' may accept values 'bg_color'\n      // and 'secondary_bg_color'. Other methods accept only RGB values.\n      ([\n        [this.headerColor, 'web_app_set_header_color'],\n        [this.bgColor, 'web_app_set_background_color'],\n        [this.bottomBarColor, 'web_app_set_bottom_bar_color'],\n      ] as const).forEach(([signal, method]) => {\n        const color = signal();\n        // The value is already in RGB format, we have nothing to update here.\n        if (isRGB(color)) {\n          return;\n        }\n        // The real RGB value should only be extracted for the following methods:\n        // - 'web_app_set_background_color'\n        // - 'web_app_set_bottom_bar_color'\n        // We should also do it in case of the 'web_app_set_header_color' method, if the value\n        // specified is not 'bg_color' and 'secondary_bg_color' (unknown key to\n        // the Telegram client).\n        if (\n          method !== 'web_app_set_header_color'\n          || !['bg_color', 'secondary_bg_color'].includes(color)\n        ) {\n          const rgb = theme[color];\n          if (rgb) {\n            postEvent(method, { color: rgb });\n          }\n        }\n      });\n    };\n    const mountable = new Mountable({\n      initialState() {\n        return E.right({\n          bgColor: 'bg_color',\n          headerColor: 'header_bg_color',\n          bottomBarColor: 'bottom_bar_bg_color',\n          isActive: true,\n        });\n      },\n      isPageReload,\n      onMounted: state => {\n        onVisibilityChanged(visibilityChangedListener);\n        theme.sub(themeChangedListener);\n        stateful.setState(state);\n      },\n      onUnmounted() {\n        offVisibilityChanged(visibilityChangedListener);\n        theme.unsub(themeChangedListener);\n      },\n      restoreState: storage.get,\n    });\n    this.isMounted = mountable.isMounted;\n    this.mountFp = withChecksFp(() => {\n      const nothing = () => undefined;\n      return pipe(mountable.mount(), E.match(nothing, nothing));\n    }, { isTma, returns: 'plain' });\n    this.mount = throwifyWithChecksFp(this.mountFp);\n    this.unmount = mountable.unmount;\n    //#endregion\n\n    //#region State.\n    const stateful = new Stateful({\n      initialState: {\n        bgColor: 'bg_color',\n        bottomBarColor: 'bottom_bar_bg_color',\n        headerColor: 'bg_color',\n        isActive: false,\n      },\n      onChange: storage.set,\n    });\n    this.state = stateful.state;\n\n    const rgbBasedOn = (color: AnyColor): RGB | undefined => {\n      return isRGB(color) ? color : access(theme)[color];\n    };\n    const computedRgbBasedOn = (signal: Computed<AnyColor>): Computed<RGB | undefined> => {\n      return computed(() => rgbBasedOn(signal()));\n    };\n    //#endregion\n\n    //#region Other properties.\n    this.isActive = stateful.getter('isActive');\n    this.isSupported = computed(() => {\n      return ([\n        'web_app_set_header_color',\n        'web_app_set_background_color',\n        'web_app_set_bottom_bar_color',\n      ] as const).some(method => supports(method, access(version)));\n    });\n    //#endregion\n\n    //#region Css vars.\n    const isCssVarsBound = signal(false);\n    this.isCssVarsBound = computed(isCssVarsBound);\n    this.bindCssVarsFp = withChecksFp(getCSSVarName => {\n      if (isCssVarsBound()) {\n        return E.left(new CSSVarsBoundError());\n      }\n      const [addCleanup, cleanup] = createCbCollector(() => {\n        isCssVarsBound.set(false);\n      });\n\n      const bind = (cssVar: string, signal: Computed<RGB | undefined>) => {\n        const update = () => {\n          setCssVar(cssVar, signal() || null);\n        };\n        update();\n        addCleanup(signal.sub(update), deleteCssVar.bind(null, cssVar));\n      };\n\n      getCSSVarName ||= prop => `--tg-${camelToKebab(prop)}`;\n      bind(getCSSVarName('bgColor'), this.bgColorRgb);\n      bind(getCSSVarName('bottomBarColor'), this.bottomBarColorRgb);\n      bind(getCSSVarName('headerColor'), this.headerColorRgb);\n\n      isCssVarsBound.set(true);\n\n      return E.right(cleanup);\n    }, { isTma, returns: 'either', isMounted: this.isMounted });\n    this.bindCssVars = throwifyWithChecksFp(this.bindCssVarsFp);\n    //#endregion\n\n    //#region Colors.\n    type GenColorToolsetResult<K extends Exclude<keyof MiniAppState, 'isActive'>> = [\n      rawColor: Computed<AnyColor>,\n      rgbColor: Computed<RGB | undefined>,\n      throwing: WithChecks<\n        (color: AnyColor) => void,\n        true,\n        K extends 'headerColor' ? 'rgb' : never\n      >,\n      fp: WithChecksFp<\n        (color: AnyColor) => E.Either<UnknownThemeParamsKeyError | PostEventError, void>,\n        true,\n        K extends 'headerColor' ? 'rgb' : never\n      >,\n    ];\n    const genColorToolset = <K extends Exclude<keyof MiniAppState, 'isActive'>>(\n      stateKey: K,\n    ): GenColorToolsetResult<K> => {\n      const rawColor = stateful.getter(stateKey);\n      const rgbColor = computedRgbBasedOn(rawColor);\n      const method = ({\n        headerColor: 'web_app_set_header_color',\n        bgColor: 'web_app_set_background_color',\n        bottomBarColor: 'web_app_set_bottom_bar_color',\n      } as const)[stateKey];\n\n      const fp = withChecksFp(\n        (color: AnyColor): E.Either<UnknownThemeParamsKeyError | PostEventError, void> => {\n          if (color === rawColor()) {\n            return E.right(undefined);\n          }\n          if (\n            method === 'web_app_set_header_color'\n            && (color === 'bg_color' || color === 'secondary_bg_color')\n          ) {\n            return pipe(\n              postEvent('web_app_set_header_color', { color_key: color }),\n              E.map(() => {\n                stateful.setState({ [stateKey]: color });\n              }),\n            );\n          }\n          const rgb = rgbBasedOn(color);\n          return pipe(\n            rgb\n              ? postEvent(method, { color: rgb })\n              : E.left(new UnknownThemeParamsKeyError(color)),\n            E.map(() => {\n              stateful.setState({ [stateKey]: color });\n            }),\n          );\n        },\n        {\n          isTma,\n          version,\n          requires: method,\n          isMounted: this.isMounted,\n          returns: 'either',\n          supports: stateKey === 'headerColor'\n            ? {\n              rgb: {\n                method: 'web_app_set_header_color',\n                param: 'color',\n                shouldCheck: isRGB,\n              },\n            }\n            : undefined,\n        },\n      );\n\n      return [rawColor, rgbColor, throwifyWithChecksFp(fp), fp] as GenColorToolsetResult<K>;\n    };\n    [\n      this.bgColor,\n      this.bgColorRgb,\n      this.setBgColor,\n      this.setBgColorFp,\n    ] = genColorToolset('bgColor');\n    [\n      this.headerColor,\n      this.headerColorRgb,\n      this.setHeaderColor,\n      this.setHeaderColorFp,\n    ] = genColorToolset('headerColor');\n    [\n      this.bottomBarColor,\n      this.bottomBarColorRgb,\n      this.setBottomBarColor,\n      this.setBottomBarColorFp,\n    ] = genColorToolset('bottomBarColor');\n    //#endregion\n\n    //#region Other methods.\n    const withBasicEither = createWithChecksFp({ isTma, returns: 'either' });\n    this.closeFp = withBasicEither(returnBack => {\n      return postEvent('web_app_close', { return_back: returnBack });\n    });\n    this.close = throwifyWithChecksFp(this.closeFp);\n\n    this.readyFp = withBasicEither(() => postEvent('web_app_ready'));\n    this.ready = throwifyWithChecksFp(this.readyFp);\n    //#endregion\n  }\n\n  //#region Other properties.\n  /**\n   * Signal indicating if the component is supported.\n   */\n  readonly isSupported: Computed<boolean>;\n\n  /**\n   * True if the current Mini App background color is recognized as dark.\n   */\n  readonly isDark = computed(() => {\n    const color = this.bgColorRgb();\n    return color ? isColorDark(color) : false;\n  });\n\n  /**\n   * Signal indicating if the mini app is currently active.\n   */\n  readonly isActive: Computed<boolean>;\n\n  /**\n   * Complete component state.\n   */\n  readonly state: Computed<MiniAppState>;\n  //#endregion\n\n  //#region CSS variables.\n  /**\n   * True if the CSS variables are currently bound.\n   */\n  readonly isCssVarsBound: Computed<boolean>;\n\n  /**\n   * Creates CSS variables connected with the mini app.\n   *\n   * Default variables:\n   * - `--tg-bg-color`\n   * - `--tg-header-color`\n   * - `--tg-bottom-bar-color`\n   *\n   * Variables are being automatically updated if theme parameters were changed.\n   *\n   * @param getCSSVarName - function, returning complete CSS variable name for the specified\n   * mini app key.\n   * @returns Function to stop updating variables.\n   * @example Using no arguments\n   * miniApp.bindCssVars();\n   * @example Using custom CSS vars generator\n   * miniApp.bindCssVars(key => `--my-prefix-${key}`);\n   */\n  readonly bindCssVarsFp: WithChecksFp<\n    (getCssVarName?: MiniAppGetCssVarNameFn) => E.Either<CSSVarsBoundError, VoidFunction>,\n    false\n  >;\n\n  readonly bindCssVars: WithChecks<(getCssVarName?: MiniAppGetCssVarNameFn) => VoidFunction, false>;\n  //#endregion\n\n  //#region Mounting.\n  /**\n   * Signal indicating if the component is mounted.\n   */\n  readonly isMounted: Computed<boolean>;\n\n  /**\n   * Mounts the component.\n   *\n   * This function restores the component state and is automatically saving it in the local storage\n   * if it changed.\n   * @since Mini Apps v6.1\n   */\n  readonly mountFp: WithChecksFp<() => void, false>;\n\n  /**\n   * @see mount\n   */\n  readonly mount: WithChecks<() => void, false>;\n\n  /**\n   * Unmounts the component.\n   */\n  readonly unmount: () => void;\n  //#endregion\n\n  //#region Background color.\n  /**\n   * The Mini App background color.\n   *\n   * Represents an RGB color, or theme parameters key, like \"bg_color\", \"secondary_bg_color\", etc.\n   *\n   * Note that using a theme parameters key, background color becomes bound to the current\n   * theme parameters, making it automatically being updated whenever theme parameters change.\n   * In order to remove this bind, use an explicit RGB color.\n   */\n  readonly bgColor: Computed<AnyColor>;\n\n  /**\n   * RGB representation of the background color.\n   *\n   * This value requires the Theme Params component to be mounted to extract a valid RGB value\n   * of the color key.\n   */\n  readonly bgColorRgb: Computed<RGB | undefined>;\n\n  /**\n   * Updates the mini app background color.\n   * @since Mini Apps v6.1\n   */\n  readonly setBgColorFp: WithChecksFp<\n    (color: AnyColor) => E.Either<PostEventError | UnknownThemeParamsKeyError, void>,\n    true\n  >;\n\n  /**\n   * @see setBgColorFp\n   */\n  readonly setBgColor: WithChecks<(color: AnyColor) => void, true>;\n  //#endregion\n\n  //#region Header color.\n  /**\n   * The Mini App header color.\n   */\n  readonly headerColor: Computed<AnyColor>;\n\n  /**\n   * RGB representation of the header color.\n   *\n   * This value requires the Theme Params component to be mounted to extract a valid RGB value\n   * of the color key.\n   */\n  readonly headerColorRgb: Computed<RGB | undefined>;\n\n  /**\n   * Updates the mini app header color.\n   * @since Mini Apps v6.1\n   */\n  readonly setHeaderColorFp: WithChecksFp<\n    (color: AnyColor) => E.Either<PostEventError | UnknownThemeParamsKeyError, void>,\n    true,\n    'rgb'\n  >;\n\n  /**\n   * @see setHeaderColorFp\n   */\n  readonly setHeaderColor: WithChecks<(color: AnyColor) => void, true, 'rgb'>;\n  //#endregion\n\n  //#region Bottom bar background color.\n  /**\n   * The Mini App bottom bar background color.\n   */\n  readonly bottomBarColor: Computed<AnyColor>;\n\n  /**\n   * RGB representation of the bottom bar background color.\n   *\n   * This value requires the Theme Params component to be mounted to extract a valid RGB value\n   * of the color key.\n   */\n  readonly bottomBarColorRgb: Computed<RGB | undefined>;\n\n  /**\n   * Updates the mini app bottom bar bg color.\n   * @since Mini Apps v7.10\n   */\n  readonly setBottomBarColorFp: WithChecksFp<\n    (color: AnyColor) => E.Either<PostEventError | UnknownThemeParamsKeyError, void>,\n    true\n  >;\n\n  /**\n   * @see setBottomBarColorFp\n   */\n  readonly setBottomBarColor: WithChecks<(color: AnyColor) => void, true>;\n  //#endregion\n\n  //#region Other methods.\n  /**\n   * Closes the Mini App.\n   * @param returnBack - should the client return to the previous activity.\n   */\n  readonly closeFp: WithChecksFp<(returnBack?: boolean) => E.Either<PostEventError, void>, false>;\n\n  /**\n   * @see closeFp\n   */\n  readonly close: WithChecks<(returnBack?: boolean) => void, false>;\n\n  /**\n   * Informs the Telegram app that the Mini App is ready to be displayed.\n   *\n   * It is recommended to call this method as early as possible, as soon as all\n   * essential interface elements loaded.\n   *\n   * Once this method is called, the loading placeholder is hidden and the Mini\n   * App shown.\n   *\n   * If the method is not called, the placeholder will be hidden only when the\n   * page was fully loaded.\n   */\n  readonly readyFp: WithChecksFp<() => E.Either<PostEventError, void>, false>;\n\n  /**\n   * @see readyFp\n   */\n  readonly ready: WithChecks<() => void, false>;\n  //#endregion\n}\n","import { on, off } from '@tma.js/bridge';\nimport { pipe } from 'fp-ts/function';\n\nimport { MiniApp, type MiniAppState } from '@/features/MiniApp/MiniApp.js';\nimport { themeParams } from '@/features/ThemeParams/instance.js';\nimport { sharedFeatureOptions } from '@/fn-options/sharedFeatureOptions.js';\nimport { withPostEvent } from '@/fn-options/withPostEvent.js';\nimport { withStateRestore } from '@/fn-options/withStateRestore.js';\nimport { withVersion } from '@/fn-options/withVersion.js';\n\nexport const miniApp = new MiniApp({\n  ...pipe(\n    sharedFeatureOptions(),\n    withPostEvent,\n    withVersion,\n    withStateRestore<MiniAppState>('miniApp'),\n  ),\n  offVisibilityChanged(listener) {\n    off('visibility_changed', listener);\n  },\n  onVisibilityChanged(listener) {\n    on('visibility_changed', listener);\n  },\n  theme: themeParams.state,\n});\n","import type { PopupParams, PopupButton } from '@tma.js/bridge';\nimport * as E from 'fp-ts/Either';\n\nimport { InvalidArgumentsError } from '@/errors.js';\nimport type { ShowOptions } from '@/features/Popup/types.js';\n\n/**\n * Prepares popup parameters before sending them to native app.\n * @param params - popup parameters.\n */\nexport function prepareParams(params: ShowOptions): E.Either<InvalidArgumentsError, PopupParams> {\n  const message = params.message.trim();\n  const title = (params.title || '').trim();\n  const paramsButtons = params.buttons || [];\n\n  if (title.length > 64) {\n    return E.left(new InvalidArgumentsError(`Invalid title: ${title}`));\n  }\n  if (!message || message.length > 256) {\n    return E.left(new InvalidArgumentsError(`Invalid message: ${message}`));\n  }\n  if (paramsButtons.length > 3) {\n    return E.left(new InvalidArgumentsError(`Invalid buttons count: ${paramsButtons.length}`));\n  }\n\n  const buttons: PopupButton[] = [];\n  if (!paramsButtons.length) {\n    buttons.push({ type: 'close', id: '' });\n  } else {\n    for (let i = 0; i < paramsButtons.length; i++) {\n      const button = paramsButtons[i];\n      const id = button.id || '';\n      if (id.length > 64) {\n        return E.left(new InvalidArgumentsError(`Button with index ${i} has invalid id: ${id}`));\n      }\n\n      if (!button.type || button.type === 'default' || button.type === 'destructive') {\n        const text = button.text.trim();\n        if (!text || text.length > 64) {\n          return E.left(new InvalidArgumentsError(`Button with index ${i} has invalid text: ${text}`));\n        }\n        buttons.push({ type: button.type, text, id });\n      } else {\n        buttons.push({ type: button.type, id });\n      }\n    }\n  }\n\n  return E.right({ title, message, buttons });\n}\n","import type { RequestError } from '@tma.js/bridge';\nimport { type Computed, signal, computed } from '@tma.js/signals';\nimport type { BetterPromise } from 'better-promises';\nimport * as TE from 'fp-ts/TaskEither';\nimport { pipe } from 'fp-ts/function';\n\nimport { ConcurrentCallError, type InvalidArgumentsError } from '@/errors.js';\nimport { prepareParams } from '@/features/Popup/prepareParams.js';\nimport type { ShowOptions } from '@/features/Popup/types.js';\nimport type { SharedFeatureOptions } from '@/fn-options/sharedFeatureOptions.js';\nimport type { WithRequest } from '@/fn-options/withRequest.js';\nimport type { WithVersion } from '@/fn-options/withVersion.js';\nimport { createIsSupportedSignal } from '@/helpers/createIsSupportedSignal.js';\nimport { throwifyWithChecksFp } from '@/with-checks/throwifyWithChecksFp.js';\nimport { createWithChecksFp, type WithChecksFp, type WithChecks } from '@/with-checks/withChecksFp.js';\n\nexport interface PopupOptions extends SharedFeatureOptions, WithVersion, WithRequest {\n}\n\n/**\n * @since Mini Apps v6.2\n */\nexport class Popup {\n  constructor({ version, isTma, request }: PopupOptions) {\n    const isOpened = signal(false);\n    const toggleClosed = () => {\n      isOpened.set(false);\n    };\n\n    const wrapSupportedTask = createWithChecksFp({\n      version,\n      isTma,\n      requires: 'web_app_open_popup',\n      returns: 'task',\n    });\n\n    this.isSupported = createIsSupportedSignal('web_app_open_popup', version);\n    this.isOpened = computed(isOpened);\n    this.showFp = wrapSupportedTask(options => {\n      return pipe(\n        this.isOpened()\n          ? TE.left(new ConcurrentCallError('A popup is already opened'))\n          : TE.right(undefined as never),\n        TE.chainW(() => TE.fromEither(prepareParams(options))),\n        TE.chain(preparedOptions => {\n          isOpened.set(true);\n          return request('web_app_open_popup', 'popup_closed', {\n            ...options,\n            params: preparedOptions,\n          });\n        }),\n        TE.mapBoth(\n          err => {\n            toggleClosed();\n            return err;\n          },\n          response => {\n            toggleClosed();\n            return response.button_id;\n          },\n        ),\n      );\n    });\n    this.show = throwifyWithChecksFp(this.showFp);\n  }\n\n  /**\n   * Signal indicating if any popup is currently opened.\n   */\n  readonly isOpened: Computed<boolean>;\n\n  /**\n   * Signal indicating if the component is supported.\n   */\n  readonly isSupported: Computed<boolean>;\n\n  /**\n   * A method that shows a native popup described by the `params` argument.\n   * The promise will be resolved when the popup is closed. Resolved value will have\n   * an identifier of the pressed button.\n   *\n   * If a user clicked outside the popup or clicked the top right popup close\n   * button, null will be resolved.\n   *\n   * @param options - popup parameters.\n   * @since Mini Apps v6.2\n   * @example\n   * pipe(\n   *   popup.showFp({\n   *     title: 'Confirm action',\n   *     message: 'Do you really want to buy this burger?',\n   *     buttons: [\n   *       { id: 'yes', text: 'Yes' },\n   *       { id: 'no', type: 'destructive', text: 'No' },\n   *     ],\n   *   }),\n   *   TE.map(buttonId => {\n   *     console.log('User clicked a button with ID', buttonId);\n   *   }),\n   * );\n   */\n  readonly showFp: WithChecksFp<\n    (options: ShowOptions) => TE.TaskEither<\n      RequestError | InvalidArgumentsError | ConcurrentCallError,\n      string | undefined\n    >,\n    true\n  >;\n\n  /**\n   * @see showFp\n   */\n  readonly show: WithChecks<(options: ShowOptions) => BetterPromise<string | undefined>, true>;\n}\n","import { pipe } from 'fp-ts/function';\n\nimport { Popup } from '@/features/Popup/Popup.js';\nimport { sharedFeatureOptions } from '@/fn-options/sharedFeatureOptions.js';\nimport { withRequest } from '@/fn-options/withRequest.js';\nimport { withVersion } from '@/fn-options/withVersion.js';\n\nexport const popup = new Popup(pipe(sharedFeatureOptions(), withRequest, withVersion));\n","import type { PhoneRequestedStatus, RequestError } from '@tma.js/bridge';\nimport * as TE from 'fp-ts/TaskEither';\nimport { pipe } from 'fp-ts/function';\n\nimport {\n  sharedFeatureOptions,\n  type SharedFeatureOptions,\n} from '@/fn-options/sharedFeatureOptions.js';\nimport { withRequest, type WithRequest } from '@/fn-options/withRequest.js';\nimport { withVersion, type WithVersion } from '@/fn-options/withVersion.js';\nimport type { AsyncOptions } from '@/types.js';\nimport { throwifyWithChecksFp } from '@/with-checks/throwifyWithChecksFp.js';\nimport { withChecksFp } from '@/with-checks/withChecksFp.js';\n\ninterface CreateOptions extends SharedFeatureOptions, WithRequest, WithVersion {\n}\n\nexport type RequestPhoneAccessError = RequestError;\n\nfunction create({ request, ...rest }: CreateOptions) {\n  return withChecksFp((\n    options?: AsyncOptions,\n  ): TE.TaskEither<RequestPhoneAccessError, PhoneRequestedStatus> => {\n    return pipe(\n      request('web_app_request_phone', 'phone_requested', options),\n      TE.map(response => response.status),\n    );\n  }, { ...rest, requires: 'web_app_request_phone', returns: 'task' });\n}\n\n/**\n * Requests current user phone access. Method returns promise, which resolves\n * status of the request. In case, user accepted the request, Mini App bot will receive\n * the according notification.\n *\n * To obtain the retrieved information instead, utilize the `requestContact` method.\n * @param options - additional options.\n * @since Mini Apps v6.9\n * @see requestContact\n */\nexport const requestPhoneAccessFp = create(pipe(\n  sharedFeatureOptions(),\n  withVersion,\n  withRequest,\n));\n\n/**\n * @see requestPhoneAccessFp\n */\nexport const requestPhoneAccess = throwifyWithChecksFp(requestPhoneAccessFp);\n","import { PhoneRequestedStatus } from '@tma.js/bridge';\nimport { BetterTaskEither, type BetterTaskEitherError } from '@tma.js/toolkit';\nimport { pipeJsonToSchema, pipeQueryToSchema } from '@tma.js/transformers';\nimport * as E from 'fp-ts/Either';\nimport * as TE from 'fp-ts/TaskEither';\nimport { pipe } from 'fp-ts/function';\nimport {\n  safeParse,\n  pipe as valiPipe,\n  date,\n  looseObject,\n  number,\n  optional,\n  string,\n  transform,\n} from 'valibot';\n\nimport { AccessDeniedError, ValidationError } from '@/errors.js';\nimport {\n  sharedFeatureOptions,\n  type SharedFeatureOptions,\n} from '@/fn-options/sharedFeatureOptions.js';\n\nimport {\n  withInvokeCustomMethod,\n  type WithInvokeCustomMethod,\n  InvokeCustomMethodError,\n} from '@/fn-options/withInvokeCustomMethod.js';\n\nimport { withVersion, type WithVersion } from '@/fn-options/withVersion.js';\nimport type { AsyncOptions } from '@/types.js';\nimport { throwifyWithChecksFp } from '@/with-checks/throwifyWithChecksFp.js';\n\nimport { withChecksFp } from '@/with-checks/withChecksFp.js';\n\nimport { type RequestPhoneAccessError, requestPhoneAccessFp } from './requestPhoneAccess.js';\n\n/**\n * Requested contact information.\n */\nexport interface RequestedContact {\n  contact: {\n    user_id: number;\n    phone_number: string;\n    first_name: string;\n    last_name?: string;\n    [key: string]: unknown;\n  };\n  auth_date: Date;\n  hash: string;\n  [key: string]: unknown;\n}\n\n/**\n * Requested contact complete data.\n */\nexport interface RequestedContactCompleteData {\n  /**\n   * Raw original representation of the contact data returned from the Telegram server.\n   */\n  raw: string;\n  /**\n   * Parsed representation of the contact data.\n   */\n  parsed: RequestedContact;\n}\n\ninterface CreateCompleteOptions extends SharedFeatureOptions, WithInvokeCustomMethod, WithVersion {\n  requestPhoneAccess: (options?: AsyncOptions) => (\n    TE.TaskEither<RequestPhoneAccessError, PhoneRequestedStatus>\n  );\n}\n\ninterface CreateParsedOptions extends SharedFeatureOptions, WithVersion {\n  requestContact: (options?: AsyncOptions) => TE.TaskEither<RequestContactError, RequestedContact>;\n}\n\nexport type RequestContactError =\n  | InvokeCustomMethodError\n  | AccessDeniedError\n  | ValidationError\n  | BetterTaskEitherError;\n\nfunction createComplete({\n  invokeCustomMethod,\n  requestPhoneAccess,\n  ...rest\n}: CreateCompleteOptions) {\n  type GetRequestedContactError = InvokeCustomMethodError | ValidationError;\n\n  // Attempts to get previously requested contact.\n  const getContact = (\n    options?: AsyncOptions,\n  ): TE.TaskEither<GetRequestedContactError, RequestedContactCompleteData | undefined> => {\n    return pipe(\n      invokeCustomMethod('getRequestedContact', {}, {\n        ...options,\n        timeout: (options || {}).timeout || 5000,\n      }),\n      TE.chainW(response => {\n        const toStringResult = safeParse(string(), response);\n        if (!toStringResult.success) {\n          return TE.left(new ValidationError(response, toStringResult.issues));\n        }\n\n        if (!toStringResult.output) {\n          return TE.right(undefined);\n        }\n\n        const toParsedResult = safeParse(\n          pipeQueryToSchema(\n            looseObject({\n              contact: pipeJsonToSchema(looseObject({\n                user_id: number(),\n                phone_number: string(),\n                first_name: string(),\n                last_name: optional(string()),\n              })),\n              auth_date: valiPipe(\n                string(),\n                transform(input => new Date(Number(input) * 1000)),\n                date(),\n              ),\n              hash: string(),\n            }),\n          ),\n          toStringResult.output,\n        );\n        return toParsedResult.success\n          ? TE.right({ raw: toStringResult.output, parsed: toParsedResult.output })\n          : TE.left(new ValidationError(toStringResult.output, toParsedResult.issues));\n      }),\n    );\n  };\n\n  // Attempts to get previously requested contact, but ignores all errors except validation error.\n  const getContactWithErrorsIgnore = (\n    options?: AsyncOptions,\n  ): TE.TaskEither<ValidationError, RequestedContactCompleteData | undefined> => {\n    return pipe(\n      getContact(options),\n      TE.match(\n        // All other errors except validation ones should be ignored. Receiving validation error\n        // means that we have some data, but we are unable to parse it properly. So, there is no\n        // need to make some more requests further, the problem is local.\n        error => (ValidationError.is(error) ? E.left(error) : E.right(undefined)),\n        contact => E.right(contact),\n      ),\n    );\n  };\n\n  // Polls previously requested contact with increasing timeout between requests.\n  const pollContact = (ctx: {\n    isRejected: boolean;\n    rejectReason: unknown;\n    abortSignal: AbortSignal;\n  }): TE.TaskEither<BetterTaskEitherError | ValidationError, RequestedContactCompleteData> => {\n    return BetterTaskEither<ValidationError, RequestedContactCompleteData>(\n      async (res, rej, context) => {\n        // Time to wait before executing the next request.\n        let sleepTime = 50;\n\n        // We are trying to retrieve the requested contact until the deadline was reached.\n        while (!context.isRejected) {\n          const result = await getContactWithErrorsIgnore(context)();\n          if (result._tag === 'Left') {\n            return rej(result.left);\n          }\n          if (result.right) {\n            return res(result.right);\n          }\n          await new Promise(resolve => setTimeout(resolve, sleepTime));\n          sleepTime += 50;\n        }\n      },\n      ctx,\n    );\n  };\n\n  return withChecksFp((\n    options?: AsyncOptions,\n  ): TE.TaskEither<RequestContactError, RequestedContactCompleteData> => {\n    return BetterTaskEither.fn(context => {\n      return pipe(\n        // Try to get the requested contact. Probably, we already requested it before.\n        getContactWithErrorsIgnore(context),\n        TE.chain(contact => {\n          if (contact) {\n            return TE.right(contact);\n          }\n          return pipe(\n            requestPhoneAccess(context),\n            TE.chainW(status => {\n              return status === 'sent'\n                ? pollContact(context)\n                : TE.left(new AccessDeniedError('User denied access'));\n            }),\n          );\n        }),\n      );\n    }, options);\n  }, { ...rest, returns: 'task', requires: 'web_app_request_phone' });\n}\n\nfunction createParsed({ requestContact, ...rest }: CreateParsedOptions) {\n  return withChecksFp(\n    requestContact,\n    { ...rest, returns: 'task', requires: 'web_app_request_phone' },\n  );\n}\n\n/**\n * Requests current user contact information.\n *\n * This function returns an object, containing both raw and parsed representations of a response,\n * received from the Telegram client.\n * @param options - additional options.\n * @since Mini Apps v6.9\n */\nexport const requestContactCompleteFp = createComplete({\n  ...pipe(sharedFeatureOptions(), withInvokeCustomMethod, withVersion),\n  requestPhoneAccess: requestPhoneAccessFp,\n});\n\n/**\n * @see requestContactCompleteFp\n */\nexport const requestContactComplete = throwifyWithChecksFp(requestContactCompleteFp);\n\n/**\n * Works the same way as the `requestContactCompleteFp` function, but returns only parsed\n * representation of the contact data.\n * @see requestContactCompleteFp\n * @param options - additional options.\n * @since Mini Apps v6.9\n */\nexport const requestContactFp = createParsed({\n  ...pipe(sharedFeatureOptions(), withVersion),\n  requestContact(options) {\n    return pipe(\n      requestContactCompleteFp(options),\n      TE.map(contact => contact.parsed),\n    );\n  },\n});\n\n/**\n * @see requestContactFp\n */\nexport const requestContact = throwifyWithChecksFp(requestContactFp);\n","import type { WriteAccessRequestedStatus, RequestError } from '@tma.js/bridge';\nimport * as TE from 'fp-ts/TaskEither';\nimport { pipe } from 'fp-ts/function';\n\nimport {\n  sharedFeatureOptions,\n  type SharedFeatureOptions,\n} from '@/fn-options/sharedFeatureOptions.js';\nimport { withRequest, type WithRequest } from '@/fn-options/withRequest.js';\nimport { withVersion, type WithVersion } from '@/fn-options/withVersion.js';\nimport type { AsyncOptions } from '@/types.js';\nimport { throwifyWithChecksFp } from '@/with-checks/throwifyWithChecksFp.js';\nimport { withChecksFp } from '@/with-checks/withChecksFp.js';\n\ninterface CreateOptions extends SharedFeatureOptions, WithRequest, WithVersion {\n}\n\nexport type RequestWriteAccessError = RequestError;\n\nfunction create({ request, ...rest }: CreateOptions) {\n  return withChecksFp((\n    options?: AsyncOptions,\n  ): TE.TaskEither<RequestWriteAccessError, WriteAccessRequestedStatus> => {\n    return pipe(\n      request('web_app_request_write_access', 'write_access_requested', options),\n      TE.map(response => response.status),\n    );\n  }, { ...rest, requires: 'web_app_request_write_access', returns: 'task' });\n}\n\n/**\n * Requests write message access to the current user.\n * @param options - additional options.\n * @since Mini Apps v6.9\n */\nexport const requestWriteAccessFp = create(pipe(\n  sharedFeatureOptions(),\n  withVersion,\n  withRequest,\n));\n\n/**\n * @see requestWriteAccessFp\n */\nexport const requestWriteAccess = throwifyWithChecksFp(requestWriteAccessFp);\n","import type { PostEventError } from '@tma.js/bridge';\nimport { computed, type Computed, signal } from '@tma.js/signals';\nimport { createCbCollector, BetterTaskEither, type BetterTaskEitherError } from '@tma.js/toolkit';\nimport { BetterPromise } from 'better-promises';\nimport * as E from 'fp-ts/Either';\nimport * as TE from 'fp-ts/TaskEither';\nimport { pipe } from 'fp-ts/function';\n\nimport { ConcurrentCallError } from '@/errors.js';\nimport type { SharedFeatureOptions } from '@/fn-options/sharedFeatureOptions.js';\nimport type { WithPostEvent } from '@/fn-options/withPostEvent.js';\nimport type { WithVersion } from '@/fn-options/withVersion.js';\nimport { createIsSupportedSignal } from '@/helpers/createIsSupportedSignal.js';\nimport type { AsyncOptions } from '@/types.js';\nimport { throwifyWithChecksFp } from '@/with-checks/throwifyWithChecksFp.js';\nimport {\n  createWithChecksFp,\n  type WithChecks,\n  type WithChecksFp,\n} from '@/with-checks/withChecksFp.js';\n\nexport interface QrScannerOptions extends WithVersion, WithPostEvent, SharedFeatureOptions {\n  /**\n   * A function to add a listener to the event determining if the QR scanner\n   * was closed.\n   * @param listener - a listener to add.\n   * @returns A function to remove the listener.\n   */\n  onClosed: (listener: VoidFunction) => VoidFunction;\n  /**\n   * A function to add a listener to the event containing a scanned QR content.\n   * @param listener - a listener to add.\n   * @returns A function to remove the listener.\n   */\n  onTextReceived: (listener: (data: string) => void) => VoidFunction;\n}\n\ninterface SharedOptions extends AsyncOptions {\n  /**\n   * Title to be displayed in the scanner.\n   */\n  text?: string;\n}\n\ninterface CaptureOptions extends SharedOptions {\n  /**\n   * @returns True if the passed QR code should be captured.\n   * @param qr - scanned QR content.\n   */\n  capture: (qr: string) => boolean;\n}\n\ninterface OpenOptions extends SharedOptions {\n  /**\n   * Function which will be called if a QR code was scanned.\n   * @param qr - scanned QR content.\n   */\n  onCaptured: (qr: string) => void;\n}\n\n/**\n * @since Mini Apps v6.4\n */\nexport class QrScanner {\n  constructor({\n    version,\n    onClosed,\n    onTextReceived,\n    isTma,\n    postEvent,\n  }: QrScannerOptions) {\n    const wrapOptions = { version, requires: 'web_app_open_scan_qr_popup', isTma } as const;\n    const wrapSupportedEither = createWithChecksFp({ ...wrapOptions, returns: 'either' });\n    const wrapSupportedTask = createWithChecksFp({ ...wrapOptions, returns: 'task' });\n\n    const isOpened = signal(false);\n    const setClosed = () => {\n      isOpened.set(false);\n    };\n\n    this.isSupported = createIsSupportedSignal('web_app_open_scan_qr_popup', version);\n    this.isOpened = computed(isOpened);\n\n    this.captureFp = wrapSupportedTask(options => {\n      let captured: string | undefined;\n      return pipe(\n        this.openFp({\n          ...options,\n          onCaptured: qr => {\n            if (options.capture(qr)) {\n              captured = qr;\n              this.close();\n            }\n          },\n        }),\n        TE.map(() => captured),\n      );\n    });\n    this.closeFp = wrapSupportedEither(() => {\n      return pipe(postEvent('web_app_close_scan_qr_popup'), E.map(setClosed));\n    });\n    this.openFp = wrapSupportedTask(options => {\n      return pipe(\n        isOpened()\n          ? TE.left(new ConcurrentCallError('The QR Scanner is already opened'))\n          : async () => postEvent('web_app_open_scan_qr_popup', { text: options.text }),\n        TE.chainW(() => {\n          isOpened.set(true);\n          const [addToCleanup, cleanup] = createCbCollector();\n          const onSettled = <T>(value: T): T => {\n            cleanup();\n            isOpened.set(false);\n            return value;\n          };\n\n          return pipe(\n            BetterTaskEither<never, void>(resolve => {\n              addToCleanup(\n                // The scanner was closed externally.\n                onClosed(resolve),\n                // The scanner was closed internally.\n                isOpened.sub(isOpenedValue => {\n                  if (!isOpenedValue) {\n                    resolve();\n                  }\n                }),\n                onTextReceived(options.onCaptured),\n              );\n            }, options),\n            TE.mapBoth(onSettled, onSettled),\n          );\n        }),\n      );\n    });\n\n    this.open = throwifyWithChecksFp(this.openFp);\n    this.capture = throwifyWithChecksFp(this.captureFp);\n    this.close = throwifyWithChecksFp(this.closeFp);\n  }\n\n  /**\n   * Signal indicating if the scanner is currently opened.\n   */\n  readonly isOpened: Computed<boolean>;\n\n  /**\n   * Signal indicating if the component is supported.\n   */\n  readonly isSupported: Computed<boolean>;\n\n  /**\n   * Opens the scanner and returns a task which will be completed with the QR content if the\n   * passed `capture` function returned true.\n   *\n   * Task may also be completed with undefined if the scanner was closed.\n   * @param options - method options.\n   * @returns A promise with QR content presented as string or undefined if the scanner was closed.\n   * @since Mini Apps v6.4\n   * @example\n   * pipe(\n   *   qrScanner.captureFp({\n   *     capture(scannedQr) {\n   *       return scannedQr === 'any expected by me qr';\n   *     }\n   *   }),\n   *   TE.match(\n   *     error => {\n   *       console.error(error);\n   *     },\n   *     qr => {\n   *       console.log('My QR:'), qr;\n   *     }\n   *   ),\n   * );\n   */\n  readonly captureFp: WithChecksFp<\n    (options: CaptureOptions) => (\n      TE.TaskEither<PostEventError | BetterTaskEitherError, string | undefined>\n    ),\n    true\n  >;\n\n  /**\n   * @see captureFp\n   */\n  readonly capture: WithChecks<\n    (options: CaptureOptions) => BetterPromise<string | undefined>,\n    true\n  >;\n\n  /**\n   * Closes the scanner.\n   * @since Mini Apps v6.4\n   */\n  readonly closeFp: WithChecksFp<() => E.Either<PostEventError, void>, true>;\n\n  /**\n   * @see close\n   */\n  readonly close: WithChecks<() => void, true>;\n\n  /**\n   * Opens the scanner and returns a task which will be completed when the scanner was closed.\n   * @param options - method options.\n   * @since Mini Apps v6.4\n   * @example Without `capture` option\n   * if (qrScanner.open.isAvailable()) {\n   *   const qr = await qrScanner.open({ text: 'Scan any QR' });\n   * }\n   * @example\n   * pipe(\n   *   qrScanner.openFp({\n   *     onCaptured(scannedQr) {\n   *       if (scannedQr === 'any expected by me qr') {\n   *         qrScanner.close();\n   *       }\n   *     }\n   *   }),\n   *   TE.match(\n   *     error => {\n   *       console.error(error);\n   *     },\n   *     () => {\n   *       console.log('The scanner was closed');\n   *     }\n   *   ),\n   * );\n   */\n  readonly openFp: WithChecksFp<\n    (options: OpenOptions) => TE.TaskEither<PostEventError, void>,\n    true\n  >;\n\n  /**\n   * @see openFp\n   */\n  readonly open: WithChecks<(options: OpenOptions) => BetterPromise<void>, true>;\n}\n","import { on } from '@tma.js/bridge';\n\nimport { pipe } from 'fp-ts/function';\n\nimport { QrScanner } from '@/features/QrScanner/QrScanner.js';\nimport { sharedFeatureOptions } from '@/fn-options/sharedFeatureOptions.js';\nimport { withPostEvent } from '@/fn-options/withPostEvent.js';\nimport { withVersion } from '@/fn-options/withVersion.js';\n\nexport const qrScanner = new QrScanner({\n  ...pipe(sharedFeatureOptions(), withPostEvent, withVersion),\n  onClosed(listener) {\n    return on('scan_qr_popup_closed', listener);\n  },\n  onTextReceived(listener) {\n    return on('qr_text_received', event => {\n      listener(event.data);\n    });\n  },\n});\n","import type { PostEventError, SecondaryButtonPosition } from '@tma.js/bridge';\nimport { computed, type Computed } from '@tma.js/signals';\nimport type { RGB } from '@tma.js/types';\nimport * as E from 'fp-ts/Either';\n\nimport { Button, type ButtonOptions } from '@/composables/Button.js';\nimport { access } from '@/helpers/access.js';\nimport { createIsSupportedSignal } from '@/helpers/createIsSupportedSignal.js';\nimport type { MaybeAccessor } from '@/types.js';\nimport type { WithChecks, WithChecksFp } from '@/with-checks/withChecksFp.js';\n\ntype SecondaryButtonEither = E.Either<PostEventError, void>;\n\nexport interface SecondaryButtonState {\n  isVisible: boolean;\n  bgColor?: RGB;\n  hasShineEffect: boolean;\n  isEnabled: boolean;\n  isLoaderVisible: boolean;\n  text: string;\n  textColor?: RGB;\n  position: SecondaryButtonPosition;\n}\n\nexport interface SecondaryButtonOptions extends Omit<\n  ButtonOptions<SecondaryButtonState, 'web_app_setup_secondary_button'>,\n  'initialState' | 'method' | 'payload'\n> {\n  /**\n   * Default values for different kinds of the button properties.\n   */\n  defaults: {\n    bgColor: MaybeAccessor<RGB>;\n    textColor: MaybeAccessor<RGB>;\n  };\n}\n\n/**\n * @since Mini Apps v7.10\n */\nexport class SecondaryButton {\n  constructor({ defaults, ...options }: SecondaryButtonOptions) {\n    const button = new Button({\n      ...options,\n      initialState: {\n        hasShineEffect: false,\n        isEnabled: true,\n        isLoaderVisible: false,\n        isVisible: false,\n        text: 'Cancel',\n        position: 'left',\n      },\n      method: 'web_app_setup_secondary_button',\n      payload: state => ({\n        has_shine_effect: state.hasShineEffect,\n        is_visible: state.isVisible,\n        is_active: state.isEnabled,\n        is_progress_visible: state.isLoaderVisible,\n        text: state.text,\n        color: state.bgColor,\n        text_color: state.textColor,\n        position: state.position,\n      }),\n    });\n\n    const withDefault = (\n      field: 'bgColor' | 'textColor',\n      getDefault: MaybeAccessor<RGB>,\n    ) => {\n      const fromState = button.stateGetter(field);\n      return computed(() => fromState() || access(getDefault));\n    };\n\n    this.isSupported = createIsSupportedSignal('web_app_setup_secondary_button', options.version);\n    this.bgColor = withDefault('bgColor', defaults.bgColor);\n    this.textColor = withDefault('textColor', defaults.textColor);\n    this.position = button.stateGetter('position');\n    this.hasShineEffect = button.stateGetter('hasShineEffect');\n    this.isEnabled = button.stateGetter('isEnabled');\n    this.isLoaderVisible = button.stateGetter('isLoaderVisible');\n    this.text = button.stateGetter('text');\n    this.isVisible = button.stateGetter('isVisible');\n    this.isMounted = button.isMounted;\n    this.state = button.state;\n\n    [this.setPosition, this.setPositionFp] = button.stateSetters('position');\n    [this.setBgColor, this.setBgColorFp] = button.stateSetters('bgColor');\n    [this.setTextColor, this.setTextColorFp] = button.stateSetters('textColor');\n    [\n      [this.disableShineEffect, this.disableShineEffectFp],\n      [this.enableShineEffect, this.enableShineEffectFp],\n    ] = button.stateBoolSetters('hasShineEffect');\n    [\n      [this.disable, this.disableFp],\n      [this.enable, this.enableFp],\n    ] = button.stateBoolSetters('isEnabled');\n    [\n      [this.hideLoader, this.hideLoaderFp],\n      [this.showLoader, this.showLoaderFp],\n    ] = button.stateBoolSetters('isLoaderVisible');\n\n    [this.setText, this.setTextFp] = button.stateSetters('text');\n    [[this.hide, this.hideFp], [this.show, this.showFp]] = button.stateBoolSetters('isVisible');\n    this.setParams = button.setState;\n    this.setParamsFp = button.setStateFp;\n    this.onClick = button.onClick;\n    this.onClickFp = button.onClickFp;\n    this.offClick = button.offClick;\n    this.offClickFp = button.offClickFp;\n    this.mount = button.mount;\n    this.mountFp = button.mountFp;\n    this.unmount = button.unmount;\n  }\n\n  //#region Properties.\n  /**\n   * Signal indicating if the component is supported.\n   */\n  readonly isSupported: Computed<boolean>;\n\n  /**\n   * The button position relative to the main one.\n   */\n  readonly position: Computed<SecondaryButtonPosition>;\n\n  /**\n   * The button background color.\n   */\n  readonly bgColor: Computed<RGB>;\n\n  /**\n   * True if the button has a shining effect.\n   */\n  readonly hasShineEffect: Computed<boolean>;\n\n  /**\n   * True if the button is clickable.\n   */\n  readonly isEnabled: Computed<boolean>;\n\n  /**\n   * True if the button loader is visible.\n   */\n  readonly isLoaderVisible: Computed<boolean>;\n\n  /**\n   * True if the button is visible.\n   */\n  readonly isVisible: Computed<boolean>;\n\n  /**\n   * Signal indicating if the component is currently mounted.\n   */\n  readonly isMounted: Computed<boolean>;\n\n  /**\n   * The complete button state.\n   */\n  readonly state: Computed<SecondaryButtonState>;\n\n  /**\n   * The button displayed text.\n   */\n  readonly text: Computed<string>;\n\n  /**\n   * The button text color.\n   *\n   * Note that this value is computed based on the external defaults. For\n   * example, if not explicitly set, this value may be equal to one of theme\n   * params colors.\n   */\n  readonly textColor: Computed<RGB>;\n  //#endregion\n\n  //#region Methods.\n  /**\n   * Shows the button.\n   * @since Mini Apps v7.10\n   */\n  readonly showFp: WithChecksFp<() => SecondaryButtonEither, true>;\n\n  /**\n   * @see showFp\n   */\n  readonly show: WithChecks<() => void, true>;\n\n  /**\n   * Hides the button.\n   * @since Mini Apps v7.10\n   */\n  readonly hideFp: WithChecksFp<() => SecondaryButtonEither, true>;\n\n  /**\n   * @see hideFp\n   */\n  readonly hide: WithChecks<() => void, true>;\n\n  /**\n   * Enables the button.\n   * @since Mini Apps v7.10\n   */\n  readonly enableFp: WithChecksFp<() => SecondaryButtonEither, true>;\n\n  /**\n   * @see enableFp\n   */\n  readonly enable: WithChecks<() => void, true>;\n\n  /**\n   * Enables the button.\n   * @since Mini Apps v7.10\n   */\n  readonly enableShineEffectFp: WithChecksFp<() => SecondaryButtonEither, true>;\n\n  /**\n   * @see enableShineEffectFp\n   */\n  readonly enableShineEffect: WithChecks<() => void, true>;\n\n  /**\n   * Disables the button.\n   * @since Mini Apps v7.10\n   */\n  readonly disableFp: WithChecksFp<() => SecondaryButtonEither, true>;\n\n  /**\n   * @see disableFp\n   */\n  readonly disable: WithChecks<() => void, true>;\n\n  /**\n   * Enables the button.\n   * @since Mini Apps v7.10\n   */\n  readonly disableShineEffectFp: WithChecksFp<() => SecondaryButtonEither, true>;\n\n  /**\n   * @see disableShineEffectFp\n   */\n  readonly disableShineEffect: WithChecks<() => void, true>;\n\n  /**\n   * Updates the button background color.\n   * @since Mini Apps v7.10\n   */\n  readonly setBgColorFp: WithChecksFp<(value: RGB) => SecondaryButtonEither, true>;\n\n  /**\n   * @see setBgColorFp\n   */\n  readonly setBgColor: WithChecks<(value: RGB) => void, true>;\n\n  /**\n   * Updates the button text color.\n   * @since Mini Apps v7.10\n   */\n  readonly setTextColorFp: WithChecksFp<(value: RGB) => SecondaryButtonEither, true>;\n\n  /**\n   * @see setTextColorFp\n   */\n  readonly setTextColor: WithChecks<(value: RGB) => void, true>;\n\n  /**\n   * Updates the button text.\n   * @since Mini Apps v7.10\n   */\n  readonly setTextFp: WithChecksFp<(value: string) => SecondaryButtonEither, true>;\n\n  /**\n   * @see setTextFp\n   */\n  readonly setText: WithChecks<(value: string) => void, true>;\n\n  /**\n   * Updates the button position.\n   * @since Mini Apps v7.10\n   */\n  readonly setPositionFp: WithChecksFp<\n    (position: SecondaryButtonPosition) => SecondaryButtonEither,\n    true\n  >;\n\n  /**\n   * @see setPositionFp\n   */\n  readonly setPosition: WithChecks<(position: SecondaryButtonPosition) => void, true>;\n\n  /**\n   * Shows the button loader.\n   * @since Mini Apps v7.10\n   */\n  readonly showLoaderFp: WithChecksFp<() => SecondaryButtonEither, true>;\n\n  /**\n   * @see showLoaderFp\n   */\n  readonly showLoader: WithChecks<() => void, true>;\n\n  /**\n   * Hides the button loader.\n   * @since Mini Apps v7.10\n   */\n  readonly hideLoaderFp: WithChecksFp<() => SecondaryButtonEither, true>;\n\n  /**\n   * @see hideLoaderFp\n   */\n  readonly hideLoader: WithChecks<() => void, true>;\n\n  /**\n   * Updates the button state.\n   * @param state - updates to apply.\n   * @since Mini Apps v7.10\n   * @example\n   * button.setParams({\n   *   text: 'Submit',\n   *   isEnabled: true,\n   *   hasShineEffect: true,\n   * });\n   */\n  readonly setParamsFp: WithChecksFp<\n    (state: Partial<SecondaryButtonState>) => SecondaryButtonEither,\n    true\n  >;\n\n  /**\n   * @see setParamsFp\n   */\n  readonly setParams: WithChecks<(state: Partial<SecondaryButtonState>) => void, true>;\n\n  /**\n   * Mounts the component restoring its state.\n   * @since Mini Apps v7.10\n   */\n  readonly mountFp: WithChecksFp<() => void, true>;\n\n  /**\n   * @see mountFp\n   */\n  readonly mount: WithChecks<() => void, true>;\n\n  /**\n   * Unmounts the component.\n   */\n  readonly unmount: () => void;\n\n  /**\n   * Adds a new button listener.\n   * @param listener - event listener.\n   * @param once - should the listener be called only once.\n   * @returns A function to remove bound listener.\n   * @since Mini Apps v7.10\n   * @example\n   * const off = button.onClick(() => {\n   *   console.log('User clicked the button');\n   *   off();\n   * });\n   */\n  readonly onClickFp: WithChecksFp<(listener: VoidFunction, once?: boolean) => VoidFunction, true>;\n\n  /**\n   * @see onClick\n   */\n  readonly onClick: WithChecks<(listener: VoidFunction, once?: boolean) => VoidFunction, true>;\n\n  /**\n   * Removes the button click listener.\n   * @param listener - event listener.\n   * @param once - should the listener be called only once.\n   * @since Mini Apps v7.10\n   * @example\n   * function listener() {\n   *   console.log('User clicked the button');\n   *   button.offClick(listener);\n   * }\n   * button.onClick(listener);\n   */\n  readonly offClickFp: WithChecksFp<(listener: VoidFunction, once?: boolean) => void, true>;\n\n  /**\n   * @see offClick\n   */\n  readonly offClick: WithChecks<(listener: VoidFunction, once?: boolean) => void, true>;\n  //#endregion\n}\n","import { computed } from '@tma.js/signals';\n\nimport { miniApp } from '@/features/MiniApp/instance.js';\nimport { SecondaryButton } from '@/features/SecondaryButton/SecondaryButton.js';\nimport { themeParams } from '@/features/ThemeParams/instance.js';\nimport { bottomButtonOptions } from '@/fn-options/bottomButtonOptions.js';\n\nexport const secondaryButton = new SecondaryButton(\n  bottomButtonOptions('secondaryButton', 'secondary_button_pressed', {\n    bgColor: computed(() => miniApp.bottomBarColorRgb() || '#000000'),\n    textColor: computed(() => themeParams.buttonColor() || '#2481cc'),\n  }),\n);\n","import { EventPayload, type MethodParams, type Request2CaptureFn, RequestError } from '@tma.js/bridge';\nimport * as TE from 'fp-ts/TaskEither';\nimport { pipe } from 'fp-ts/function';\n\nimport { SecureStorageMethodError } from '@/errors.js';\nimport type { SharedFeatureOptions } from '@/fn-options/sharedFeatureOptions.js';\nimport type { WithCreateRequestId } from '@/fn-options/withCreateRequestId.js';\nimport type { WithRequest } from '@/fn-options/withRequest.js';\nimport type { WithVersion } from '@/fn-options/withVersion.js';\nimport { throwifyWithChecksFp } from '@/with-checks/throwifyWithChecksFp.js';\nimport {\n  createWithChecksFp,\n  type WithChecks,\n  type WithChecksFp,\n} from '@/with-checks/withChecksFp.js';\n\nexport type SecureStorageError = RequestError | SecureStorageMethodError;\n\nexport interface SecureStorageOptions extends SharedFeatureOptions,\n  WithVersion,\n  WithRequest,\n  WithCreateRequestId {\n}\n\n/**\n * @since Mini Apps v9.0\n */\nexport class SecureStorage {\n  constructor({ isTma, request, version, createRequestId }: SecureStorageOptions) {\n    const wrapSupportedTask = createWithChecksFp({\n      version,\n      requires: 'web_app_secure_storage_get_key',\n      isTma,\n      returns: 'task',\n    });\n\n    const invokeMethod = <\n      M extends (\n        | 'web_app_secure_storage_save_key'\n        | 'web_app_secure_storage_get_key'\n        | 'web_app_secure_storage_restore_key'\n        | 'web_app_secure_storage_save_key'\n        | 'web_app_secure_storage_clear'\n      ),\n      E extends (\n        | 'secure_storage_key_saved'\n        | 'secure_storage_key_received'\n        | 'secure_storage_key_restored'\n        | 'secure_storage_cleared'\n      ),\n    >(\n      method: M,\n      event: E,\n      params: Omit<MethodParams<M>, 'req_id'>,\n    ): TE.TaskEither<SecureStorageError, EventPayload<E>> => {\n      const requestId = createRequestId();\n      return pipe(\n        request<M, ('secure_storage_failed' | E)[]>(method, ['secure_storage_failed', event], {\n          params: { ...params, req_id: requestId },\n          capture: (event => {\n            return 'payload' in event ? event.payload.req_id === requestId : true;\n          }) as Request2CaptureFn<('secure_storage_failed' | E)[]>,\n        }),\n        TE.chain(response => (\n          response.event === 'secure_storage_failed'\n            ? TE.left(new SecureStorageMethodError(response.payload.error || 'UNKNOWN_ERROR'))\n            : TE.right(response.payload as EventPayload<E>)\n        )),\n      );\n    };\n\n    this.getItemFp = wrapSupportedTask(key => {\n      return pipe(\n        invokeMethod('web_app_secure_storage_get_key', 'secure_storage_key_received', { key }),\n        TE.map(payload => ({\n          value: payload.value,\n          canRestore: !!payload.can_restore,\n        })),\n      );\n    });\n    this.setItemFp = wrapSupportedTask((key, value) => {\n      return pipe(\n        invokeMethod('web_app_secure_storage_save_key', 'secure_storage_key_saved', { key, value }),\n        TE.map(() => undefined),\n      );\n    });\n    this.deleteItemFp = wrapSupportedTask(key => {\n      return this.setItemFp(key, null);\n    });\n    this.clearFp = wrapSupportedTask(() => {\n      return pipe(\n        invokeMethod('web_app_secure_storage_clear', 'secure_storage_cleared', {}),\n        TE.map(() => undefined),\n      );\n    });\n    this.restoreItemFp = wrapSupportedTask(key => {\n      return pipe(\n        invokeMethod('web_app_secure_storage_restore_key', 'secure_storage_key_restored', { key }),\n        TE.map(payload => payload.value),\n      );\n    });\n\n    this.getItem = throwifyWithChecksFp(this.getItemFp);\n    this.setItem = throwifyWithChecksFp(this.setItemFp);\n    this.deleteItem = throwifyWithChecksFp(this.deleteItemFp);\n    this.clear = throwifyWithChecksFp(this.clearFp);\n    this.restoreItem = throwifyWithChecksFp(this.restoreItemFp);\n  }\n\n  /**\n    * Retrieves an item using its key.\n    * @since Mini Apps v9.0\n    */\n  readonly getItemFp: WithChecksFp<\n    (key: string) => TE.TaskEither<SecureStorageError, {\n      value: string | null;\n      canRestore: boolean;\n    }>,\n    true\n  >;\n\n  /**\n   * @see getItemFp\n   */\n  readonly getItem: WithChecks<\n    (key: string) => Promise<{ value: string | null; canRestore: boolean }>,\n    true\n  >;\n\n  /**\n   * Restores an item from the storage.\n   * @since Mini Apps v9.0\n   */\n  readonly restoreItemFp: WithChecksFp<\n    (key: string) => TE.TaskEither<SecureStorageError, string | null>,\n    true\n  >;\n\n  /**\n   * @see restoreItemFp\n   */\n  readonly restoreItem: WithChecks<(key: string) => Promise<string | null>, true>;\n\n  /**\n    * Sets a new item in the storage.\n    * @since Mini Apps v9.0\n    */\n  readonly setItemFp: WithChecksFp<\n    (key: string, value: string | null) => TE.TaskEither<SecureStorageError, void>,\n    true\n  >;\n\n  /**\n   * @see setItemFp\n   */\n  readonly setItem: WithChecks<(key: string, value: string | null) => Promise<void>, true>;\n\n  /**\n    * Removes a key from the storage.\n    * @since Mini Apps v9.0\n    */\n  readonly deleteItemFp: WithChecksFp<\n    (key: string) => TE.TaskEither<SecureStorageError, void>,\n    true\n  >;\n\n  /**\n   * @see deleteItemFp\n   */\n  readonly deleteItem: WithChecks<(key: string) => Promise<void>, true>;\n\n  /**\n    * Removes all keys from the storage.\n    * @since Mini Apps v9.0\n    */\n  readonly clearFp: WithChecksFp<() => TE.TaskEither<SecureStorageError, void>, true>;\n\n  /**\n   * @see clearFp\n   */\n  readonly clear: WithChecks<() => Promise<void>, true>;\n}\n","import { pipe } from 'fp-ts/function';\n\nimport { sharedFeatureOptions } from '@/fn-options/sharedFeatureOptions.js';\nimport { withCreateRequestId } from '@/fn-options/withCreateRequestId.js';\nimport { withRequest } from '@/fn-options/withRequest.js';\nimport { withVersion } from '@/fn-options/withVersion.js';\n\nimport { SecureStorage } from './SecureStorage.js';\n\nexport const secureStorage = new SecureStorage(pipe(\n  sharedFeatureOptions(),\n  withVersion,\n  withRequest,\n  withCreateRequestId,\n));\n","import type { PostEventError } from '@tma.js/bridge';\nimport type { Computed } from '@tma.js/signals';\nimport * as E from 'fp-ts/Either';\n\nimport { Button, type ButtonOptions } from '@/composables/Button.js';\nimport type { WithChecksFp, WithChecks } from '@/with-checks/withChecksFp.js';\n\nexport interface SettingsButtonState {\n  isVisible: boolean;\n}\n\nexport type SettingsButtonOptions = Omit<\n  ButtonOptions<SettingsButtonState, 'web_app_setup_settings_button'>,\n  'method' | 'payload' | 'initialState'\n>;\n\n/**\n * @since Mini Apps v6.10\n */\nexport class SettingsButton {\n  constructor(options: SettingsButtonOptions) {\n    const button = new Button({\n      ...options,\n      method: 'web_app_setup_settings_button',\n      payload: state => ({ is_visible: state.isVisible }),\n      initialState: { isVisible: false },\n    });\n\n    this.isVisible = button.stateGetter('isVisible');\n    this.isMounted = button.isMounted;\n    this.isSupported = button.isSupported;\n    [[this.hide, this.hideFp], [this.show, this.showFp]] = button.stateBoolSetters('isVisible');\n    this.onClick = button.onClick;\n    this.onClickFp = button.onClickFp;\n    this.offClick = button.offClick;\n    this.offClickFp = button.offClickFp;\n    this.mount = button.mount;\n    this.mountFp = button.mountFp;\n    this.unmount = button.unmount;\n  }\n\n  /**\n   * Signal indicating if the component is currently visible.\n   */\n  readonly isVisible: Computed<boolean>;\n\n  /**\n   * Signal indicating if the component is currently mounted.\n   */\n  readonly isMounted: Computed<boolean>;\n\n  /**\n   * Signal indicating if the component is supported.\n   */\n  readonly isSupported: Computed<boolean>;\n\n  /**\n   * Hides the button.\n   * @since Mini Apps v6.10\n   */\n  readonly hideFp: WithChecksFp<() => E.Either<PostEventError, void>, true>;\n\n  /**\n   * @see hideFp\n   */\n  readonly hide: WithChecks<() => void, true>;\n\n  /**\n   * Shows the button.\n   * @since Mini Apps v6.10\n   */\n  readonly showFp: WithChecksFp<() => E.Either<PostEventError, void>, true>;\n\n  /**\n   * @see showFp\n   */\n  readonly show: WithChecks<() => void, true>;\n\n  /**\n   * Adds a new button listener.\n   * @param listener - event listener.\n   * @param once - should the listener be called only once.\n   * @returns A function to remove bound listener.\n   * @since Mini Apps v6.10\n   * @example\n   * const off = button.onClick(() => {\n   *   console.log('User clicked the button');\n   *   off();\n   * });\n   */\n  readonly onClickFp: WithChecksFp<\n    (listener: VoidFunction, once?: boolean) => VoidFunction,\n    true\n  >;\n\n  /**\n   * @see onClickFp\n   */\n  readonly onClick: WithChecks<(listener: VoidFunction, once?: boolean) => VoidFunction, true>;\n\n  /**\n   * Removes the button click listener.\n   * @param listener - event listener.\n   * @param once - should the listener be called only once.\n   * @since Mini Apps v6.10\n   * @example\n   * function listener() {\n   *   console.log('User clicked the button');\n   *   button.offClick(listener);\n   * }\n   * button.onClick(listener);\n   */\n  readonly offClickFp: WithChecksFp<\n    (listener: VoidFunction, once?: boolean) => void,\n    true\n  >;\n\n  /**\n   * @see offClickFp\n   */\n  readonly offClick: WithChecks<(listener: VoidFunction, once?: boolean) => void, true>;\n\n  /**\n   * Mounts the component restoring its state.\n   * @since Mini Apps v6.10\n   */\n  readonly mountFp: WithChecksFp<() => void, true>;\n\n  /**\n   * @see mountFp\n   */\n  readonly mount: WithChecks<() => void, true>;\n\n  /**\n   * Unmounts the component.\n   *\n   * Note that this function does not remove listeners added via the `onClick`\n   * function, so you have to remove them on your own.\n   * @see onClick\n   */\n  readonly unmount: () => void;\n}\n","import { SettingsButton } from '@/features/SettingsButton/SettingsButton.js';\nimport { buttonOptions } from '@/fn-options/buttonOptions.js';\n\nexport const settingsButton = new SettingsButton(\n  buttonOptions('settingsButton', 'settings_button_pressed'),\n);\n","import type { PostEventError } from '@tma.js/bridge';\nimport type { Computed } from '@tma.js/signals';\nimport * as E from 'fp-ts/Either';\nimport { pipe } from 'fp-ts/function';\n\nimport { Mountable } from '@/composables/Mountable.js';\nimport { Stateful } from '@/composables/Stateful.js';\nimport type { SharedFeatureOptions } from '@/fn-options/sharedFeatureOptions.js';\nimport type { WithPostEvent } from '@/fn-options/withPostEvent.js';\nimport type { WithStateRestore } from '@/fn-options/withStateRestore.js';\nimport type { WithVersion } from '@/fn-options/withVersion.js';\nimport { createIsSupportedSignal } from '@/helpers/createIsSupportedSignal.js';\nimport { throwifyWithChecksFp } from '@/with-checks/throwifyWithChecksFp.js';\nimport { createWithChecksFp, type WithChecks, type WithChecksFp } from '@/with-checks/withChecksFp.js';\n\nexport interface SwipeBehaviorState {\n  isVerticalEnabled: boolean;\n}\n\nexport interface SwipeBehaviorOptions\n  extends WithStateRestore<SwipeBehaviorState>,\n  WithVersion,\n  WithPostEvent,\n  SharedFeatureOptions {\n}\n\n/**\n * @since Mini Apps v7.7\n */\nexport class SwipeBehavior {\n  constructor({ postEvent, storage, isTma, isPageReload, version }: SwipeBehaviorOptions) {\n    const initialState = { isVerticalEnabled: true };\n    const stateful = new Stateful({\n      initialState,\n      onChange(state) {\n        storage.set(state);\n      },\n    });\n    const mountable = new Mountable({\n      initialState,\n      isPageReload,\n      onMounted: stateful.setState,\n      restoreState: storage.get,\n    });\n\n    const wrapOptions = { requires: 'web_app_setup_swipe_behavior', isTma, version } as const;\n    const wrapSupportedPlain = createWithChecksFp({\n      ...wrapOptions,\n      returns: 'plain',\n    });\n    const wrapMountedEither = createWithChecksFp({\n      ...wrapOptions,\n      isMounted: mountable.isMounted,\n      returns: 'either',\n    });\n\n    const setVerticalEnabled = (isVerticalEnabled: boolean) => {\n      const update = { isVerticalEnabled };\n      if (!stateful.hasDiff(update)) {\n        return E.right(undefined);\n      }\n      return pipe(\n        postEvent('web_app_setup_swipe_behavior', { allow_vertical_swipe: isVerticalEnabled }),\n        E.map(() => {\n          stateful.setState(update);\n        }),\n      );\n    };\n\n    this.isSupported = createIsSupportedSignal('web_app_setup_swipe_behavior', version);\n    this.isVerticalEnabled = stateful.getter('isVerticalEnabled');\n    this.isMounted = mountable.isMounted;\n    this.disableVerticalFp = wrapMountedEither(() => {\n      return setVerticalEnabled(false);\n    });\n    this.enableVerticalFp = wrapMountedEither(() => {\n      return setVerticalEnabled(true);\n    });\n    this.mountFp = wrapSupportedPlain(() => {\n      const nothing = () => undefined;\n      return pipe(mountable.mount(), E.match(nothing, nothing));\n    });\n    this.unmount = mountable.unmount;\n\n    this.disableVertical = throwifyWithChecksFp(this.disableVerticalFp);\n    this.enableVertical = throwifyWithChecksFp(this.enableVerticalFp);\n    this.mount = throwifyWithChecksFp(this.mountFp);\n  }\n\n  /**\n   * Signal indicating if the component is supported.\n   */\n  readonly isSupported: Computed<boolean>;\n\n  /**\n   * Signal indicating if vertical swipes are enabled.\n   */\n  readonly isVerticalEnabled: Computed<boolean>;\n\n  /**\n   * Signal indicating if the component is currently mounted.\n   */\n  readonly isMounted: Computed<boolean>;\n\n  /**\n   * Mounts the component restoring its state.\n   * @since Mini Apps v7.7\n   */\n  readonly mountFp: WithChecksFp<() => void, true>;\n\n  /**\n   * @see mountFp\n   */\n  readonly mount: WithChecks<() => void, true>;\n\n  /**\n   * Unmounts the component.\n   */\n  readonly unmount: () => void;\n\n  /**\n   * Disables the closing confirmation dialog.\n   * @since Mini Apps v7.7\n   */\n  readonly disableVerticalFp: WithChecksFp<() => E.Either<PostEventError, void>, true>;\n\n  /**\n   * @see disableVerticalFp\n   */\n  readonly disableVertical: WithChecks<() => void, true>;\n\n  /**\n   * Enables the closing confirmation dialog.\n   * @since Mini Apps v7.7\n   */\n  readonly enableVerticalFp: WithChecksFp<() => E.Either<PostEventError, void>, true>;\n\n  /**\n   * @see enableVerticalFp\n   */\n  readonly enableVertical: WithChecks<() => void, true>;\n}\n","import { pipe } from 'fp-ts/function';\n\nimport { SwipeBehavior, type SwipeBehaviorState } from '@/features/SwipeBehavior/SwipeBehavior.js';\nimport { sharedFeatureOptions } from '@/fn-options/sharedFeatureOptions.js';\nimport { withPostEvent } from '@/fn-options/withPostEvent.js';\nimport { withStateRestore } from '@/fn-options/withStateRestore.js';\nimport { withVersion } from '@/fn-options/withVersion.js';\n\nexport const swipeBehavior = new SwipeBehavior(pipe(\n  sharedFeatureOptions(),\n  withPostEvent,\n  withVersion,\n  withStateRestore<SwipeBehaviorState>('swipeBehavior'),\n));\n","/**\n * Copies specified text to the clipboard.\n * @param text - text to copy.\n */\nexport async function copyTextToClipboard(text: string): Promise<void> {\n  try {\n    const { clipboard } = navigator;\n    if (clipboard) {\n      return await clipboard.writeText(text);\n    }\n  } catch {\n  }\n  const textArea = document.createElement('textarea');\n  textArea.value = text;\n\n  // Avoid scrolling to bottom\n  textArea.style.top = '0';\n  textArea.style.left = '0';\n  textArea.style.position = 'fixed';\n\n  document.body.appendChild(textArea);\n  textArea.focus();\n  textArea.select();\n\n  try {\n    document.execCommand('copy');\n  } finally {\n    document.body.removeChild(textArea);\n  }\n}\n","import { RequestError } from '@tma.js/bridge';\nimport * as TE from 'fp-ts/TaskEither';\nimport { pipe } from 'fp-ts/function';\n\nimport { AccessDeniedError } from '@/errors.js';\nimport {\n  sharedFeatureOptions,\n  type SharedFeatureOptions,\n} from '@/fn-options/sharedFeatureOptions.js';\nimport { withRequest, type WithRequest } from '@/fn-options/withRequest.js';\nimport { withVersion, type WithVersion } from '@/fn-options/withVersion.js';\nimport type { AsyncOptions } from '@/types.js';\nimport { throwifyWithChecksFp } from '@/with-checks/throwifyWithChecksFp.js';\nimport { withChecksFp } from '@/with-checks/withChecksFp.js';\n\ninterface CreateOptions extends SharedFeatureOptions, WithRequest, WithVersion {\n}\n\nexport type DownloadFileError = RequestError | AccessDeniedError;\n\nfunction create({ request, ...rest }: CreateOptions) {\n  return withChecksFp((\n    url: string,\n    fileName: string,\n    options?: AsyncOptions,\n  ): TE.TaskEither<DownloadFileError, void> => {\n    return pipe(\n      request(\n        'web_app_request_file_download',\n        'file_download_requested',\n        { ...options, params: { url, file_name: fileName } },\n      ),\n      TE.chain(response => {\n        return response.status === 'downloading'\n          ? TE.right(undefined)\n          : TE.left(new AccessDeniedError('User denied the action'));\n      }),\n    );\n  }, { ...rest, requires: 'web_app_request_file_download', returns: 'task' });\n}\n\n/**\n * Displays a native popup prompting the user to download a file.\n * @param url - the HTTPS URL of the file to be downloaded.\n * @param file - the suggested name for the downloaded file.\n * @param options - additional request execution options.\n * @since Mini Apps v8.0\n * @example\n * pipe(\n *   downloadFileFp('https://telegram.org/js/telegram-web-app.js', 'telegram-sdk.js'),\n *   TE.map(() => {\n *     console.log('Downloading');\n *   })\n * )\n */\nexport const downloadFileFp = create(pipe(\n  sharedFeatureOptions(),\n  withRequest,\n  withVersion,\n));\n\nexport const downloadFile = throwifyWithChecksFp(downloadFileFp);\n","import * as TE from 'fp-ts/TaskEither';\nimport { pipe } from 'fp-ts/function';\nimport { date, integer, number, transform, pipe as valiPipe, safeParse } from 'valibot';\n\nimport { ValidationError } from '@/errors.js';\nimport {\n  type SharedFeatureOptions,\n  sharedFeatureOptions,\n} from '@/fn-options/sharedFeatureOptions.js';\nimport {\n  type WithInvokeCustomMethod,\n  withInvokeCustomMethod,\n  type InvokeCustomMethodError,\n} from '@/fn-options/withInvokeCustomMethod.js';\nimport { type WithVersion, withVersion } from '@/fn-options/withVersion.js';\nimport type { AsyncOptions } from '@/types.js';\nimport { throwifyWithChecksFp } from '@/with-checks/throwifyWithChecksFp.js';\nimport { withChecksFp } from '@/with-checks/withChecksFp.js';\n\ninterface CreateOptions extends SharedFeatureOptions, WithInvokeCustomMethod, WithVersion {\n}\n\nexport type GetCurrentTimeError = InvokeCustomMethodError | ValidationError;\n\nfunction create({ invokeCustomMethod, ...rest }: CreateOptions) {\n  return withChecksFp((options?: AsyncOptions): TE.TaskEither<GetCurrentTimeError, Date> => {\n    return pipe(\n      invokeCustomMethod('getCurrentTime', {}, options),\n      TE.chain(response => {\n        const parsed = safeParse(\n          valiPipe(number(), integer(), transform(v => new Date(v * 1000)), date()),\n          response,\n        );\n        return parsed.success\n          ? TE.right(parsed.output)\n          : TE.left(new ValidationError(response, parsed.issues));\n      }),\n    );\n  }, { ...rest, requires: 'web_app_invoke_custom_method', returns: 'task' });\n}\n\n/**\n * @returns The current time according to the Telegram server time.\n * @param options - additional options.\n * @since Mini Apps v6.9\n */\nexport const getCurrentTimeFp = create(pipe(\n  sharedFeatureOptions(),\n  withInvokeCustomMethod,\n  withVersion,\n));\n\n/**\n * @see getCurrentTimeFp\n */\nexport const getCurrentTime = throwifyWithChecksFp(getCurrentTimeFp);\n","import type { PostEventError } from '@tma.js/bridge';\nimport * as E from 'fp-ts/Either';\nimport { pipe } from 'fp-ts/function';\n\nimport {\n  sharedFeatureOptions,\n  type SharedFeatureOptions,\n} from '@/fn-options/sharedFeatureOptions.js';\nimport { withPostEvent, type WithPostEvent } from '@/fn-options/withPostEvent.js';\nimport { withVersion, type WithVersion } from '@/fn-options/withVersion.js';\nimport { throwifyWithChecksFp } from '@/with-checks/throwifyWithChecksFp.js';\nimport { withChecksFp } from '@/with-checks/withChecksFp.js';\n\ninterface CreateOptions extends SharedFeatureOptions, WithPostEvent, WithVersion {\n}\n\nexport type HideKeyboardError = PostEventError;\n\nfunction create({ postEvent, ...rest }: CreateOptions) {\n  return withChecksFp((): E.Either<HideKeyboardError, void> => {\n    return postEvent('web_app_hide_keyboard');\n  }, { ...rest, returns: 'either', requires: 'web_app_hide_keyboard' });\n}\n\n/**\n * Hides the on-screen keyboard, if it is currently visible. Does nothing if the keyboard is\n * not active.\n * @since Mini Apps v9.1\n */\nexport const hideKeyboardFp = create(pipe(\n  sharedFeatureOptions(),\n  withPostEvent,\n  withVersion,\n));\n\n/**\n * @see hideKeyboardFp\n */\nexport const hideKeyboard = throwifyWithChecksFp(hideKeyboardFp);\n","import { captureSameReq, type RequestError } from '@tma.js/bridge';\nimport * as TE from 'fp-ts/TaskEither';\nimport { pipe } from 'fp-ts/function';\n\nimport {\n  sharedFeatureOptions,\n  type SharedFeatureOptions,\n} from '@/fn-options/sharedFeatureOptions.js';\nimport { withRequest, type WithRequest } from '@/fn-options/withRequest.js';\nimport { withVersion, type WithVersion } from '@/fn-options/withVersion.js';\nimport { createRequestId } from '@/globals/createRequestId.js';\nimport type { AsyncOptions } from '@/types.js';\nimport { throwifyWithChecksFp } from '@/with-checks/throwifyWithChecksFp.js';\nimport { withChecksFp } from '@/with-checks/withChecksFp.js';\n\ninterface CreateOptions extends SharedFeatureOptions, WithVersion, WithRequest {\n  createRequestId: () => string;\n}\n\nexport type ReadTextFromClipboardError = RequestError;\n\nfunction create({ request, createRequestId, ...rest }: CreateOptions) {\n  return withChecksFp((\n    options?: AsyncOptions,\n  ): TE.TaskEither<ReadTextFromClipboardError, string | null> => {\n    const reqId = createRequestId();\n    return pipe(\n      request('web_app_read_text_from_clipboard', 'clipboard_text_received', {\n        ...options,\n        params: { req_id: reqId },\n        capture: captureSameReq(reqId),\n      }),\n      TE.map(({ data = null }) => data),\n    );\n  }, { ...rest, requires: 'web_app_read_text_from_clipboard', returns: 'task' });\n}\n\n/**\n * Reads a text from the clipboard and returns a `string` or `null`. `null` is returned\n * in one of the following cases:\n * - A value in the clipboard is not a text.\n * - Access to the clipboard is not granted.\n * @since Mini Apps v6.4\n */\nexport const readTextFromClipboardFp = create({\n  ...pipe(\n    sharedFeatureOptions(),\n    withVersion,\n    withRequest,\n  ),\n  createRequestId,\n});\n\nexport const readTextFromClipboard = throwifyWithChecksFp(readTextFromClipboardFp);\n","export interface AndroidDeviceData {\n  appVersion?: string;\n  manufacturer?: string;\n  model?: string;\n  androidVersion?: string;\n  sdkVersion?: number;\n  performanceClass?: 'LOW' | 'AVERAGE' | 'HIGH' | string;\n}\n\n/**\n * Retrieves Android device data from the specified User Agent.\n * @see https://core.telegram.org/bots/webapps#additional-data-in-user-agent\n * @param userAgent - user agent.\n */\nexport function retrieveAndroidDeviceDataFrom(userAgent: string): AndroidDeviceData {\n  const result: AndroidDeviceData = {};\n  const match = userAgent.match(/Telegram-Android(?:\\/([^ ]+))?(?: (\\([^)]+\\))?|$)/);\n  if (match) {\n    const [, appVersion, systemInfo] = match;\n    appVersion && (result.appVersion = appVersion);\n    systemInfo && systemInfo\n      .slice(1, systemInfo.length - 1)\n      .split(';')\n      .forEach(item => {\n        const [key, value] = item.trim().split(' ');\n        if (key === 'Android') {\n          result.androidVersion = value;\n        } else if (key === 'SDK') {\n          const parsed = parseInt(value, 10);\n          parsed && (result.sdkVersion = parsed);\n        } else if (value) {\n          result.manufacturer = key;\n          result.model = value;\n        } else {\n          result.performanceClass = key;\n        }\n      });\n  }\n  return result;\n}\n","import {\n  type AndroidDeviceData,\n  retrieveAndroidDeviceDataFrom,\n} from './retrieveAndroidDeviceDataFrom.js';\n\n/**\n * Retrieves Android device data from the navigator.userAgent.\n * @see https://core.telegram.org/bots/webapps#additional-data-in-user-agent\n */\nexport function retrieveAndroidDeviceData(): AndroidDeviceData {\n  return retrieveAndroidDeviceDataFrom(navigator.userAgent);\n}\n","import type { PostEventError } from '@tma.js/bridge';\nimport * as E from 'fp-ts/Either';\nimport { pipe } from 'fp-ts/function';\n\nimport { InvalidArgumentsError } from '@/errors.js';\nimport {\n  sharedFeatureOptions,\n  type SharedFeatureOptions,\n} from '@/fn-options/sharedFeatureOptions.js';\nimport { withPostEvent, type WithPostEvent } from '@/fn-options/withPostEvent.js';\nimport { throwifyWithChecksFp } from '@/with-checks/throwifyWithChecksFp.js';\nimport { withChecksFp } from '@/with-checks/withChecksFp.js';\n\ninterface CreateOptions extends SharedFeatureOptions, WithPostEvent {\n}\n\nexport type SendDataError = PostEventError | InvalidArgumentsError;\n\nfunction create({ postEvent, ...rest }: CreateOptions) {\n  return withChecksFp((data: string): E.Either<SendDataError, void> => {\n    const { size } = new Blob([data]);\n    if (!size || size > 4096) {\n      return E.left(\n        new InvalidArgumentsError(size\n          ? 'Maximum size of data to send is 4096 bytes'\n          : 'Attempted to send empty data'),\n      );\n    }\n    return postEvent('web_app_data_send', { data });\n  }, { ...rest, returns: 'either' });\n}\n\n/**\n * Sends data to the bot.\n *\n * When this method called, a service message sent to the bot containing the data of the length\n * up to 4096 bytes, and the Mini App closed.\n *\n * See the field `web_app_data` in the class [Message](https://core.telegram.org/bots/api#message).\n *\n * This method is only available for Mini Apps launched via a Keyboard button.\n * @param data - data to send to bot.\n */\nexport const sendDataFp = create(pipe(sharedFeatureOptions(), withPostEvent));\n\n/**\n * @see sendDataFp\n */\nexport const sendData = throwifyWithChecksFp(sendDataFp);\n","import { RequestError } from '@tma.js/bridge';\nimport * as TE from 'fp-ts/TaskEither';\nimport { pipe } from 'fp-ts/function';\n\nimport { ShareMessageError } from '@/errors.js';\nimport {\n  sharedFeatureOptions,\n  type SharedFeatureOptions,\n} from '@/fn-options/sharedFeatureOptions.js';\nimport { withRequest, type WithRequest } from '@/fn-options/withRequest.js';\nimport { withVersion, type WithVersion } from '@/fn-options/withVersion.js';\nimport type { AsyncOptions } from '@/types.js';\nimport { throwifyWithChecksFp } from '@/with-checks/throwifyWithChecksFp.js';\nimport { withChecksFp } from '@/with-checks/withChecksFp.js';\n\ninterface CreateOptions extends SharedFeatureOptions, WithRequest, WithVersion {\n}\n\nexport type ShareMessageFnError = RequestError | ShareMessageError;\n\nfunction create({ request, ...rest }: CreateOptions) {\n  return withChecksFp((\n    messageId: string,\n    options?: AsyncOptions,\n  ): TE.TaskEither<ShareMessageFnError, void> => {\n    return pipe(\n      request(\n        'web_app_send_prepared_message',\n        ['prepared_message_failed', 'prepared_message_sent'],\n        {\n          ...options,\n          params: { id: messageId },\n        },\n      ),\n      TE.chain(response => (\n        response.event === 'prepared_message_failed'\n          ? TE.left(new ShareMessageError(response.payload.error))\n          : TE.right(undefined)\n      )),\n    );\n  }, { ...rest, requires: 'web_app_send_prepared_message', returns: 'task' });\n}\n\n/**\n * Opens a dialog allowing the user to share a message provided by the bot.\n * @since Mini Apps v8.0\n */\nexport const shareMessageFp = create(pipe(\n  sharedFeatureOptions(),\n  withRequest,\n  withVersion,\n));\n\n/**\n * @see shareMessageFp\n */\nexport const shareMessage = throwifyWithChecksFp(shareMessageFp);\n","import type { PostEventError } from '@tma.js/bridge';\nimport * as E from 'fp-ts/Either';\nimport { pipe } from 'fp-ts/function';\n\nimport {\n  sharedFeatureOptions,\n  type SharedFeatureOptions,\n} from '@/fn-options/sharedFeatureOptions.js';\nimport { withPostEvent, type WithPostEvent } from '@/fn-options/withPostEvent.js';\nimport { withVersion, type WithVersion } from '@/fn-options/withVersion.js';\nimport { throwifyWithChecksFp } from '@/with-checks/throwifyWithChecksFp.js';\nimport { withChecksFp } from '@/with-checks/withChecksFp.js';\n\ninterface CreateOptions extends SharedFeatureOptions, WithPostEvent, WithVersion {\n}\n\nexport interface ShareStoryOptions {\n  /**\n   * The caption to be added to the media.\n   * 0-200 characters for regular users and 0-2048 characters for premium subscribers.\n   * @see https://telegram.org/faq_premium#telegram-premium\n   */\n  text?: string;\n  /**\n   * An object that describes a widget link to be included in the story.\n   * Note that only premium subscribers can post stories with links.\n   * @see https://telegram.org/faq_premium#telegram-premium\n   */\n  widgetLink?: {\n    /**\n     * The URL to be included in the story.\n     */\n    url: string;\n    /**\n     * The name to be displayed for the widget link, 0-48 characters.\n     */\n    name?: string;\n  };\n}\n\nexport type ShareStoryError = PostEventError;\n\nfunction create({ postEvent, ...rest }: CreateOptions) {\n  return withChecksFp((\n    mediaUrl: string,\n    options: ShareStoryOptions = {},\n  ): E.Either<ShareStoryError, void> => {\n    return postEvent('web_app_share_to_story', {\n      text: options.text,\n      media_url: mediaUrl,\n      widget_link: options.widgetLink,\n    });\n  }, { ...rest, requires: 'web_app_share_to_story', returns: 'either' });\n}\n\n/**\n * Opens the native story editor.\n * @since Mini Apps v7.8\n * @example\n * pipe(\n *   shareStory('https://example.com/background.png', {\n *     text: 'Look at this cool group!',\n *     widgetLink: {\n *       url: 'https://t.me/heyqbnk',\n *       name: 'Vlad\\'s community',\n *     },\n *   }),\n *   TE.match(error => {\n *     console.error('Something went wrong', error);\n *   }, () => {\n *     console.log('Call was successful');\n *   }),\n * );\n */\nexport const shareStoryFp = create(pipe(\n  sharedFeatureOptions(),\n  withPostEvent,\n  withVersion,\n));\n\n/**\n * @see shareStoryFp\n */\nexport const shareStory = throwifyWithChecksFp(shareStoryFp);\n","import { createSignal } from '@/globals/signals-registry.js';\n\n/**\n * True if the application is launched in inline mode.\n */\nexport const isInlineMode = createSignal(false);\n","import type { PostEventError, SwitchInlineQueryChatType } from '@tma.js/bridge';\nimport * as E from 'fp-ts/Either';\nimport { pipe } from 'fp-ts/function';\n\nimport {\n  sharedFeatureOptions,\n  type SharedFeatureOptions,\n} from '@/fn-options/sharedFeatureOptions.js';\nimport { withPostEvent, type WithPostEvent } from '@/fn-options/withPostEvent.js';\nimport { withVersion, type WithVersion } from '@/fn-options/withVersion.js';\nimport { isInlineMode } from '@/globals/isInlineMode.js';\nimport { access } from '@/helpers/access.js';\nimport type { MaybeAccessor } from '@/types.js';\nimport { throwifyWithChecksFp } from '@/with-checks/throwifyWithChecksFp.js';\nimport { withChecksFp } from '@/with-checks/withChecksFp.js';\n\ninterface CreateOptions extends SharedFeatureOptions, WithPostEvent, WithVersion {\n  isInlineMode: MaybeAccessor<boolean>;\n}\n\nexport type SwitchInlineQueryError = PostEventError;\n\nfunction create({ isInlineMode, postEvent, ...rest }: CreateOptions) {\n  return withChecksFp((\n    query: string,\n    chatTypes?: SwitchInlineQueryChatType[],\n  ): E.Either<SwitchInlineQueryError, void> => {\n    return postEvent('web_app_switch_inline_query', {\n      query: query,\n      chat_types: chatTypes || [],\n    });\n  }, {\n    ...rest,\n    requires: {\n      every: ['web_app_switch_inline_query', () => {\n        return access(isInlineMode)\n          ? undefined\n          : 'The application must be launched in the inline mode';\n      }],\n    },\n    returns: 'either',\n  });\n}\n\n/**\n * Inserts the bot's username and the specified inline query in the current chat's input field.\n * Query may be empty, in which case only the bot's username will be inserted. The client prompts\n * the user to choose a specific chat, then opens that chat and inserts the bot's username and\n * the specified inline query in the input field.\n * @param query - text which should be inserted in the input after the current bot name. Max\n * length is 256 symbols.\n * @param chatTypes - List of chat types which could be chosen to send the message. Could be an\n * empty list.\n * @since Mini Apps v6.7\n * @example\n * pipe(\n *   switchInlineQuery('my query goes here', ['users']),\n *   E.match(error => {\n *     console.error('Something went wrong', error);\n *   }, () => {\n *     console.log('Call was successful');\n *   }),\n * );\n */\nexport const switchInlineQueryFp = create({\n  ...pipe(\n    sharedFeatureOptions(),\n    withPostEvent,\n    withVersion,\n  ),\n  isInlineMode,\n});\n\n/**\n * @see switchInlineQueryFp\n */\nexport const switchInlineQuery = throwifyWithChecksFp(switchInlineQueryFp);\n","import {\n  type SafeAreaInsets,\n  type EventListener,\n  supports,\n  type RequestError,\n  type PostEventError,\n} from '@tma.js/bridge';\nimport { Computed, computed, signal } from '@tma.js/signals';\nimport { camelToKebab } from '@tma.js/toolkit';\nimport { BetterPromise } from 'better-promises';\nimport * as E from 'fp-ts/Either';\nimport * as TE from 'fp-ts/TaskEither';\nimport { pipe } from 'fp-ts/function';\n\nimport { AsyncMountable } from '@/composables/AsyncMountable.js';\nimport { Stateful } from '@/composables/Stateful.js';\nimport { CSSVarsBoundError, FullscreenFailedError } from '@/errors.js';\nimport { SharedFeatureOptions } from '@/fn-options/sharedFeatureOptions.js';\nimport { WithPostEvent } from '@/fn-options/withPostEvent.js';\nimport { WithRequest } from '@/fn-options/withRequest.js';\nimport { WithStateRestore } from '@/fn-options/withStateRestore.js';\nimport { WithVersion } from '@/fn-options/withVersion.js';\nimport { access } from '@/helpers/access.js';\nimport { deleteCssVar, setCssVar } from '@/helpers/css-vars.js';\nimport { AsyncOptions } from '@/types.js';\nimport { throwifyWithChecksFp } from '@/with-checks/throwifyWithChecksFp.js';\nimport { createWithChecksFp, WithChecks, WithChecksFp } from '@/with-checks/withChecksFp.js';\n\ntype FullscreenError = FullscreenFailedError | RequestError;\ntype ViewportChangedEventListener = EventListener<'viewport_changed'>;\ntype FullscreenChangedEventListener = EventListener<'fullscreen_changed'>;\ntype SafeAreaInsetsChangedEventListener = EventListener<'safe_area_changed'>;\ntype SafeAreaInsetCSSVarKey = `safeAreaInset${Capitalize<keyof SafeAreaInsets>}`;\n\nexport type GetCSSVarNameKey =\n  | 'width'\n  | 'height'\n  | 'stableHeight'\n  | SafeAreaInsetCSSVarKey\n  | `content${Capitalize<SafeAreaInsetCSSVarKey>}`;\n\nexport type GetCSSVarNameFn = (key: GetCSSVarNameKey) => string | null | undefined | false;\n\nexport interface ViewportState {\n  contentSafeAreaInsets: SafeAreaInsets;\n  height: number;\n  isExpanded: boolean;\n  isFullscreen: boolean;\n  safeAreaInsets: SafeAreaInsets;\n  stableHeight: number;\n  width: number;\n}\n\ntype WithListeners<On extends string, Off extends string, L> = {\n  [K in On | Off]: (listener: L) => void;\n};\n\nexport interface ViewportOptions<EViewportStable, EFullscreen>\n  extends WithStateRestore<ViewportState>,\n  WithVersion,\n  WithRequest,\n  WithPostEvent,\n  WithListeners<'onViewportChanged', 'offViewportChanged', ViewportChangedEventListener>,\n  WithListeners<'onFullscreenChanged', 'offFullscreenChanged', FullscreenChangedEventListener>,\n  WithListeners<'onSafeAreaInsetsChanged', 'offSafeAreaInsetsChanged', SafeAreaInsetsChangedEventListener>,\n  WithListeners<'onContentSafeAreaInsetsChanged', 'offContentSafeAreaInsetsChanged', SafeAreaInsetsChangedEventListener>,\n  SharedFeatureOptions {\n  /**\n   * True if the viewport is stable.\n   */\n  isViewportStable: boolean | (() => E.Either<EViewportStable, boolean>);\n  /**\n   * True if the application was opened in fullscreen initially.\n   */\n  isFullscreen: boolean | (() => E.Either<EFullscreen, boolean>);\n}\n\nexport class Viewport<EViewportStable, EFullscreen> {\n  constructor({\n    storage,\n    isPageReload,\n    onContentSafeAreaInsetsChanged,\n    onSafeAreaInsetsChanged,\n    onViewportChanged,\n    onFullscreenChanged,\n    offContentSafeAreaInsetsChanged,\n    offFullscreenChanged,\n    offSafeAreaInsetsChanged,\n    offViewportChanged,\n    request,\n    isViewportStable,\n    isFullscreen,\n    isTma,\n    version,\n    postEvent,\n  }: ViewportOptions<EViewportStable, EFullscreen>) {\n    const initialInsets: SafeAreaInsets = { top: 0, right: 0, left: 0, bottom: 0 };\n    const stateful = new Stateful<ViewportState>({\n      initialState: {\n        contentSafeAreaInsets: initialInsets,\n        height: 0,\n        isExpanded: false,\n        isFullscreen: false,\n        safeAreaInsets: initialInsets,\n        stableHeight: 0,\n        width: 0,\n      },\n      onChange: storage.set,\n    });\n\n    const viewportChangedListener: ViewportChangedEventListener = event => {\n      stateful.setState({\n        isExpanded: event.is_expanded,\n        height: event.height,\n        width: event.width,\n        stableHeight: event.is_state_stable ? event.height : undefined,\n      });\n    };\n    const fullscreenChangedListener: FullscreenChangedEventListener = event => {\n      stateful.setState({ isFullscreen: event.is_fullscreen });\n    };\n    const safeAreaInsetsChangedListener: SafeAreaInsetsChangedEventListener = event => {\n      stateful.setState({ safeAreaInsets: event });\n    };\n    const contentSafeAreaInsetsChangedListener: SafeAreaInsetsChangedEventListener = event => {\n      stateful.setState({ contentSafeAreaInsets: event });\n    };\n\n    const mountable = new AsyncMountable({\n      initialState(options) {\n        const genRequestInsets = (kind: 'safe-area' | 'content-safe-area') => {\n          return () => {\n            const [method, event] = kind === 'safe-area'\n              ? ['web_app_request_safe_area', 'safe_area_changed'] as const\n              : ['web_app_request_content_safe_area', 'content_safe_area_changed'] as const;\n\n            if (!supports(method, access(version))) {\n              return TE.right({ top: 0, left: 0, right: 0, bottom: 0 });\n            }\n            return request(method, event, options);\n          };\n        };\n        const genFlag = <E>(flag: boolean | (() => E.Either<E, boolean>)) => {\n          return () => (\n            typeof flag === 'boolean'\n              ? TE.right(flag)\n              : TE.fromEither(flag())\n          );\n        };\n\n        return pipe(\n          TE.Do,\n          TE.bindW('safeAreaInsets', genRequestInsets('safe-area')),\n          TE.bindW('contentSafeAreaInsets', genRequestInsets('content-safe-area')),\n          TE.bindW('isFullscreen', genFlag(isFullscreen)),\n          TE.bindW('isViewportStable', genFlag(isViewportStable)),\n          TE.chainW(({ isViewportStable, ...shared }) => {\n            if (isViewportStable) {\n              return TE.right({\n                ...shared,\n                height: window.innerHeight,\n                isExpanded: true,\n                stableHeight: window.innerHeight,\n                width: window.innerWidth,\n              });\n            }\n            return pipe(\n              request('web_app_request_viewport', 'viewport_changed', options),\n              TE.map(viewport => ({\n                ...shared,\n                height: viewport.height,\n                isExpanded: viewport.is_expanded,\n                stableHeight: viewport.is_state_stable ? viewport.height : 0,\n                width: viewport.width,\n              })),\n            );\n          }),\n        );\n      },\n      isPageReload,\n      onMounted(state) {\n        onViewportChanged(viewportChangedListener);\n        onFullscreenChanged(fullscreenChangedListener);\n        onSafeAreaInsetsChanged(safeAreaInsetsChangedListener);\n        onContentSafeAreaInsetsChanged(contentSafeAreaInsetsChangedListener);\n        stateful.setState(state);\n      },\n      onUnmounted() {\n        offViewportChanged(viewportChangedListener);\n        offFullscreenChanged(fullscreenChangedListener);\n        offSafeAreaInsetsChanged(safeAreaInsetsChangedListener);\n        offContentSafeAreaInsetsChanged(contentSafeAreaInsetsChangedListener);\n      },\n      restoreState: storage.get,\n    });\n\n    const saBased = <K extends keyof SafeAreaInsets>(key: K) => {\n      return computed(() => this.safeAreaInsets()[key]);\n    };\n    const csaBased = <K extends keyof SafeAreaInsets>(key: K) => {\n      return computed(() => this.contentSafeAreaInsets()[key]);\n    };\n\n    this.state = stateful.state;\n    this.height = stateful.getter('height');\n    this.stableHeight = stateful.getter('stableHeight');\n    this.width = stateful.getter('width');\n    this.isExpanded = stateful.getter('isExpanded');\n    this.safeAreaInsets = stateful.getter('safeAreaInsets');\n    this.safeAreaInsetTop = saBased('top');\n    this.safeAreaInsetBottom = saBased('bottom');\n    this.safeAreaInsetLeft = saBased('left');\n    this.safeAreaInsetRight = saBased('right');\n    this.contentSafeAreaInsets = stateful.getter('contentSafeAreaInsets');\n    this.contentSafeAreaInsetTop = csaBased('top');\n    this.contentSafeAreaInsetBottom = csaBased('bottom');\n    this.contentSafeAreaInsetLeft = csaBased('left');\n    this.contentSafeAreaInsetRight = csaBased('right');\n\n    const wrapTask = createWithChecksFp({ isTma, returns: 'task' });\n    const wrapMountedEither = createWithChecksFp({\n      isTma,\n      returns: 'either',\n    });\n    const wrapFullscreenTask = createWithChecksFp({\n      isTma,\n      requires: 'web_app_request_fullscreen',\n      version,\n      returns: 'task',\n    });\n    const genFullscreenFn = (enable: boolean) => {\n      return wrapFullscreenTask((options?: AsyncOptions) => {\n        return pipe(\n          request(\n            enable ? 'web_app_request_fullscreen' : 'web_app_exit_fullscreen',\n            ['fullscreen_changed', 'fullscreen_failed'],\n            options,\n          ),\n          TE.chain(response => {\n            if (\n              response.event === 'fullscreen_failed'\n              && response.payload.error !== 'ALREADY_FULLSCREEN'\n            ) {\n              return TE.left(new FullscreenFailedError(response.payload.error));\n            }\n            stateful.setState({\n              isFullscreen: 'is_fullscreen' in response.payload\n                ? response.payload.is_fullscreen\n                : true,\n            });\n            return TE.right(undefined);\n          }),\n        );\n      });\n    };\n\n    // Mount.\n    this.isMounted = mountable.isMounted;\n    this.mountFp = wrapTask(mountable.mount);\n    this.mount = throwifyWithChecksFp(this.mountFp);\n\n    // Fullscreen.\n    this.isFullscreen = stateful.getter('isFullscreen');\n    this.requestFullscreenFp = genFullscreenFn(true);\n    this.requestFullscreen = throwifyWithChecksFp(this.requestFullscreenFp);\n    this.exitFullscreenFp = genFullscreenFn(false);\n    this.exitFullscreen = throwifyWithChecksFp(this.exitFullscreenFp);\n\n    // CSS vars.\n    const isCssVarsBound = signal(false);\n    this.isCssVarsBound = computed(isCssVarsBound);\n    this.bindCssVarsFp = wrapMountedEither(\n      (getCSSVarName?: GetCSSVarNameFn) => {\n        if (isCssVarsBound()) {\n          return E.left(new CSSVarsBoundError());\n        }\n        getCSSVarName ||= prop => `--tg-viewport-${camelToKebab(prop)}`;\n\n        const settings = ([\n          ['height', this.height],\n          ['stableHeight', this.stableHeight],\n          ['width', this.width],\n          ['safeAreaInsetTop', this.safeAreaInsetTop],\n          ['safeAreaInsetBottom', this.safeAreaInsetBottom],\n          ['safeAreaInsetLeft', this.safeAreaInsetLeft],\n          ['safeAreaInsetRight', this.safeAreaInsetRight],\n          ['contentSafeAreaInsetTop', this.contentSafeAreaInsetTop],\n          ['contentSafeAreaInsetBottom', this.contentSafeAreaInsetBottom],\n          ['contentSafeAreaInsetLeft', this.contentSafeAreaInsetLeft],\n          ['contentSafeAreaInsetRight', this.contentSafeAreaInsetRight],\n        ] as const).reduce<{\n          update: VoidFunction;\n          removeListener: VoidFunction;\n          cssVar: string;\n        }[]>((acc, [key, signal]) => {\n          const cssVar = getCSSVarName(key);\n          if (cssVar) {\n            const update = () => {\n              setCssVar(cssVar, `${signal()}px`);\n            };\n            acc.push({ update, removeListener: signal.sub(update), cssVar });\n          }\n          return acc;\n        }, []);\n\n        settings.forEach(setting => {\n          setting.update();\n        });\n        isCssVarsBound.set(true);\n\n        return E.right(() => {\n          settings.forEach(s => {\n            s.removeListener();\n            deleteCssVar(s.cssVar);\n          });\n          isCssVarsBound.set(false);\n        });\n      },\n    );\n    this.bindCssVars = throwifyWithChecksFp(this.bindCssVarsFp);\n\n    // Other methods.\n    this.expandFp = wrapMountedEither(() => postEvent('web_app_expand'));\n    this.expand = throwifyWithChecksFp(this.expandFp);\n  }\n\n  //#region Other properties.\n  /**\n   * Complete component state.\n   */\n  readonly state: Computed<ViewportState>;\n\n  /**\n   * Signal containing the current height of the **visible area** of the Mini App.\n   *\n   * The application can display just the top part of the Mini App, with its\n   * lower part remaining outside the screen area. From this position, the user\n   * can \"pull\" the Mini App to its maximum height, while the bot can do the same\n   * by calling `expand` method. As the position of the Mini App changes, the\n   * current height value of the visible area will be updated  in real time.\n   *\n   * Please note that the refresh rate of this value is not sufficient to\n   * smoothly follow the lower border of the window. It should not be used to pin\n   * interface elements to the bottom of the visible area. It's more appropriate\n   * to use the value of the `stableHeight` field for this purpose.\n   *\n   * @see stableHeight\n   */\n  readonly height: Computed<number>;\n\n  /**\n   * Signal containing the height of the visible area of the Mini App in its last stable state.\n   *\n   * The application can display just the top part of the Mini App, with its\n   * lower part remaining outside the screen area. From this position, the user\n   * can \"pull\" the Mini App to its maximum height, while the application can do\n   * the same by calling `expand` method.\n   *\n   * Unlike the value of `height`, the value of `stableHeight` does not change as\n   * the position of the Mini App changes with user gestures or during\n   * animations. The value of `stableHeight` will be updated after all gestures\n   * and animations are completed and the Mini App reaches its final size.\n   *\n   * @see height\n   */\n  readonly stableHeight: Computed<number>;\n\n  /**\n   * Signal containing the currently visible area width.\n   */\n  readonly width: Computed<number>;\n\n  /**\n   * Signal indicating if the Mini App is expanded to the maximum available height. Otherwise,\n   * if the Mini App occupies part of the screen and can be expanded to the full\n   * height using the `expand` method.\n   */\n  readonly isExpanded: Computed<boolean>;\n\n  /**\n   * Signal indicating if the current viewport height is stable and is not going to change in\n   * the next moment.\n   */\n  readonly isStable = computed(() => this.height() === this.stableHeight());\n  //#endregion\n\n  //#region Content safe area insets.\n  /**\n   * Signal containing content safe area insets.\n   */\n  readonly contentSafeAreaInsets: Computed<SafeAreaInsets>;\n\n  /**\n   * Signal containing top content safe area inset.\n   */\n  readonly contentSafeAreaInsetTop: Computed<number>;\n\n  /**\n   * Signal containing left content safe area inset.\n   */\n  readonly contentSafeAreaInsetLeft: Computed<number>;\n\n  /**\n   * Signal containing right content safe area inset.\n   */\n  readonly contentSafeAreaInsetRight: Computed<number>;\n\n  /**\n   * Signal containing bottom content safe area inset.\n   */\n  readonly contentSafeAreaInsetBottom: Computed<number>;\n  //#endregion\n\n  //#region Safe area insets.\n  /**\n   * Signal containing safe area insets.\n   */\n  readonly safeAreaInsets: Computed<SafeAreaInsets>;\n\n  /**\n   * Signal containing top safe area inset.\n   */\n  readonly safeAreaInsetTop: Computed<number>;\n\n  /**\n   * Signal containing left safe area inset.\n   */\n  readonly safeAreaInsetLeft: Computed<number>;\n\n  /**\n   * Signal containing right safe area inset.\n   */\n  readonly safeAreaInsetRight: Computed<number>;\n\n  /**\n   * Signal containing bottom safe area inset.\n   */\n  readonly safeAreaInsetBottom: Computed<number>;\n  //#endregion\n\n  //#region Fullscreen.\n  /**\n   * Signal indicating if the viewport is currently in fullscreen mode.\n   */\n  readonly isFullscreen: Computed<boolean>;\n\n  /**\n   * Requests fullscreen mode for the mini application.\n   * @since Mini Apps v8.0\n   */\n  readonly requestFullscreenFp: WithChecksFp<\n    (options?: AsyncOptions) => TE.TaskEither<FullscreenError, void>,\n    true\n  >;\n\n  /**\n   * @see requestFullscreenFp\n   */\n  readonly requestFullscreen: WithChecks<(options?: AsyncOptions) => BetterPromise<void>, true>;\n\n  /**\n   * Exits mini application from the fullscreen mode.\n   * @since Mini Apps v8.0\n   */\n  readonly exitFullscreenFp: WithChecksFp<\n    (options?: AsyncOptions) => TE.TaskEither<FullscreenError, void>,\n    true\n  >;\n\n  /**\n   * @see exitFullscreenFp\n   */\n  readonly exitFullscreen: WithChecks<(options?: AsyncOptions) => BetterPromise<void>, true>;\n  //#endregion\n\n  //#region CSS Vars.\n  /**\n   * Signal indicating if CSS variables are bound.\n   */\n  readonly isCssVarsBound: Computed<boolean>;\n\n  /**\n   * Creates CSS variables connected with the current viewport.\n   *\n   * By default, created CSS variables names are following the pattern \"--tg-theme-{name}\", where\n   * {name} is a viewport property name converted from camel case to kebab case.\n   *\n   * Default variables:\n   * - `--tg-viewport-height`\n   * - `--tg-viewport-width`\n   * - `--tg-viewport-stable-height`\n   * - `--tg-viewport-content-safe-area-inset-top`\n   * - `--tg-viewport-content-safe-area-inset-bottom`\n   * - `--tg-viewport-content-safe-area-inset-left`\n   * - `--tg-viewport-content-safe-area-inset-right`\n   * - `--tg-viewport-safe-area-inset-top`\n   * - `--tg-viewport-safe-area-inset-bottom`\n   * - `--tg-viewport-safe-area-inset-left`\n   * - `--tg-viewport-safe-area-inset-right`\n   *\n   * Variables are being automatically updated if the viewport was changed.\n   *\n   * @param getCSSVarName - function, returning computed complete CSS variable name. The CSS\n   * variable will only be defined if the function returned non-empty string value.\n   * @returns Function to stop updating variables.\n   * @example Using no arguments\n   * bindCssVarsFp();\n   * @example Using custom CSS vars generator\n   * bindCssVarsFp(key => `--my-prefix-${key}`);\n   */\n  readonly bindCssVarsFp: WithChecksFp<(getCSSVarName?: GetCSSVarNameFn) => (\n    E.Either<CSSVarsBoundError, VoidFunction>\n  ), false>;\n\n  /**\n   * @see bindCssVarsFp\n   */\n  readonly bindCssVars: WithChecks<(getCSSVarName?: GetCSSVarNameFn) => VoidFunction, false>;\n  //#endregion\n\n  //#region Mount.\n  /**\n   * Signal indicating if the component is currently mounted.\n   */\n  readonly isMounted: Computed<boolean>;\n\n  /**\n   * Mounts the component.\n   */\n  readonly mountFp: WithChecksFp<(options?: AsyncOptions) => (\n    TE.TaskEither<EFullscreen | EViewportStable | RequestError, void>\n  ), false>;\n\n  /**\n   * @see mountFp\n   */\n  readonly mount: WithChecks<(options?: AsyncOptions) => BetterPromise<void>, false>;\n  //#endregion\n\n  //#region Other methods.\n  /**\n   * A method that expands the Mini App to the maximum available height. To find\n   * out if the Mini App is expanded to the maximum height, refer to the value of\n   * the `isExpanded`.\n   */\n  readonly expandFp: WithChecksFp<() => E.Either<PostEventError, void>, false>;\n\n  /**\n   * @see expandFp\n   */\n  readonly expand: WithChecks<() => void, false>;\n  //#endregion\n}\n","import { retrieveLaunchParamsFp, on, off, type EventName, EventListener } from '@tma.js/bridge';\nimport * as E from 'fp-ts/Either';\nimport { pipe } from 'fp-ts/function';\n\nimport { Viewport, type ViewportState } from '@/features/Viewport/Viewport.js';\nimport { sharedFeatureOptions } from '@/fn-options/sharedFeatureOptions.js';\nimport { withPostEvent } from '@/fn-options/withPostEvent.js';\nimport { withRequest } from '@/fn-options/withRequest.js';\nimport { withStateRestore } from '@/fn-options/withStateRestore.js';\nimport { withVersion } from '@/fn-options/withVersion.js';\n\nfunction create() {\n  const createListeners = <E extends EventName>(event: E) => {\n    return {\n      on: (listener: EventListener<E>) => {\n        on(event, listener);\n      },\n      off: (listener: EventListener<E>) => {\n        off(event, listener);\n      },\n    };\n  };\n  const viewportListeners = createListeners('viewport_changed');\n  const fullscreenListeners = createListeners('fullscreen_changed');\n  const safeAreaListeners = createListeners('safe_area_changed');\n  const contentSafeAreaListeners = createListeners('content_safe_area_changed');\n\n  return new Viewport({\n    ...pipe(\n      sharedFeatureOptions(),\n      withStateRestore<ViewportState>('viewport'),\n      withVersion,\n      withPostEvent,\n      withRequest,\n    ),\n    isFullscreen() {\n      return pipe(retrieveLaunchParamsFp(), E.map(lp => !!lp.tgWebAppFullscreen));\n    },\n    isViewportStable() {\n      return pipe(retrieveLaunchParamsFp(), E.map(lp => {\n        return ['macos', 'tdesktop', 'unigram', 'webk', 'weba', 'web'].includes(lp.tgWebAppPlatform);\n      }));\n    },\n    offContentSafeAreaInsetsChanged: contentSafeAreaListeners.off,\n    offFullscreenChanged: fullscreenListeners.off,\n    offSafeAreaInsetsChanged: safeAreaListeners.off,\n    offViewportChanged: viewportListeners.off,\n    onContentSafeAreaInsetsChanged: contentSafeAreaListeners.on,\n    onFullscreenChanged: fullscreenListeners.on,\n    onSafeAreaInsetsChanged: safeAreaListeners.on,\n    onViewportChanged: viewportListeners.on,\n  });\n}\n\nexport const viewport = create();\n","import {\n  on,\n  logger,\n  retrieveLaunchParamsFp,\n  type RetrieveLaunchParamsError,\n  type PostEventError,\n  type PostEventFpFn,\n} from '@tma.js/bridge';\nimport { createCbCollector, throwifyFpFn } from '@tma.js/toolkit';\nimport type { Version, ThemeParams } from '@tma.js/types';\nimport * as E from 'fp-ts/Either';\nimport { pipe } from 'fp-ts/function';\n\nimport { isInlineMode } from '@/globals/isInlineMode.js';\nimport { postEventFpSignal, postEventFp, postEvent } from '@/globals/postEvent.js';\nimport { themeParams } from '@/globals/themeParams.js';\nimport { version } from '@/globals/version.js';\n\nexport interface InitOptions {\n  /**\n   * True if SDK should accept styles sent from the Telegram application.\n   * @default true\n   */\n  acceptCustomStyles?: boolean;\n  /**\n   * True if the application is launched in inline mode.\n   * @default Will be calculated based on the launch parameters' tgWebAppBotInline field.\n   */\n  isInlineMode?: boolean;\n  /**\n   * A custom `postEvent` function to use across the package.\n   * @default tma.js/bridge's postEventFp function will be used.\n   */\n  postEvent?: PostEventFpFn;\n  /**\n   * Mini application theme parameters.\n   * @default Will be calculated based on the launch parameters' tgWebAppThemeParams field.\n   */\n  themeParams?: ThemeParams;\n  /**\n   * Telegram Mini Apps version supported by the Telegram client.\n   * @default Will be calculated based on the launch parameters' tgWebAppVersion field.\n   */\n  version?: Version;\n}\n\n/**\n * Initializes the SDK allowing it to properly handle events, sent from the native Telegram\n * application. This function also configure the package's global dependencies (functions,\n * variables used across the package).\n * @param options - function options.\n * @returns A function, to perform a cleanup.\n */\nexport function initFp(\n  options: InitOptions = {},\n): E.Either<RetrieveLaunchParamsError | PostEventError, VoidFunction> {\n  const {\n    version: optionsVersion,\n    isInlineMode: optionsInlineMode,\n    themeParams: optionsThemeParams,\n  } = options;\n\n  if (optionsVersion && typeof optionsInlineMode === 'boolean' && optionsThemeParams) {\n    version.set(optionsVersion);\n    isInlineMode.set(optionsInlineMode);\n    themeParams.set(optionsThemeParams);\n  } else {\n    const error = pipe(retrieveLaunchParamsFp(), E.matchW(\n      err => err,\n      lp => {\n        version.set(optionsVersion || lp.tgWebAppVersion);\n        isInlineMode.set(typeof optionsInlineMode === 'boolean'\n          ? optionsInlineMode\n          : !!lp.tgWebAppBotInline);\n        themeParams.set(optionsThemeParams || lp.tgWebAppThemeParams);\n      },\n    ));\n    if (error) {\n      return E.left(error);\n    }\n  }\n  if (options.postEvent) {\n    postEventFpSignal.set(options.postEvent);\n  }\n\n  const [addCleanup, cleanup] = createCbCollector(\n    on('reload_iframe', () => {\n      logger().log('Received a request to reload the page');\n      postEvent('iframe_will_reload');\n      window.location.reload();\n    }),\n  );\n\n  const { acceptCustomStyles = true } = options;\n  if (acceptCustomStyles) {\n    const style = document.createElement('style');\n    style.id = 'telegram-custom-styles';\n    document.head.appendChild(style);\n\n    addCleanup(\n      on('set_custom_style', html => {\n        // It is safe to use innerHTML here as long as style tag has a special behavior related\n        // to the specified content.\n        // In case any script will be passed here, it will not be executed, so XSS is not possible.\n        style.innerHTML = html;\n      }),\n      () => {\n        document.head.removeChild(style);\n      },\n    );\n  }\n\n  // Notify Telegram that the application is ready.\n  //\n  // This will result in sending style tag html content from the Telegram web application.\n  // We should call this method also to start receiving \"reload_iframe\" events from the Telegram\n  // application.\n  //\n  // It really has no effect outside non-Telegram web environment.\n  return pipe(\n    postEventFp('iframe_ready', { reload_supported: true }),\n    E.map(() => {\n      logger().log('The package was initialized');\n      return cleanup;\n    }),\n  );\n}\n\n/**\n * @see initFp\n */\nexport const init = throwifyFpFn(initFp);\n"],"names":["r","y","c","m","S","g","u","s","i","t","l","o","d","n","h","p","j","b","x","__spreadArray","to","from","pack","ar","flow","ab","bc","cd","de","ef","fg","gh","hi","ij","pipe","a","ret","dual","arity","body","isDataFirst","args","self","none","some","isLeft","ma","left","right","emptyRecord","ap","F","G","fa","fab","gab","ga","map","f","bind","M","name","_a","_.left","_.right","flatMap","_map","_ap","URI","Functor","of","apW","Apply","Chain","bimap","_.isLeft","matchW","onLeft","onRight","match","tryCatch","onThrow","e","Do","_.emptyRecord","chainable.bind","bindW","access","value","Mountable","onMounted","restoreState","initialState","onUnmounted","isPageReload","__publicField","signal","computed","E.right","restored","state","E.map","batch","removeUndefined","result","k","v","shallowEqual","aKeys","bKeys","aKey","Stateful","onChange","nextState","key","store","getGlobalConfig","config2","store2","getGlobalMessage","lang","store3","getSchemaMessage","store4","getSpecificMessage","reference","_stringify","input","type","_b","_addIssue","context","label","dataset","other","expected","received","issue","isSchema","message2","_getStandardProps","value2","_isValidObjectKey","object2","_joinExpects","values2","separator","list","ValiError","issues","check","requirement","integer","transform","operation","getFallback","schema","getDefault","is","any","array","item","itemDataset","pathItem","boolean","date","function_","instance","class_","looseObject","entries2","valueSchema","valueDataset","nullish","wrapped","default_","number","optional","record","entryKey","entryValue","keyDataset","string","_subIssues","datasets","union","options","option","validDataset","typedDatasets","untypedDatasets","optionDataset","unknown","parse","pipe2","safeParse","$","q","w","D","E","I","L","H","C","O","T","P","A","R","K","z","J","cr","sr","fr","lr","hr","_","U","W","B","N","V","Z","Q","X","Y","rr","nr","tr","er","gr","ur","tt","ct","ft","rt","et","nt","ht","at","it","lt","mt","ut","gt","Oe","pe","te","_e","je","ze","Ge","Ve","Be","De","Ne","fe","Je","Qe","He","le","Ke","Ye","Xe","Ze","ot","st","me","_t","pt","we","he","ge","wt","ve","be","ye","Ee","Pe","dt","vt","We","bt","xe","yt","Et","se","Jt","Pt","Qt","Le","re","Ht","xt","kt","ke","ce","Kt","At","Se","Yt","qe","Ae","St","Me","Re","ie","ue","Tt","$t","Mt","Ct","ne","oe","Lt","ae","Fe","Ue","Ie","qt","Ft","ee","Ce","Wt","Rt","Te","$e","Ut","It","ir","Ot","createIsSupportedSignal","method","version","supports","_.none","_.some","isNone","onNone","onSome","throwifyWithChecksFp","fn","throwifyFpFn","O.match","data","throwifyAnyEither","E.left","map_","E.Functor","ap_","E.Apply","E.isLeft","mapBoth","E.bimap","E.match","_apPar","Pointed","ApplyPar","Monad","__awaiter","thisArg","_arguments","generator","adopt","resolve","reject","fulfilled","step","rejected","__generator","verb","op","ET.left","T.Pointed","ET.right","fromEither","T.of","ET.match","T.Functor","onRejected","reason_1","ET.map","ET.mapBoth","ET.ap","T.ApplyPar","ET.flatMap","T.Monad","chain","chainW","msgToTuple","message","ValidationError","errorClassWithData","CSSVarsBoundError","errorClass","DeviceStorageMethodError","error","SecureStorageMethodError","NotAvailableError","InvalidEnvError","FunctionUnavailableError","InvalidArgumentsError","cause","ConcurrentCallError","SetEmojiStatusError","AccessDeniedError","FullscreenFailedError","ShareMessageError","UnknownThemeParamsKeyError","withChecksFp","isTma","optionsIsSupported","returns","isSupportedSimplified","isOptionSupported","optionName","optionSettings","calculateSupportError","mode","requirements","calculateOptionSupportError","isSupported","isInitialized","isMounted","isAvailable","wrapError","err","TE.left","call","E.tryCatch","TE.tryCatch","errMessagePrefix","supportErr","supportsOptionErr","O.some","O.none","createWithChecksFp","Button","storage","onClick","offClick","postEvent","payload","stateful","mountable","wrapOptions","wrapSupportedPlain","wrapMountedEither","nothing","setFp","setFalse","setTrue","BackButton","button","sharedFeatureOptions","isTMAFp","createFnOption","mix","obj","createSignal","initialValue","postEventFpSignal","_postEventFp","postEventFp","withPostEvent","createComponentSessionStorage","getStorageValue","setStorageValue","getFirstNavigationEntry","entry","withStateRestore","storageName","withVersion","buttonOptions","trackedClickEvent","listener","once","on","off","backButton","AsyncMountable","TE.right","TE.map","notAvailableError","eventToState","event","available","tokenSaved","deviceId","accessRequested","accessGranted","Biometry","request","onInfoReceived","offInfoReceived","wrapSupportedEither","wrapSupportedTask","wrapMountedTask","response","TE.chain","requestFp","events","_requestFp","request2Fp","_request2Fp","BetterPromise","withRequest","biometry","ClosingBehavior","setClosingConfirmation","isConfirmationEnabled","closingBehavior","CloudStorage","invokeCustomMethod","keyOrKeys","keys","values","acc","lastRequestId","createRequestId","params","invokeCustomMethodFp","withInvokeCustomMethod","cloudStorage","DeviceStorage","invokeMethod","requestId","withCreateRequestId","deviceStorage","create","rest","requestEmojiStatusAccessFp","requestEmojiStatusAccess","customEmojiId","TE.chainW","setEmojiStatusFp","setEmojiStatus","HapticFeedback","HAPTIC_METHOD_NAME","wrapSupported","style","hapticFeedback","addToHomeScreenFp","addToHomeScreen","checkHomeScreenStatusFp","checkHomeScreenStatus","InitData","retrieveInitData","authDateValue","canSendAfterValue","raw","initData","E.Do","E.bindW","retrieveLaunchParamsFp","tgWebAppData","retrieveRawInitDataFp","O.Do","O.bind","Invoice","isOpened","toggleClosed","slug","TE.mapBoth","url","hostname","pathname","invoice","openLinkFp","openLink","urlString","openTelegramLinkFp","openTelegramLink","text","shareURLFp","shareURL","LocationManager","locationManager","MainButton","defaults","withDefault","field","fromState","setCssVar","deleteCssVar","isColorDarkFp","color","toRGBFullFp","rgb","modifier","idx","dec","isColorDark","ThemeParams","offChange","getCSSVarName","prop","snakeToKebab","forEachEntry","actualize","themeParams","globalThemeParams","bottomButtonOptions","mainButton","MiniApp","theme","onVisibilityChanged","offVisibilityChanged","visibilityChangedListener","themeChangedListener","isRGB","rgbBasedOn","computedRgbBasedOn","isCssVarsBound","addCleanup","cleanup","createCbCollector","cssVar","update","camelToKebab","genColorToolset","stateKey","rawColor","rgbColor","fp","withBasicEither","returnBack","miniApp","prepareParams","title","paramsButtons","buttons","id","Popup","TE.fromEither","preparedOptions","popup","requestPhoneAccessFp","requestPhoneAccess","createComplete","getContact","toStringResult","toParsedResult","pipeQueryToSchema","pipeJsonToSchema","valiPipe","getContactWithErrorsIgnore","TE.match","contact","pollContact","ctx","BetterTaskEither","res","rej","sleepTime","status","createParsed","requestContact","requestContactCompleteFp","requestContactComplete","requestContactFp","requestWriteAccessFp","requestWriteAccess","QrScanner","onClosed","onTextReceived","setClosed","captured","qr","addToCleanup","onSettled","isOpenedValue","qrScanner","SecondaryButton","secondaryButton","SecureStorage","secureStorage","SettingsButton","settingsButton","SwipeBehavior","setVerticalEnabled","isVerticalEnabled","swipeBehavior","copyTextToClipboard","clipboard","textArea","fileName","downloadFileFp","downloadFile","parsed","getCurrentTimeFp","getCurrentTime","hideKeyboardFp","hideKeyboard","reqId","captureSameReq","readTextFromClipboardFp","readTextFromClipboard","retrieveAndroidDeviceDataFrom","userAgent","appVersion","systemInfo","retrieveAndroidDeviceData","size","sendDataFp","sendData","messageId","shareMessageFp","shareMessage","mediaUrl","shareStoryFp","shareStory","isInlineMode","query","chatTypes","switchInlineQueryFp","switchInlineQuery","Viewport","onContentSafeAreaInsetsChanged","onSafeAreaInsetsChanged","onViewportChanged","onFullscreenChanged","offContentSafeAreaInsetsChanged","offFullscreenChanged","offSafeAreaInsetsChanged","offViewportChanged","isViewportStable","isFullscreen","initialInsets","viewportChangedListener","fullscreenChangedListener","safeAreaInsetsChangedListener","contentSafeAreaInsetsChangedListener","genRequestInsets","kind","genFlag","flag","TE.Do","TE.bindW","shared","viewport","saBased","csaBased","wrapTask","wrapFullscreenTask","genFullscreenFn","enable","settings","setting","createListeners","viewportListeners","fullscreenListeners","safeAreaListeners","contentSafeAreaListeners","lp","initFp","optionsVersion","optionsInlineMode","optionsThemeParams","E.matchW","logger","acceptCustomStyles","html","init"],"mappings":"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","x_google_ignoreList":[1,2,3,4,5,6,12,13,15,17,20,22,23,24]}