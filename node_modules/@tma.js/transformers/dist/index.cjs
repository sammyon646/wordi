"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const c=require("@tma.js/toolkit"),t=require("valibot");function N(r,n,e,i,a,o,s,_,J){switch(arguments.length){case 1:return r;case 2:return n(r);case 3:return e(n(r));case 4:return i(e(n(r)));case 5:return a(i(e(n(r))));case 6:return o(a(i(e(n(r)))));case 7:return s(o(a(i(e(n(r))))));case 8:return _(s(o(a(i(e(n(r)))))));case 9:return J(_(s(o(a(i(e(n(r))))))));default:{for(var f=arguments[0],g=1;g<arguments.length;g++)f=arguments[g](f);return f}}}var j=function(r){return r._tag==="Left"},U=function(r){return{_tag:"Left",left:r}},z=function(r){return{_tag:"Right",right:r}},B=U,u=z,q=function(r){return function(n){return v(n)?n:u(r(n.right))}},v=j,P=function(r,n){try{return u(r())}catch(e){return B(n(e))}};function E(r){const n=e=>{const i={};return new URLSearchParams(e).forEach((a,o)=>{const s=i[o];Array.isArray(s)?s.push(a):s===void 0?i[o]=a:i[o]=[s,a]}),t.parse(r,i)};return t.pipe(t.union([t.string(),t.instance(URLSearchParams)]),t.check(e=>{try{return n(e),!0}catch{return!1}},"The value doesn't match required schema"),t.transform(n))}function M(r){return t.pipe(t.string(),t.check(n=>{try{return JSON.parse(n),!0}catch{return!1}},"Input is not a valid JSON value"),t.transform(JSON.parse),r)}function p(r){return t.pipe(t.string(),M(r))}function y(r){return t.pipe(t.union([t.string(),t.instance(URLSearchParams)]),E(r))}function l(r){return n=>r.test(n)}const Q=l(/^#[\da-f]{3}$/i),b=l(/^#[\da-f]{4}$/i),F=l(/^#[\da-f]{6}$/i),L=l(/^#[\da-f]{8}$/i);function D(r){return[F,L,Q,b].some(n=>n(r))}function R(r){let n="#";for(let e=0;e<r.length-1;e+=1)n+=r[1+e].repeat(2);return n}function d(r){const n=r.replace(/\s/g,"").toLowerCase();if(/^#[\da-f]{3}$/i.test(n))return u(R(n.toLowerCase()+"f"));if(/^#[\da-f]{4}$/i.test(n))return u(R(n.toLowerCase()));if(/^#[\da-f]{6}$/i.test(n))return u(n.toLowerCase()+"ff");if(/^#[\da-f]{8}$/i.test(n))return u(n.toLowerCase());const e=n.match(/^rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)$/)||n.match(/^rgba\((\d{1,3}),(\d{1,3}),(\d{1,3}),(\d{1,3})\)$/);return e?u(e.slice(1).reduce((i,a)=>i+parseInt(a,10).toString(16).padStart(2,"0"),"#").padEnd(9,"f")):B(new Error(`Value "${r}" does not satisfy any of known RGB formats.`))}function w(r){return N(d(r),q(n=>n.slice(0,7)))}const V=c.throwifyFpFn(w),k=c.throwifyFpFn(d);function G(){return t.looseObject({id:t.number(),photo_url:t.optional(t.string()),type:t.string(),title:t.string(),username:t.optional(t.string())})}function h(){return t.looseObject({added_to_attachment_menu:t.optional(t.boolean()),allows_write_to_pm:t.optional(t.boolean()),first_name:t.string(),id:t.number(),is_bot:t.optional(t.boolean()),is_premium:t.optional(t.boolean()),last_name:t.optional(t.string()),language_code:t.optional(t.string()),photo_url:t.optional(t.string()),username:t.optional(t.string())})}function $(){return t.looseObject({auth_date:t.pipe(t.string(),t.transform(r=>new Date(Number(r)*1e3)),t.date()),can_send_after:t.optional(t.pipe(t.string(),t.transform(Number),t.integer())),chat:t.optional(p(G())),chat_type:t.optional(t.string()),chat_instance:t.optional(t.string()),hash:t.string(),query_id:t.optional(t.string()),receiver:t.optional(p(h())),start_param:t.optional(t.string()),signature:t.string(),user:t.optional(p(h()))})}function S(){return y($())}function m(){return t.record(t.string(),t.pipe(t.union([t.string(),t.number()]),t.transform(r=>typeof r=="number"?`#${(r&16777215).toString(16).padStart(6,"0")}`:r),t.check(D)))}function O(){const r=t.optional(t.pipe(t.string(),t.transform(n=>n==="1")));return t.looseObject({tgWebAppBotInline:r,tgWebAppData:t.optional(S()),tgWebAppDefaultColors:t.optional(p(m())),tgWebAppFullscreen:r,tgWebAppPlatform:t.string(),tgWebAppShowSettings:r,tgWebAppStartParam:t.optional(t.string()),tgWebAppThemeParams:p(m()),tgWebAppVersion:t.string()})}function A(){return y(O())}function x(r){try{return t.is(A(),r)}catch{return!1}}function H(){return t.looseObject({eventType:t.string(),eventData:t.optional(t.unknown())})}function T(r){return P(()=>t.parse(S(),r),n=>n)}function W(r){return P(()=>t.parse(A(),r),n=>n)}const K=c.throwifyFpFn(T),X=c.throwifyFpFn(W);function C(r,n){return n||(n=(e,i)=>JSON.stringify(i)),new URLSearchParams(Object.entries(r).reduce((e,[i,a])=>(Array.isArray(a)?e.push(...a.map(o=>[i,String(o)])):a!=null&&e.push([i,a instanceof Date?(a.getTime()/1e3|0).toString():typeof a=="string"||typeof a=="number"?String(a):typeof a=="boolean"?a?"1":"0":n(i,a)]),e),[])).toString()}function I(r){return C(r)}function Y(r){return C(r,(n,e)=>n==="tgWebAppData"?I(e):JSON.stringify(e))}exports.initData=$;exports.initDataChat=G;exports.initDataQuery=S;exports.initDataUser=h;exports.isAnyRGB=D;exports.isLaunchParamsQuery=x;exports.isRGB=F;exports.isRGBA=L;exports.isRGBAShort=b;exports.isRGBShort=Q;exports.launchParams=O;exports.launchParamsQuery=A;exports.miniAppsMessage=H;exports.parseInitDataQuery=K;exports.parseInitDataQueryFp=T;exports.parseLaunchParamsQuery=X;exports.parseLaunchParamsQueryFp=W;exports.pipeJsonToSchema=p;exports.pipeQueryToSchema=y;exports.serializeInitDataQuery=I;exports.serializeLaunchParamsQuery=Y;exports.themeParams=m;exports.toRGB=V;exports.toRGBFp=w;exports.toRGBFull=k;exports.toRGBFullFp=d;
//# sourceMappingURL=index.cjs.map
